/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var z3=Object.create;var gu=Object.defineProperty,Q3=Object.defineProperties,X3=Object.getOwnPropertyDescriptor,J3=Object.getOwnPropertyDescriptors,Z3=Object.getOwnPropertyNames,i_=Object.getOwnPropertySymbols,$3=Object.getPrototypeOf,a_=Object.prototype.hasOwnProperty,eL=Object.prototype.propertyIsEnumerable;var s_=(t,e,r)=>e in t?gu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pn=(t,e)=>{for(var r in e||(e={}))a_.call(e,r)&&s_(t,r,e[r]);if(i_)for(var r of i_(e))eL.call(e,r)&&s_(t,r,e[r]);return t},Gi=(t,e)=>Q3(t,J3(e)),o_=t=>gu(t,"__esModule",{value:!0});var $9=typeof require!="undefined"?require:t=>{throw new Error('Dynamic require of "'+t+'" is not supported')};var de=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),tL=(t,e)=>{o_(t);for(var r in e)gu(t,r,{get:e[r],enumerable:!0})},rL=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Z3(e))!a_.call(t,n)&&n!=="default"&&gu(t,n,{get:()=>e[n],enumerable:!(r=X3(e,n))||r.enumerable});return t},yt=t=>rL(o_(gu(t!=null?z3($3(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var P=(t,e,r)=>new Promise((n,i)=>{var a=u=>{try{l(r.next(u))}catch(f){i(f)}},s=u=>{try{l(r.throw(u))}catch(f){i(f)}},l=u=>u.done?n(u.value):Promise.resolve(u.value).then(a,s);l((r=r.apply(t,e)).next())});var g0=de((sV,y_)=>{"use strict";var Rf=Object.prototype.hasOwnProperty,c_=Object.prototype.toString,f_=Object.defineProperty,d_=Object.getOwnPropertyDescriptor,h_=function(e){return typeof Array.isArray=="function"?Array.isArray(e):c_.call(e)==="[object Array]"},p_=function(e){if(!e||c_.call(e)!=="[object Object]")return!1;var r=Rf.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&Rf.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var i;for(i in e);return typeof i=="undefined"||Rf.call(e,i)},g_=function(e,r){f_&&r.name==="__proto__"?f_(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},m_=function(e,r){if(r==="__proto__")if(Rf.call(e,r)){if(d_)return d_(e,r).value}else return;return e[r]};y_.exports=function t(){var e,r,n,i,a,s,l=arguments[0],u=1,f=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},u=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});u<f;++u)if(e=arguments[u],e!=null)for(r in e)n=m_(l,r),i=m_(e,r),l!==i&&(d&&i&&(p_(i)||(a=h_(i)))?(a?(a=!1,s=n&&h_(n)?n:[]):s=n&&p_(n)?n:{},g_(l,{name:r,newValue:t(d,s,i)})):typeof i!="undefined"&&g_(l,{name:r,newValue:i}));return l}});var m0=de((Vo,v_)=>{"use strict";var nL=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof xa!="undefined")return xa;throw new Error("unable to locate global object")},xa=nL();v_.exports=Vo=xa.fetch;xa.fetch&&(Vo.default=xa.fetch.bind(xa));Vo.Headers=xa.Headers;Vo.Request=xa.Request;Vo.Response=xa.Response});var y0=de((oV,__)=>{"use strict";var Vi=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Vi.writable=t=>Vi(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Vi.readable=t=>Vi(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Vi.duplex=t=>Vi.writable(t)&&Vi.readable(t);Vi.transform=t=>Vi.duplex(t)&&typeof t._transform=="function";__.exports=Vi});var v0=de(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.GaxiosError=void 0;var w_=class extends Error{constructor(e,r,n){super(e);this.response=n,this.config=r,this.code=n.status.toString()}};Df.GaxiosError=w_});var C_=de(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.getRetryConfig=void 0;function iL(t){return P(this,null,function*(){var e;let r=E_(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,t.config.retryConfig=r,!(yield(r.shouldRetry||aL)(t)))return{shouldRetry:!1,config:t.config};let s=(r.currentRetryAttempt?0:(e=r.retryDelay)!==null&&e!==void 0?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;let l=new Promise(u=>{setTimeout(u,s)});return r.onRetryAttempt&&r.onRetryAttempt(t),yield l,{shouldRetry:!0,config:t.config}})}Bf.getRetryConfig=iL;function aL(t){let e=E_(t);if(t.name==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let a=t.response.status;if(a>=n&&a<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function E_(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}});var x_=de((cV,b_)=>{var Ho=1e3,Ko=Ho*60,jo=Ko*60,Fs=jo*24,sL=Fs*7,oL=Fs*365.25;b_.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return lL(t);if(r==="number"&&isFinite(t))return e.long?cL(t):uL(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function lL(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*oL;case"weeks":case"week":case"w":return r*sL;case"days":case"day":case"d":return r*Fs;case"hours":case"hour":case"hrs":case"hr":case"h":return r*jo;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ko;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ho;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function uL(t){var e=Math.abs(t);return e>=Fs?Math.round(t/Fs)+"d":e>=jo?Math.round(t/jo)+"h":e>=Ko?Math.round(t/Ko)+"m":e>=Ho?Math.round(t/Ho)+"s":t+"ms"}function cL(t){var e=Math.abs(t);return e>=Fs?Of(t,e,Fs,"day"):e>=jo?Of(t,e,jo,"hour"):e>=Ko?Of(t,e,Ko,"minute"):e>=Ho?Of(t,e,Ho,"second"):t+" ms"}function Of(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var S_=de((fV,T_)=>{function fL(t){r.debug=r,r.default=r,r.coerce=u,r.disable=a,r.enable=i,r.enabled=s,r.humanize=x_(),r.destroy=f,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let h=0;for(let g=0;g<d.length;g++)h=(h<<5)-h+d.charCodeAt(g),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(d){let h,g=null,m,y;function _(...w){if(!_.enabled)return;let E=_,S=Number(new Date),T=S-(h||S);E.diff=T,E.prev=h,E.curr=S,h=S,w[0]=r.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let L=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(B,z)=>{if(B==="%%")return"%";L++;let F=r.formatters[z];if(typeof F=="function"){let G=w[L];B=F.call(E,G),w.splice(L,1),L--}return B}),r.formatArgs.call(E,w),(E.log||r.log).apply(E,w)}return _.namespace=d,_.useColors=r.useColors(),_.color=r.selectColor(d),_.extend=n,_.destroy=r.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(m!==r.namespaces&&(m=r.namespaces,y=r.enabled(d)),y),set:w=>{g=w}}),typeof r.init=="function"&&r.init(_),_}function n(d,h){let g=r(this.namespace+(typeof h=="undefined"?":":h)+d);return g.log=this.log,g}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let h,g=(typeof d=="string"?d:"").split(/[\s,]+/),m=g.length;for(h=0;h<m;h++)!g[h]||(d=g[h].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function a(){let d=[...r.names.map(l),...r.skips.map(l).map(h=>"-"+h)].join(",");return r.enable(""),d}function s(d){if(d[d.length-1]==="*")return!0;let h,g;for(h=0,g=r.skips.length;h<g;h++)if(r.skips[h].test(d))return!1;for(h=0,g=r.names.length;h<g;h++)if(r.names[h].test(d))return!0;return!1}function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function u(d){return d instanceof Error?d.stack||d.message:d}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}T_.exports=fL});var Pf=de((qn,Lf)=>{qn.formatArgs=hL;qn.save=pL;qn.load=gL;qn.useColors=dL;qn.storage=mL();qn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();qn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function dL(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function hL(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Lf.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}qn.log=console.debug||console.log||(()=>{});function pL(t){try{t?qn.storage.setItem("debug",t):qn.storage.removeItem("debug")}catch(e){}}function gL(){let t;try{t=qn.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function mL(){try{return localStorage}catch(t){}}Lf.exports=S_()(qn);var{formatters:yL}=Lf.exports;yL.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var A_=de(_0=>{"use strict";Object.defineProperty(_0,"__esModule",{value:!0});function vL(t){return function(e,r){return new Promise((n,i)=>{t.call(this,e,r,(a,s)=>{a?i(a):n(s)})})}}_0.default=vL});var N_=de((E0,I_)=>{"use strict";var k_=E0&&E0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},_L=require("events"),wL=k_(Pf()),EL=k_(A_()),yu=wL.default("agent-base");function CL(t){return Boolean(t)&&typeof t.addRequest=="function"}function w0(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function Mf(t,e){return new Mf.Agent(t,e)}(function(t){class e extends _L.EventEmitter{constructor(n,i){super();let a=i;typeof n=="function"?this.callback=n:n&&(a=n),this.timeout=null,a&&typeof a.timeout=="number"&&(this.timeout=a.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:w0()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:w0()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,a){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let a=Object.assign({},i);typeof a.secureEndpoint!="boolean"&&(a.secureEndpoint=w0()),a.host==null&&(a.host="localhost"),a.port==null&&(a.port=a.secureEndpoint?443:80),a.protocol==null&&(a.protocol=a.secureEndpoint?"https:":"http:"),a.host&&a.path&&delete a.path,delete a.agent,delete a.hostname,delete a._defaultAgent,delete a.defaultPort,delete a.createConnection,n._last=!0,n.shouldKeepAlive=!1;let s=!1,l=null,u=a.timeout||this.timeout,f=m=>{n._hadError||(n.emit("error",m),n._hadError=!0)},d=()=>{l=null,s=!0;let m=new Error(`A "socket" was not created for HTTP request before ${u}ms`);m.code="ETIMEOUT",f(m)},h=m=>{s||(l!==null&&(clearTimeout(l),l=null),f(m))},g=m=>{if(s)return;if(l!=null&&(clearTimeout(l),l=null),CL(m)){yu("Callback returned another Agent instance %o",m.constructor.name),m.addRequest(n,a);return}if(m){m.once("free",()=>{this.freeSocket(m,a)}),n.onSocket(m);return}let y=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);f(y)};if(typeof this.callback!="function"){f(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(yu("Converting legacy callback function to promise"),this.promisifiedCallback=EL.default(this.callback)):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(l=setTimeout(d,u)),"port"in a&&typeof a.port!="number"&&(a.port=Number(a.port));try{yu("Resolving socket for %o request: %o",a.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,a)).then(g,h)}catch(m){Promise.reject(m).catch(h)}}freeSocket(n,i){yu("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){yu("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(Mf||(Mf={}));I_.exports=Mf});var R_=de(_u=>{"use strict";var bL=_u&&_u.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_u,"__esModule",{value:!0});var xL=bL(Pf()),vu=xL.default("https-proxy-agent:parse-proxy-response");function TL(t){return new Promise((e,r)=>{let n=0,i=[];function a(){let h=t.read();h?d(h):t.once("readable",a)}function s(){t.removeListener("end",u),t.removeListener("error",f),t.removeListener("close",l),t.removeListener("readable",a)}function l(h){vu("onclose had error %o",h)}function u(){vu("onend")}function f(h){s(),vu("onerror %o",h),r(h)}function d(h){i.push(h),n+=h.length;let g=Buffer.concat(i,n);if(g.indexOf(`\r
\r
`)===-1){vu("have not received end of HTTP headers yet..."),a();return}let y=g.toString("ascii",0,g.indexOf(`\r
`)),_=+y.split(" ")[1];vu("got proxy server response: %o",y),e({statusCode:_,buffered:g})}t.on("error",f),t.on("close",l),t.on("end",u),a()})}_u.default=TL});var L_=de(qs=>{"use strict";var SL=qs&&qs.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function l(d){try{f(n.next(d))}catch(h){s(h)}}function u(d){try{f(n.throw(d))}catch(h){s(h)}}function f(d){d.done?a(d.value):i(d.value).then(l,u)}f((n=n.apply(t,e||[])).next())})},Yo=qs&&qs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qs,"__esModule",{value:!0});var D_=Yo(require("net")),B_=Yo(require("tls")),AL=Yo(require("url")),kL=Yo(require("assert")),IL=Yo(Pf()),NL=N_(),RL=Yo(R_()),wu=IL.default("https-proxy-agent:agent"),O_=class extends NL.Agent{constructor(e){let r;if(typeof e=="string"?r=AL.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");wu("creating new HttpsProxyAgent instance: %o",r);super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||OL(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return SL(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,a;i?(wu("Creating `tls.Socket`: %o",n),a=B_.default.connect(n)):(wu("Creating `net.Socket`: %o",n),a=D_.default.connect(n));let s=Object.assign({},n.headers),u=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:f,port:d,secureEndpoint:h}=r;BL(d,h)||(f+=`:${d}`),s.Host=f,s.Connection="close";for(let w of Object.keys(s))u+=`${w}: ${s[w]}\r
`;let g=RL.default(a);a.write(`${u}\r
`);let{statusCode:m,buffered:y}=yield g;if(m===200){if(e.once("socket",DL),r.secureEndpoint){wu("Upgrading socket connection to TLS");let w=r.servername||r.host;return B_.default.connect(Object.assign(Object.assign({},LL(r,"host","hostname","path","port")),{socket:a,servername:w}))}return a}a.destroy();let _=new D_.default.Socket({writable:!1});return _.readable=!0,e.once("socket",w=>{wu("replaying proxy buffer for failed request"),kL.default(w.listenerCount("data")>0),w.push(y),w.push(null)}),_})}};qs.default=O_;function DL(t){t.resume()}function BL(t,e){return Boolean(!e&&t===80||e&&t===443)}function OL(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function LL(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var T0=de((x0,P_)=>{"use strict";var PL=x0&&x0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},C0=PL(L_());function b0(t){return new C0.default(t)}(function(t){t.HttpsProxyAgent=C0.default,t.prototype=C0.default.prototype})(b0||(b0={}));P_.exports=b0});var V_=de(Wo=>{"use strict";var Uf=Wo&&Wo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.Gaxios=void 0;var ML=Uf(g0()),UL=require("https"),FL=Uf(m0()),qL=Uf(require("querystring")),GL=Uf(y0()),M_=require("url"),VL=v0(),HL=C_(),KL=YL()?window.fetch:FL.default;function jL(){return typeof window!="undefined"&&!!window}function YL(){return jL()&&!!window.fetch}function WL(){return typeof Buffer!="undefined"}function U_(t,e){return!!F_(t,e)}function F_(t,e){e=e.toLowerCase();for(let r of Object.keys((t==null?void 0:t.headers)||{}))if(e===r.toLowerCase())return t.headers[r]}var S0;function q_(){var t,e,r,n;let i=((t=process==null?void 0:process.env)===null||t===void 0?void 0:t.HTTPS_PROXY)||((e=process==null?void 0:process.env)===null||e===void 0?void 0:e.https_proxy)||((r=process==null?void 0:process.env)===null||r===void 0?void 0:r.HTTP_PROXY)||((n=process==null?void 0:process.env)===null||n===void 0?void 0:n.http_proxy);return i&&(S0=T0()),i}q_();function zL(t){var e;let r=(e=process.env.NO_PROXY)!==null&&e!==void 0?e:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new M_.URL(t);return!!n.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function QL(t){if(!zL(t))return q_()}var G_=class{constructor(e){this.agentCache=new Map,this.defaults=e||{}}request(){return P(this,arguments,function*(e={}){return e=this.validateOpts(e),this._request(e)})}_defaultAdapter(e){return P(this,null,function*(){let n=yield(e.fetchImplementation||KL)(e.url,e),i=yield this.getResponseData(e,n);return this.translateResponse(e,n,i)})}_request(){return P(this,arguments,function*(e={}){try{let r;if(e.adapter?r=yield e.adapter(e,this._defaultAdapter.bind(this)):r=yield this._defaultAdapter(e),!e.validateStatus(r.status))throw new VL.GaxiosError(`Request failed with status code ${r.status}`,e,r);return r}catch(r){let n=r;n.config=e;let{shouldRetry:i,config:a}=yield(0,HL.getRetryConfig)(n);if(i&&a)return n.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(n.config);throw n}})}getResponseData(e,r){return P(this,null,function*(){switch(e.responseType){case"stream":return r.body;case"json":{let n=yield r.text();try{n=JSON.parse(n)}catch(i){}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}})}validateOpts(e){let r=(0,ML.default)(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let a=r.paramsSerializer(r.params);a.startsWith("?")&&(a=a.slice(1));let s=r.url.includes("?")?"&":"?";r.url=r.url+s+a}if(typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){let a=typeof FormData=="undefined"?!1:(r==null?void 0:r.data)instanceof FormData;GL.default.readable(r.data)?r.body=r.data:WL()&&Buffer.isBuffer(r.data)?(r.body=r.data,U_(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?a||(F_(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(U_(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=QL(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let a=new M_.URL(i);r.agent=new S0({port:a.port,host:a.host,protocol:a.protocol,cert:r.cert,key:r.key})}else r.agent=new S0(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new UL.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(e){return e>=200&&e<300}paramsSerializer(e){return qL.default.stringify(e)}translateResponse(e,r,n){let i={};return r.headers.forEach((a,s)=>{i[s]=a}),{config:e,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};Wo.Gaxios=G_});var zo=de(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.request=wi.instance=wi.Gaxios=wi.GaxiosError=void 0;var H_=V_();Object.defineProperty(wi,"Gaxios",{enumerable:!0,get:function(){return H_.Gaxios}});var XL=v0();Object.defineProperty(wi,"GaxiosError",{enumerable:!0,get:function(){return XL.GaxiosError}});wi.instance=new H_.Gaxios;function JL(t){return P(this,null,function*(){return wi.instance.request(t)})}wi.request=JL});var A0=de((K_,Ff)=>{(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,a="[BigNumber Error] ",s=a+"Number primitive has more than 15 significant digits: ",l=1e14,u=14,f=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,g=1e9;function m(I){var B,z,F,G=le.prototype={constructor:le,toString:null,valueOf:null},te=new le(1),ae=20,we=4,Se=-7,Qe=21,Re=-1e7,me=1e7,re=!1,Fe=1,Ze=0,ct={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},Je="0123456789abcdefghijklmnopqrstuvwxyz",ft=!0;function le(N,D){var O,j,H,X,Z,Y,J,ne,$=this;if(!($ instanceof le))return new le(N,D);if(D==null){if(N&&N._isBigNumber===!0){$.s=N.s,!N.c||N.e>me?$.c=$.e=null:N.e<Re?$.c=[$.e=0]:($.e=N.e,$.c=N.c.slice());return}if((Y=typeof N=="number")&&N*0==0){if($.s=1/N<0?(N=-N,-1):1,N===~~N){for(X=0,Z=N;Z>=10;Z/=10,X++);X>me?$.c=$.e=null:($.e=X,$.c=[N]);return}ne=String(N)}else{if(!r.test(ne=String(N)))return F($,ne,Y);$.s=ne.charCodeAt(0)==45?(ne=ne.slice(1),-1):1}(X=ne.indexOf("."))>-1&&(ne=ne.replace(".","")),(Z=ne.search(/e/i))>0?(X<0&&(X=Z),X+=+ne.slice(Z+1),ne=ne.substring(0,Z)):X<0&&(X=ne.length)}else{if(E(D,2,Je.length,"Base"),D==10&&ft)return $=new le(N),nt($,ae+$.e+1,we);if(ne=String(N),Y=typeof N=="number"){if(N*0!=0)return F($,ne,Y,D);if($.s=1/N<0?(ne=ne.slice(1),-1):1,le.DEBUG&&ne.replace(/^0\.0*|\./,"").length>15)throw Error(s+N)}else $.s=ne.charCodeAt(0)===45?(ne=ne.slice(1),-1):1;for(O=Je.slice(0,D),X=Z=0,J=ne.length;Z<J;Z++)if(O.indexOf(j=ne.charAt(Z))<0){if(j=="."){if(Z>X){X=J;continue}}else if(!H&&(ne==ne.toUpperCase()&&(ne=ne.toLowerCase())||ne==ne.toLowerCase()&&(ne=ne.toUpperCase()))){H=!0,Z=-1,X=0;continue}return F($,String(N),Y,D)}Y=!1,ne=z(ne,D,10,$.s),(X=ne.indexOf("."))>-1?ne=ne.replace(".",""):X=ne.length}for(Z=0;ne.charCodeAt(Z)===48;Z++);for(J=ne.length;ne.charCodeAt(--J)===48;);if(ne=ne.slice(Z,++J)){if(J-=Z,Y&&le.DEBUG&&J>15&&(N>f||N!==i(N)))throw Error(s+$.s*N);if((X=X-Z-1)>me)$.c=$.e=null;else if(X<Re)$.c=[$.e=0];else{if($.e=X,$.c=[],Z=(X+1)%u,X<0&&(Z+=u),Z<J){for(Z&&$.c.push(+ne.slice(0,Z)),J-=u;Z<J;)$.c.push(+ne.slice(Z,Z+=u));Z=u-(ne=ne.slice(Z)).length}else Z-=J;for(;Z--;ne+="0");$.c.push(+ne)}}else $.c=[$.e=0]}le.clone=m,le.ROUND_UP=0,le.ROUND_DOWN=1,le.ROUND_CEIL=2,le.ROUND_FLOOR=3,le.ROUND_HALF_UP=4,le.ROUND_HALF_DOWN=5,le.ROUND_HALF_EVEN=6,le.ROUND_HALF_CEIL=7,le.ROUND_HALF_FLOOR=8,le.EUCLID=9,le.config=le.set=function(N){var D,O;if(N!=null)if(typeof N=="object"){if(N.hasOwnProperty(D="DECIMAL_PLACES")&&(O=N[D],E(O,0,g,D),ae=O),N.hasOwnProperty(D="ROUNDING_MODE")&&(O=N[D],E(O,0,8,D),we=O),N.hasOwnProperty(D="EXPONENTIAL_AT")&&(O=N[D],O&&O.pop?(E(O[0],-g,0,D),E(O[1],0,g,D),Se=O[0],Qe=O[1]):(E(O,-g,g,D),Se=-(Qe=O<0?-O:O))),N.hasOwnProperty(D="RANGE"))if(O=N[D],O&&O.pop)E(O[0],-g,-1,D),E(O[1],1,g,D),Re=O[0],me=O[1];else if(E(O,-g,g,D),O)Re=-(me=O<0?-O:O);else throw Error(a+D+" cannot be zero: "+O);if(N.hasOwnProperty(D="CRYPTO"))if(O=N[D],O===!!O)if(O)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))re=O;else throw re=!O,Error(a+"crypto unavailable");else re=O;else throw Error(a+D+" not true or false: "+O);if(N.hasOwnProperty(D="MODULO_MODE")&&(O=N[D],E(O,0,9,D),Fe=O),N.hasOwnProperty(D="POW_PRECISION")&&(O=N[D],E(O,0,g,D),Ze=O),N.hasOwnProperty(D="FORMAT"))if(O=N[D],typeof O=="object")ct=O;else throw Error(a+D+" not an object: "+O);if(N.hasOwnProperty(D="ALPHABET"))if(O=N[D],typeof O=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(O))ft=O.slice(0,10)=="0123456789",Je=O;else throw Error(a+D+" invalid: "+O)}else throw Error(a+"Object expected: "+N);return{DECIMAL_PLACES:ae,ROUNDING_MODE:we,EXPONENTIAL_AT:[Se,Qe],RANGE:[Re,me],CRYPTO:re,MODULO_MODE:Fe,POW_PRECISION:Ze,FORMAT:ct,ALPHABET:Je}},le.isBigNumber=function(N){if(!N||N._isBigNumber!==!0)return!1;if(!le.DEBUG)return!0;var D,O,j=N.c,H=N.e,X=N.s;e:if({}.toString.call(j)=="[object Array]"){if((X===1||X===-1)&&H>=-g&&H<=g&&H===i(H)){if(j[0]===0){if(H===0&&j.length===1)return!0;break e}if(D=(H+1)%u,D<1&&(D+=u),String(j[0]).length==D){for(D=0;D<j.length;D++)if(O=j[D],O<0||O>=l||O!==i(O))break e;if(O!==0)return!0}}}else if(j===null&&H===null&&(X===null||X===1||X===-1))return!0;throw Error(a+"Invalid BigNumber: "+N)},le.maximum=le.max=function(){return Dt(arguments,G.lt)},le.minimum=le.min=function(){return Dt(arguments,G.gt)},le.random=function(){var N=9007199254740992,D=Math.random()*N&2097151?function(){return i(Math.random()*N)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(O){var j,H,X,Z,Y,J=0,ne=[],$=new le(te);if(O==null?O=ae:E(O,0,g),Z=n(O/u),re)if(crypto.getRandomValues){for(j=crypto.getRandomValues(new Uint32Array(Z*=2));J<Z;)Y=j[J]*131072+(j[J+1]>>>11),Y>=9e15?(H=crypto.getRandomValues(new Uint32Array(2)),j[J]=H[0],j[J+1]=H[1]):(ne.push(Y%1e14),J+=2);J=Z/2}else if(crypto.randomBytes){for(j=crypto.randomBytes(Z*=7);J<Z;)Y=(j[J]&31)*281474976710656+j[J+1]*1099511627776+j[J+2]*4294967296+j[J+3]*16777216+(j[J+4]<<16)+(j[J+5]<<8)+j[J+6],Y>=9e15?crypto.randomBytes(7).copy(j,J):(ne.push(Y%1e14),J+=7);J=Z/7}else throw re=!1,Error(a+"crypto unavailable");if(!re)for(;J<Z;)Y=D(),Y<9e15&&(ne[J++]=Y%1e14);for(Z=ne[--J],O%=u,Z&&O&&(Y=d[u-O],ne[J]=i(Z/Y)*Y);ne[J]===0;ne.pop(),J--);if(J<0)ne=[X=0];else{for(X=-1;ne[0]===0;ne.splice(0,1),X-=u);for(J=1,Y=ne[0];Y>=10;Y/=10,J++);J<u&&(X-=u-J)}return $.e=X,$.c=ne,$}}(),le.sum=function(){for(var N=1,D=arguments,O=new le(D[0]);N<D.length;)O=O.plus(D[N++]);return O},z=function(){var N="0123456789";function D(O,j,H,X){for(var Z,Y=[0],J,ne=0,$=O.length;ne<$;){for(J=Y.length;J--;Y[J]*=j);for(Y[0]+=X.indexOf(O.charAt(ne++)),Z=0;Z<Y.length;Z++)Y[Z]>H-1&&(Y[Z+1]==null&&(Y[Z+1]=0),Y[Z+1]+=Y[Z]/H|0,Y[Z]%=H)}return Y.reverse()}return function(O,j,H,X,Z){var Y,J,ne,$,he,Oe,Ue,ht,Qt=O.indexOf("."),Xt=ae,it=we;for(Qt>=0&&($=Ze,Ze=0,O=O.replace(".",""),ht=new le(j),Oe=ht.pow(O.length-Qt),Ze=$,ht.c=D(L(_(Oe.c),Oe.e,"0"),10,H,N),ht.e=ht.c.length),Ue=D(O,j,H,Z?(Y=Je,N):(Y=N,Je)),ne=$=Ue.length;Ue[--$]==0;Ue.pop());if(!Ue[0])return Y.charAt(0);if(Qt<0?--ne:(Oe.c=Ue,Oe.e=ne,Oe.s=X,Oe=B(Oe,ht,Xt,it,H),Ue=Oe.c,he=Oe.r,ne=Oe.e),J=ne+Xt+1,Qt=Ue[J],$=H/2,he=he||J<0||Ue[J+1]!=null,he=it<4?(Qt!=null||he)&&(it==0||it==(Oe.s<0?3:2)):Qt>$||Qt==$&&(it==4||he||it==6&&Ue[J-1]&1||it==(Oe.s<0?8:7)),J<1||!Ue[0])O=he?L(Y.charAt(1),-Xt,Y.charAt(0)):Y.charAt(0);else{if(Ue.length=J,he)for(--H;++Ue[--J]>H;)Ue[J]=0,J||(++ne,Ue=[1].concat(Ue));for($=Ue.length;!Ue[--$];);for(Qt=0,O="";Qt<=$;O+=Y.charAt(Ue[Qt++]));O=L(O,ne,Y.charAt(0))}return O}}(),B=function(){function N(j,H,X){var Z,Y,J,ne,$=0,he=j.length,Oe=H%h,Ue=H/h|0;for(j=j.slice();he--;)J=j[he]%h,ne=j[he]/h|0,Z=Ue*J+ne*Oe,Y=Oe*J+Z%h*h+$,$=(Y/X|0)+(Z/h|0)+Ue*ne,j[he]=Y%X;return $&&(j=[$].concat(j)),j}function D(j,H,X,Z){var Y,J;if(X!=Z)J=X>Z?1:-1;else for(Y=J=0;Y<X;Y++)if(j[Y]!=H[Y]){J=j[Y]>H[Y]?1:-1;break}return J}function O(j,H,X,Z){for(var Y=0;X--;)j[X]-=Y,Y=j[X]<H[X]?1:0,j[X]=Y*Z+j[X]-H[X];for(;!j[0]&&j.length>1;j.splice(0,1));}return function(j,H,X,Z,Y){var J,ne,$,he,Oe,Ue,ht,Qt,Xt,it,Bt,pr,Va,As,ks,bn,ha,nn=j.s==H.s?1:-1,Rr=j.c,cr=H.c;if(!Rr||!Rr[0]||!cr||!cr[0])return new le(!j.s||!H.s||(Rr?cr&&Rr[0]==cr[0]:!cr)?NaN:Rr&&Rr[0]==0||!cr?nn*0:nn/0);for(Qt=new le(nn),Xt=Qt.c=[],ne=j.e-H.e,nn=X+ne+1,Y||(Y=l,ne=y(j.e/u)-y(H.e/u),nn=nn/u|0),$=0;cr[$]==(Rr[$]||0);$++);if(cr[$]>(Rr[$]||0)&&ne--,nn<0)Xt.push(1),he=!0;else{for(As=Rr.length,bn=cr.length,$=0,nn+=2,Oe=i(Y/(cr[0]+1)),Oe>1&&(cr=N(cr,Oe,Y),Rr=N(Rr,Oe,Y),bn=cr.length,As=Rr.length),Va=bn,it=Rr.slice(0,bn),Bt=it.length;Bt<bn;it[Bt++]=0);ha=cr.slice(),ha=[0].concat(ha),ks=cr[0],cr[1]>=Y/2&&ks++;do{if(Oe=0,J=D(cr,it,bn,Bt),J<0){if(pr=it[0],bn!=Bt&&(pr=pr*Y+(it[1]||0)),Oe=i(pr/ks),Oe>1)for(Oe>=Y&&(Oe=Y-1),Ue=N(cr,Oe,Y),ht=Ue.length,Bt=it.length;D(Ue,it,ht,Bt)==1;)Oe--,O(Ue,bn<ht?ha:cr,ht,Y),ht=Ue.length,J=1;else Oe==0&&(J=Oe=1),Ue=cr.slice(),ht=Ue.length;if(ht<Bt&&(Ue=[0].concat(Ue)),O(it,Ue,Bt,Y),Bt=it.length,J==-1)for(;D(cr,it,bn,Bt)<1;)Oe++,O(it,bn<Bt?ha:cr,Bt,Y),Bt=it.length}else J===0&&(Oe++,it=[0]);Xt[$++]=Oe,it[0]?it[Bt++]=Rr[Va]||0:(it=[Rr[Va]],Bt=1)}while((Va++<As||it[0]!=null)&&nn--);he=it[0]!=null,Xt[0]||Xt.splice(0,1)}if(Y==l){for($=1,nn=Xt[0];nn>=10;nn/=10,$++);nt(Qt,X+(Qt.e=$+ne*u-1)+1,Z,he)}else Qt.e=ne,Qt.r=+he;return Qt}}();function Rt(N,D,O,j){var H,X,Z,Y,J;if(O==null?O=we:E(O,0,8),!N.c)return N.toString();if(H=N.c[0],Z=N.e,D==null)J=_(N.c),J=j==1||j==2&&(Z<=Se||Z>=Qe)?T(J,Z):L(J,Z,"0");else if(N=nt(new le(N),D,O),X=N.e,J=_(N.c),Y=J.length,j==1||j==2&&(D<=X||X<=Se)){for(;Y<D;J+="0",Y++);J=T(J,X)}else if(D-=Z,J=L(J,X,"0"),X+1>Y){if(--D>0)for(J+=".";D--;J+="0");}else if(D+=X-Y,D>0)for(X+1==Y&&(J+=".");D--;J+="0");return N.s<0&&H?"-"+J:J}function Dt(N,D){for(var O,j=1,H=new le(N[0]);j<N.length;j++)if(O=new le(N[j]),O.s)D.call(H,O)&&(H=O);else{H=O;break}return H}function rt(N,D,O){for(var j=1,H=D.length;!D[--H];D.pop());for(H=D[0];H>=10;H/=10,j++);return(O=j+O*u-1)>me?N.c=N.e=null:O<Re?N.c=[N.e=0]:(N.e=O,N.c=D),N}F=function(){var N=/^(-?)0([xbo])(?=\w[\w.]*$)/i,D=/^([^.]+)\.$/,O=/^\.([^.]+)$/,j=/^-?(Infinity|NaN)$/,H=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(X,Z,Y,J){var ne,$=Y?Z:Z.replace(H,"");if(j.test($))X.s=isNaN($)?null:$<0?-1:1;else{if(!Y&&($=$.replace(N,function(he,Oe,Ue){return ne=(Ue=Ue.toLowerCase())=="x"?16:Ue=="b"?2:8,!J||J==ne?Oe:he}),J&&(ne=J,$=$.replace(D,"$1").replace(O,"0.$1")),Z!=$))return new le($,ne);if(le.DEBUG)throw Error(a+"Not a"+(J?" base "+J:"")+" number: "+Z);X.s=null}X.c=X.e=null}}();function nt(N,D,O,j){var H,X,Z,Y,J,ne,$,he=N.c,Oe=d;if(he){e:{for(H=1,Y=he[0];Y>=10;Y/=10,H++);if(X=D-H,X<0)X+=u,Z=D,J=he[ne=0],$=J/Oe[H-Z-1]%10|0;else if(ne=n((X+1)/u),ne>=he.length)if(j){for(;he.length<=ne;he.push(0));J=$=0,H=1,X%=u,Z=X-u+1}else break e;else{for(J=Y=he[ne],H=1;Y>=10;Y/=10,H++);X%=u,Z=X-u+H,$=Z<0?0:J/Oe[H-Z-1]%10|0}if(j=j||D<0||he[ne+1]!=null||(Z<0?J:J%Oe[H-Z-1]),j=O<4?($||j)&&(O==0||O==(N.s<0?3:2)):$>5||$==5&&(O==4||j||O==6&&(X>0?Z>0?J/Oe[H-Z]:0:he[ne-1])%10&1||O==(N.s<0?8:7)),D<1||!he[0])return he.length=0,j?(D-=N.e+1,he[0]=Oe[(u-D%u)%u],N.e=-D||0):he[0]=N.e=0,N;if(X==0?(he.length=ne,Y=1,ne--):(he.length=ne+1,Y=Oe[u-X],he[ne]=Z>0?i(J/Oe[H-Z]%Oe[Z])*Y:0),j)for(;;)if(ne==0){for(X=1,Z=he[0];Z>=10;Z/=10,X++);for(Z=he[0]+=Y,Y=1;Z>=10;Z/=10,Y++);X!=Y&&(N.e++,he[0]==l&&(he[0]=1));break}else{if(he[ne]+=Y,he[ne]!=l)break;he[ne--]=0,Y=1}for(X=he.length;he[--X]===0;he.pop());}N.e>me?N.c=N.e=null:N.e<Re&&(N.c=[N.e=0])}return N}function dt(N){var D,O=N.e;return O===null?N.toString():(D=_(N.c),D=O<=Se||O>=Qe?T(D,O):L(D,O,"0"),N.s<0?"-"+D:D)}return G.absoluteValue=G.abs=function(){var N=new le(this);return N.s<0&&(N.s=1),N},G.comparedTo=function(N,D){return w(this,new le(N,D))},G.decimalPlaces=G.dp=function(N,D){var O,j,H,X=this;if(N!=null)return E(N,0,g),D==null?D=we:E(D,0,8),nt(new le(X),N+X.e+1,D);if(!(O=X.c))return null;if(j=((H=O.length-1)-y(this.e/u))*u,H=O[H])for(;H%10==0;H/=10,j--);return j<0&&(j=0),j},G.dividedBy=G.div=function(N,D){return B(this,new le(N,D),ae,we)},G.dividedToIntegerBy=G.idiv=function(N,D){return B(this,new le(N,D),0,1)},G.exponentiatedBy=G.pow=function(N,D){var O,j,H,X,Z,Y,J,ne,$,he=this;if(N=new le(N),N.c&&!N.isInteger())throw Error(a+"Exponent not an integer: "+dt(N));if(D!=null&&(D=new le(D)),Y=N.e>14,!he.c||!he.c[0]||he.c[0]==1&&!he.e&&he.c.length==1||!N.c||!N.c[0])return $=new le(Math.pow(+dt(he),Y?2-S(N):+dt(N))),D?$.mod(D):$;if(J=N.s<0,D){if(D.c?!D.c[0]:!D.s)return new le(NaN);j=!J&&he.isInteger()&&D.isInteger(),j&&(he=he.mod(D))}else{if(N.e>9&&(he.e>0||he.e<-1||(he.e==0?he.c[0]>1||Y&&he.c[1]>=24e7:he.c[0]<8e13||Y&&he.c[0]<=9999975e7)))return X=he.s<0&&S(N)?-0:0,he.e>-1&&(X=1/X),new le(J?1/X:X);Ze&&(X=n(Ze/u+2))}for(Y?(O=new le(.5),J&&(N.s=1),ne=S(N)):(H=Math.abs(+dt(N)),ne=H%2),$=new le(te);;){if(ne){if($=$.times(he),!$.c)break;X?$.c.length>X&&($.c.length=X):j&&($=$.mod(D))}if(H){if(H=i(H/2),H===0)break;ne=H%2}else if(N=N.times(O),nt(N,N.e+1,1),N.e>14)ne=S(N);else{if(H=+dt(N),H===0)break;ne=H%2}he=he.times(he),X?he.c&&he.c.length>X&&(he.c.length=X):j&&(he=he.mod(D))}return j?$:(J&&($=te.div($)),D?$.mod(D):X?nt($,Ze,we,Z):$)},G.integerValue=function(N){var D=new le(this);return N==null?N=we:E(N,0,8),nt(D,D.e+1,N)},G.isEqualTo=G.eq=function(N,D){return w(this,new le(N,D))===0},G.isFinite=function(){return!!this.c},G.isGreaterThan=G.gt=function(N,D){return w(this,new le(N,D))>0},G.isGreaterThanOrEqualTo=G.gte=function(N,D){return(D=w(this,new le(N,D)))===1||D===0},G.isInteger=function(){return!!this.c&&y(this.e/u)>this.c.length-2},G.isLessThan=G.lt=function(N,D){return w(this,new le(N,D))<0},G.isLessThanOrEqualTo=G.lte=function(N,D){return(D=w(this,new le(N,D)))===-1||D===0},G.isNaN=function(){return!this.s},G.isNegative=function(){return this.s<0},G.isPositive=function(){return this.s>0},G.isZero=function(){return!!this.c&&this.c[0]==0},G.minus=function(N,D){var O,j,H,X,Z=this,Y=Z.s;if(N=new le(N,D),D=N.s,!Y||!D)return new le(NaN);if(Y!=D)return N.s=-D,Z.plus(N);var J=Z.e/u,ne=N.e/u,$=Z.c,he=N.c;if(!J||!ne){if(!$||!he)return $?(N.s=-D,N):new le(he?Z:NaN);if(!$[0]||!he[0])return he[0]?(N.s=-D,N):new le($[0]?Z:we==3?-0:0)}if(J=y(J),ne=y(ne),$=$.slice(),Y=J-ne){for((X=Y<0)?(Y=-Y,H=$):(ne=J,H=he),H.reverse(),D=Y;D--;H.push(0));H.reverse()}else for(j=(X=(Y=$.length)<(D=he.length))?Y:D,Y=D=0;D<j;D++)if($[D]!=he[D]){X=$[D]<he[D];break}if(X&&(H=$,$=he,he=H,N.s=-N.s),D=(j=he.length)-(O=$.length),D>0)for(;D--;$[O++]=0);for(D=l-1;j>Y;){if($[--j]<he[j]){for(O=j;O&&!$[--O];$[O]=D);--$[O],$[j]+=l}$[j]-=he[j]}for(;$[0]==0;$.splice(0,1),--ne);return $[0]?rt(N,$,ne):(N.s=we==3?-1:1,N.c=[N.e=0],N)},G.modulo=G.mod=function(N,D){var O,j,H=this;return N=new le(N,D),!H.c||!N.s||N.c&&!N.c[0]?new le(NaN):!N.c||H.c&&!H.c[0]?new le(H):(Fe==9?(j=N.s,N.s=1,O=B(H,N,0,3),N.s=j,O.s*=j):O=B(H,N,0,Fe),N=H.minus(O.times(N)),!N.c[0]&&Fe==1&&(N.s=H.s),N)},G.multipliedBy=G.times=function(N,D){var O,j,H,X,Z,Y,J,ne,$,he,Oe,Ue,ht,Qt,Xt,it=this,Bt=it.c,pr=(N=new le(N,D)).c;if(!Bt||!pr||!Bt[0]||!pr[0])return!it.s||!N.s||Bt&&!Bt[0]&&!pr||pr&&!pr[0]&&!Bt?N.c=N.e=N.s=null:(N.s*=it.s,!Bt||!pr?N.c=N.e=null:(N.c=[0],N.e=0)),N;for(j=y(it.e/u)+y(N.e/u),N.s*=it.s,J=Bt.length,he=pr.length,J<he&&(ht=Bt,Bt=pr,pr=ht,H=J,J=he,he=H),H=J+he,ht=[];H--;ht.push(0));for(Qt=l,Xt=h,H=he;--H>=0;){for(O=0,Oe=pr[H]%Xt,Ue=pr[H]/Xt|0,Z=J,X=H+Z;X>H;)ne=Bt[--Z]%Xt,$=Bt[Z]/Xt|0,Y=Ue*ne+$*Oe,ne=Oe*ne+Y%Xt*Xt+ht[X]+O,O=(ne/Qt|0)+(Y/Xt|0)+Ue*$,ht[X--]=ne%Qt;ht[X]=O}return O?++j:ht.splice(0,1),rt(N,ht,j)},G.negated=function(){var N=new le(this);return N.s=-N.s||null,N},G.plus=function(N,D){var O,j=this,H=j.s;if(N=new le(N,D),D=N.s,!H||!D)return new le(NaN);if(H!=D)return N.s=-D,j.minus(N);var X=j.e/u,Z=N.e/u,Y=j.c,J=N.c;if(!X||!Z){if(!Y||!J)return new le(H/0);if(!Y[0]||!J[0])return J[0]?N:new le(Y[0]?j:H*0)}if(X=y(X),Z=y(Z),Y=Y.slice(),H=X-Z){for(H>0?(Z=X,O=J):(H=-H,O=Y),O.reverse();H--;O.push(0));O.reverse()}for(H=Y.length,D=J.length,H-D<0&&(O=J,J=Y,Y=O,D=H),H=0;D;)H=(Y[--D]=Y[D]+J[D]+H)/l|0,Y[D]=l===Y[D]?0:Y[D]%l;return H&&(Y=[H].concat(Y),++Z),rt(N,Y,Z)},G.precision=G.sd=function(N,D){var O,j,H,X=this;if(N!=null&&N!==!!N)return E(N,1,g),D==null?D=we:E(D,0,8),nt(new le(X),N,D);if(!(O=X.c))return null;if(H=O.length-1,j=H*u+1,H=O[H]){for(;H%10==0;H/=10,j--);for(H=O[0];H>=10;H/=10,j++);}return N&&X.e+1>j&&(j=X.e+1),j},G.shiftedBy=function(N){return E(N,-f,f),this.times("1e"+N)},G.squareRoot=G.sqrt=function(){var N,D,O,j,H,X=this,Z=X.c,Y=X.s,J=X.e,ne=ae+4,$=new le("0.5");if(Y!==1||!Z||!Z[0])return new le(!Y||Y<0&&(!Z||Z[0])?NaN:Z?X:1/0);if(Y=Math.sqrt(+dt(X)),Y==0||Y==1/0?(D=_(Z),(D.length+J)%2==0&&(D+="0"),Y=Math.sqrt(+D),J=y((J+1)/2)-(J<0||J%2),Y==1/0?D="5e"+J:(D=Y.toExponential(),D=D.slice(0,D.indexOf("e")+1)+J),O=new le(D)):O=new le(Y+""),O.c[0]){for(J=O.e,Y=J+ne,Y<3&&(Y=0);;)if(H=O,O=$.times(H.plus(B(X,H,ne,1))),_(H.c).slice(0,Y)===(D=_(O.c)).slice(0,Y))if(O.e<J&&--Y,D=D.slice(Y-3,Y+1),D=="9999"||!j&&D=="4999"){if(!j&&(nt(H,H.e+ae+2,0),H.times(H).eq(X))){O=H;break}ne+=4,Y+=4,j=1}else{(!+D||!+D.slice(1)&&D.charAt(0)=="5")&&(nt(O,O.e+ae+2,1),N=!O.times(O).eq(X));break}}return nt(O,O.e+ae+1,we,N)},G.toExponential=function(N,D){return N!=null&&(E(N,0,g),N++),Rt(this,N,D,1)},G.toFixed=function(N,D){return N!=null&&(E(N,0,g),N=N+this.e+1),Rt(this,N,D)},G.toFormat=function(N,D,O){var j,H=this;if(O==null)N!=null&&D&&typeof D=="object"?(O=D,D=null):N&&typeof N=="object"?(O=N,N=D=null):O=ct;else if(typeof O!="object")throw Error(a+"Argument not an object: "+O);if(j=H.toFixed(N,D),H.c){var X,Z=j.split("."),Y=+O.groupSize,J=+O.secondaryGroupSize,ne=O.groupSeparator||"",$=Z[0],he=Z[1],Oe=H.s<0,Ue=Oe?$.slice(1):$,ht=Ue.length;if(J&&(X=Y,Y=J,J=X,ht-=X),Y>0&&ht>0){for(X=ht%Y||Y,$=Ue.substr(0,X);X<ht;X+=Y)$+=ne+Ue.substr(X,Y);J>0&&($+=ne+Ue.slice(X)),Oe&&($="-"+$)}j=he?$+(O.decimalSeparator||"")+((J=+O.fractionGroupSize)?he.replace(new RegExp("\\d{"+J+"}\\B","g"),"$&"+(O.fractionGroupSeparator||"")):he):$}return(O.prefix||"")+j+(O.suffix||"")},G.toFraction=function(N){var D,O,j,H,X,Z,Y,J,ne,$,he,Oe,Ue=this,ht=Ue.c;if(N!=null&&(Y=new le(N),!Y.isInteger()&&(Y.c||Y.s!==1)||Y.lt(te)))throw Error(a+"Argument "+(Y.isInteger()?"out of range: ":"not an integer: ")+dt(Y));if(!ht)return new le(Ue);for(D=new le(te),ne=O=new le(te),j=J=new le(te),Oe=_(ht),X=D.e=Oe.length-Ue.e-1,D.c[0]=d[(Z=X%u)<0?u+Z:Z],N=!N||Y.comparedTo(D)>0?X>0?D:ne:Y,Z=me,me=1/0,Y=new le(Oe),J.c[0]=0;$=B(Y,D,0,1),H=O.plus($.times(j)),H.comparedTo(N)!=1;)O=j,j=H,ne=J.plus($.times(H=ne)),J=H,D=Y.minus($.times(H=D)),Y=H;return H=B(N.minus(O),j,0,1),J=J.plus(H.times(ne)),O=O.plus(H.times(j)),J.s=ne.s=Ue.s,X=X*2,he=B(ne,j,X,we).minus(Ue).abs().comparedTo(B(J,O,X,we).minus(Ue).abs())<1?[ne,j]:[J,O],me=Z,he},G.toNumber=function(){return+dt(this)},G.toPrecision=function(N,D){return N!=null&&E(N,1,g),Rt(this,N,D,2)},G.toString=function(N){var D,O=this,j=O.s,H=O.e;return H===null?j?(D="Infinity",j<0&&(D="-"+D)):D="NaN":(N==null?D=H<=Se||H>=Qe?T(_(O.c),H):L(_(O.c),H,"0"):N===10&&ft?(O=nt(new le(O),ae+H+1,we),D=L(_(O.c),O.e,"0")):(E(N,2,Je.length,"Base"),D=z(L(_(O.c),H,"0"),10,N,j,!0)),j<0&&O.c[0]&&(D="-"+D)),D},G.valueOf=G.toJSON=function(){return dt(this)},G._isBigNumber=!0,I!=null&&le.set(I),le}function y(I){var B=I|0;return I>0||I===B?B:B-1}function _(I){for(var B,z,F=1,G=I.length,te=I[0]+"";F<G;){for(B=I[F++]+"",z=u-B.length;z--;B="0"+B);te+=B}for(G=te.length;te.charCodeAt(--G)===48;);return te.slice(0,G+1||1)}function w(I,B){var z,F,G=I.c,te=B.c,ae=I.s,we=B.s,Se=I.e,Qe=B.e;if(!ae||!we)return null;if(z=G&&!G[0],F=te&&!te[0],z||F)return z?F?0:-we:ae;if(ae!=we)return ae;if(z=ae<0,F=Se==Qe,!G||!te)return F?0:!G^z?1:-1;if(!F)return Se>Qe^z?1:-1;for(we=(Se=G.length)<(Qe=te.length)?Se:Qe,ae=0;ae<we;ae++)if(G[ae]!=te[ae])return G[ae]>te[ae]^z?1:-1;return Se==Qe?0:Se>Qe^z?1:-1}function E(I,B,z,F){if(I<B||I>z||I!==i(I))throw Error(a+(F||"Argument")+(typeof I=="number"?I<B||I>z?" out of range: ":" not an integer: ":" not a primitive number: ")+String(I))}function S(I){var B=I.c.length-1;return y(I.e/u)==B&&I.c[B]%2!=0}function T(I,B){return(I.length>1?I.charAt(0)+"."+I.slice(1):I)+(B<0?"e":"e+")+B}function L(I,B,z){var F,G;if(B<0){for(G=z+".";++B;G+=z);I=G+I}else if(F=I.length,++B>F){for(G=z,B-=F;--B;G+=z);I+=G}else B<F&&(I=I.slice(0,B)+"."+I.slice(B));return I}e=m(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof Ff!="undefined"&&Ff.exports?Ff.exports=e:(t||(t=typeof self!="undefined"&&self?self:window),t.BigNumber=e)})(K_)});var z_=de((yV,W_)=>{var j_=A0(),Y_=W_.exports;(function(){"use strict";function t(f){return f<10?"0"+f:f}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,i,a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;function l(f){return r.lastIndex=0,r.test(f)?'"'+f.replace(r,function(d){var h=a[d];return typeof h=="string"?h:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function u(f,d){var h,g,m,y,_=n,w,E=d[f],S=E!=null&&(E instanceof j_||j_.isBigNumber(E));switch(E&&typeof E=="object"&&typeof E.toJSON=="function"&&(E=E.toJSON(f)),typeof s=="function"&&(E=s.call(d,f,E)),typeof E){case"string":return S?E:l(E);case"number":return isFinite(E)?String(E):"null";case"boolean":case"null":case"bigint":return String(E);case"object":if(!E)return"null";if(n+=i,w=[],Object.prototype.toString.apply(E)==="[object Array]"){for(y=E.length,h=0;h<y;h+=1)w[h]=u(h,E)||"null";return m=w.length===0?"[]":n?`[
`+n+w.join(`,
`+n)+`
`+_+"]":"["+w.join(",")+"]",n=_,m}if(s&&typeof s=="object")for(y=s.length,h=0;h<y;h+=1)typeof s[h]=="string"&&(g=s[h],m=u(g,E),m&&w.push(l(g)+(n?": ":":")+m));else Object.keys(E).forEach(function(T){var L=u(T,E);L&&w.push(l(T)+(n?": ":":")+L)});return m=w.length===0?"{}":n?`{
`+n+w.join(`,
`+n)+`
`+_+"}":"{"+w.join(",")+"}",n=_,m}}typeof Y_.stringify!="function"&&(Y_.stringify=function(f,d,h){var g;if(n="",i="",typeof h=="number")for(g=0;g<h;g+=1)i+=" ";else typeof h=="string"&&(i=h);if(s=d,d&&typeof d!="function"&&(typeof d!="object"||typeof d.length!="number"))throw new Error("JSON.stringify");return u("",{"":f})})})()});var X_=de((vV,Q_)=>{var qf=null,ZL=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,$L=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,e4=function(t){"use strict";var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction!="undefined")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction!="undefined")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,n,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},a,s=function(_){throw{name:"SyntaxError",message:_,at:r,text:a}},l=function(_){return _&&_!==n&&s("Expected '"+_+"' instead of '"+n+"'"),n=a.charAt(r),r+=1,n},u=function(){var _,w="";for(n==="-"&&(w="-",l("-"));n>="0"&&n<="9";)w+=n,l();if(n===".")for(w+=".";l()&&n>="0"&&n<="9";)w+=n;if(n==="e"||n==="E")for(w+=n,l(),(n==="-"||n==="+")&&(w+=n,l());n>="0"&&n<="9";)w+=n,l();if(_=+w,!isFinite(_))s("Bad number");else return qf==null&&(qf=A0()),w.length>15?e.storeAsString?w:e.useNativeBigInt?BigInt(w):new qf(w):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(_):new qf(_):_},f=function(){var _,w,E="",S;if(n==='"')for(var T=r;l();){if(n==='"')return r-1>T&&(E+=a.substring(T,r-1)),l(),E;if(n==="\\"){if(r-1>T&&(E+=a.substring(T,r-1)),l(),n==="u"){for(S=0,w=0;w<4&&(_=parseInt(l(),16),!!isFinite(_));w+=1)S=S*16+_;E+=String.fromCharCode(S)}else if(typeof i[n]=="string")E+=i[n];else break;T=r}}s("Bad string")},d=function(){for(;n&&n<=" ";)l()},h=function(){switch(n){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}s("Unexpected '"+n+"'")},g,m=function(){var _=[];if(n==="["){if(l("["),d(),n==="]")return l("]"),_;for(;n;){if(_.push(g()),d(),n==="]")return l("]"),_;l(","),d()}}s("Bad array")},y=function(){var _,w=Object.create(null);if(n==="{"){if(l("{"),d(),n==="}")return l("}"),w;for(;n;){if(_=f(),d(),l(":"),e.strict===!0&&Object.hasOwnProperty.call(w,_)&&s('Duplicate key "'+_+'"'),ZL.test(_)===!0?e.protoAction==="error"?s("Object contains forbidden prototype property"):e.protoAction==="ignore"?g():w[_]=g():$L.test(_)===!0?e.constructorAction==="error"?s("Object contains forbidden constructor property"):e.constructorAction==="ignore"?g():w[_]=g():w[_]=g(),d(),n==="}")return l("}"),w;l(","),d()}}s("Bad object")};return g=function(){switch(d(),n){case"{":return y();case"[":return m();case'"':return f();case"-":return u();default:return n>="0"&&n<="9"?u():h()}},function(_,w){var E;return a=_+"",r=0,n=" ",E=g(),d(),n&&s("Syntax error"),typeof w=="function"?function S(T,L){var I,B,z=T[L];return z&&typeof z=="object"&&Object.keys(z).forEach(function(F){B=S(z,F),B!==void 0?z[F]=B:delete z[F]}),w.call(T,L,z)}({"":E},""):E}};Q_.exports=e4});var $_=de((_V,Gf)=>{var J_=z_().stringify,Z_=X_();Gf.exports=function(t){return{parse:Z_(t),stringify:J_}};Gf.exports.parse=Z_();Gf.exports.stringify=J_});var Hf=de(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.requestTimeout=Ft.resetIsAvailableCache=Ft.isAvailable=Ft.project=Ft.instance=Ft.HEADERS=Ft.HEADER_VALUE=Ft.HEADER_NAME=Ft.SECONDARY_HOST_ADDRESS=Ft.HOST_ADDRESS=Ft.BASE_PATH=void 0;var k0=zo(),t4=$_();Ft.BASE_PATH="/computeMetadata/v1";Ft.HOST_ADDRESS="http://169.254.169.254";Ft.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";Ft.HEADER_NAME="Metadata-Flavor";Ft.HEADER_VALUE="Google";Ft.HEADERS=Object.freeze({[Ft.HEADER_NAME]:Ft.HEADER_VALUE});function I0(t){return t||(t=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||Ft.HOST_ADDRESS),/^https?:\/\//.test(t)||(t=`http://${t}`),new URL(Ft.BASE_PATH,t).href}function r4(t){Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${e}' is not a valid configuration option.`)}})}function N0(t,e,r=3,n=!1){return P(this,null,function*(){e=e||{},typeof e=="string"&&(e={property:e});let i="";typeof e=="object"&&e.property&&(i="/"+e.property),r4(e);try{let s=yield(n?n4:k0.request)({url:`${I0()}/${t}${i}`,headers:Object.assign({},Ft.HEADERS,e.headers),retryConfig:{noResponseRetries:r},params:e.params,responseType:"text",timeout:ew()});if(s.headers[Ft.HEADER_NAME.toLowerCase()]!==Ft.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${Ft.HEADER_NAME} header.`);if(!s.data)throw new Error("Invalid response from the metadata service");if(typeof s.data=="string")try{return t4.parse(s.data)}catch(l){}return s.data}catch(a){let s=a;throw s.response&&s.response.status!==200&&(s.message=`Unsuccessful response status code. ${s.message}`),a}})}function n4(t){return P(this,null,function*(){let e=Gi(pn({},t),{url:t.url.replace(I0(),I0(Ft.SECONDARY_HOST_ADDRESS))}),r=!1,n=(0,k0.request)(t).then(a=>(r=!0,a)).catch(a=>{if(r)return i;throw r=!0,a}),i=(0,k0.request)(e).then(a=>(r=!0,a)).catch(a=>{if(r)return n;throw r=!0,a});return Promise.race([n,i])})}function i4(t){return N0("instance",t)}Ft.instance=i4;function a4(t){return N0("project",t)}Ft.project=a4;function s4(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var Vf;function o4(){return P(this,null,function*(){try{return Vf===void 0&&(Vf=N0("instance",void 0,s4(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),yield Vf,!0}catch(t){let e=t;if(process.env.DEBUG_AUTH&&console.info(e),e.type==="request-timeout"||e.response&&e.response.status===404)return!1;if(!(e.response&&e.response.status===404)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code))){let r="UNKNOWN";e.code&&(r=e.code),process.emitWarning(`received unexpected error = ${e.message} code = ${r}`,"MetadataLookupWarning")}return!1}})}Ft.isAvailable=o4;function l4(){Vf=void 0}Ft.resetIsAvailableCache=l4;function ew(){return process.env.K_SERVICE||process.env.FUNCTION_NAME?0:3e3}Ft.requestTimeout=ew});var nw=de(Kf=>{"use strict";Kf.byteLength=c4;Kf.toByteArray=d4;Kf.fromByteArray=g4;var Hi=[],ei=[],u4=typeof Uint8Array!="undefined"?Uint8Array:Array,R0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Gs=0,tw=R0.length;Gs<tw;++Gs)Hi[Gs]=R0[Gs],ei[R0.charCodeAt(Gs)]=Gs;var Gs,tw;ei["-".charCodeAt(0)]=62;ei["_".charCodeAt(0)]=63;function rw(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function c4(t){var e=rw(t),r=e[0],n=e[1];return(r+n)*3/4-n}function f4(t,e,r){return(e+r)*3/4-r}function d4(t){var e,r=rw(t),n=r[0],i=r[1],a=new u4(f4(t,n,i)),s=0,l=i>0?n-4:n,u;for(u=0;u<l;u+=4)e=ei[t.charCodeAt(u)]<<18|ei[t.charCodeAt(u+1)]<<12|ei[t.charCodeAt(u+2)]<<6|ei[t.charCodeAt(u+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=ei[t.charCodeAt(u)]<<2|ei[t.charCodeAt(u+1)]>>4,a[s++]=e&255),i===1&&(e=ei[t.charCodeAt(u)]<<10|ei[t.charCodeAt(u+1)]<<4|ei[t.charCodeAt(u+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function h4(t){return Hi[t>>18&63]+Hi[t>>12&63]+Hi[t>>6&63]+Hi[t&63]}function p4(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(h4(n));return i.join("")}function g4(t){for(var e,r=t.length,n=r%3,i=[],a=16383,s=0,l=r-n;s<l;s+=a)i.push(p4(t,s,s+a>l?l:s+a));return n===1?(e=t[r-1],i.push(Hi[e>>2]+Hi[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Hi[e>>10]+Hi[e>>4&63]+Hi[e<<2&63]+"=")),i.join("")}});var aw=de(iw=>{(function(t){function e(){}function r(u,f){if(u=u===void 0?"utf-8":u,f=f===void 0?{fatal:!1}:f,s.indexOf(u.toLowerCase())===-1)throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+u+"') is invalid.");if(f.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function n(u){return Buffer.from(u.buffer,u.byteOffset,u.byteLength).toString("utf-8")}function i(u){var f=URL.createObjectURL(new Blob([u],{type:"text/plain;charset=UTF-8"}));try{var d=new XMLHttpRequest;return d.open("GET",f,!1),d.send(),d.responseText}catch(h){return a(u)}finally{URL.revokeObjectURL(f)}}function a(u){for(var f=0,d=Math.min(65536,u.length+1),h=new Uint16Array(d),g=[],m=0;;){var y=f<u.length;if(!y||m>=d-1){if(g.push(String.fromCharCode.apply(null,h.subarray(0,m))),!y)return g.join("");u=u.subarray(f),m=f=0}if(y=u[f++],(y&128)==0)h[m++]=y;else if((y&224)==192){var _=u[f++]&63;h[m++]=(y&31)<<6|_}else if((y&240)==224){_=u[f++]&63;var w=u[f++]&63;h[m++]=(y&31)<<12|_<<6|w}else if((y&248)==240){_=u[f++]&63,w=u[f++]&63;var E=u[f++]&63;y=(y&7)<<18|_<<12|w<<6|E,65535<y&&(y-=65536,h[m++]=y>>>10&1023|55296,y=56320|y&1023),h[m++]=y}}}if(t.TextEncoder&&t.TextDecoder)return!1;var s=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(u,f){if(f=f===void 0?{stream:!1}:f,f.stream)throw Error("Failed to encode: the 'stream' option is unsupported.");f=0;for(var d=u.length,h=0,g=Math.max(32,d+(d>>>1)+7),m=new Uint8Array(g>>>3<<3);f<d;){var y=u.charCodeAt(f++);if(55296<=y&&56319>=y){if(f<d){var _=u.charCodeAt(f);(_&64512)==56320&&(++f,y=((y&1023)<<10)+(_&1023)+65536)}if(55296<=y&&56319>=y)continue}if(h+4>m.length&&(g+=8,g*=1+f/u.length*2,g=g>>>3<<3,_=new Uint8Array(g),_.set(m),m=_),(y&4294967168)==0)m[h++]=y;else{if((y&4294965248)==0)m[h++]=y>>>6&31|192;else if((y&4294901760)==0)m[h++]=y>>>12&15|224,m[h++]=y>>>6&63|128;else if((y&4292870144)==0)m[h++]=y>>>18&7|240,m[h++]=y>>>12&63|128,m[h++]=y>>>6&63|128;else continue;m[h++]=y&63|128}}return m.slice?m.slice(0,h):m.subarray(0,h)},Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1});var l=a;typeof Buffer=="function"&&Buffer.from?l=n:typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&(l=i),r.prototype.decode=function(u,f){if(f=f===void 0?{stream:!1}:f,f.stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return u=u instanceof Uint8Array?u:u.buffer instanceof ArrayBuffer?new Uint8Array(u.buffer):new Uint8Array(u),l(u)},t.TextEncoder=e,t.TextDecoder=r})(typeof window!="undefined"?window:typeof global!="undefined"?global:iw)});var sw=de(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.BrowserCrypto=void 0;var Qo=nw();typeof process=="undefined"&&typeof TextEncoder=="undefined"&&aw();var m4=Xo(),Eu=class{constructor(){if(typeof window=="undefined"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}sha256DigestBase64(e){return P(this,null,function*(){let r=new TextEncoder().encode(e),n=yield window.crypto.subtle.digest("SHA-256",r);return Qo.fromByteArray(new Uint8Array(n))})}randomBytesBase64(e){let r=new Uint8Array(e);return window.crypto.getRandomValues(r),Qo.fromByteArray(r)}static padBase64(e){for(;e.length%4!=0;)e+="=";return e}verify(e,r,n){return P(this,null,function*(){let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},a=new TextEncoder().encode(r),s=Qo.toByteArray(Eu.padBase64(n)),l=yield window.crypto.subtle.importKey("jwk",e,i,!0,["verify"]);return yield window.crypto.subtle.verify(i,l,s,a)})}sign(e,r){return P(this,null,function*(){let n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=new TextEncoder().encode(r),a=yield window.crypto.subtle.importKey("jwk",e,n,!0,["sign"]),s=yield window.crypto.subtle.sign(n,a,i);return Qo.fromByteArray(new Uint8Array(s))})}decodeBase64StringUtf8(e){let r=Qo.toByteArray(Eu.padBase64(e));return new TextDecoder().decode(r)}encodeBase64StringUtf8(e){let r=new TextEncoder().encode(e);return Qo.fromByteArray(r)}sha256DigestHex(e){return P(this,null,function*(){let r=new TextEncoder().encode(e),n=yield window.crypto.subtle.digest("SHA-256",r);return(0,m4.fromArrayBufferToHex)(n)})}signWithHmacSha256(e,r){return P(this,null,function*(){let n=typeof e=="string"?e:String.fromCharCode(...new Uint16Array(e)),i=new TextEncoder,a=yield window.crypto.subtle.importKey("raw",i.encode(n),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",a,i.encode(r))})}};jf.BrowserCrypto=Eu});var lw=de(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.NodeCrypto=void 0;var Jo=require("crypto"),ow=class{sha256DigestBase64(e){return P(this,null,function*(){return Jo.createHash("sha256").update(e).digest("base64")})}randomBytesBase64(e){return Jo.randomBytes(e).toString("base64")}verify(e,r,n){return P(this,null,function*(){let i=Jo.createVerify("sha256");return i.update(r),i.end(),i.verify(e,n,"base64")})}sign(e,r){return P(this,null,function*(){let n=Jo.createSign("RSA-SHA256");return n.update(r),n.end(),n.sign(e,"base64")})}decodeBase64StringUtf8(e){return Buffer.from(e,"base64").toString("utf-8")}encodeBase64StringUtf8(e){return Buffer.from(e,"utf-8").toString("base64")}sha256DigestHex(e){return P(this,null,function*(){return Jo.createHash("sha256").update(e).digest("hex")})}signWithHmacSha256(e,r){return P(this,null,function*(){let n=typeof e=="string"?e:v4(e);return y4(Jo.createHmac("sha256",n).update(r).digest())})}};Yf.NodeCrypto=ow;function y4(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function v4(t){return Buffer.from(t)}});var Xo=de(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.fromArrayBufferToHex=ts.hasBrowserCrypto=ts.createCrypto=void 0;var _4=sw(),w4=lw();function E4(){return uw()?new _4.BrowserCrypto:new w4.NodeCrypto}ts.createCrypto=E4;function uw(){return typeof window!="undefined"&&typeof window.crypto!="undefined"&&typeof window.crypto.subtle!="undefined"}ts.hasBrowserCrypto=uw;function C4(t){return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}ts.fromArrayBufferToHex=C4});var cw=de(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.validate=void 0;function b4(t){let e=[{invalid:"uri",expected:"url"},{invalid:"json",expected:"data"},{invalid:"qs",expected:"params"}];for(let r of e)if(t[r.invalid]){let n=`'${r.invalid}' is not a valid configuration option. Please use '${r.expected}' instead. This library is using Axios for requests. Please see https://github.com/axios/axios to learn more about the valid request options.`;throw new Error(n)}}Wf.validate=b4});var fw=de((AV,x4)=>{x4.exports={_args:[["google-auth-library@8.0.2","/home/runner/work/obsidian-google-calendar/obsidian-google-calendar"]],_from:"google-auth-library@8.0.2",_id:"google-auth-library@8.0.2",_inBundle:!1,_integrity:"sha512-HoG+nWFAThLovKpvcbYzxgn+nBJPTfAwtq0GxPN821nOO+21+8oP7MoEHfd1sbDulUFFGfcjJr2CnJ4YssHcyg==",_location:"/google-auth-library",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"google-auth-library@8.0.2",name:"google-auth-library",escapedName:"google-auth-library",rawSpec:"8.0.2",saveSpec:null,fetchSpec:"8.0.2"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/google-auth-library/-/google-auth-library-8.0.2.tgz",_spec:"8.0.2",_where:"/home/runner/work/obsidian-google-calendar/obsidian-google-calendar",author:{name:"Google Inc."},bugs:{url:"https://github.com/googleapis/google-auth-library-nodejs/issues"},dependencies:{arrify:"^2.0.0","base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11","fast-text-encoding":"^1.0.0",gaxios:"^5.0.0","gcp-metadata":"^5.0.0",gtoken:"^5.3.2",jws:"^4.0.0","lru-cache":"^6.0.0"},description:"Google APIs Authentication Client Library for Node.js",devDependencies:{"@compodoc/compodoc":"^1.1.7","@types/base64-js":"^1.2.5","@types/chai":"^4.1.7","@types/jws":"^3.1.0","@types/lru-cache":"^5.0.0","@types/mocha":"^8.0.0","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^16.0.0","@types/sinon":"^10.0.0","@types/tmp":"^0.2.0","assert-rejects":"^1.0.0",c8:"^7.0.0",chai:"^4.2.0",codecov:"^3.0.2",execa:"^5.0.0",gts:"^3.1.0","is-docker":"^2.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^5.0.0",keypair:"^1.0.4",linkinator:"^3.0.3",mocha:"^9.2.2",mv:"^2.1.1",ncp:"^2.0.0",nock:"^13.0.0","null-loader":"^4.0.0",puppeteer:"^13.0.0",sinon:"^13.0.0",tmp:"^0.2.0","ts-loader":"^8.0.0",typescript:"^4.6.3",webpack:"^5.21.2","webpack-cli":"^4.0.0"},engines:{node:">=12"},files:["build/src","!build/src/**/*.map"],homepage:"https://github.com/googleapis/google-auth-library-nodejs#readme",keywords:["google","api","google apis","client","client library"],license:"Apache-2.0",main:"./build/src/index.js",name:"google-auth-library",repository:{type:"git",url:"git+https://github.com/googleapis/google-auth-library-nodejs.git"},scripts:{"browser-test":"karma start",clean:"gts clean",compile:"tsc -p .",docs:"compodoc src/","docs-test":"linkinator docs",fix:"gts fix",lint:"gts check",precompile:"gts clean","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install",prepare:"npm run compile","presystem-test":"npm run compile",pretest:"npm run compile","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000",test:"c8 mocha build/test",webpack:"webpack"},types:"./build/src/index.d.ts",version:"8.0.2"}});var Cu=de(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.DefaultTransporter=void 0;var dw=zo(),T4=cw(),hw=fw(),pw="google-api-nodejs-client",Zo=class{configure(e={}){if(e.headers=e.headers||{},typeof window=="undefined"){let r=e.headers["User-Agent"];r?r.includes(`${pw}/`)||(e.headers["User-Agent"]=`${r} ${Zo.USER_AGENT}`):e.headers["User-Agent"]=Zo.USER_AGENT;let n=`auth/${hw.version}`;if(e.headers["x-goog-api-client"]&&!e.headers["x-goog-api-client"].includes(n))e.headers["x-goog-api-client"]=`${e.headers["x-goog-api-client"]} ${n}`;else if(!e.headers["x-goog-api-client"]){let i=process.version.replace(/^v/,"");e.headers["x-goog-api-client"]=`gl-node/${i} ${n}`}}return e}request(e,r){e=this.configure(e);try{(0,T4.validate)(e)}catch(n){if(r)return r(n);throw n}if(r)(0,dw.request)(e).then(n=>{r(null,n)},n=>{r(this.processError(n))});else return(0,dw.request)(e).catch(n=>{throw this.processError(n)})}processError(e){let r=e.response,n=e,i=r?r.data:null;return r&&i&&i.error&&r.status!==200?typeof i.error=="string"?(n.message=i.error,n.code=r.status.toString()):Array.isArray(i.error.errors)?(n.message=i.error.errors.map(a=>a.message).join(`
`),n.code=i.error.code,n.errors=i.error.errors):(n.message=i.error.message,n.code=i.error.code||r.status):r&&r.status>=400&&(n.message=i,n.code=r.status.toString()),n}};zf.DefaultTransporter=Zo;Zo.USER_AGENT=`${pw}/${hw.version}`});var mw=de((IV,gw)=>{"use strict";var S4=t=>t==null?[]:Array.isArray(t)?t:typeof t=="string"?[t]:typeof t[Symbol.iterator]=="function"?[...t]:[t];gw.exports=S4});var $o=de((D0,vw)=>{var Qf=require("buffer"),Ki=Qf.Buffer;function yw(t,e){for(var r in t)e[r]=t[r]}Ki.from&&Ki.alloc&&Ki.allocUnsafe&&Ki.allocUnsafeSlow?vw.exports=Qf:(yw(Qf,D0),D0.Buffer=Vs);function Vs(t,e,r){return Ki(t,e,r)}Vs.prototype=Object.create(Ki.prototype);yw(Ki,Vs);Vs.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ki(t,e,r)};Vs.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Ki(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Vs.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ki(t)};Vs.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Qf.SlowBuffer(t)}});var ww=de((NV,_w)=>{"use strict";function B0(t){var e=(t/8|0)+(t%8==0?0:1);return e}var A4={ES256:B0(256),ES384:B0(384),ES512:B0(521)};function k4(t){var e=A4[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}_w.exports=k4});var O0=de((RV,Sw)=>{"use strict";var Xf=$o().Buffer,Ew=ww(),Jf=128,Cw=0,I4=32,N4=16,R4=2,bw=N4|I4|Cw<<6,Zf=R4|Cw<<6;function D4(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xw(t){if(Xf.isBuffer(t))return t;if(typeof t=="string")return Xf.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function B4(t,e){t=xw(t);var r=Ew(e),n=r+1,i=t.length,a=0;if(t[a++]!==bw)throw new Error('Could not find expected "seq"');var s=t[a++];if(s===(Jf|1)&&(s=t[a++]),i-a<s)throw new Error('"seq" specified length of "'+s+'", only "'+(i-a)+'" remaining');if(t[a++]!==Zf)throw new Error('Could not find expected "int" for "r"');var l=t[a++];if(i-a-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(i-a-2)+'" available');if(n<l)throw new Error('"r" specified length of "'+l+'", max of "'+n+'" is acceptable');var u=a;if(a+=l,t[a++]!==Zf)throw new Error('Could not find expected "int" for "s"');var f=t[a++];if(i-a!==f)throw new Error('"s" specified length of "'+f+'", expected "'+(i-a)+'"');if(n<f)throw new Error('"s" specified length of "'+f+'", max of "'+n+'" is acceptable');var d=a;if(a+=f,a!==i)throw new Error('Expected to consume entire buffer, but "'+(i-a)+'" bytes remain');var h=r-l,g=r-f,m=Xf.allocUnsafe(h+l+g+f);for(a=0;a<h;++a)m[a]=0;t.copy(m,a,u+Math.max(-h,0),u+l),a=r;for(var y=a;a<y+g;++a)m[a]=0;return t.copy(m,a,d+Math.max(-g,0),d+f),m=m.toString("base64"),m=D4(m),m}function Tw(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=Jf;return i&&--n,n}function O4(t,e){t=xw(t);var r=Ew(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=Tw(t,0,r),a=Tw(t,r,t.length),s=r-i,l=r-a,u=1+1+s+1+1+l,f=u<Jf,d=Xf.allocUnsafe((f?2:3)+u),h=0;return d[h++]=bw,f?d[h++]=u:(d[h++]=Jf|1,d[h++]=u&255),d[h++]=Zf,d[h++]=s,i<0?(d[h++]=0,h+=t.copy(d,h,0,r)):h+=t.copy(d,h,i,r),d[h++]=Zf,d[h++]=l,a<0?(d[h++]=0,t.copy(d,h,r)):t.copy(d,h,r+a),d}Sw.exports={derToJose:B4,joseToDer:O4}});var bu=de($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.AuthClient=void 0;var L4=require("events"),P4=Cu(),Aw=class extends L4.EventEmitter{constructor(){super(...arguments);this.transporter=new P4.DefaultTransporter,this.credentials={},this.eagerRefreshThresholdMillis=5*60*1e3,this.forceRefreshOnFailure=!1}setCredentials(e){this.credentials=e}addSharedMetadataHeaders(e){return!e["x-goog-user-project"]&&this.quotaProjectId&&(e["x-goog-user-project"]=this.quotaProjectId),e}};$f.AuthClient=Aw});var L0=de(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.LoginTicket=void 0;var kw=class{constructor(e,r){this.envelope=e,this.payload=r}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let e=this.getPayload();return e&&e.sub?e.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}};ed.LoginTicket=kw});var Hs=de(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.OAuth2Client=ji.CertificateFormat=ji.CodeChallengeMethod=void 0;var td=require("querystring"),M4=require("stream"),U4=O0(),P0=Xo(),F4=bu(),q4=L0(),G4;(function(t){t.Plain="plain",t.S256="S256"})(G4=ji.CodeChallengeMethod||(ji.CodeChallengeMethod={}));var rs;(function(t){t.PEM="PEM",t.JWK="JWK"})(rs=ji.CertificateFormat||(ji.CertificateFormat={}));var nr=class extends F4.AuthClient{constructor(e,r,n){super();this.certificateCache={},this.certificateExpiry=null,this.certificateCacheFormat=rs.PEM,this.refreshTokenPromises=new Map;let i=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,redirectUri:n};this._clientId=i.clientId,this._clientSecret=i.clientSecret,this.redirectUri=i.redirectUri,this.eagerRefreshThresholdMillis=i.eagerRefreshThresholdMillis||5*60*1e3,this.forceRefreshOnFailure=!!i.forceRefreshOnFailure}generateAuthUrl(e={}){if(e.code_challenge_method&&!e.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return e.response_type=e.response_type||"code",e.client_id=e.client_id||this._clientId,e.redirect_uri=e.redirect_uri||this.redirectUri,e.scope instanceof Array&&(e.scope=e.scope.join(" ")),nr.GOOGLE_OAUTH2_AUTH_BASE_URL_+"?"+td.stringify(e)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}generateCodeVerifierAsync(){return P(this,null,function*(){let e=(0,P0.createCrypto)(),n=e.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),a=(yield e.sha256DigestBase64(n)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:n,codeChallenge:a}})}getToken(e,r){let n=typeof e=="string"?{code:e}:e;if(r)this.getTokenAsync(n).then(i=>r(null,i.tokens,i.res),i=>r(i,null,i.response));else return this.getTokenAsync(n)}getTokenAsync(e){return P(this,null,function*(){let r=nr.GOOGLE_OAUTH2_TOKEN_URL_,n={code:e.code,client_id:e.client_id||this._clientId,client_secret:this._clientSecret,redirect_uri:e.redirect_uri||this.redirectUri,grant_type:"authorization_code",code_verifier:e.codeVerifier},i=yield this.transporter.request({method:"POST",url:r,data:td.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshToken(e){return P(this,null,function*(){if(!e)return this.refreshTokenNoCache(e);if(this.refreshTokenPromises.has(e))return this.refreshTokenPromises.get(e);let r=this.refreshTokenNoCache(e).then(n=>(this.refreshTokenPromises.delete(e),n),n=>{throw this.refreshTokenPromises.delete(e),n});return this.refreshTokenPromises.set(e,r),r})}refreshTokenNoCache(e){return P(this,null,function*(){if(!e)throw new Error("No refresh token is set.");let r=nr.GOOGLE_OAUTH2_TOKEN_URL_,n={refresh_token:e,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},i=yield this.transporter.request({method:"POST",url:r,data:td.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshAccessToken(e){if(e)this.refreshAccessTokenAsync().then(r=>e(null,r.credentials,r.res),e);else return this.refreshAccessTokenAsync()}refreshAccessTokenAsync(){return P(this,null,function*(){let e=yield this.refreshToken(this.credentials.refresh_token),r=e.tokens;return r.refresh_token=this.credentials.refresh_token,this.credentials=r,{credentials:this.credentials,res:e.res}})}getAccessToken(e){if(e)this.getAccessTokenAsync().then(r=>e(null,r.token,r.res),e);else return this.getAccessTokenAsync()}getAccessTokenAsync(){return P(this,null,function*(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let n=yield this.processAndValidateRefreshHandler();if(n==null?void 0:n.access_token)return this.setCredentials(n),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");let r=yield this.refreshAccessTokenAsync();if(!r.credentials||r.credentials&&!r.credentials.access_token)throw new Error("Could not refresh access token.");return{token:r.credentials.access_token,res:r.res}}else return{token:this.credentials.access_token}})}getRequestHeaders(e){return P(this,null,function*(){return(yield this.getRequestMetadataAsync(e)).headers})}getRequestMetadataAsync(e){return P(this,null,function*(){let r=this.credentials;if(!r.access_token&&!r.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(r.access_token&&!this.isTokenExpiring()){r.token_type=r.token_type||"Bearer";let l={Authorization:r.token_type+" "+r.access_token};return{headers:this.addSharedMetadataHeaders(l)}}if(this.refreshHandler){let l=yield this.processAndValidateRefreshHandler();if(l==null?void 0:l.access_token){this.setCredentials(l);let u={Authorization:"Bearer "+this.credentials.access_token};return{headers:this.addSharedMetadataHeaders(u)}}}if(this.apiKey)return{headers:{"X-Goog-Api-Key":this.apiKey}};let n=null,i=null;try{n=yield this.refreshToken(r.refresh_token),i=n.tokens}catch(l){let u=l;throw u.response&&(u.response.status===403||u.response.status===404)&&(u.message=`Could not refresh access token: ${u.message}`),u}let a=this.credentials;a.token_type=a.token_type||"Bearer",i.refresh_token=a.refresh_token,this.credentials=i;let s={Authorization:a.token_type+" "+i.access_token};return{headers:this.addSharedMetadataHeaders(s),res:n.res}})}static getRevokeTokenUrl(e){let r=td.stringify({token:e});return`${nr.GOOGLE_OAUTH2_REVOKE_URL_}?${r}`}revokeToken(e,r){let n={url:nr.getRevokeTokenUrl(e),method:"POST"};if(r)this.transporter.request(n).then(i=>r(null,i),r);else return this.transporter.request(n)}revokeCredentials(e){if(e)this.revokeCredentialsAsync().then(r=>e(null,r),e);else return this.revokeCredentialsAsync()}revokeCredentialsAsync(){return P(this,null,function*(){let e=this.credentials.access_token;if(this.credentials={},e)return this.revokeToken(e);throw new Error("No access token to revoke.")})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}requestAsync(e,r=!1){return P(this,null,function*(){let n;try{let i=yield this.getRequestMetadataAsync(e.url);e.headers=e.headers||{},i.headers&&i.headers["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i.headers["x-goog-user-project"]),i.headers&&i.headers.Authorization&&(e.headers.Authorization=i.headers.Authorization),this.apiKey&&(e.headers["X-Goog-Api-Key"]=this.apiKey),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),u=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,f=a.config.data instanceof M4.Readable,d=s===401||s===403;if(!r&&d&&!f&&l)return yield this.refreshAccessTokenAsync(),this.requestAsync(e,!0);if(!r&&d&&!f&&u){let h=yield this.processAndValidateRefreshHandler();return(h==null?void 0:h.access_token)&&this.setCredentials(h),this.requestAsync(e,!0)}}throw i}return n})}verifyIdToken(e,r){if(r&&typeof r!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(r)this.verifyIdTokenAsync(e).then(n=>r(null,n),r);else return this.verifyIdTokenAsync(e)}verifyIdTokenAsync(e){return P(this,null,function*(){if(!e.idToken)throw new Error("The verifyIdToken method requires an ID Token");let r=yield this.getFederatedSignonCertsAsync();return yield this.verifySignedJwtWithCertsAsync(e.idToken,r.certs,e.audience,nr.ISSUERS_,e.maxExpiry)})}getTokenInfo(e){return P(this,null,function*(){let{data:r}=yield this.transporter.request({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${e}`},url:nr.GOOGLE_TOKEN_INFO_URL}),n=Object.assign({expiry_date:new Date().getTime()+r.expires_in*1e3,scopes:r.scope.split(" ")},r);return delete n.expires_in,delete n.scope,n})}getFederatedSignonCerts(e){if(e)this.getFederatedSignonCertsAsync().then(r=>e(null,r.certs,r.res),e);else return this.getFederatedSignonCertsAsync()}getFederatedSignonCertsAsync(){return P(this,null,function*(){let e=new Date().getTime(),r=(0,P0.hasBrowserCrypto)()?rs.JWK:rs.PEM;if(this.certificateExpiry&&e<this.certificateExpiry.getTime()&&this.certificateCacheFormat===r)return{certs:this.certificateCache,format:r};let n,i;switch(r){case rs.PEM:i=nr.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_;break;case rs.JWK:i=nr.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_;break;default:throw new Error(`Unsupported certificate format ${r}`)}try{n=yield this.transporter.request({url:i})}catch(f){throw f instanceof Error&&(f.message=`Failed to retrieve verification certificates: ${f.message}`),f}let a=n?n.headers["cache-control"]:void 0,s=-1;if(a){let d=new RegExp("max-age=([0-9]*)").exec(a);d&&d.length===2&&(s=Number(d[1])*1e3)}let l={};switch(r){case rs.PEM:l=n.data;break;case rs.JWK:for(let f of n.data.keys)l[f.kid]=f;break;default:throw new Error(`Unsupported certificate format ${r}`)}let u=new Date;return this.certificateExpiry=s===-1?null:new Date(u.getTime()+s),this.certificateCache=l,this.certificateCacheFormat=r,{certs:l,format:r,res:n}})}getIapPublicKeys(e){if(e)this.getIapPublicKeysAsync().then(r=>e(null,r.pubkeys,r.res),e);else return this.getIapPublicKeysAsync()}getIapPublicKeysAsync(){return P(this,null,function*(){let e,r=nr.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_;try{e=yield this.transporter.request({url:r})}catch(n){throw n instanceof Error&&(n.message=`Failed to retrieve verification certificates: ${n.message}`),n}return{pubkeys:e.data,res:e}})}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}verifySignedJwtWithCertsAsync(e,r,n,i,a){return P(this,null,function*(){let s=(0,P0.createCrypto)();a||(a=nr.MAX_TOKEN_LIFETIME_SECS_);let l=e.split(".");if(l.length!==3)throw new Error("Wrong number of segments in token: "+e);let u=l[0]+"."+l[1],f=l[2],d,h;try{d=JSON.parse(s.decodeBase64StringUtf8(l[0]))}catch(T){throw T instanceof Error&&(T.message=`Can't parse token envelope: ${l[0]}': ${T.message}`),T}if(!d)throw new Error("Can't parse token envelope: "+l[0]);try{h=JSON.parse(s.decodeBase64StringUtf8(l[1]))}catch(T){throw T instanceof Error&&(T.message=`Can't parse token payload '${l[0]}`),T}if(!h)throw new Error("Can't parse token payload: "+l[1]);if(!Object.prototype.hasOwnProperty.call(r,d.kid))throw new Error("No pem found for envelope: "+JSON.stringify(d));let g=r[d.kid];if(d.alg==="ES256"&&(f=U4.joseToDer(f,"ES256").toString("base64")),!(yield s.verify(g,u,f)))throw new Error("Invalid token signature: "+e);if(!h.iat)throw new Error("No issue time in token: "+JSON.stringify(h));if(!h.exp)throw new Error("No expiration time in token: "+JSON.stringify(h));let y=Number(h.iat);if(isNaN(y))throw new Error("iat field using invalid format");let _=Number(h.exp);if(isNaN(_))throw new Error("exp field using invalid format");let w=new Date().getTime()/1e3;if(_>=w+a)throw new Error("Expiration time too far in future: "+JSON.stringify(h));let E=y-nr.CLOCK_SKEW_SECS_,S=_+nr.CLOCK_SKEW_SECS_;if(w<E)throw new Error("Token used too early, "+w+" < "+E+": "+JSON.stringify(h));if(w>S)throw new Error("Token used too late, "+w+" > "+S+": "+JSON.stringify(h));if(i&&i.indexOf(h.iss)<0)throw new Error("Invalid issuer, expected one of ["+i+"], but got "+h.iss);if(typeof n!="undefined"&&n!==null){let T=h.aud,L=!1;if(n.constructor===Array?L=n.indexOf(T)>-1:L=T===n,!L)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new q4.LoginTicket(d,h)})}processAndValidateRefreshHandler(){return P(this,null,function*(){if(this.refreshHandler){let e=yield this.refreshHandler();if(!e.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return e}})}isTokenExpiring(){let e=this.credentials.expiry_date;return e?e<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}};ji.OAuth2Client=nr;nr.GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";nr.GOOGLE_OAUTH2_AUTH_BASE_URL_="https://accounts.google.com/o/oauth2/v2/auth";nr.GOOGLE_OAUTH2_TOKEN_URL_="https://oauth2.googleapis.com/token";nr.GOOGLE_OAUTH2_REVOKE_URL_="https://oauth2.googleapis.com/revoke";nr.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_="https://www.googleapis.com/oauth2/v1/certs";nr.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_="https://www.googleapis.com/oauth2/v3/certs";nr.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_="https://www.gstatic.com/iap/verify/public_key";nr.CLOCK_SKEW_SECS_=300;nr.MAX_TOKEN_LIFETIME_SECS_=86400;nr.ISSUERS_=["accounts.google.com","https://accounts.google.com"]});var M0=de(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.Compute=void 0;var V4=mw(),H4=zo(),Iw=Hf(),K4=Hs(),Nw=class extends K4.OAuth2Client{constructor(e={}){super(e);this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=e.serviceAccountEmail||"default",this.scopes=V4(e.scopes)}refreshTokenNoCache(e){return P(this,null,function*(){let r=`service-accounts/${this.serviceAccountEmail}/token`,n;try{let a={property:r};this.scopes.length>0&&(a.params={scopes:this.scopes.join(",")}),n=yield Iw.instance(a)}catch(a){throw a instanceof H4.GaxiosError&&(a.message=`Could not refresh access token: ${a.message}`,this.wrapError(a)),a}let i=n;return n&&n.expires_in&&(i.expiry_date=new Date().getTime()+n.expires_in*1e3,delete i.expires_in),this.emit("tokens",i),{tokens:i,res:null}})}fetchIdToken(e){return P(this,null,function*(){let r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${e}`,n;try{let i={property:r};n=yield Iw.instance(i)}catch(i){throw i instanceof Error&&(i.message=`Could not fetch ID token: ${i.message}`),i}return n})}wrapError(e){let r=e.response;r&&r.status&&(e.code=r.status.toString(),r.status===403?e.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+e.message:r.status===404&&(e.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+e.message))}};rd.Compute=Nw});var U0=de(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.IdTokenClient=void 0;var j4=Hs(),Rw=class extends j4.OAuth2Client{constructor(e){super();this.targetAudience=e.targetAudience,this.idTokenProvider=e.idTokenProvider}getRequestMetadataAsync(e){return P(this,null,function*(){if(!this.credentials.id_token||(this.credentials.expiry_date||0)<Date.now()){let n=yield this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:n,expiry_date:this.getIdTokenExpiryDate(n)}}return{headers:{Authorization:"Bearer "+this.credentials.id_token}}})}getIdTokenExpiryDate(e){let r=e.split(".")[1];if(r)return JSON.parse(Buffer.from(r,"base64").toString("ascii")).exp*1e3}};nd.IdTokenClient=Rw});var F0=de(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.getEnv=Ta.clear=Ta.GCPEnv=void 0;var Dw=Hf(),ns;(function(t){t.APP_ENGINE="APP_ENGINE",t.KUBERNETES_ENGINE="KUBERNETES_ENGINE",t.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",t.COMPUTE_ENGINE="COMPUTE_ENGINE",t.CLOUD_RUN="CLOUD_RUN",t.NONE="NONE"})(ns=Ta.GCPEnv||(Ta.GCPEnv={}));var xu;function Y4(){xu=void 0}Ta.clear=Y4;function W4(){return P(this,null,function*(){return xu||(xu=z4(),xu)})}Ta.getEnv=W4;function z4(){return P(this,null,function*(){let t=ns.NONE;return Q4()?t=ns.APP_ENGINE:X4()?t=ns.CLOUD_FUNCTIONS:(yield $4())?(yield Z4())?t=ns.KUBERNETES_ENGINE:J4()?t=ns.CLOUD_RUN:t=ns.COMPUTE_ENGINE:t=ns.NONE,t})}function Q4(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function X4(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function J4(){return!!process.env.K_CONFIGURATION}function Z4(){return P(this,null,function*(){try{return yield Dw.instance("attributes/cluster-name"),!0}catch(t){return!1}})}function $4(){return P(this,null,function*(){return Dw.isAvailable()})}});var q0=de(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.GaxiosError=void 0;var Bw=class extends Error{constructor(e,r,n){super(e);this.response=n,this.config=r,this.code=n.status.toString()}};id.GaxiosError=Bw});var Lw=de(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});ad.getRetryConfig=void 0;function eP(t){return P(this,null,function*(){var e;let r=Ow(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,t.config.retryConfig=r,!(yield(r.shouldRetry||tP)(t)))return{shouldRetry:!1,config:t.config};let s=(r.currentRetryAttempt?0:(e=r.retryDelay)!==null&&e!==void 0?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;let l=new Promise(u=>{setTimeout(u,s)});return r.onRetryAttempt&&r.onRetryAttempt(t),yield l,{shouldRetry:!0,config:t.config}})}ad.getRetryConfig=eP;function tP(t){let e=Ow(t);if(t.name==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let a=t.response.status;if(a>=n&&a<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function Ow(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}});var Gw=de(el=>{"use strict";var sd=el&&el.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(el,"__esModule",{value:!0});el.Gaxios=void 0;var rP=sd(g0()),nP=require("https"),iP=sd(m0()),aP=sd(require("querystring")),sP=sd(y0()),Pw=require("url"),oP=q0(),lP=Lw(),uP=fP()?window.fetch:iP.default;function cP(){return typeof window!="undefined"&&!!window}function fP(){return cP()&&!!window.fetch}function dP(){return typeof Buffer!="undefined"}function Mw(t,e){return!!Uw(t,e)}function Uw(t,e){e=e.toLowerCase();for(let r of Object.keys((t==null?void 0:t.headers)||{}))if(e===r.toLowerCase())return t.headers[r]}var G0;function Fw(){let t=process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy;return t&&(G0=T0()),t}Fw();function hP(t){var e;let r=(e=process.env.NO_PROXY)!==null&&e!==void 0?e:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new Pw.URL(t);return!!n.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function pP(t){if(!hP(t))return Fw()}var qw=class{constructor(e){this.agentCache=new Map,this.defaults=e||{}}request(){return P(this,arguments,function*(e={}){return e=this.validateOpts(e),this._request(e)})}_defaultAdapter(e){return P(this,null,function*(){let n=yield(e.fetchImplementation||uP)(e.url,e),i=yield this.getResponseData(e,n);return this.translateResponse(e,n,i)})}_request(){return P(this,arguments,function*(e={}){try{let r;if(e.adapter?r=yield e.adapter(e,this._defaultAdapter.bind(this)):r=yield this._defaultAdapter(e),!e.validateStatus(r.status))throw new oP.GaxiosError(`Request failed with status code ${r.status}`,e,r);return r}catch(r){let n=r;n.config=e;let{shouldRetry:i,config:a}=yield lP.getRetryConfig(r);if(i&&a)return n.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(n.config);throw n}})}getResponseData(e,r){return P(this,null,function*(){switch(e.responseType){case"stream":return r.body;case"json":{let n=yield r.text();try{n=JSON.parse(n)}catch(i){}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}})}validateOpts(e){let r=rP.default(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let a=r.paramsSerializer(r.params);a.startsWith("?")&&(a=a.slice(1));let s=r.url.includes("?")?"&":"?";r.url=r.url+s+a}if(typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){let a=typeof FormData=="undefined"?!1:(r==null?void 0:r.data)instanceof FormData;sP.default.readable(r.data)?r.body=r.data:dP()&&Buffer.isBuffer(r.data)?(r.body=r.data,Mw(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?a||(Uw(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(Mw(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=pP(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let a=new Pw.URL(i);r.agent=new G0({port:a.port,host:a.host,protocol:a.protocol,cert:r.cert,key:r.key})}else r.agent=new G0(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new nP.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(e){return e>=200&&e<300}paramsSerializer(e){return aP.default.stringify(e)}translateResponse(e,r,n){let i={};return r.headers.forEach((a,s)=>{i[s]=a}),{config:e,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};el.Gaxios=qw});var Hw=de(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.request=Yi.instance=Yi.Gaxios=void 0;var Vw=Gw();Object.defineProperty(Yi,"Gaxios",{enumerable:!0,get:function(){return Vw.Gaxios}});var gP=q0();Object.defineProperty(Yi,"GaxiosError",{enumerable:!0,get:function(){return gP.GaxiosError}});Yi.instance=new Vw.Gaxios;function mP(t){return P(this,null,function*(){return Yi.instance.request(t)})}Yi.request=mP});var V0=de((VV,Kw)=>{var od=$o().Buffer,yP=require("stream"),vP=require("util");function ld(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=od.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=od.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}vP.inherits(ld,yP);ld.prototype.write=function(e){this.buffer=od.concat([this.buffer,od.from(e)]),this.emit("data",e)};ld.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};Kw.exports=ld});var Yw=de((HV,jw)=>{"use strict";var Tu=require("buffer").Buffer,H0=require("buffer").SlowBuffer;jw.exports=ud;function ud(t,e){if(!Tu.isBuffer(t)||!Tu.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}ud.install=function(){Tu.prototype.equal=H0.prototype.equal=function(e){return ud(this,e)}};var _P=Tu.prototype.equal,wP=H0.prototype.equal;ud.restore=function(){Tu.prototype.equal=_P,H0.prototype.equal=wP}});var Y0=de((KV,tE)=>{var EP=Yw(),tl=$o().Buffer,Wi=require("crypto"),Ww=O0(),zw=require("util"),CP=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,Su="secret must be a string or buffer",rl="key must be a string or a buffer",bP="key must be a string, a buffer or an object",K0=typeof Wi.createPublicKey=="function";K0&&(rl+=" or a KeyObject",Su+="or a KeyObject");function Qw(t){if(!tl.isBuffer(t)&&typeof t!="string"&&(!K0||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw Ei(rl)}function Xw(t){if(!tl.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw Ei(bP)}function xP(t){if(!tl.isBuffer(t)){if(typeof t=="string")return t;if(!K0||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw Ei(Su)}}function j0(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Jw(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function Ei(t){var e=[].slice.call(arguments,1),r=zw.format.bind(zw,t).apply(null,e);return new TypeError(r)}function TP(t){return tl.isBuffer(t)||typeof t=="string"}function Au(t){return TP(t)||(t=JSON.stringify(t)),t}function Zw(t){return function(r,n){xP(n),r=Au(r);var i=Wi.createHmac("sha"+t,n),a=(i.update(r),i.digest("base64"));return j0(a)}}function SP(t){return function(r,n,i){var a=Zw(t)(r,i);return EP(tl.from(n),tl.from(a))}}function $w(t){return function(r,n){Xw(n),r=Au(r);var i=Wi.createSign("RSA-SHA"+t),a=(i.update(r),i.sign(n,"base64"));return j0(a)}}function eE(t){return function(r,n,i){Qw(i),r=Au(r),n=Jw(n);var a=Wi.createVerify("RSA-SHA"+t);return a.update(r),a.verify(i,n,"base64")}}function AP(t){return function(r,n){Xw(n),r=Au(r);var i=Wi.createSign("RSA-SHA"+t),a=(i.update(r),i.sign({key:n,padding:Wi.constants.RSA_PKCS1_PSS_PADDING,saltLength:Wi.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return j0(a)}}function kP(t){return function(r,n,i){Qw(i),r=Au(r),n=Jw(n);var a=Wi.createVerify("RSA-SHA"+t);return a.update(r),a.verify({key:i,padding:Wi.constants.RSA_PKCS1_PSS_PADDING,saltLength:Wi.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function IP(t){var e=$w(t);return function(){var n=e.apply(null,arguments);return n=Ww.derToJose(n,"ES"+t),n}}function NP(t){var e=eE(t);return function(n,i,a){i=Ww.joseToDer(i,"ES"+t).toString("base64");var s=e(n,i,a);return s}}function RP(){return function(){return""}}function DP(){return function(e,r){return r===""}}tE.exports=function(e){var r={hs:Zw,rs:$w,ps:AP,es:IP,none:RP},n={hs:SP,rs:eE,ps:kP,es:NP,none:DP},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!i)throw Ei(CP,e);var a=(i[1]||i[3]).toLowerCase(),s=i[2];return{sign:r[a](s),verify:n[a](s)}}});var W0=de((jV,rE)=>{var BP=require("buffer").Buffer;rE.exports=function(e){return typeof e=="string"?e:typeof e=="number"||BP.isBuffer(e)?e.toString():JSON.stringify(e)}});var lE=de((YV,oE)=>{var OP=$o().Buffer,nE=V0(),LP=Y0(),PP=require("stream"),iE=W0(),z0=require("util");function aE(t,e){return OP.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function MP(t,e,r){r=r||"utf8";var n=aE(iE(t),"binary"),i=aE(iE(e),r);return z0.format("%s.%s",n,i)}function sE(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,a=LP(e.alg),s=MP(e,r,i),l=a.sign(s,n);return z0.format("%s.%s",s,l)}function cd(t){var e=t.secret||t.privateKey||t.key,r=new nE(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new nE(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}z0.inherits(cd,PP);cd.prototype.sign=function(){try{var e=sE({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};cd.sign=sE;oE.exports=cd});var vE=de((WV,yE)=>{var uE=$o().Buffer,cE=V0(),UP=Y0(),FP=require("stream"),fE=W0(),qP=require("util"),GP=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function VP(t){return Object.prototype.toString.call(t)==="[object Object]"}function HP(t){if(VP(t))return t;try{return JSON.parse(t)}catch(e){return}}function dE(t){var e=t.split(".",1)[0];return HP(uE.from(e,"base64").toString("binary"))}function KP(t){return t.split(".",2).join(".")}function hE(t){return t.split(".")[2]}function jP(t,e){e=e||"utf8";var r=t.split(".")[1];return uE.from(r,"base64").toString(e)}function pE(t){return GP.test(t)&&!!dE(t)}function gE(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=fE(t);var i=hE(t),a=KP(t),s=UP(e);return s.verify(a,i,r)}function mE(t,e){if(e=e||{},t=fE(t),!pE(t))return null;var r=dE(t);if(!r)return null;var n=jP(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:hE(t)}}function nl(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new cE(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new cE(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}qP.inherits(nl,FP);nl.prototype.verify=function(){try{var e=gE(this.signature.buffer,this.algorithm,this.key.buffer),r=mE(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};nl.decode=mE;nl.isValid=pE;nl.verify=gE;yE.exports=nl});var Q0=de(is=>{var _E=lE(),fd=vE(),YP=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];is.ALGORITHMS=YP;is.sign=_E.sign;is.verify=fd.verify;is.decode=fd.decode;is.isValid=fd.isValid;is.createSign=function(e){return new _E(e)};is.createVerify=function(e){return new fd(e)}});var vt=de((QV,wE)=>{wE.exports={options:{usePureJavaScript:!1}}});var bE=de((XV,CE)=>{var X0={};CE.exports=X0;var EE={};X0.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=WP(t,e);else{var i=0,a=e.length,s=e.charAt(0),l=[0];for(i=0;i<t.length;++i){for(var u=0,f=t[i];u<l.length;++u)f+=l[u]<<8,l[u]=f%a,f=f/a|0;for(;f>0;)l.push(f%a),f=f/a|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=l.length-1;i>=0;--i)n+=e[l[i]]}if(r){var d=new RegExp(".{1,"+r+"}","g");n=n.match(d).join(`\r
`)}return n};X0.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=EE[e];if(!r){r=EE[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,a=e.charAt(0),s=[0],n=0;n<t.length;n++){var l=r[t.charCodeAt(n)];if(l===void 0)return;for(var u=0,f=l;u<s.length;++u)f+=s[u]*i,s[u]=f&255,f>>=8;for(;f>0;)s.push(f&255),f>>=8}for(var d=0;t[d]===a&&d<t.length-1;++d)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function WP(t,e){var r=0,n=e.length,i=e.charAt(0),a=[0];for(r=0;r<t.length();++r){for(var s=0,l=t.at(r);s<a.length;++s)l+=a[s]<<8,a[s]=l%n,l=l/n|0;for(;l>0;)a.push(l%n),l=l/n|0}var u="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)u+=i;for(r=a.length-1;r>=0;--r)u+=e[a[r]];return u}});var qt=de((JV,AE)=>{var xE=vt(),TE=bE(),K=AE.exports=xE.util=xE.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){K.nextTick=process.nextTick,typeof setImmediate=="function"?K.setImmediate=setImmediate:K.setImmediate=K.nextTick;return}if(typeof setImmediate=="function"){K.setImmediate=function(){return setImmediate.apply(void 0,arguments)},K.nextTick=function(l){return setImmediate(l)};return}if(K.setImmediate=function(l){setTimeout(l,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let l=function(u){if(u.source===window&&u.data===t){u.stopPropagation();var f=e.slice();e.length=0,f.forEach(function(d){d()})}};var s=l,t="forge.setImmediate",e=[];K.setImmediate=function(u){e.push(u),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var u=e.slice();e.length=0,u.forEach(function(f){f()})}).observe(i,{attributes:!0});var a=K.setImmediate;K.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),a(u)):(e.push(u),e.length===1&&i.setAttribute("a",n=!n))}}K.nextTick=K.setImmediate})();K.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;K.globalScope=function(){return K.isNodejs?global:typeof self=="undefined"?window:self}();K.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};K.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};K.isArrayBufferView=function(t){return t&&K.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function ku(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}K.ByteBuffer=J0;function J0(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(K.isArrayBuffer(t)||K.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(n){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof J0||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}K.ByteStringBuffer=J0;var zP=4096;K.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>zP&&(this.data.substr(0,1),this._constructedStringLength=0)};K.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};K.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};K.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};K.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};K.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};K.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(K.encodeUtf8(t))};K.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};K.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};K.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};K.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};K.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};K.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};K.ByteStringBuffer.prototype.putInt=function(t,e){ku(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};K.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};K.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};K.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};K.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};K.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};K.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};K.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};K.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};K.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};K.ByteStringBuffer.prototype.getInt=function(t){ku(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};K.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};K.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};K.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};K.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};K.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};K.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};K.ByteStringBuffer.prototype.copy=function(){var t=K.createBuffer(this.data);return t.read=this.read,t};K.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};K.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};K.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};K.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};K.ByteStringBuffer.prototype.toString=function(){return K.decodeUtf8(this.bytes())};function QP(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=K.isArrayBuffer(t),n=K.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}K.DataBuffer=QP;K.DataBuffer.prototype.length=function(){return this.write-this.read};K.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};K.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};K.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};K.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};K.DataBuffer.prototype.putBytes=function(t,e){if(K.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(K.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof K.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&K.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof K.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var a;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=K.binary.hex.decode(t,a,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=K.binary.base64.decode(t,a,this.write),this;if(e==="utf8"&&(t=K.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=K.binary.raw.decode(a),this;if(e==="utf16")return this.accommodate(t.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=K.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};K.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};K.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};K.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};K.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};K.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};K.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};K.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};K.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};K.DataBuffer.prototype.putInt=function(t,e){ku(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};K.DataBuffer.prototype.putSignedInt=function(t,e){return ku(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};K.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};K.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};K.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};K.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};K.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};K.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};K.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};K.DataBuffer.prototype.getInt=function(t){ku(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};K.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};K.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};K.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};K.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};K.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};K.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};K.DataBuffer.prototype.copy=function(){return new K.DataBuffer(this)};K.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};K.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};K.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};K.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};K.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return K.binary.raw.encode(e);if(t==="hex")return K.binary.hex.encode(e);if(t==="base64")return K.binary.base64.encode(e);if(t==="utf8")return K.text.utf8.decode(e);if(t==="utf16")return K.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};K.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=K.encodeUtf8(t)),new K.ByteBuffer(t)};K.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};K.xorBytes=function(t,e,r){for(var n="",i="",a="",s=0,l=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),l>=10&&(n+=a,a="",l=0),a+=String.fromCharCode(i),++l;return n+=a,n};K.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};K.bytesToHex=function(t){return K.createBuffer(t).toHex()};K.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var as="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ss=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],SE="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";K.encode64=function(t,e){for(var r="",n="",i,a,s,l=0;l<t.length;)i=t.charCodeAt(l++),a=t.charCodeAt(l++),s=t.charCodeAt(l++),r+=as.charAt(i>>2),r+=as.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=as.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":as.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};K.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,a,s=0;s<t.length;)r=ss[t.charCodeAt(s++)-43],n=ss[t.charCodeAt(s++)-43],i=ss[t.charCodeAt(s++)-43],a=ss[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),a!==64&&(e+=String.fromCharCode((i&3)<<6|a)));return e};K.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};K.decodeUtf8=function(t){return decodeURIComponent(escape(t))};K.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:TE.encode,decode:TE.decode}};K.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};K.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n};K.binary.hex.encode=K.bytesToHex;K.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,a=r;for(t.length&1&&(i=1,n[a++]=parseInt(t[0],16));i<t.length;i+=2)n[a++]=parseInt(t.substr(i,2),16);return e?a-r:n};K.binary.base64.encode=function(t,e){for(var r="",n="",i,a,s,l=0;l<t.byteLength;)i=t[l++],a=t[l++],s=t[l++],r+=as.charAt(i>>2),r+=as.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=as.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":as.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};K.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,s,l,u=0,f=r;u<t.length;)i=ss[t.charCodeAt(u++)-43],a=ss[t.charCodeAt(u++)-43],s=ss[t.charCodeAt(u++)-43],l=ss[t.charCodeAt(u++)-43],n[f++]=i<<2|a>>4,s!==64&&(n[f++]=(a&15)<<4|s>>2,l!==64&&(n[f++]=(s&3)<<6|l));return e?f-r:n.subarray(0,f)};K.binary.base58.encode=function(t,e){return K.binary.baseN.encode(t,SE,e)};K.binary.base58.decode=function(t,e){return K.binary.baseN.decode(t,SE,e)};K.text={utf8:{},utf16:{}};K.text.utf8.encode=function(t,e,r){t=K.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n};K.text.utf8.decode=function(t){return K.decodeUtf8(String.fromCharCode.apply(null,t))};K.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,s=r,l=0;l<t.length;++l)i[s++]=t.charCodeAt(l),a+=2;return e?a-r:n};K.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};K.deflate=function(t,e,r){if(e=K.decode64(t.deflate(K.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};K.inflate=function(t,e,r){var n=t.inflate(K.encode64(e)).rval;return n===null?null:K.decode64(n)};var Z0=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=K.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},$0=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(K.decode64(r))),r},XP=function(t,e,r,n){var i=$0(t,e);i===null&&(i={}),i[r]=n,Z0(t,e,i)},JP=function(t,e,r){var n=$0(t,e);return n!==null&&(n=r in n?n[r]:null),n},ZP=function(t,e,r){var n=$0(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),Z0(t,e,n)}},$P=function(t,e){Z0(t,e,null)},dd=function(t,e,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,a=!1,s=null;for(var l in r){i=r[l];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),a=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),a=!0)}catch(u){s=u}if(a)break}if(!a)throw s;return n};K.setItem=function(t,e,r,n,i){dd(XP,arguments,i)};K.getItem=function(t,e,r,n){return dd(JP,arguments,n)};K.removeItem=function(t,e,r,n){dd(ZP,arguments,n)};K.clearItems=function(t,e,r){dd($P,arguments,r)};K.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};K.format=function(t){for(var e=/%./g,r,n,i=0,a=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&a.push(n),s=e.lastIndex;var l=r[0][1];switch(l){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+l+"?>")}}return a.push(t.substring(s)),a.join("")};K.formatNumber=function(t,e,r,n){var i=t,a=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,l=n===void 0?".":n,u=i<0?"-":"",f=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",d=f.length>3?f.length%3:0;return u+(d?f.substr(0,d)+l:"")+f.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+l)+(a?s+Math.abs(i-f).toFixed(a).slice(2):"")};K.formatSize=function(t){return t>=1073741824?t=K.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=K.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=K.formatNumber(t/1024,0)+" KiB":t=K.formatNumber(t,0)+" bytes",t};K.bytesFromIP=function(t){return t.indexOf(".")!==-1?K.bytesFromIPv4(t):t.indexOf(":")!==-1?K.bytesFromIPv6(t):null};K.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=K.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};K.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=K.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var a=K.hexToBytes(t[i]);a.length<2&&n.putByte(0),n.putBytes(a)}return n.getBytes()};K.bytesToIP=function(t){return t.length===4?K.bytesToIPv4(t):t.length===16?K.bytesToIPv6(t):null};K.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};K.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var a=K.bytesToHex(t[i]+t[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=r[r.length-1],l=e.length;!s||l!==s.end+1?r.push({start:l,end:l}):(s.end=l,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(a)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),u.start===0&&e.unshift(""),u.end===7&&e.push(""))}return e.join(":")};K.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in K&&!t.update)return e(null,K.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return K.cores=navigator.hardwareConcurrency,e(null,K.cores);if(typeof Worker=="undefined")return K.cores=1,e(null,K.cores);if(typeof Blob=="undefined")return K.cores=2,e(null,K.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var l=Date.now(),u=l+4;Date.now()<u;);self.postMessage({st:l,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,l,u){if(l===0){var f=Math.floor(s.reduce(function(d,h){return d+h},0)/s.length);return K.cores=Math.max(1,f),URL.revokeObjectURL(r),e(null,K.cores)}i(u,function(d,h){s.push(a(u,h)),n(s,l-1,u)})}function i(s,l){for(var u=[],f=[],d=0;d<s;++d){var h=new Worker(r);h.addEventListener("message",function(g){if(f.push(g.data),f.length===s){for(var m=0;m<s;++m)u[m].terminate();l(null,f)}}),u.push(h)}for(var d=0;d<s;++d)u[d].postMessage(d)}function a(s,l){for(var u=[],f=0;f<s;++f)for(var d=l[f],h=u[f]=[],g=0;g<s;++g)if(f!==g){var m=l[g];(d.st>m.st&&d.st<m.et||m.st>d.st&&m.st<d.et)&&h.push(g)}return u.reduce(function(y,_){return Math.max(y,_.length)},0)}}});var hd=de((ZV,kE)=>{var qr=vt();qt();kE.exports=qr.cipher=qr.cipher||{};qr.cipher.algorithms=qr.cipher.algorithms||{};qr.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=qr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new qr.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};qr.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=qr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new qr.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};qr.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),qr.cipher.algorithms[t]=e};qr.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in qr.cipher.algorithms?qr.cipher.algorithms[t]:null};var eg=qr.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};eg.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=qr.util.createBuffer(),this.output=t.output||qr.util.createBuffer(),this.mode.start(e)};eg.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};eg.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var rg=de(($V,IE)=>{var Gr=vt();qt();Gr.cipher=Gr.cipher||{};var xt=IE.exports=Gr.cipher.modes=Gr.cipher.modes||{};xt.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};xt.ecb.prototype.start=function(t){};xt.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};xt.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};xt.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};xt.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};xt.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};xt.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=pd(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};xt.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};xt.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};xt.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};xt.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};xt.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Gr.util.createBuffer(),this._partialBytes=0};xt.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=pd(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};xt.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};xt.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};xt.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Gr.util.createBuffer(),this._partialBytes=0};xt.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=pd(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};xt.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};xt.ofb.prototype.decrypt=xt.ofb.prototype.encrypt;xt.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Gr.util.createBuffer(),this._partialBytes=0};xt.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=pd(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};xt.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}gd(this._inBlock)};xt.ctr.prototype.decrypt=xt.ctr.prototype.encrypt;xt.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Gr.util.createBuffer(),this._partialBytes=0,this._R=3774873600};xt.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Gr.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Gr.util.createBuffer(t.additionalData):r=Gr.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Gr.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(tg(n*8)))}this._inBlock=this._j0.slice(0),gd(this._inBlock),this._partialBytes=0,r=Gr.util.createBuffer(r),this._aDataLength=tg(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};xt.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),gd(this._inBlock)};xt.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),gd(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};xt.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Gr.util.createBuffer();var n=this._aDataLength.concat(tg(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};xt.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var a=t[i/32|0]&1<<31-i%32;a&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};xt.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};xt.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,a=this._m[r][i];e[0]^=a[0],e[1]^=a[1],e[2]^=a[2],e[3]^=a[3]}return e};xt.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};xt.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,a=new Array(i),s=0;s<i;++s){var l=[0,0,0,0],u=s/n|0,f=(n-1-s%n)*e;l[u]=1<<e-1<<f,a[s]=this.generateSubHashTable(this.multiply(l,t),e)}return a};xt.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var s=1;s<a;++s){var l=i[a],u=i[s];i[a+s]=[l[0]^u[0],l[1]^u[1],l[2]^u[2],l[3]^u[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var f=i[a^n];i[a]=[t[0]^f[0],t[1]^f[1],t[2]^f[2],t[3]^f[3]]}return i};function pd(t,e){if(typeof t=="string"&&(t=Gr.util.createBuffer(t)),Gr.util.isArray(t)&&t.length>4){var r=t;t=Gr.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Gr.util.isArray(t)){for(var i=[],a=e/4,n=0;n<a;++n)i.push(t.getInt32());t=i}return t}function gd(t){t[t.length-1]=t[t.length-1]+1&4294967295}function tg(t){return[t/4294967296|0,t&4294967295]}});var os=de((e7,BE)=>{var ir=vt();hd();rg();qt();BE.exports=ir.aes=ir.aes||{};ir.aes.startEncrypting=function(t,e,r,n){var i=md({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};ir.aes.createEncryptionCipher=function(t,e){return md({key:t,output:null,decrypt:!1,mode:e})};ir.aes.startDecrypting=function(t,e,r,n){var i=md({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};ir.aes.createDecryptionCipher=function(t,e){return md({key:t,output:null,decrypt:!0,mode:e})};ir.aes.Algorithm=function(t,e){ng||RE();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return ag(r._w,n,i,!1)},decrypt:function(n,i){return ag(r._w,n,i,!0)}}}),r._init=!1};ir.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=ir.util.createBuffer(e);else if(ir.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=ir.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!ir.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!ir.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=DE(e,t.decrypt&&!s),this._init=!0}};ir.aes._expandKey=function(t,e){return ng||RE(),DE(t,e)};ir.aes._updateBlock=ag;il("AES-ECB",ir.cipher.modes.ecb);il("AES-CBC",ir.cipher.modes.cbc);il("AES-CFB",ir.cipher.modes.cfb);il("AES-OFB",ir.cipher.modes.ofb);il("AES-CTR",ir.cipher.modes.ctr);il("AES-GCM",ir.cipher.modes.gcm);function il(t,e){var r=function(){return new ir.aes.Algorithm(t,e)};ir.cipher.registerAlgorithm(t,r)}var ng=!1,al=4,gn,ig,NE,Ks,Ci;function RE(){ng=!0,NE=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;gn=new Array(256),ig=new Array(256),Ks=new Array(4),Ci=new Array(4);for(var e=0;e<4;++e)Ks[e]=new Array(256),Ci[e]=new Array(256);for(var r=0,n=0,i,a,s,l,u,f,d,e=0;e<256;++e){l=n^n<<1^n<<2^n<<3^n<<4,l=l>>8^l&255^99,gn[r]=l,ig[l]=r,u=t[l],i=t[r],a=t[i],s=t[a],f=u<<24^l<<16^l<<8^(l^u),d=(i^a^s)<<24^(r^s)<<16^(r^a^s)<<8^(r^i^s);for(var h=0;h<4;++h)Ks[h][r]=f,Ci[h][l]=d,f=f<<24|f>>>8,d=d<<24|d>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function DE(t,e){for(var r=t.slice(0),n,i=1,a=r.length,s=a+6+1,l=al*s,u=a;u<l;++u)n=r[u-1],u%a==0?(n=gn[n>>>16&255]<<24^gn[n>>>8&255]<<16^gn[n&255]<<8^gn[n>>>24]^NE[i]<<24,i++):a>6&&u%a==4&&(n=gn[n>>>24]<<24^gn[n>>>16&255]<<16^gn[n>>>8&255]<<8^gn[n&255]),r[u]=r[u-a]^n;if(e){var f,d=Ci[0],h=Ci[1],g=Ci[2],m=Ci[3],y=r.slice(0);l=r.length;for(var u=0,_=l-al;u<l;u+=al,_-=al)if(u===0||u===l-al)y[u]=r[_],y[u+1]=r[_+3],y[u+2]=r[_+2],y[u+3]=r[_+1];else for(var w=0;w<al;++w)f=r[_+w],y[u+(3&-w)]=d[gn[f>>>24]]^h[gn[f>>>16&255]]^g[gn[f>>>8&255]]^m[gn[f&255]];r=y}return r}function ag(t,e,r,n){var i=t.length/4-1,a,s,l,u,f;n?(a=Ci[0],s=Ci[1],l=Ci[2],u=Ci[3],f=ig):(a=Ks[0],s=Ks[1],l=Ks[2],u=Ks[3],f=gn);var d,h,g,m,y,_,w;d=e[0]^t[0],h=e[n?3:1]^t[1],g=e[2]^t[2],m=e[n?1:3]^t[3];for(var E=3,S=1;S<i;++S)y=a[d>>>24]^s[h>>>16&255]^l[g>>>8&255]^u[m&255]^t[++E],_=a[h>>>24]^s[g>>>16&255]^l[m>>>8&255]^u[d&255]^t[++E],w=a[g>>>24]^s[m>>>16&255]^l[d>>>8&255]^u[h&255]^t[++E],m=a[m>>>24]^s[d>>>16&255]^l[h>>>8&255]^u[g&255]^t[++E],d=y,h=_,g=w;r[0]=f[d>>>24]<<24^f[h>>>16&255]<<16^f[g>>>8&255]<<8^f[m&255]^t[++E],r[n?3:1]=f[h>>>24]<<24^f[g>>>16&255]<<16^f[m>>>8&255]<<8^f[d&255]^t[++E],r[2]=f[g>>>24]<<24^f[m>>>16&255]<<16^f[d>>>8&255]<<8^f[h&255]^t[++E],r[n?1:3]=f[m>>>24]<<24^f[d>>>16&255]<<16^f[h>>>8&255]<<8^f[g&255]^t[++E]}function md(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=ir.cipher.createDecipher(r,t.key):n=ir.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(a,s){var l=null;s instanceof ir.util.ByteBuffer&&(l=s,s={}),s=s||{},s.output=l,s.iv=a,i.call(n,s)},n}});var ls=de((t7,OE)=>{var Iu=vt();Iu.pki=Iu.pki||{};var sg=OE.exports=Iu.pki.oids=Iu.oids=Iu.oids||{};function Ee(t,e){sg[t]=e,sg[e]=t}function jt(t,e){sg[t]=e}Ee("1.2.840.113549.1.1.1","rsaEncryption");Ee("1.2.840.113549.1.1.4","md5WithRSAEncryption");Ee("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Ee("1.2.840.113549.1.1.7","RSAES-OAEP");Ee("1.2.840.113549.1.1.8","mgf1");Ee("1.2.840.113549.1.1.9","pSpecified");Ee("1.2.840.113549.1.1.10","RSASSA-PSS");Ee("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Ee("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Ee("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Ee("1.3.101.112","EdDSA25519");Ee("1.2.840.10040.4.3","dsa-with-sha1");Ee("1.3.14.3.2.7","desCBC");Ee("1.3.14.3.2.26","sha1");Ee("1.3.14.3.2.29","sha1WithRSASignature");Ee("2.16.840.1.101.3.4.2.1","sha256");Ee("2.16.840.1.101.3.4.2.2","sha384");Ee("2.16.840.1.101.3.4.2.3","sha512");Ee("2.16.840.1.101.3.4.2.4","sha224");Ee("2.16.840.1.101.3.4.2.5","sha512-224");Ee("2.16.840.1.101.3.4.2.6","sha512-256");Ee("1.2.840.113549.2.2","md2");Ee("1.2.840.113549.2.5","md5");Ee("1.2.840.113549.1.7.1","data");Ee("1.2.840.113549.1.7.2","signedData");Ee("1.2.840.113549.1.7.3","envelopedData");Ee("1.2.840.113549.1.7.4","signedAndEnvelopedData");Ee("1.2.840.113549.1.7.5","digestedData");Ee("1.2.840.113549.1.7.6","encryptedData");Ee("1.2.840.113549.1.9.1","emailAddress");Ee("1.2.840.113549.1.9.2","unstructuredName");Ee("1.2.840.113549.1.9.3","contentType");Ee("1.2.840.113549.1.9.4","messageDigest");Ee("1.2.840.113549.1.9.5","signingTime");Ee("1.2.840.113549.1.9.6","counterSignature");Ee("1.2.840.113549.1.9.7","challengePassword");Ee("1.2.840.113549.1.9.8","unstructuredAddress");Ee("1.2.840.113549.1.9.14","extensionRequest");Ee("1.2.840.113549.1.9.20","friendlyName");Ee("1.2.840.113549.1.9.21","localKeyId");Ee("1.2.840.113549.1.9.22.1","x509Certificate");Ee("1.2.840.113549.1.12.10.1.1","keyBag");Ee("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Ee("1.2.840.113549.1.12.10.1.3","certBag");Ee("1.2.840.113549.1.12.10.1.4","crlBag");Ee("1.2.840.113549.1.12.10.1.5","secretBag");Ee("1.2.840.113549.1.12.10.1.6","safeContentsBag");Ee("1.2.840.113549.1.5.13","pkcs5PBES2");Ee("1.2.840.113549.1.5.12","pkcs5PBKDF2");Ee("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Ee("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Ee("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Ee("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Ee("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Ee("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Ee("1.2.840.113549.2.7","hmacWithSHA1");Ee("1.2.840.113549.2.8","hmacWithSHA224");Ee("1.2.840.113549.2.9","hmacWithSHA256");Ee("1.2.840.113549.2.10","hmacWithSHA384");Ee("1.2.840.113549.2.11","hmacWithSHA512");Ee("1.2.840.113549.3.7","des-EDE3-CBC");Ee("2.16.840.1.101.3.4.1.2","aes128-CBC");Ee("2.16.840.1.101.3.4.1.22","aes192-CBC");Ee("2.16.840.1.101.3.4.1.42","aes256-CBC");Ee("2.5.4.3","commonName");Ee("2.5.4.4","surname");Ee("2.5.4.5","serialNumber");Ee("2.5.4.6","countryName");Ee("2.5.4.7","localityName");Ee("2.5.4.8","stateOrProvinceName");Ee("2.5.4.9","streetAddress");Ee("2.5.4.10","organizationName");Ee("2.5.4.11","organizationalUnitName");Ee("2.5.4.12","title");Ee("2.5.4.13","description");Ee("2.5.4.15","businessCategory");Ee("2.5.4.17","postalCode");Ee("2.5.4.42","givenName");Ee("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Ee("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Ee("2.16.840.1.113730.1.1","nsCertType");Ee("2.16.840.1.113730.1.13","nsComment");jt("2.5.29.1","authorityKeyIdentifier");jt("2.5.29.2","keyAttributes");jt("2.5.29.3","certificatePolicies");jt("2.5.29.4","keyUsageRestriction");jt("2.5.29.5","policyMapping");jt("2.5.29.6","subtreesConstraint");jt("2.5.29.7","subjectAltName");jt("2.5.29.8","issuerAltName");jt("2.5.29.9","subjectDirectoryAttributes");jt("2.5.29.10","basicConstraints");jt("2.5.29.11","nameConstraints");jt("2.5.29.12","policyConstraints");jt("2.5.29.13","basicConstraints");Ee("2.5.29.14","subjectKeyIdentifier");Ee("2.5.29.15","keyUsage");jt("2.5.29.16","privateKeyUsagePeriod");Ee("2.5.29.17","subjectAltName");Ee("2.5.29.18","issuerAltName");Ee("2.5.29.19","basicConstraints");jt("2.5.29.20","cRLNumber");jt("2.5.29.21","cRLReason");jt("2.5.29.22","expirationDate");jt("2.5.29.23","instructionCode");jt("2.5.29.24","invalidityDate");jt("2.5.29.25","cRLDistributionPoints");jt("2.5.29.26","issuingDistributionPoint");jt("2.5.29.27","deltaCRLIndicator");jt("2.5.29.28","issuingDistributionPoint");jt("2.5.29.29","certificateIssuer");jt("2.5.29.30","nameConstraints");Ee("2.5.29.31","cRLDistributionPoints");Ee("2.5.29.32","certificatePolicies");jt("2.5.29.33","policyMappings");jt("2.5.29.34","policyConstraints");Ee("2.5.29.35","authorityKeyIdentifier");jt("2.5.29.36","policyConstraints");Ee("2.5.29.37","extKeyUsage");jt("2.5.29.46","freshestCRL");jt("2.5.29.54","inhibitAnyPolicy");Ee("1.3.6.1.4.1.11129.2.4.2","timestampList");Ee("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Ee("1.3.6.1.5.5.7.3.1","serverAuth");Ee("1.3.6.1.5.5.7.3.2","clientAuth");Ee("1.3.6.1.5.5.7.3.3","codeSigning");Ee("1.3.6.1.5.5.7.3.4","emailProtection");Ee("1.3.6.1.5.5.7.3.8","timeStamping")});var bi=de((r7,PE)=>{var lr=vt();qt();ls();var ke=PE.exports=lr.asn1=lr.asn1||{};ke.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};ke.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};ke.create=function(t,e,r,n,i){if(lr.util.isArray(n)){for(var a=[],s=0;s<n.length;++s)n[s]!==void 0&&a.push(n[s]);n=a}var l={tagClass:t,type:e,constructed:r,composed:r||lr.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(l.bitStringContents=i.bitStringContents,l.original=ke.copy(l)),l};ke.copy=function(t,e){var r;if(lr.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(ke.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:ke.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};ke.equals=function(t,e,r){if(lr.util.isArray(t)){if(!lr.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!ke.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&ke.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};ke.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function Nu(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var e6=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var a=r&127;Nu(t,e,a),n=t.getInt(a<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};ke.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=lr.util.createBuffer(t));var r=t.length(),n=yd(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function yd(t,e,r,n){var i;Nu(t,e,2);var a=t.getByte();e--;var s=a&192,l=a&31;i=t.length();var u=e6(t,e);if(e-=i-t.length(),u!==void 0&&u>e){if(n.strict){var f=new Error("Too few bytes to read ASN.1 value.");throw f.available=t.length(),f.remaining=e,f.requested=u,f}u=e}var d,h,g=(a&32)==32;if(g)if(d=[],u===void 0)for(;;){if(Nu(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),d.push(yd(t,e,r+1,n)),e-=i-t.length()}else for(;u>0;)i=t.length(),d.push(yd(t,u,r+1,n)),e-=i-t.length(),u-=i-t.length();if(d===void 0&&s===ke.Class.UNIVERSAL&&l===ke.Type.BITSTRING&&(h=t.bytes(u)),d===void 0&&n.decodeBitStrings&&s===ke.Class.UNIVERSAL&&l===ke.Type.BITSTRING&&u>1){var m=t.read,y=e,_=0;if(l===ke.Type.BITSTRING&&(Nu(t,e,1),_=t.getByte(),e--),_===0)try{i=t.length();var w={strict:!0,decodeBitStrings:!0},E=yd(t,e,r+1,w),S=i-t.length();e-=S,l==ke.Type.BITSTRING&&S++;var T=E.tagClass;S===u&&(T===ke.Class.UNIVERSAL||T===ke.Class.CONTEXT_SPECIFIC)&&(d=[E])}catch(I){}d===void 0&&(t.read=m,e=y)}if(d===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=e}if(l===ke.Type.BMPSTRING)for(d="";u>0;u-=2)Nu(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(u),e-=u}var L=h===void 0?null:{bitStringContents:h};return ke.create(s,l,g,d,L)}ke.toDer=function(t){var e=lr.util.createBuffer(),r=t.tagClass|t.type,n=lr.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=ke.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var a=0;a<t.value.length;++a)t.value[a]!==void 0&&n.putBuffer(ke.toDer(t.value[a]))}else if(t.type===ke.Type.BMPSTRING)for(var a=0;a<t.value.length;++a)n.putInt16(t.value.charCodeAt(a));else t.type===ke.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),l="";do l+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(l.length|128);for(var a=l.length-1;a>=0;--a)e.putByte(l.charCodeAt(a))}return e.putBuffer(n),e};ke.oidToDer=function(t){var e=t.split("."),r=lr.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,a,s,l=2;l<e.length;++l){n=!0,i=[],a=parseInt(e[l],10);do s=a&127,a=a>>>7,n||(s|=128),i.push(s),n=!1;while(a>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};ke.derToOid=function(t){var e;typeof t=="string"&&(t=lr.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};ke.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),a=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var u=t.charAt(10),f=10;u!=="+"&&u!=="-"&&(l=parseInt(t.substr(10,2),10),f+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(a,s,l,0),f&&(u=t.charAt(f),u==="+"||u==="-")){var d=parseInt(t.substr(f+1,2),10),h=parseInt(t.substr(f+4,2),10),g=d*60+h;g*=6e4,u==="+"?e.setTime(+e-g):e.setTime(+e+g)}return e};ke.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),u=0,f=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var h=t.length-5,g=t.charAt(h);if(g==="+"||g==="-"){var m=parseInt(t.substr(h+1,2),10),y=parseInt(t.substr(h+4,2),10);f=m*60+y,f*=6e4,g==="+"&&(f*=-1),d=!0}return t.charAt(14)==="."&&(u=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(r,n,i),e.setUTCHours(a,s,l,u),e.setTime(+e+f)):(e.setFullYear(r,n,i),e.setHours(a,s,l,u)),e};ke.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};ke.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};ke.integerToDer=function(t){var e=lr.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};ke.derToInteger=function(t){typeof t=="string"&&(t=lr.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};ke.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(i=!0,e.value&&lr.util.isArray(e.value))for(var a=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[a]&&(i=ke.validate(t.value[a],e.value[s],r,n),i?++a:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var l;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var u=t.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var LE=/[^\\u0000-\\u00ff]/;ke.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",a=0;a<e*r;++a)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case ke.Class.UNIVERSAL:n+="Universal:";break;case ke.Class.APPLICATION:n+="Application:";break;case ke.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case ke.Class.PRIVATE:n+="Private:";break}if(t.tagClass===ke.Class.UNIVERSAL)switch(n+=t.type,t.type){case ke.Type.NONE:n+=" (None)";break;case ke.Type.BOOLEAN:n+=" (Boolean)";break;case ke.Type.INTEGER:n+=" (Integer)";break;case ke.Type.BITSTRING:n+=" (Bit string)";break;case ke.Type.OCTETSTRING:n+=" (Octet string)";break;case ke.Type.NULL:n+=" (Null)";break;case ke.Type.OID:n+=" (Object Identifier)";break;case ke.Type.ODESC:n+=" (Object Descriptor)";break;case ke.Type.EXTERNAL:n+=" (External or Instance of)";break;case ke.Type.REAL:n+=" (Real)";break;case ke.Type.ENUMERATED:n+=" (Enumerated)";break;case ke.Type.EMBEDDED:n+=" (Embedded PDV)";break;case ke.Type.UTF8:n+=" (UTF8)";break;case ke.Type.ROID:n+=" (Relative Object Identifier)";break;case ke.Type.SEQUENCE:n+=" (Sequence)";break;case ke.Type.SET:n+=" (Set)";break;case ke.Type.PRINTABLESTRING:n+=" (Printable String)";break;case ke.Type.IA5String:n+=" (IA5String (ASCII))";break;case ke.Type.UTCTIME:n+=" (UTC time)";break;case ke.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case ke.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,l="",a=0;a<t.value.length;++a)t.value[a]!==void 0&&(s+=1,l+=ke.prettyPrint(t.value[a],e+1,r),a+1<t.value.length&&(l+=","));n+=i+"Sub values: "+s+l}else{if(n+=i+"Value: ",t.type===ke.Type.OID){var u=ke.derToOid(t.value);n+=u,lr.pki&&lr.pki.oids&&u in lr.pki.oids&&(n+=" ("+lr.pki.oids[u]+") ")}if(t.type===ke.Type.INTEGER)try{n+=ke.derToInteger(t.value)}catch(d){n+="0x"+lr.util.bytesToHex(t.value)}else if(t.type===ke.Type.BITSTRING){if(t.value.length>1?n+="0x"+lr.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var f=t.value.charCodeAt(0);f==1?n+=" (1 unused bit shown)":f>1&&(n+=" ("+f+" unused bits shown)")}}else if(t.type===ke.Type.OCTETSTRING)LE.test(t.value)||(n+="("+t.value+") "),n+="0x"+lr.util.bytesToHex(t.value);else if(t.type===ke.Type.UTF8)try{n+=lr.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")n+="0x"+lr.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===ke.Type.PRINTABLESTRING||t.type===ke.Type.IA5String?n+=t.value:LE.test(t.value)?n+="0x"+lr.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var zi=de((n7,ME)=>{var vd=vt();ME.exports=vd.md=vd.md||{};vd.md.algorithms=vd.md.algorithms||{}});var sl=de((i7,UE)=>{var Sa=vt();zi();qt();var t6=UE.exports=Sa.hmac=Sa.hmac||{};t6.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in Sa.md.algorithms)e=Sa.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else e=a;if(s===null)s=t;else{if(typeof s=="string")s=Sa.util.createBuffer(s);else if(Sa.util.isArray(s)){var l=s;s=Sa.util.createBuffer();for(var u=0;u<l.length;++u)s.putByte(l[u])}var f=s.length();f>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=Sa.util.createBuffer(),n=Sa.util.createBuffer(),f=s.length();for(var u=0;u<f;++u){var l=s.at(u);r.putByte(54^l),n.putByte(92^l)}if(f<e.blockLength)for(var l=e.blockLength-f,u=0;u<l;++u)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(a){e.update(a)},i.getMac=function(){var a=e.digest().bytes();return e.start(),e.update(n),e.update(a),e.digest()},i.digest=i.getMac,i}});var wd=de((a7,VE)=>{var Qi=vt();zi();qt();var FE=VE.exports=Qi.md5=Qi.md5||{};Qi.md.md5=Qi.md.algorithms.md5=FE;FE.create=function(){qE||r6();var t=null,e=Qi.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=Qi.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Qi.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),GE(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Qi.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(og.substr(0,n.blockLength-s));for(var l,u=0,f=n.fullMessageLength.length-1;f>=0;--f)l=n.fullMessageLength[f]*8+u,u=l/4294967296>>>0,i.putInt32Le(l>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};GE(d,r,i);var h=Qi.util.createBuffer();return h.putInt32Le(d.h0),h.putInt32Le(d.h1),h.putInt32Le(d.h2),h.putInt32Le(d.h3),h},n};var og=null,_d=null,Ru=null,ol=null,qE=!1;function r6(){og=String.fromCharCode(128),og+=Qi.util.fillString(String.fromCharCode(0),64),_d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],Ru=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],ol=new Array(64);for(var t=0;t<64;++t)ol[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);qE=!0}function GE(t,e,r){for(var n,i,a,s,l,u,f,d,h=r.length();h>=64;){for(i=t.h0,a=t.h1,s=t.h2,l=t.h3,d=0;d<16;++d)e[d]=r.getInt32Le(),u=l^a&(s^l),n=i+u+ol[d]+e[d],f=Ru[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<32;++d)u=s^l&(a^s),n=i+u+ol[d]+e[_d[d]],f=Ru[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<48;++d)u=a^s^l,n=i+u+ol[d]+e[_d[d]],f=Ru[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<64;++d)u=s^(a|~l),n=i+u+ol[d]+e[_d[d]],f=Ru[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;t.h0=t.h0+i|0,t.h1=t.h1+a|0,t.h2=t.h2+s|0,t.h3=t.h3+l|0,h-=64}}});var js=de((s7,KE)=>{var Ed=vt();qt();var HE=KE.exports=Ed.pem=Ed.pem||{};HE.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=Cd(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=Cd(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=Cd(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=Cd(t.headers[i]);return t.procType&&(r+=`\r
`),r+=Ed.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};HE.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=r.exec(t),!!a;){var s=a[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var l={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Ed.util.decode64(a[3])};if(e.push(l),!!a[2]){for(var u=a[2].split(i),f=0;a&&f<u.length;){for(var d=u[f].replace(/\s+$/,""),h=f+1;h<u.length;++h){var g=u[h];if(!/\s/.test(g[0]))break;d+=g,f=h}if(a=d.match(n),a){for(var m={name:a[1],values:[]},y=a[2].split(","),_=0;_<y.length;++_)m.values.push(n6(y[_]));if(l.procType)if(!l.contentDomain&&m.name==="Content-Domain")l.contentDomain=y[0]||"";else if(!l.dekInfo&&m.name==="DEK-Info"){if(m.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:y[0],parameters:y[1]||null}}else l.headers.push(m);else{if(m.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(m.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:y[0],type:y[1]}}}++f}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Cd(t){for(var e=t.name+": ",r=[],n=function(u,f){return" "+f},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<e.length;++i,++a)if(a>65&&s!==-1){var l=e[s];l===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+l+e.substr(s+1),a=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function n6(t){return t.replace(/^\s+/,"")}});var Du=de((o7,YE)=>{var dr=vt();hd();rg();qt();YE.exports=dr.des=dr.des||{};dr.des.startEncrypting=function(t,e,r,n){var i=bd({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};dr.des.createEncryptionCipher=function(t,e){return bd({key:t,output:null,decrypt:!1,mode:e})};dr.des.startDecrypting=function(t,e,r,n){var i=bd({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};dr.des.createDecryptionCipher=function(t,e){return bd({key:t,output:null,decrypt:!0,mode:e})};dr.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return jE(r._keys,n,i,!1)},decrypt:function(n,i){return jE(r._keys,n,i,!0)}}}),r._init=!1};dr.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=dr.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=d6(e),this._init=!0}};Xi("DES-ECB",dr.cipher.modes.ecb);Xi("DES-CBC",dr.cipher.modes.cbc);Xi("DES-CFB",dr.cipher.modes.cfb);Xi("DES-OFB",dr.cipher.modes.ofb);Xi("DES-CTR",dr.cipher.modes.ctr);Xi("3DES-ECB",dr.cipher.modes.ecb);Xi("3DES-CBC",dr.cipher.modes.cbc);Xi("3DES-CFB",dr.cipher.modes.cfb);Xi("3DES-OFB",dr.cipher.modes.ofb);Xi("3DES-CTR",dr.cipher.modes.ctr);function Xi(t,e){var r=function(){return new dr.des.Algorithm(t,e)};dr.cipher.registerAlgorithm(t,r)}var i6=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],a6=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],s6=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],o6=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],l6=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],u6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],c6=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],f6=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function d6(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],f=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],g=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],m=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],_=t.length()>8?3:1,w=[],E=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],S=0,T,L=0;L<_;L++){var I=t.getInt32(),B=t.getInt32();T=(I>>>4^B)&252645135,B^=T,I^=T<<4,T=(B>>>-16^I)&65535,I^=T,B^=T<<-16,T=(I>>>2^B)&858993459,B^=T,I^=T<<2,T=(B>>>-16^I)&65535,I^=T,B^=T<<-16,T=(I>>>1^B)&1431655765,B^=T,I^=T<<1,T=(B>>>8^I)&16711935,I^=T,B^=T<<8,T=(I>>>1^B)&1431655765,B^=T,I^=T<<1,T=I<<8|B>>>20&240,I=B<<24|B<<8&16711680|B>>>8&65280|B>>>24&240,B=T;for(var z=0;z<E.length;++z){E[z]?(I=I<<2|I>>>26,B=B<<2|B>>>26):(I=I<<1|I>>>27,B=B<<1|B>>>27),I&=-15,B&=-15;var F=e[I>>>28]|r[I>>>24&15]|n[I>>>20&15]|i[I>>>16&15]|a[I>>>12&15]|s[I>>>8&15]|l[I>>>4&15],G=u[B>>>28]|f[B>>>24&15]|d[B>>>20&15]|h[B>>>16&15]|g[B>>>12&15]|m[B>>>8&15]|y[B>>>4&15];T=(G>>>16^F)&65535,w[S++]=F^T,w[S++]=G^T<<16}}return w}function jE(t,e,r,n){var i=t.length===32?3:9,a;i===3?a=n?[30,-2,-2]:[0,32,2]:a=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,l=e[0],u=e[1];s=(l>>>4^u)&252645135,u^=s,l^=s<<4,s=(l>>>16^u)&65535,u^=s,l^=s<<16,s=(u>>>2^l)&858993459,l^=s,u^=s<<2,s=(u>>>8^l)&16711935,l^=s,u^=s<<8,s=(l>>>1^u)&1431655765,u^=s,l^=s<<1,l=l<<1|l>>>31,u=u<<1|u>>>31;for(var f=0;f<i;f+=3){for(var d=a[f+1],h=a[f+2],g=a[f];g!=d;g+=h){var m=u^t[g],y=(u>>>4|u<<28)^t[g+1];s=l,l=u,u=s^(a6[m>>>24&63]|o6[m>>>16&63]|u6[m>>>8&63]|f6[m&63]|i6[y>>>24&63]|s6[y>>>16&63]|l6[y>>>8&63]|c6[y&63])}s=l,l=u,u=s}l=l>>>1|l<<31,u=u>>>1|u<<31,s=(l>>>1^u)&1431655765,u^=s,l^=s<<1,s=(u>>>8^l)&16711935,l^=s,u^=s<<8,s=(u>>>2^l)&858993459,l^=s,u^=s<<2,s=(l>>>16^u)&65535,u^=s,l^=s<<16,s=(l>>>4^u)&252645135,u^=s,l^=s<<4,r[0]=l,r[1]=u}function bd(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=dr.cipher.createDecipher(r,t.key):n=dr.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(a,s){var l=null;s instanceof dr.util.ByteBuffer&&(l=s,s={}),s=s||{},s.output=l,s.iv=a,i.call(n,s)},n}});var xd=de((l7,WE)=>{var mn=vt();sl();zi();qt();var h6=mn.pkcs5=mn.pkcs5||{},Aa;mn.util.isNodejs&&!mn.options.usePureJavaScript&&(Aa=require("crypto"));WE.exports=mn.pbkdf2=h6.pbkdf2=function(t,e,r,n,i,a){if(typeof i=="function"&&(a=i,i=null),mn.util.isNodejs&&!mn.options.usePureJavaScript&&Aa.pbkdf2&&(i===null||typeof i!="object")&&(Aa.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),a?Aa.pbkdf2Sync.length===4?Aa.pbkdf2(t,e,r,n,function(T,L){if(T)return a(T);a(null,L.toString("binary"))}):Aa.pbkdf2(t,e,r,n,i,function(T,L){if(T)return a(T);a(null,L.toString("binary"))}):Aa.pbkdf2Sync.length===4?Aa.pbkdf2Sync(t,e,r,n).toString("binary"):Aa.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in mn.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=mn.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var l=new Error("Derived key is too long.");if(a)return a(l);throw l}var u=Math.ceil(n/s),f=n-(u-1)*s,d=mn.hmac.create();d.start(i,t);var h="",g,m,y;if(!a){for(var _=1;_<=u;++_){d.start(null,null),d.update(e),d.update(mn.util.int32ToBytes(_)),g=y=d.digest().getBytes();for(var w=2;w<=r;++w)d.start(null,null),d.update(y),m=d.digest().getBytes(),g=mn.util.xorBytes(g,m,s),y=m;h+=_<u?g:g.substr(0,f)}return h}var _=1,w;function E(){if(_>u)return a(null,h);d.start(null,null),d.update(e),d.update(mn.util.int32ToBytes(_)),g=y=d.digest().getBytes(),w=2,S()}function S(){if(w<=r)return d.start(null,null),d.update(y),m=d.digest().getBytes(),g=mn.util.xorBytes(g,m,s),y=m,++w,mn.util.setImmediate(S);h+=_<u?g:g.substr(0,f),++_,E()}E()}});var ug=de((u7,ZE)=>{var Ji=vt();zi();qt();var zE=ZE.exports=Ji.sha256=Ji.sha256||{};Ji.md.sha256=Ji.md.algorithms.sha256=zE;zE.create=function(){QE||p6();var t=null,e=Ji.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=Ji.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Ji.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),JE(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Ji.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(lg.substr(0,n.blockLength-s));for(var l,u,f=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,u=l/4294967296>>>0,f+=u,i.putInt32(f>>>0),f=l>>>0;i.putInt32(f);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};JE(h,r,i);var g=Ji.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g.putInt32(h.h5),g.putInt32(h.h6),g.putInt32(h.h7),g},n};var lg=null,QE=!1,XE=null;function p6(){lg=String.fromCharCode(128),lg+=Ji.util.fillString(String.fromCharCode(0),64),XE=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],QE=!0}function JE(t,e,r){for(var n,i,a,s,l,u,f,d,h,g,m,y,_,w,E,S=r.length();S>=64;){for(f=0;f<16;++f)e[f]=r.getInt32();for(;f<64;++f)n=e[f-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[f-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[f]=n+e[f-7]+i+e[f-16]|0;for(d=t.h0,h=t.h1,g=t.h2,m=t.h3,y=t.h4,_=t.h5,w=t.h6,E=t.h7,f=0;f<64;++f)s=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),l=w^y&(_^w),a=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),u=d&h|g&(d^h),n=E+s+l+XE[f]+e[f],i=a+u,E=w,w=_,_=y,y=m+n>>>0,m=g,g=h,h=d,d=n+i>>>0;t.h0=t.h0+d|0,t.h1=t.h1+h|0,t.h2=t.h2+g|0,t.h3=t.h3+m|0,t.h4=t.h4+y|0,t.h5=t.h5+_|0,t.h6=t.h6+w|0,t.h7=t.h7+E|0,S-=64}}});var cg=de((c7,$E)=>{var Zi=vt();qt();var Td=null;Zi.util.isNodejs&&!Zi.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Td=require("crypto"));var g6=$E.exports=Zi.prng=Zi.prng||{};g6.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(f,d){if(!d)return e.generateSync(f);var h=e.plugin.cipher,g=e.plugin.increment,m=e.plugin.formatKey,y=e.plugin.formatSeed,_=Zi.util.createBuffer();e.key=null,w();function w(E){if(E)return d(E);if(_.length()>=f)return d(null,_.getBytes(f));if(e.generated>1048575&&(e.key=null),e.key===null)return Zi.util.nextTick(function(){a(w)});var S=h(e.key,e.seed);e.generated+=S.length,_.putBytes(S),e.key=m(h(e.key,g(e.seed))),e.seed=y(h(e.key,e.seed)),Zi.util.setImmediate(w)}},e.generateSync=function(f){var d=e.plugin.cipher,h=e.plugin.increment,g=e.plugin.formatKey,m=e.plugin.formatSeed;e.key=null;for(var y=Zi.util.createBuffer();y.length()<f;){e.generated>1048575&&(e.key=null),e.key===null&&s();var _=d(e.key,e.seed);e.generated+=_.length,y.putBytes(_),e.key=g(d(e.key,h(e.seed))),e.seed=m(d(e.key,e.seed))}return y.getBytes(f)};function a(f){if(e.pools[0].messageLength>=32)return l(),f();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(h,g){if(h)return f(h);e.collect(g),l(),f()})}function s(){if(e.pools[0].messageLength>=32)return l();var f=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(f)),l()}function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var f=e.plugin.md.create();f.update(e.keyBytes);for(var d=1,h=0;h<32;++h)e.reseeds%d==0&&(f.update(e.pools[h].digest().getBytes()),e.pools[h].start()),d=d<<1;e.keyBytes=f.digest().getBytes(),f.start(),f.update(e.keyBytes);var g=f.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(g),e.generated=0}function u(f){var d=null,h=Zi.util.globalScope,g=h.crypto||h.msCrypto;g&&g.getRandomValues&&(d=function(I){return g.getRandomValues(I)});var m=Zi.util.createBuffer();if(d)for(;m.length()<f;){var y=Math.max(1,Math.min(f-m.length(),65536)/4),_=new Uint32Array(Math.floor(y));try{d(_);for(var w=0;w<_.length;++w)m.putInt32(_[w])}catch(I){if(!(typeof QuotaExceededError!="undefined"&&I instanceof QuotaExceededError))throw I}}if(m.length()<f)for(var E,S,T,L=Math.floor(Math.random()*65536);m.length()<f;){S=16807*(L&65535),E=16807*(L>>16),S+=(E&32767)<<16,S+=E>>15,S=(S&2147483647)+(S>>31),L=S&4294967295;for(var w=0;w<3;++w)T=L>>>(w<<3),T^=Math.floor(Math.random()*256),m.putByte(T&255)}return m.getBytes(f)}return Td?(e.seedFile=function(f,d){Td.randomBytes(f,function(h,g){if(h)return d(h);d(null,g.toString())})},e.seedFileSync=function(f){return Td.randomBytes(f).toString()}):(e.seedFile=function(f,d){try{d(null,u(f))}catch(h){d(h)}},e.seedFileSync=u),e.collect=function(f){for(var d=f.length,h=0;h<d;++h)e.pools[e.pool].update(f.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(f,d){for(var h="",g=0;g<d;g+=8)h+=String.fromCharCode(f>>g&255);e.collect(h)},e.registerWorker=function(f){if(f===self)e.seedFile=function(h,g){function m(y){var _=y.data;_.forge&&_.forge.prng&&(self.removeEventListener("message",m),g(_.forge.prng.err,_.forge.prng.bytes))}self.addEventListener("message",m),self.postMessage({forge:{prng:{needed:h}}})};else{var d=function(h){var g=h.data;g.forge&&g.forge.prng&&e.seedFile(g.forge.prng.needed,function(m,y){f.postMessage({forge:{prng:{err:m,bytes:y}}})})};f.addEventListener("message",d)}},e}});var ti=de((f7,fg)=>{var Vr=vt();os();ug();cg();qt();(function(){if(Vr.random&&Vr.random.getBytes){fg.exports=Vr.random;return}(function(t){var e={},r=new Array(4),n=Vr.util.createBuffer();e.formatKey=function(h){var g=Vr.util.createBuffer(h);return h=new Array(4),h[0]=g.getInt32(),h[1]=g.getInt32(),h[2]=g.getInt32(),h[3]=g.getInt32(),Vr.aes._expandKey(h,!1)},e.formatSeed=function(h){var g=Vr.util.createBuffer(h);return h=new Array(4),h[0]=g.getInt32(),h[1]=g.getInt32(),h[2]=g.getInt32(),h[3]=g.getInt32(),h},e.cipher=function(h,g){return Vr.aes._updateBlock(h,g,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(h){return++h[3],h},e.md=Vr.md.sha256;function i(){var h=Vr.prng.create(e);return h.getBytes=function(g,m){return h.generate(g,m)},h.getBytesSync=function(g){return h.generate(g)},h}var a=i(),s=null,l=Vr.util.globalScope,u=l.crypto||l.msCrypto;if(u&&u.getRandomValues&&(s=function(h){return u.getRandomValues(h)}),Vr.options.usePureJavaScript||!Vr.util.isNodejs&&!s){if(typeof window=="undefined"||window.document===void 0,a.collectInt(+new Date,32),typeof navigator!="undefined"){var f="";for(var d in navigator)try{typeof navigator[d]=="string"&&(f+=navigator[d])}catch(h){}a.collect(f),f=null}t&&(t().mousemove(function(h){a.collectInt(h.clientX,16),a.collectInt(h.clientY,16)}),t().keypress(function(h){a.collectInt(h.charCode,8)}))}if(!Vr.random)Vr.random=a;else for(var d in a)Vr.random[d]=a[d];Vr.random.createInstance=i,fg.exports=Vr.random})(typeof jQuery!="undefined"?jQuery:null)})()});var hg=de((d7,rC)=>{var kn=vt();qt();var dg=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],eC=[1,2,3,5],m6=function(t,e){return t<<e&65535|(t&65535)>>16-e},y6=function(t,e){return(t&65535)>>e|t<<16-e&65535};rC.exports=kn.rc2=kn.rc2||{};kn.rc2.expandKey=function(t,e){typeof t=="string"&&(t=kn.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,a=Math.ceil(i/8),s=255>>(i&7),l;for(l=n;l<128;l++)r.putByte(dg[r.at(l-1)+r.at(l-n)&255]);for(r.setAt(128-a,dg[r.at(128-a)&s]),l=127-a;l>=0;l--)r.setAt(l,dg[r.at(l+1)^r.at(l+a)]);return r};var tC=function(t,e,r){var n=!1,i=null,a=null,s=null,l,u,f,d,h=[];for(t=kn.rc2.expandKey(t,e),f=0;f<64;f++)h.push(t.getInt16Le());r?(l=function(y){for(f=0;f<4;f++)y[f]+=h[d]+(y[(f+3)%4]&y[(f+2)%4])+(~y[(f+3)%4]&y[(f+1)%4]),y[f]=m6(y[f],eC[f]),d++},u=function(y){for(f=0;f<4;f++)y[f]+=h[y[(f+3)%4]&63]}):(l=function(y){for(f=3;f>=0;f--)y[f]=y6(y[f],eC[f]),y[f]-=h[d]+(y[(f+3)%4]&y[(f+2)%4])+(~y[(f+3)%4]&y[(f+1)%4]),d--},u=function(y){for(f=3;f>=0;f--)y[f]-=h[y[(f+3)%4]&63]});var g=function(y){var _=[];for(f=0;f<4;f++){var w=i.getInt16Le();s!==null&&(r?w^=s.getInt16Le():s.putInt16Le(w)),_.push(w&65535)}d=r?0:63;for(var E=0;E<y.length;E++)for(var S=0;S<y[E][0];S++)y[E][1](_);for(f=0;f<4;f++)s!==null&&(r?s.putInt16Le(_[f]):_[f]^=s.getInt16Le()),a.putInt16Le(_[f])},m=null;return m={start:function(y,_){y&&typeof y=="string"&&(y=kn.util.createBuffer(y)),n=!1,i=kn.util.createBuffer(),a=_||new kn.util.createBuffer,s=y,m.output=a},update:function(y){for(n||i.putBuffer(y);i.length()>=8;)g([[5,l],[1,u],[6,l],[1,u],[5,l]])},finish:function(y){var _=!0;if(r)if(y)_=y(8,i,!r);else{var w=i.length()===8?8:8-i.length();i.fillWithByte(w,w)}if(_&&(n=!0,m.update()),!r&&(_=i.length()===0,_))if(y)_=y(8,a,!r);else{var E=a.length(),S=a.at(E-1);S>E?_=!1:a.truncate(S)}return _}},m};kn.rc2.startEncrypting=function(t,e,r){var n=kn.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};kn.rc2.createEncryptionCipher=function(t,e){return tC(t,e,!0)};kn.rc2.startDecrypting=function(t,e,r){var n=kn.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};kn.rc2.createDecryptionCipher=function(t,e){return tC(t,e,!1)}});var Ou=de((h7,cC)=>{var pg=vt();cC.exports=pg.jsbn=pg.jsbn||{};var ka,v6=244837814094590,nC=(v6&16777215)==15715070;function ye(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}pg.jsbn.BigInteger=ye;function Gt(){return new ye(null)}function _6(t,e,r,n,i,a){for(;--a>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function w6(t,e,r,n,i,a){for(var s=e&32767,l=e>>15;--a>=0;){var u=this.data[t]&32767,f=this.data[t++]>>15,d=l*u+f*s;u=s*u+((d&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(d>>>15)+l*f+(i>>>30),r.data[n++]=u&1073741823}return i}function iC(t,e,r,n,i,a){for(var s=e&16383,l=e>>14;--a>=0;){var u=this.data[t]&16383,f=this.data[t++]>>14,d=l*u+f*s;u=s*u+((d&16383)<<14)+r.data[n]+i,i=(u>>28)+(d>>14)+l*f,r.data[n++]=u&268435455}return i}typeof navigator=="undefined"?(ye.prototype.am=iC,ka=28):nC&&navigator.appName=="Microsoft Internet Explorer"?(ye.prototype.am=w6,ka=30):nC&&navigator.appName!="Netscape"?(ye.prototype.am=_6,ka=26):(ye.prototype.am=iC,ka=28);ye.prototype.DB=ka;ye.prototype.DM=(1<<ka)-1;ye.prototype.DV=1<<ka;var gg=52;ye.prototype.FV=Math.pow(2,gg);ye.prototype.F1=gg-ka;ye.prototype.F2=2*ka-gg;var E6="0123456789abcdefghijklmnopqrstuvwxyz",Sd=new Array,ll,ri;ll="0".charCodeAt(0);for(ri=0;ri<=9;++ri)Sd[ll++]=ri;ll="a".charCodeAt(0);for(ri=10;ri<36;++ri)Sd[ll++]=ri;ll="A".charCodeAt(0);for(ri=10;ri<36;++ri)Sd[ll++]=ri;function aC(t){return E6.charAt(t)}function sC(t,e){var r=Sd[t.charCodeAt(e)];return r==null?-1:r}function C6(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function b6(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function us(t){var e=Gt();return e.fromInt(t),e}function x6(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,a=0;--n>=0;){var s=r==8?t[n]&255:sC(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&ye.ZERO.subTo(this,this)}function T6(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function S6(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,a="",s=this.t,l=this.DB-s*this.DB%e;if(s-- >0)for(l<this.DB&&(n=this.data[s]>>l)>0&&(i=!0,a=aC(n));s>=0;)l<e?(n=(this.data[s]&(1<<l)-1)<<e-l,n|=this.data[--s]>>(l+=this.DB-e)):(n=this.data[s]>>(l-=e)&r,l<=0&&(l+=this.DB,--s)),n>0&&(i=!0),i&&(a+=aC(n));return i?a:"0"}function A6(){var t=Gt();return ye.ZERO.subTo(this,t),t}function k6(){return this.s<0?this.negate():this}function I6(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Ad(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function N6(){return this.t<=0?0:this.DB*(this.t-1)+Ad(this.data[this.t-1]^this.s&this.DM)}function R6(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function D6(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function B6(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+a+1]=this.data[l]>>n|s,s=(this.data[l]&i)<<r;for(l=a-1;l>=0;--l)e.data[l]=0;e.data[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function O6(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,a=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&a)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&a)<<i),e.t=this.t-r,e.clamp()}function L6(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function P6(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&ye.ZERO.subTo(e,e)}function M6(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function U6(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Gt());var a=Gt(),s=this.s,l=t.s,u=this.DB-Ad(n.data[n.t-1]);u>0?(n.lShiftTo(u,a),i.lShiftTo(u,r)):(n.copyTo(a),i.copyTo(r));var f=a.t,d=a.data[f-1];if(d!=0){var h=d*(1<<this.F1)+(f>1?a.data[f-2]>>this.F2:0),g=this.FV/h,m=(1<<this.F1)/h,y=1<<this.F2,_=r.t,w=_-f,E=e==null?Gt():e;for(a.dlShiftTo(w,E),r.compareTo(E)>=0&&(r.data[r.t++]=1,r.subTo(E,r)),ye.ONE.dlShiftTo(f,E),E.subTo(a,a);a.t<f;)a.data[a.t++]=0;for(;--w>=0;){var S=r.data[--_]==d?this.DM:Math.floor(r.data[_]*g+(r.data[_-1]+y)*m);if((r.data[_]+=a.am(0,S,r,w,0,f))<S)for(a.dlShiftTo(w,E),r.subTo(E,r);r.data[_]<--S;)r.subTo(E,r)}e!=null&&(r.drShiftTo(f,e),s!=l&&ye.ZERO.subTo(e,e)),r.t=f,r.clamp(),u>0&&r.rShiftTo(u,r),s<0&&ye.ZERO.subTo(r,r)}}}function F6(t){var e=Gt();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(ye.ZERO)>0&&t.subTo(e,e),e}function Ys(t){this.m=t}function q6(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function G6(t){return t}function V6(t){t.divRemTo(this.m,null,t)}function H6(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function K6(t,e){t.squareTo(e),this.reduce(e)}Ys.prototype.convert=q6;Ys.prototype.revert=G6;Ys.prototype.reduce=V6;Ys.prototype.mulTo=H6;Ys.prototype.sqrTo=K6;function j6(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Ws(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function Y6(t){var e=Gt();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(ye.ZERO)>0&&this.m.subTo(e,e),e}function W6(t){var e=Gt();return t.copyTo(e),this.reduce(e),e}function z6(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Q6(t,e){t.squareTo(e),this.reduce(e)}function X6(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Ws.prototype.convert=Y6;Ws.prototype.revert=W6;Ws.prototype.reduce=z6;Ws.prototype.mulTo=X6;Ws.prototype.sqrTo=Q6;function J6(){return(this.t>0?this.data[0]&1:this.s)==0}function Z6(t,e){if(t>4294967295||t<1)return ye.ONE;var r=Gt(),n=Gt(),i=e.convert(this),a=Ad(t)-1;for(i.copyTo(r);--a>=0;)if(e.sqrTo(r,n),(t&1<<a)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function $6(t,e){var r;return t<256||e.isEven()?r=new Ys(e):r=new Ws(e),this.exp(t,r)}ye.prototype.copyTo=C6;ye.prototype.fromInt=b6;ye.prototype.fromString=x6;ye.prototype.clamp=T6;ye.prototype.dlShiftTo=R6;ye.prototype.drShiftTo=D6;ye.prototype.lShiftTo=B6;ye.prototype.rShiftTo=O6;ye.prototype.subTo=L6;ye.prototype.multiplyTo=P6;ye.prototype.squareTo=M6;ye.prototype.divRemTo=U6;ye.prototype.invDigit=j6;ye.prototype.isEven=J6;ye.prototype.exp=Z6;ye.prototype.toString=S6;ye.prototype.negate=A6;ye.prototype.abs=k6;ye.prototype.compareTo=I6;ye.prototype.bitLength=N6;ye.prototype.mod=F6;ye.prototype.modPowInt=$6;ye.ZERO=us(0);ye.ONE=us(1);function eM(){var t=Gt();return this.copyTo(t),t}function tM(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function rM(){return this.t==0?this.s:this.data[0]<<24>>24}function nM(){return this.t==0?this.s:this.data[0]<<16>>16}function iM(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function aM(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function sM(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=us(r),i=Gt(),a=Gt(),s="";for(this.divRemTo(n,i,a);i.signum()>0;)s=(r+a.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(t)+s}function oM(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,a=0,s=0,l=0;l<t.length;++l){var u=sC(t,l);if(u<0){t.charAt(l)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+u,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),i&&ye.ZERO.subTo(this,this)}function lM(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(ye.ONE.shiftLeft(t-1),mg,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(ye.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function uM(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function cM(t){return this.compareTo(t)==0}function fM(t){return this.compareTo(t)<0?this:t}function dM(t){return this.compareTo(t)>0?this:t}function hM(t,e,r){var n,i,a=Math.min(t.t,this.t);for(n=0;n<a;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=a;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function pM(t,e){return t&e}function gM(t){var e=Gt();return this.bitwiseTo(t,pM,e),e}function mg(t,e){return t|e}function mM(t){var e=Gt();return this.bitwiseTo(t,mg,e),e}function oC(t,e){return t^e}function yM(t){var e=Gt();return this.bitwiseTo(t,oC,e),e}function lC(t,e){return t&~e}function vM(t){var e=Gt();return this.bitwiseTo(t,lC,e),e}function _M(){for(var t=Gt(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function wM(t){var e=Gt();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function EM(t){var e=Gt();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function CM(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function bM(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+CM(this.data[t]);return this.s<0?this.t*this.DB:-1}function xM(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function TM(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=xM(this.data[r]^e);return t}function SM(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function AM(t,e){var r=ye.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function kM(t){return this.changeBit(t,mg)}function IM(t){return this.changeBit(t,lC)}function NM(t){return this.changeBit(t,oC)}function RM(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function DM(t){var e=Gt();return this.addTo(t,e),e}function BM(t){var e=Gt();return this.subTo(t,e),e}function OM(t){var e=Gt();return this.multiplyTo(t,e),e}function LM(t){var e=Gt();return this.divRemTo(t,e,null),e}function PM(t){var e=Gt();return this.divRemTo(t,null,e),e}function MM(t){var e=Gt(),r=Gt();return this.divRemTo(t,e,r),new Array(e,r)}function UM(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function FM(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Bu(){}function uC(t){return t}function qM(t,e,r){t.multiplyTo(e,r)}function GM(t,e){t.squareTo(e)}Bu.prototype.convert=uC;Bu.prototype.revert=uC;Bu.prototype.mulTo=qM;Bu.prototype.sqrTo=GM;function VM(t){return this.exp(t,new Bu)}function HM(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function KM(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function ul(t){this.r2=Gt(),this.q3=Gt(),ye.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function jM(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Gt();return t.copyTo(e),this.reduce(e),e}function YM(t){return t}function WM(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function zM(t,e){t.squareTo(e),this.reduce(e)}function QM(t,e,r){t.multiplyTo(e,r),this.reduce(r)}ul.prototype.convert=jM;ul.prototype.revert=YM;ul.prototype.reduce=WM;ul.prototype.mulTo=QM;ul.prototype.sqrTo=zM;function XM(t,e){var r=t.bitLength(),n,i=us(1),a;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new Ys(e):e.isEven()?a=new ul(e):a=new Ws(e);var s=new Array,l=3,u=n-1,f=(1<<n)-1;if(s[1]=a.convert(this),n>1){var d=Gt();for(a.sqrTo(s[1],d);l<=f;)s[l]=Gt(),a.mulTo(d,s[l-2],s[l]),l+=2}var h=t.t-1,g,m=!0,y=Gt(),_;for(r=Ad(t.data[h])-1;h>=0;){for(r>=u?g=t.data[h]>>r-u&f:(g=(t.data[h]&(1<<r+1)-1)<<u-r,h>0&&(g|=t.data[h-1]>>this.DB+r-u)),l=n;(g&1)==0;)g>>=1,--l;if((r-=l)<0&&(r+=this.DB,--h),m)s[g].copyTo(i),m=!1;else{for(;l>1;)a.sqrTo(i,y),a.sqrTo(y,i),l-=2;l>0?a.sqrTo(i,y):(_=i,i=y,y=_),a.mulTo(y,s[g],i)}for(;h>=0&&(t.data[h]&1<<r)==0;)a.sqrTo(i,y),_=i,i=y,y=_,--r<0&&(r=this.DB-1,--h)}return a.revert(i)}function JM(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return e;for(i<a&&(a=i),a>0&&(e.rShiftTo(a,e),r.rShiftTo(a,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function ZM(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function $M(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return ye.ZERO;for(var r=t.clone(),n=this.clone(),i=us(1),a=us(0),s=us(0),l=us(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(t,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!l.isEven())&&(s.addTo(this,s),l.subTo(t,l)),s.rShiftTo(1,s)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),a.subTo(l,a)):(n.subTo(r,n),e&&s.subTo(i,s),l.subTo(a,l))}if(n.compareTo(ye.ONE)!=0)return ye.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}var xi=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],e5=(1<<26)/xi[xi.length-1];function t5(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=xi[xi.length-1]){for(e=0;e<xi.length;++e)if(r.data[0]==xi[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<xi.length;){for(var n=xi[e],i=e+1;i<xi.length&&n<e5;)n*=xi[i++];for(n=r.modInt(n);e<i;)if(n%xi[e++]==0)return!1}return r.millerRabin(t)}function r5(t){var e=this.subtract(ye.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=n5(),a,s=0;s<t;++s){do a=new ye(this.bitLength(),i);while(a.compareTo(ye.ONE)<=0||a.compareTo(e)>=0);var l=a.modPow(n,this);if(l.compareTo(ye.ONE)!=0&&l.compareTo(e)!=0){for(var u=1;u++<r&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(ye.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}function n5(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}ye.prototype.chunkSize=iM;ye.prototype.toRadix=sM;ye.prototype.fromRadix=oM;ye.prototype.fromNumber=lM;ye.prototype.bitwiseTo=hM;ye.prototype.changeBit=AM;ye.prototype.addTo=RM;ye.prototype.dMultiply=UM;ye.prototype.dAddOffset=FM;ye.prototype.multiplyLowerTo=HM;ye.prototype.multiplyUpperTo=KM;ye.prototype.modInt=ZM;ye.prototype.millerRabin=r5;ye.prototype.clone=eM;ye.prototype.intValue=tM;ye.prototype.byteValue=rM;ye.prototype.shortValue=nM;ye.prototype.signum=aM;ye.prototype.toByteArray=uM;ye.prototype.equals=cM;ye.prototype.min=fM;ye.prototype.max=dM;ye.prototype.and=gM;ye.prototype.or=mM;ye.prototype.xor=yM;ye.prototype.andNot=vM;ye.prototype.not=_M;ye.prototype.shiftLeft=wM;ye.prototype.shiftRight=EM;ye.prototype.getLowestSetBit=bM;ye.prototype.bitCount=TM;ye.prototype.testBit=SM;ye.prototype.setBit=kM;ye.prototype.clearBit=IM;ye.prototype.flipBit=NM;ye.prototype.add=DM;ye.prototype.subtract=BM;ye.prototype.multiply=OM;ye.prototype.divide=LM;ye.prototype.remainder=PM;ye.prototype.divideAndRemainder=MM;ye.prototype.modPow=XM;ye.prototype.modInverse=$M;ye.prototype.pow=VM;ye.prototype.gcd=JM;ye.prototype.isProbablePrime=t5});var cl=de((p7,pC)=>{var $i=vt();zi();qt();var fC=pC.exports=$i.sha1=$i.sha1||{};$i.md.sha1=$i.md.algorithms.sha1=fC;fC.create=function(){dC||i5();var t=null,e=$i.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=$i.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=$i.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),hC(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=$i.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(yg.substr(0,n.blockLength-s));for(var l,u,f=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,u=l/4294967296>>>0,f+=u,i.putInt32(f>>>0),f=l>>>0;i.putInt32(f);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};hC(h,r,i);var g=$i.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g},n};var yg=null,dC=!1;function i5(){yg=String.fromCharCode(128),yg+=$i.util.fillString(String.fromCharCode(0),64),dC=!0}function hC(t,e,r){for(var n,i,a,s,l,u,f,d,h=r.length();h>=64;){for(i=t.h0,a=t.h1,s=t.h2,l=t.h3,u=t.h4,d=0;d<16;++d)n=r.getInt32(),e[d]=n,f=l^a&(s^l),n=(i<<5|i>>>27)+f+u+1518500249+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<20;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,f=l^a&(s^l),n=(i<<5|i>>>27)+f+u+1518500249+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<32;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+1859775393+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<40;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+1859775393+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<60;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a&s|l&(a^s),n=(i<<5|i>>>27)+f+u+2400959708+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<80;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+3395469782+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+a|0,t.h2=t.h2+s|0,t.h3=t.h3+l|0,t.h4=t.h4+u|0,h-=64}}});var vg=de((g7,mC)=>{var ea=vt();qt();ti();cl();var gC=mC.exports=ea.pkcs1=ea.pkcs1||{};gC.encode_rsa_oaep=function(t,e,r){var n,i,a,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,a=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),a?a.start():a=ea.md.sha1.create(),s||(s=a);var l=Math.ceil(t.n.bitLength()/8),u=l-2*a.digestLength-2;if(e.length>u){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=e.length,f.maxLength=u,f}n||(n=""),a.update(n,"raw");for(var d=a.digest(),h="",g=u-e.length,m=0;m<g;m++)h+="\0";var y=d.getBytes()+h+""+e;if(!i)i=ea.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=i.length,f.digestLength=a.digestLength,f}var _=kd(i,l-a.digestLength-1,s),w=ea.util.xorBytes(y,_,y.length),E=kd(w,a.digestLength,s),S=ea.util.xorBytes(i,E,i.length);return"\0"+S+w};gC.decode_rsa_oaep=function(t,e,r){var n,i,a;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var w=new Error("RSAES-OAEP encoded message length is invalid.");throw w.length=e.length,w.expectedLength=s,w}if(i===void 0?i=ea.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var l=i.digest().getBytes(),u=e.charAt(0),f=e.substring(1,i.digestLength+1),d=e.substring(1+i.digestLength),h=kd(d,i.digestLength,a),g=ea.util.xorBytes(f,h,f.length),m=kd(g,s-i.digestLength-1,a),y=ea.util.xorBytes(d,m,d.length),_=y.substring(0,i.digestLength),w=u!=="\0",E=0;E<i.digestLength;++E)w|=l.charAt(E)!==_.charAt(E);for(var S=1,T=i.digestLength,L=i.digestLength;L<y.length;L++){var I=y.charCodeAt(L),B=I&1^1,z=S?65534:0;w|=I&z,S=S&B,T+=S}if(w||y.charCodeAt(T)!==1)throw new Error("Invalid RSAES-OAEP padding.");return y.substring(T+1)};function kd(t,e,r){r||(r=ea.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var wg=de((m7,_g)=>{var cs=vt();qt();Ou();ti();(function(){if(cs.prime){_g.exports=cs.prime;return}var t=_g.exports=cs.prime=cs.prime||{},e=cs.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(h,g){return h|g};t.generateProbablePrime=function(h,g,m){typeof g=="function"&&(m=g,g={}),g=g||{};var y=g.algorithm||"PRIMEINC";typeof y=="string"&&(y={name:y}),y.options=y.options||{};var _=g.prng||cs.random,w={nextBytes:function(E){for(var S=_.getBytesSync(E.length),T=0;T<E.length;++T)E[T]=S.charCodeAt(T)}};if(y.name==="PRIMEINC")return a(h,w,y.options,m);throw new Error("Invalid prime generation algorithm: "+y.name)};function a(h,g,m,y){return"workers"in m?u(h,g,m,y):s(h,g,m,y)}function s(h,g,m,y){var _=f(h,g),w=0,E=d(_.bitLength());"millerRabinTests"in m&&(E=m.millerRabinTests);var S=10;"maxBlockTime"in m&&(S=m.maxBlockTime),l(_,h,g,w,E,S,y)}function l(h,g,m,y,_,w,E){var S=+new Date;do{if(h.bitLength()>g&&(h=f(g,m)),h.isProbablePrime(_))return E(null,h);h.dAddOffset(r[y++%8],0)}while(w<0||+new Date-S<w);cs.util.setImmediate(function(){l(h,g,m,y,_,w,E)})}function u(h,g,m,y){if(typeof Worker=="undefined")return s(h,g,m,y);var _=f(h,g),w=m.workers,E=m.workLoad||100,S=E*30/8,T=m.workerScript||"forge/prime.worker.js";if(w===-1)return cs.util.estimateCores(function(I,B){I&&(B=2),w=B-1,L()});L();function L(){w=Math.max(1,w);for(var I=[],B=0;B<w;++B)I[B]=new Worker(T);for(var z=w,B=0;B<w;++B)I[B].addEventListener("message",G);var F=!1;function G(te){if(!F){--z;var ae=te.data;if(ae.found){for(var we=0;we<I.length;++we)I[we].terminate();return F=!0,y(null,new e(ae.prime,16))}_.bitLength()>h&&(_=f(h,g));var Se=_.toString(16);te.target.postMessage({hex:Se,workLoad:E}),_.dAddOffset(S,0)}}}}function f(h,g){var m=new e(h,g),y=h-1;return m.testBit(y)||m.bitwiseTo(e.ONE.shiftLeft(y),i,m),m.dAddOffset(31-m.mod(n).byteValue(),0),m}function d(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var Lu=de((y7,bC)=>{var qe=vt();bi();Ou();ls();vg();wg();ti();qt();typeof Pt=="undefined"&&(Pt=qe.jsbn.BigInteger);var Pt,Eg=qe.util.isNodejs?require("crypto"):null,ee=qe.asn1,ni=qe.util;qe.pki=qe.pki||{};bC.exports=qe.pki.rsa=qe.rsa=qe.rsa||{};var st=qe.pki,a5=[6,4,2,4,2,4,6,2],s5={name:"PrivateKeyInfo",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},o5={name:"RSAPrivateKey",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},l5={name:"RSAPublicKey",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},u5=qe.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:ee.Class.UNIVERSAL,type:ee.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},c5={name:"DigestInfo",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:ee.Class.UNIVERSAL,type:ee.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},f5=function(t){var e;if(t.algorithm in st.oids)e=st.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=ee.oidToDer(e).getBytes(),i=ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[]),a=ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[]);a.value.push(ee.create(ee.Class.UNIVERSAL,ee.Type.OID,!1,n)),a.value.push(ee.create(ee.Class.UNIVERSAL,ee.Type.NULL,!1,""));var s=ee.create(ee.Class.UNIVERSAL,ee.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(a),i.value.push(s),ee.toDer(i).getBytes()},yC=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Pt.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Pt.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Pt(qe.util.bytesToHex(qe.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Pt.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(a)<0;)i=i.add(e.p);var s=i.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};st.rsa.encrypt=function(t,e,r){var n=r,i,a=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=vC(t,e,r)):(i=qe.util.createBuffer(),i.putBytes(t));for(var s=new Pt(i.toHex(),16),l=yC(s,e,n),u=l.toString(16),f=qe.util.createBuffer(),d=a-Math.ceil(u.length/2);d>0;)f.putByte(0),--d;return f.putBytes(qe.util.hexToBytes(u)),f.getBytes()};st.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=i,a}var s=new Pt(qe.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=yC(s,e,r),u=l.toString(16),f=qe.util.createBuffer(),d=i-Math.ceil(u.length/2);d>0;)f.putByte(0),--d;return f.putBytes(qe.util.hexToBytes(u)),n!==!1?Id(f.getBytes(),e,r):f.getBytes()};st.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||qe.random,i={nextBytes:function(l){for(var u=n.getBytesSync(l.length),f=0;f<l.length;++f)l[f]=u.charCodeAt(f)}},a=r.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:t,rng:i,eInt:e||65537,e:new Pt(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};st.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Pt(null);r.fromInt(30);for(var n=0,i=function(h,g){return h|g},a=+new Date,s,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var u=t.p===null?t.pBits:t.qBits,f=u-1;t.pqState===0?(t.num=new Pt(u,t.rng),t.num.testBit(f)||t.num.bitwiseTo(Pt.ONE.shiftLeft(f),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>u?t.pqState=0:t.num.isProbablePrime(h5(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(a5[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Pt.ONE),t.q1=t.q.subtract(Pt.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Pt.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:st.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:st.rsa.setPublicKey(t.n,t.e)}}s=+new Date,l+=s-a,a=s}return t.keys!==null};st.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!qe.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(_C("generateKeyPair"))return Eg.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,u,f){if(l)return n(l);n(null,{privateKey:st.privateKeyFromPem(f),publicKey:st.publicKeyFromPem(u)})});if(wC("generateKey")&&wC("exportKey"))return ni.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:CC(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return ni.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){n(l)}).then(function(l){if(l){var u=st.privateKeyFromAsn1(ee.fromDer(qe.util.createBuffer(l)));n(null,{privateKey:u,publicKey:st.setRsaPublicKey(u.n,u.e)})}});if(EC("generateKey")&&EC("exportKey")){var i=ni.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:CC(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(l){var u=l.target.result,f=ni.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);f.oncomplete=function(d){var h=d.target.result,g=st.privateKeyFromAsn1(ee.fromDer(qe.util.createBuffer(h)));n(null,{privateKey:g,publicKey:st.setRsaPublicKey(g.n,g.e)})},f.onerror=function(d){n(d)}},i.onerror=function(l){n(l)};return}}else if(_C("generateKeyPairSync")){var a=Eg.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:st.privateKeyFromPem(a.privateKey),publicKey:st.publicKeyFromPem(a.publicKey)}}}var s=st.rsa.createKeyPairGenerationState(t,e,r);if(!n)return st.rsa.stepKeyPairGenerationState(s,0),s.keys;d5(s,r,n)};st.setRsaPublicKey=st.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(l,u,f){return vC(l,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(l,u){return qe.pkcs1.encode_rsa_oaep(u,l,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(l){return l}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return st.rsa.encrypt(s,r,!0)},r.verify=function(n,i,a,s){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),a==="RSASSA-PKCS1-V1_5"?a={verify:function(u,f){f=Id(f,r,!0);var d=ee.fromDer(f,{parseAllBytes:s._parseAllDigestBytes}),h={},g=[];if(!ee.validate(d,c5,h,g)){var m=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw m.errors=g,m}var y=ee.derToOid(h.algorithmIdentifier);if(!(y===qe.oids.md2||y===qe.oids.md5||y===qe.oids.sha1||y===qe.oids.sha224||y===qe.oids.sha256||y===qe.oids.sha384||y===qe.oids.sha512||y===qe.oids["sha512-224"]||y===qe.oids["sha512-256"])){var m=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw m.oid=y,m}if((y===qe.oids.md2||y===qe.oids.md5)&&!("parameters"in h))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return u===h.digest}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(u,f){return f=Id(f,r,!0),u===f}});var l=st.rsa.decrypt(i,r,!0,!1);return a.verify(n,l,r.n.bitLength())},r};st.setRsaPrivateKey=st.rsa.setPrivateKey=function(t,e,r,n,i,a,s,l){var u={n:t,e,d:r,p:n,q:i,dP:a,dQ:s,qInv:l};return u.decrypt=function(f,d,h){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var g=st.rsa.decrypt(f,u,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:Id};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:function(m,y){return qe.pkcs1.decode_rsa_oaep(y,m,h)}};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:function(m){return m}};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(g,u,!1)},u.sign=function(f,d){var h=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:f5},h=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:function(){return f}},h=1);var g=d.encode(f,u.n.bitLength());return st.rsa.encrypt(g,u,h)},u};st.wrapRsaPrivateKey=function(t){return ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ee.integerToDer(0).getBytes()),ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.OID,!1,ee.oidToDer(st.oids.rsaEncryption).getBytes()),ee.create(ee.Class.UNIVERSAL,ee.Type.NULL,!1,"")]),ee.create(ee.Class.UNIVERSAL,ee.Type.OCTETSTRING,!1,ee.toDer(t).getBytes())])};st.privateKeyFromAsn1=function(t){var e={},r=[];if(ee.validate(t,s5,e,r)&&(t=ee.fromDer(qe.util.createBuffer(e.privateKey))),e={},r=[],!ee.validate(t,o5,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,a,s,l,u,f,d,h;return i=qe.util.createBuffer(e.privateKeyModulus).toHex(),a=qe.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=qe.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=qe.util.createBuffer(e.privateKeyPrime1).toHex(),u=qe.util.createBuffer(e.privateKeyPrime2).toHex(),f=qe.util.createBuffer(e.privateKeyExponent1).toHex(),d=qe.util.createBuffer(e.privateKeyExponent2).toHex(),h=qe.util.createBuffer(e.privateKeyCoefficient).toHex(),st.setRsaPrivateKey(new Pt(i,16),new Pt(a,16),new Pt(s,16),new Pt(l,16),new Pt(u,16),new Pt(f,16),new Pt(d,16),new Pt(h,16))};st.privateKeyToAsn1=st.privateKeyToRSAPrivateKey=function(t){return ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ee.integerToDer(0).getBytes()),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.n)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.e)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.d)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.p)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.q)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.dP)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.dQ)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.qInv))])};st.publicKeyFromAsn1=function(t){var e={},r=[];if(ee.validate(t,u5,e,r)){var n=ee.derToOid(e.publicKeyOid);if(n!==st.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!ee.validate(t,l5,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var a=qe.util.createBuffer(e.publicKeyModulus).toHex(),s=qe.util.createBuffer(e.publicKeyExponent).toHex();return st.setRsaPublicKey(new Pt(a,16),new Pt(s,16))};st.publicKeyToAsn1=st.publicKeyToSubjectPublicKeyInfo=function(t){return ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.OID,!1,ee.oidToDer(st.oids.rsaEncryption).getBytes()),ee.create(ee.Class.UNIVERSAL,ee.Type.NULL,!1,"")]),ee.create(ee.Class.UNIVERSAL,ee.Type.BITSTRING,!1,[st.publicKeyToRSAPublicKey(t)])])};st.publicKeyToRSAPublicKey=function(t){return ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.n)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ta(t.e))])};function vC(t,e,r){var n=qe.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=t.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var s=i-3-t.length,l;if(r===0||r===1){l=r===0?0:255;for(var u=0;u<s;++u)n.putByte(l)}else for(;s>0;){for(var f=0,d=qe.random.getBytes(s),u=0;u<s;++u)l=d.charCodeAt(u),l===0?++f:n.putByte(l);s=f}return n.putByte(0),n.putBytes(t),n}function Id(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),a=qe.util.createBuffer(t),s=a.getByte(),l=a.getByte();if(s!==0||r&&l!==0&&l!==1||!r&&l!=2||r&&l===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var u=0;if(l===0){u=i-3-n;for(var f=0;f<u;++f)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(u=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++u}else if(l===2)for(u=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++u}var d=a.getByte();if(d!==0||u!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function d5(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){a(t.pBits,function(l,u){if(l)return r(l);if(t.p=u,t.q!==null)return s(l,t.q);a(t.qBits,s)})}function a(l,u){qe.prime.generateProbablePrime(l,n,u)}function s(l,u){if(l)return r(l);if(t.q=u,t.p.compareTo(t.q)<0){var f=t.p;t.p=t.q,t.q=f}if(t.p.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)!==0){t.q=null,a(t.qBits,s);return}if(t.p1=t.p.subtract(Pt.ONE),t.q1=t.q.subtract(Pt.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Pt.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,a(t.qBits,s);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:st.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:st.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function ta(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=qe.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function h5(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function _C(t){return qe.util.isNodejs&&typeof Eg[t]=="function"}function wC(t){return typeof ni.globalScope!="undefined"&&typeof ni.globalScope.crypto=="object"&&typeof ni.globalScope.crypto.subtle=="object"&&typeof ni.globalScope.crypto.subtle[t]=="function"}function EC(t){return typeof ni.globalScope!="undefined"&&typeof ni.globalScope.msCrypto=="object"&&typeof ni.globalScope.msCrypto.subtle=="object"&&typeof ni.globalScope.msCrypto.subtle[t]=="function"}function CC(t){for(var e=qe.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var Cg=de((v7,kC)=>{var Ne=vt();os();bi();Du();zi();ls();xd();js();ti();hg();Lu();qt();typeof xC=="undefined"&&(xC=Ne.jsbn.BigInteger);var xC,ue=Ne.asn1,gt=Ne.pki=Ne.pki||{};kC.exports=gt.pbe=Ne.pbe=Ne.pbe||{};var zs=gt.oids,p5={name:"EncryptedPrivateKeyInfo",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},g5={name:"PBES2Algorithms",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},m5={name:"pkcs-12PbeParams",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"iterations"}]};gt.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Ne.random.getBytesSync(r.saltSize),i=r.count,a=ue.integerToDer(i),s,l,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var f,d,h;switch(r.algorithm){case"aes128":s=16,f=16,d=zs["aes128-CBC"],h=Ne.aes.createEncryptionCipher;break;case"aes192":s=24,f=16,d=zs["aes192-CBC"],h=Ne.aes.createEncryptionCipher;break;case"aes256":s=32,f=16,d=zs["aes256-CBC"],h=Ne.aes.createEncryptionCipher;break;case"des":s=8,f=8,d=zs.desCBC,h=Ne.des.createEncryptionCipher;break;default:var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var m="hmacWith"+r.prfAlgorithm.toUpperCase(),y=AC(m),_=Ne.pkcs5.pbkdf2(e,n,i,s,y),w=Ne.random.getBytesSync(f),E=h(_);E.start(w),E.update(ue.toDer(t)),E.finish(),u=E.output.getBytes();var S=y5(n,a,s,m);l=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(zs.pkcs5PBES2).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(zs.pkcs5PBKDF2).getBytes()),S]),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(d).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,w)])])])}else if(r.algorithm==="3des"){s=24;var T=new Ne.util.ByteBuffer(n),_=gt.pbe.generatePkcs12Key(e,T,1,i,s),w=gt.pbe.generatePkcs12Key(e,T,2,i,s),E=Ne.des.createEncryptionCipher(_);E.start(w),E.update(ue.toDer(t)),E.finish(),u=E.output.getBytes(),l=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(zs["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,n),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,a.getBytes())])])}else{var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var L=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[l,ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,u)]);return L};gt.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!ue.validate(t,p5,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=ue.derToOid(n.encryptionOid),l=gt.pbe.getCipher(s,n.encryptionParams,e),u=Ne.util.createBuffer(n.encryptedData);return l.update(u),l.finish()&&(r=ue.fromDer(l.output)),r};gt.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:ue.toDer(t).getBytes()};return Ne.pem.encode(r,{maxline:e})};gt.encryptedPrivateKeyFromPem=function(t){var e=Ne.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return ue.fromDer(e.body)};gt.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=gt.wrapRsaPrivateKey(gt.privateKeyToAsn1(t));return n=gt.encryptPrivateKeyInfo(n,e,r),gt.encryptedPrivateKeyToPem(n)}var i,a,s,l;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,a=Ne.random.getBytesSync(16),l=Ne.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=Ne.random.getBytesSync(16),l=Ne.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=Ne.random.getBytesSync(16),l=Ne.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=Ne.random.getBytesSync(8),l=Ne.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=Ne.random.getBytesSync(8),l=Ne.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var f=Ne.pbe.opensslDeriveBytes(e,a.substr(0,8),s),d=l(f);d.start(a),d.update(ue.toDer(gt.privateKeyToAsn1(t))),d.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Ne.util.bytesToHex(a).toUpperCase()},body:d.output.getBytes()};return Ne.pem.encode(h)};gt.decryptRsaPrivateKey=function(t,e){var r=null,n=Ne.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var a,s;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,s=Ne.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=Ne.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=Ne.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=Ne.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=Ne.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(h){return Ne.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":a=8,s=function(h){return Ne.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":a=16,s=function(h){return Ne.rc2.createDecryptionCipher(h,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var l=Ne.util.hexToBytes(n.dekInfo.parameters),u=Ne.pbe.opensslDeriveBytes(e,l.substr(0,8),a),f=s(u);if(f.start(l),f.update(Ne.util.createBuffer(n.body)),f.finish())r=f.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=gt.decryptPrivateKeyInfo(ue.fromDer(r),e):r=ue.fromDer(r),r!==null&&(r=gt.privateKeyFromAsn1(r)),r};gt.pbe.generatePkcs12Key=function(t,e,r,n,i,a){var s,l;if(typeof a=="undefined"||a===null){if(!("sha1"in Ne.md))throw new Error('"sha1" hash algorithm unavailable.');a=Ne.md.sha1.create()}var u=a.digestLength,f=a.blockLength,d=new Ne.util.ByteBuffer,h=new Ne.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)h.putInt16(t.charCodeAt(l));h.putInt16(0)}var g=h.length(),m=e.length(),y=new Ne.util.ByteBuffer;y.fillWithByte(r,f);var _=f*Math.ceil(m/f),w=new Ne.util.ByteBuffer;for(l=0;l<_;l++)w.putByte(e.at(l%m));var E=f*Math.ceil(g/f),S=new Ne.util.ByteBuffer;for(l=0;l<E;l++)S.putByte(h.at(l%g));var T=w;T.putBuffer(S);for(var L=Math.ceil(i/u),I=1;I<=L;I++){var B=new Ne.util.ByteBuffer;B.putBytes(y.bytes()),B.putBytes(T.bytes());for(var z=0;z<n;z++)a.start(),a.update(B.getBytes()),B=a.digest();var F=new Ne.util.ByteBuffer;for(l=0;l<f;l++)F.putByte(B.at(l%u));var G=Math.ceil(m/f)+Math.ceil(g/f),te=new Ne.util.ByteBuffer;for(s=0;s<G;s++){var ae=new Ne.util.ByteBuffer(T.getBytes(f)),we=511;for(l=F.length()-1;l>=0;l--)we=we>>8,we+=F.at(l)+ae.at(l),ae.setAt(l,we&255);te.putBuffer(ae)}T=te,d.putBuffer(B)}return d.truncate(d.length()-i),d};gt.pbe.getCipher=function(t,e,r){switch(t){case gt.oids.pkcs5PBES2:return gt.pbe.getCipherForPBES2(t,e,r);case gt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case gt.oids["pbewithSHAAnd40BitRC2-CBC"]:return gt.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};gt.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!ue.validate(e,g5,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(t=ue.derToOid(n.kdfOid),t!==gt.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=t,a.supportedOids=["pkcs5PBKDF2"],a}if(t=ue.derToOid(n.encOid),t!==gt.oids["aes128-CBC"]&&t!==gt.oids["aes192-CBC"]&&t!==gt.oids["aes256-CBC"]&&t!==gt.oids["des-EDE3-CBC"]&&t!==gt.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=t,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=n.kdfSalt,l=Ne.util.createBuffer(n.kdfIterationCount);l=l.getInt(l.length()<<3);var u,f;switch(gt.oids[t]){case"aes128-CBC":u=16,f=Ne.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,f=Ne.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,f=Ne.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,f=Ne.des.createDecryptionCipher;break;case"desCBC":u=8,f=Ne.des.createDecryptionCipher;break}var d=SC(n.prfOid),h=Ne.pkcs5.pbkdf2(r,s,l,u,d),g=n.encIv,m=f(h);return m.start(g),m};gt.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!ue.validate(e,m5,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=Ne.util.createBuffer(n.salt),l=Ne.util.createBuffer(n.iterations);l=l.getInt(l.length()<<3);var u,f,d;switch(t){case gt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,f=8,d=Ne.des.startDecrypting;break;case gt.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,f=8,d=function(_,w){var E=Ne.rc2.createDecryptionCipher(_,40);return E.start(w,null),E};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=t,a}var h=SC(n.prfOid),g=gt.pbe.generatePkcs12Key(r,s,1,l,u,h);h.start();var m=gt.pbe.generatePkcs12Key(r,s,2,l,f,h);return d(g,m)};gt.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in Ne.md))throw new Error('"md5" hash algorithm unavailable.');n=Ne.md.md5.create()}e===null&&(e="");for(var i=[TC(n,t+e)],a=16,s=1;a<r;++s,a+=16)i.push(TC(n,i[s-1]+t+e));return i.join("").substr(0,r)};function TC(t,e){return t.start().update(e).digest().getBytes()}function SC(t){var e;if(!t)e="hmacWithSHA1";else if(e=gt.oids[ue.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return AC(e)}function AC(t){var e=Ne.md;switch(t){case"hmacWithSHA224":e=Ne.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function y5(t,e,r,n){var i=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,t),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,Ne.util.hexToBytes(r.toString(16))),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(gt.oids[n]).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.NULL,!1,"")])),i}});var bg=de((_7,RC)=>{var fl=vt();bi();qt();var Ie=fl.asn1,dl=RC.exports=fl.pkcs7asn1=fl.pkcs7asn1||{};fl.pkcs7=fl.pkcs7||{};fl.pkcs7.asn1=dl;var IC={name:"ContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};dl.contentInfoValidator=IC;var NC={name:"EncryptedContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Ie.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};dl.envelopedDataValidator={name:"EnvelopedData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(NC)};dl.encryptedDataValidator={name:"EncryptedData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"}].concat(NC)};var v5={name:"SignerInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Ie.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};dl.signedDataValidator={name:"SignedData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},IC,{name:"SignedData.Certificates",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,capture:"signerInfos",optional:!0,value:[v5]}]};dl.recipientInfoValidator={name:"RecipientInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Ie.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var xg=de((w7,DC)=>{var Qs=vt();qt();Qs.mgf=Qs.mgf||{};var _5=DC.exports=Qs.mgf.mgf1=Qs.mgf1=Qs.mgf1||{};_5.create=function(t){var e={generate:function(r,n){for(var i=new Qs.util.ByteBuffer,a=Math.ceil(n/t.digestLength),s=0;s<a;s++){var l=new Qs.util.ByteBuffer;l.putInt32(s),t.start(),t.update(r+l.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()}};return e}});var OC=de((E7,BC)=>{var Nd=vt();xg();BC.exports=Nd.mgf=Nd.mgf||{};Nd.mgf.mgf1=Nd.mgf1});var Rd=de((C7,LC)=>{var Xs=vt();ti();qt();var w5=LC.exports=Xs.pss=Xs.pss||{};w5.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=Xs.util.createBuffer(i));var a;if("saltLength"in t)a=t.saltLength;else if(i!==null)a=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==a)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||Xs.random,l={};return l.encode=function(u,f){var d,h=f-1,g=Math.ceil(h/8),m=u.digest().getBytes();if(g<n+a+2)throw new Error("Message is too long to encrypt.");var y;i===null?y=s.getBytesSync(a):y=i.bytes();var _=new Xs.util.ByteBuffer;_.fillWithByte(0,8),_.putBytes(m),_.putBytes(y),e.start(),e.update(_.getBytes());var w=e.digest().getBytes(),E=new Xs.util.ByteBuffer;E.fillWithByte(0,g-a-n-2),E.putByte(1),E.putBytes(y);var S=E.getBytes(),T=g-n-1,L=r.generate(w,T),I="";for(d=0;d<T;d++)I+=String.fromCharCode(S.charCodeAt(d)^L.charCodeAt(d));var B=65280>>8*g-h&255;return I=String.fromCharCode(I.charCodeAt(0)&~B)+I.substr(1),I+w+String.fromCharCode(188)},l.verify=function(u,f,d){var h,g=d-1,m=Math.ceil(g/8);if(f=f.substr(-m),m<n+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(f.charCodeAt(m-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var y=m-n-1,_=f.substr(0,y),w=f.substr(y,n),E=65280>>8*m-g&255;if((_.charCodeAt(0)&E)!=0)throw new Error("Bits beyond keysize not zero as expected.");var S=r.generate(w,y),T="";for(h=0;h<y;h++)T+=String.fromCharCode(_.charCodeAt(h)^S.charCodeAt(h));T=String.fromCharCode(T.charCodeAt(0)&~E)+T.substr(1);var L=m-n-a-2;for(h=0;h<L;h++)if(T.charCodeAt(h)!==0)throw new Error("Leftmost octets not zero as expected");if(T.charCodeAt(L)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var I=T.substr(-a),B=new Xs.util.ByteBuffer;B.fillWithByte(0,8),B.putBytes(u),B.putBytes(I),e.start(),e.update(B.getBytes());var z=e.digest().getBytes();return w===z},l}});var Od=de((b7,qC)=>{var Ge=vt();os();bi();Du();zi();OC();ls();js();Rd();Lu();qt();var b=Ge.asn1,Ce=qC.exports=Ge.pki=Ge.pki||{},Mt=Ce.oids,wr={};wr.CN=Mt.commonName;wr.commonName="CN";wr.C=Mt.countryName;wr.countryName="C";wr.L=Mt.localityName;wr.localityName="L";wr.ST=Mt.stateOrProvinceName;wr.stateOrProvinceName="ST";wr.O=Mt.organizationName;wr.organizationName="O";wr.OU=Mt.organizationalUnitName;wr.organizationalUnitName="OU";wr.E=Mt.emailAddress;wr.emailAddress="E";var PC=Ge.pki.rsa.publicKeyValidator,E5={name:"Certificate",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:b.Class.UNIVERSAL,type:b.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:b.Class.UNIVERSAL,type:b.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:b.Class.UNIVERSAL,type:b.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:b.Class.UNIVERSAL,type:b.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},PC,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:b.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:b.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:b.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},C5={name:"rsapss",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:b.Class.UNIVERSAL,type:b.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:b.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:b.Class.UNIVERSAL,type:b.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:b.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:b.Class.UNIVERSAL,type:b.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:b.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:b.Class.UNIVERSAL,type:b.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},b5={name:"CertificationRequestInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},PC,{name:"CertificationRequestInfo.attributes",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:b.Class.UNIVERSAL,type:b.Type.SET,constructed:!0}]}]}]},x5={name:"CertificationRequest",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[b5,{name:"CertificationRequest.signatureAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Ce.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,a,s=0;s<t.value.length;++s){n=t.value[s];for(var l=0;l<n.value.length;++l)a={},i=n.value[l],a.type=b.derToOid(i.value[0].value),a.value=i.value[1].value,a.valueTagClass=i.value[1].type,a.type in Mt&&(a.name=Mt[a.type],a.name in wr&&(a.shortName=wr[a.name])),e&&(e.update(a.type),e.update(a.value)),r.push(a)}return r};Ce.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=b.derToOid(n.value[0].value),a=n.value[1].value,s=0;s<a.length;++s){var l={};if(l.type=i,l.value=a[s].value,l.valueTagClass=a[s].type,l.type in Mt&&(l.name=Mt[l.type],l.name in wr&&(l.shortName=wr[l.name])),l.type===Mt.extensionRequest){l.extensions=[];for(var u=0;u<l.value.length;++u)l.extensions.push(Ce.certificateExtensionFromAsn1(l.value[u]))}e.push(l)}return e};function fs(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}var Dd=function(t,e,r){var n={};if(t!==Mt["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Mt.sha1},mgf:{algorithmOid:Mt.mgf1,hash:{algorithmOid:Mt.sha1}},saltLength:20});var i={},a=[];if(!b.validate(e,C5,i,a)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=a,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=b.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=b.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=b.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},Bd=function(t){switch(Mt[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return Ge.md.sha1.create();case"md5WithRSAEncryption":return Ge.md.md5.create();case"sha256WithRSAEncryption":return Ge.md.sha256.create();case"sha384WithRSAEncryption":return Ge.md.sha384.create();case"sha512WithRSAEncryption":return Ge.md.sha512.create();case"RSASSA-PSS":return Ge.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},MC=function(t){var e=t.certificate,r;switch(e.signatureOid){case Mt.sha1WithRSAEncryption:case Mt.sha1WithRSASignature:break;case Mt["RSASSA-PSS"]:var n,i;if(n=Mt[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||Ge.md[n]===void 0){var a=new Error("Unsupported MGF hash function.");throw a.oid=e.signatureParameters.mgf.hash.algorithmOid,a.name=n,a}if(i=Mt[e.signatureParameters.mgf.algorithmOid],i===void 0||Ge.mgf[i]===void 0){var a=new Error("Unsupported MGF function.");throw a.oid=e.signatureParameters.mgf.algorithmOid,a.name=i,a}if(i=Ge.mgf[i].create(Ge.md[n].create()),n=Mt[e.signatureParameters.hash.algorithmOid],n===void 0||Ge.md[n]===void 0){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=e.signatureParameters.hash.algorithmOid,a.name=n,a}r=Ge.pss.create(Ge.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)};Ce.certificateFromPem=function(t,e,r){var n=Ge.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=b.fromDer(n.body,r);return Ce.certificateFromAsn1(a,e)};Ce.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:b.toDer(Ce.certificateToAsn1(t)).getBytes()};return Ge.pem.encode(r,{maxline:e})};Ce.publicKeyFromPem=function(t){var e=Ge.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=b.fromDer(e.body);return Ce.publicKeyFromAsn1(n)};Ce.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:b.toDer(Ce.publicKeyToAsn1(t)).getBytes()};return Ge.pem.encode(r,{maxline:e})};Ce.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:b.toDer(Ce.publicKeyToRSAPublicKey(t)).getBytes()};return Ge.pem.encode(r,{maxline:e})};Ce.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Ge.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=b.toDer(Ce.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=b.toDer(Ce.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var a=r.digest();if(e.encoding==="hex"){var s=a.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return a};Ce.certificationRequestFromPem=function(t,e,r){var n=Ge.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=b.fromDer(n.body,r);return Ce.certificationRequestFromAsn1(a,e)};Ce.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:b.toDer(Ce.certificationRequestToAsn1(t)).getBytes()};return Ge.pem.encode(r,{maxline:e})};Ce.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return fs(t.issuer,e)},t.issuer.addField=function(e){ii([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return fs(t.subject,e)},t.subject.addField=function(e){ii([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){ii(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){ii(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)UC(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||Ge.md.sha1.create();var n=Mt[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Ce.getTBSCertificate(t);var a=b.toDer(t.tbsCertificate);t.md.update(a.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=n.attributes,a}var s=e.md;if(s===null){s=Bd({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||Ce.getTBSCertificate(e),u=b.toDer(l);s.update(u.getBytes())}return s!==null&&(r=MC({certificate:t,md:s,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var a,s,l=0;r&&l<n.attributes.length;++l)a=n.attributes[l],s=i.attributes[l],(a.type!==s.type||a.value!==s.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Ce.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=Mt.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return Ge.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Ce.certificateFromAsn1=function(t,e){var r={},n=[];if(!b.validate(t,E5,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var a=b.derToOid(r.publicKeyOid);if(a!==Ce.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Ce.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=Ge.util.createBuffer(r.certSerialNumber);s.serialNumber=l.toHex(),s.signatureOid=Ge.asn1.derToOid(r.certSignatureOid),s.signatureParameters=Dd(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=Ge.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=Dd(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var u=[];if(r.certValidity1UTCTime!==void 0&&u.push(b.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&u.push(b.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&u.push(b.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&u.push(b.generalizedTimeToDate(r.certValidity4GeneralizedTime)),u.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(u.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=u[0],s.validity.notAfter=u[1],s.tbsCertificate=r.tbsCertificate,e){s.md=Bd({signatureOid:s.signatureOid,type:"certificate"});var f=b.toDer(s.tbsCertificate);s.md.update(f.getBytes())}var d=Ge.md.sha1.create(),h=b.toDer(r.certIssuer);d.update(h.getBytes()),s.issuer.getField=function(y){return fs(s.issuer,y)},s.issuer.addField=function(y){ii([y]),s.issuer.attributes.push(y)},s.issuer.attributes=Ce.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=d.digest().toHex();var g=Ge.md.sha1.create(),m=b.toDer(r.certSubject);return g.update(m.getBytes()),s.subject.getField=function(y){return fs(s.subject,y)},s.subject.addField=function(y){ii([y]),s.subject.attributes.push(y)},s.subject.attributes=Ce.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=g.digest().toHex(),r.certExtensions?s.extensions=Ce.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=Ce.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};Ce.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Ce.certificateExtensionFromAsn1(n.value[i]));return e};Ce.certificateExtensionFromAsn1=function(t){var e={};if(e.id=b.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===b.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in Mt){if(e.name=Mt[e.id],e.name==="keyUsage"){var r=b.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)==128,e.nonRepudiation=(n&64)==64,e.keyEncipherment=(n&32)==32,e.dataEncipherment=(n&16)==16,e.keyAgreement=(n&8)==8,e.keyCertSign=(n&4)==4,e.cRLSign=(n&2)==2,e.encipherOnly=(n&1)==1,e.decipherOnly=(i&128)==128}else if(e.name==="basicConstraints"){var r=b.fromDer(e.value);r.value.length>0&&r.value[0].type===b.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var a=null;r.value.length>0&&r.value[0].type===b.Type.INTEGER?a=r.value[0].value:r.value.length>1&&(a=r.value[1].value),a!==null&&(e.pathLenConstraint=b.derToInteger(a))}else if(e.name==="extKeyUsage")for(var r=b.fromDer(e.value),s=0;s<r.value.length;++s){var l=b.derToOid(r.value[s].value);l in Mt?e[Mt[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var r=b.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)==128,e.server=(n&64)==64,e.email=(n&32)==32,e.objsign=(n&16)==16,e.reserved=(n&8)==8,e.sslCA=(n&4)==4,e.emailCA=(n&2)==2,e.objCA=(n&1)==1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var u,r=b.fromDer(e.value),f=0;f<r.value.length;++f){u=r.value[f];var d={type:u.type,value:u.value};switch(e.altNames.push(d),u.type){case 1:case 2:case 6:break;case 7:d.ip=Ge.util.bytesToIP(u.value);break;case 8:d.oid=b.derToOid(u.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=b.fromDer(e.value);e.subjectKeyIdentifier=Ge.util.bytesToHex(r.value)}}return e};Ce.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!b.validate(t,x5,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var a=b.derToOid(r.publicKeyOid);if(a!==Ce.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Ce.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=Ge.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=Dd(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=Ge.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=Dd(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,e){s.md=Bd({signatureOid:s.signatureOid,type:"certification request"});var l=b.toDer(s.certificationRequestInfo);s.md.update(l.getBytes())}var u=Ge.md.sha1.create();return s.subject.getField=function(f){return fs(s.subject,f)},s.subject.addField=function(f){ii([f]),s.subject.attributes.push(f)},s.subject.attributes=Ce.RDNAttributesAsArray(r.certificationRequestInfoSubject,u),s.subject.hash=u.digest().toHex(),s.publicKey=Ce.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(f){return fs(s,f)},s.addAttribute=function(f){ii([f]),s.attributes.push(f)},s.attributes=Ce.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};Ce.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return fs(t.subject,e)},t.subject.addField=function(e){ii([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return fs(t,e)},t.addAttribute=function(e){ii([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){ii(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){ii(e),t.attributes=e},t.sign=function(e,r){t.md=r||Ge.md.sha1.create();var n=Mt[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Ce.getCertificationRequestInfo(t);var a=b.toDer(t.certificationRequestInfo);t.md.update(a.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=Bd({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Ce.getCertificationRequestInfo(t),i=b.toDer(n);r.update(i.getBytes())}return r!==null&&(e=MC({certificate:t,md:r,signature:t.signature})),e},t};function hl(t){for(var e=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,a=0;a<i.length;++a){r=i[a];var s=r.value,l=b.Type.PRINTABLESTRING;"valueTagClass"in r&&(l=r.valueTagClass,l===b.Type.UTF8&&(s=Ge.util.encodeUtf8(s))),n=b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(r.type).getBytes()),b.create(b.Class.UNIVERSAL,l,!1,s)])]),e.value.push(n)}return e}function ii(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name=="undefined"&&(e.type&&e.type in Ce.oids?e.name=Ce.oids[e.type]:e.shortName&&e.shortName in wr&&(e.name=Ce.oids[wr[e.shortName]])),typeof e.type=="undefined")if(e.name&&e.name in Ce.oids)e.type=Ce.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName=="undefined"&&e.name&&e.name in wr&&(e.shortName=wr[e.name]),e.type===Mt.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=b.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Ce.certificateExtensionToAsn1(UC(e.extensions[i])))}if(typeof e.value=="undefined"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function UC(t,e){if(e=e||{},typeof t.name=="undefined"&&t.id&&t.id in Ce.oids&&(t.name=Ce.oids[t.id]),typeof t.id=="undefined")if(t.name&&t.name in Ce.oids)t.id=Ce.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value!="undefined")return t;if(t.name==="keyUsage"){var n=0,i=0,a=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(a|=128,n=7);var s=String.fromCharCode(n);a!==0?s+=String.fromCharCode(i)+String.fromCharCode(a):i!==0&&(s+=String.fromCharCode(i)),t.value=b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,s)}else if(t.name==="basicConstraints")t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(b.create(b.Class.UNIVERSAL,b.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var u in t)t[u]===!0&&(u in Mt?l.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(Mt[u]).getBytes())):u.indexOf(".")!==-1&&l.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(u).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),t.value=b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,s)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);for(var f,d=0;d<t.altNames.length;++d){f=t.altNames[d];var s=f.value;if(f.type===7&&f.ip){if(s=Ge.util.bytesFromIP(f.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else f.type===8&&(f.oid?s=b.oidToDer(b.oidToDer(f.oid)):s=b.oidToDer(s));t.value.value.push(b.create(b.Class.CONTEXT_SPECIFIC,f.type,!1,s))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=b.create(b.Class.UNIVERSAL,b.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var h=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=h.toHex(),t.value=b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,h.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var g=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!1,g))}if(t.authorityCertIssuer){var m=[b.create(b.Class.CONTEXT_SPECIFIC,4,!0,[hl(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,m))}if(t.serialNumber){var y=Ge.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!1,y))}}else if(t.name==="cRLDistributionPoints"){t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);for(var l=t.value.value,_=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),w=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[]),f,d=0;d<t.altNames.length;++d){f=t.altNames[d];var s=f.value;if(f.type===7&&f.ip){if(s=Ge.util.bytesFromIP(f.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else f.type===8&&(f.oid?s=b.oidToDer(b.oidToDer(f.oid)):s=b.oidToDer(s));w.value.push(b.create(b.Class.CONTEXT_SPECIFIC,f.type,!1,s))}_.value.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[w])),l.push(_)}if(typeof t.value=="undefined"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function Tg(t,e){switch(t){case Mt["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.hash.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.mgf.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.mgf.hash.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.saltLength).getBytes())])),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,r);default:return b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")}}function T5(t){var e=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],a=i.value,s=b.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===b.Type.UTF8&&(a=Ge.util.encodeUtf8(a));var l=!1;"valueConstructed"in i&&(l=i.valueConstructed);var u=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(i.type).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[b.create(b.Class.UNIVERSAL,s,l,a)])]);e.value.push(u)}return e}var S5=new Date("1950-01-01T00:00:00Z"),A5=new Date("2050-01-01T00:00:00Z");function FC(t){return t>=S5&&t<A5?b.create(b.Class.UNIVERSAL,b.Type.UTCTIME,!1,b.dateToUtcTime(t)):b.create(b.Class.UNIVERSAL,b.Type.GENERALIZEDTIME,!1,b.dateToGeneralizedTime(t))}Ce.getTBSCertificate=function(t){var e=FC(t.validity.notBefore),r=FC(t.validity.notAfter),n=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(t.version).getBytes())]),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,Ge.util.hexToBytes(t.serialNumber)),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.siginfo.algorithmOid).getBytes()),Tg(t.siginfo.algorithmOid,t.siginfo.parameters)]),hl(t.issuer),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[e,r]),hl(t.subject),Ce.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,[b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!0,[b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Ce.certificateExtensionsToAsn1(t.extensions)),n};Ce.getCertificationRequestInfo=function(t){var e=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(t.version).getBytes()),hl(t.subject),Ce.publicKeyToAsn1(t.publicKey),T5(t)]);return e};Ce.distinguishedNameToAsn1=function(t){return hl(t)};Ce.certificateToAsn1=function(t){var e=t.tbsCertificate||Ce.getTBSCertificate(t);return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[e,b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.signatureOid).getBytes()),Tg(t.signatureOid,t.signatureParameters)]),b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};Ce.certificateExtensionsToAsn1=function(t){var e=b.create(b.Class.CONTEXT_SPECIFIC,3,!0,[]),r=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Ce.certificateExtensionToAsn1(t[n]));return e};Ce.certificateExtensionToAsn1=function(t){var e=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);e.value.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.id).getBytes())),t.critical&&e.value.push(b.create(b.Class.UNIVERSAL,b.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return typeof t.value!="string"&&(r=b.toDer(r).getBytes()),e.value.push(b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,r)),e};Ce.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Ce.getCertificationRequestInfo(t);return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[e,b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.signatureOid).getBytes()),Tg(t.signatureOid,t.signatureParameters)]),b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};Ce.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(s){var l=r(s.issuer);return l},e.addCertificate=function(s){if(typeof s=="string"&&(s=Ge.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))if(s.subject.hash in e.certs){var l=e.certs[s.subject.hash];Ge.util.isArray(l)||(l=[l]),l.push(s),e.certs[s.subject.hash]=l}else e.certs[s.subject.hash]=s},e.hasCertificate=function(s){typeof s=="string"&&(s=Ge.pki.certificateFromPem(s));var l=r(s.subject);if(!l)return!1;Ge.util.isArray(l)||(l=[l]);for(var u=b.toDer(Ce.certificateToAsn1(s)).getBytes(),f=0;f<l.length;++f){var d=b.toDer(Ce.certificateToAsn1(l[f])).getBytes();if(u===d)return!0}return!1},e.listAllCertificates=function(){var s=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var u=e.certs[l];if(!Ge.util.isArray(u))s.push(u);else for(var f=0;f<u.length;++f)s.push(u[f])}return s},e.removeCertificate=function(s){var l;if(typeof s=="string"&&(s=Ge.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))return null;var u=r(s.subject);if(!Ge.util.isArray(u))return l=e.certs[s.subject.hash],delete e.certs[s.subject.hash],l;for(var f=b.toDer(Ce.certificateToAsn1(s)).getBytes(),d=0;d<u.length;++d){var h=b.toDer(Ce.certificateToAsn1(u[d])).getBytes();f===h&&(l=u[d],u.splice(d,1))}return u.length===0&&delete e.certs[s.subject.hash],l};function r(s){return n(s),e.certs[s.hash]||null}function n(s){if(!s.hash){var l=Ge.md.sha1.create();s.attributes=Ce.RDNAttributesAsArray(hl(s),l),s.hash=l.digest().toHex()}}if(t)for(var i=0;i<t.length;++i){var a=t[i];e.addCertificate(a)}return e};Ce.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Ce.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i=="undefined"&&(i=new Date);var a=!0,s=null,l=0;do{var u=e.shift(),f=null,d=!1;if(i&&(i<u.validity.notBefore||i>u.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:Ce.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:i}),s===null){if(f=e[0]||t.getIssuer(u),f===null&&u.isIssuer(u)&&(d=!0,f=u),f){var h=f;Ge.util.isArray(h)||(h=[h]);for(var g=!1;!g&&h.length>0;){f=h.shift();try{g=f.verify(u)}catch(I){}}g||(s={message:"Certificate signature is invalid.",error:Ce.certificateError.bad_certificate})}s===null&&(!f||d)&&!t.hasCertificate(u)&&(s={message:"Certificate is not trusted.",error:Ce.certificateError.unknown_ca})}if(s===null&&f&&!u.isIssuer(f)&&(s={message:"Certificate issuer is invalid.",error:Ce.certificateError.bad_certificate}),s===null)for(var m={keyUsage:!0,basicConstraints:!0},y=0;s===null&&y<u.extensions.length;++y){var _=u.extensions[y];_.critical&&!(_.name in m)&&(s={message:"Certificate has an unsupported critical extension.",error:Ce.certificateError.unsupported_certificate})}if(s===null&&(!a||e.length===0&&(!f||d))){var w=u.getExtension("basicConstraints"),E=u.getExtension("keyUsage");if(E!==null&&(!E.keyCertSign||w===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Ce.certificateError.bad_certificate}),s===null&&w!==null&&!w.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Ce.certificateError.bad_certificate}),s===null&&E!==null&&"pathLenConstraint"in w){var S=l-1;S>w.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:Ce.certificateError.bad_certificate})}}var T=s===null?!0:s.error,L=r.verify?r.verify(T,l,n):T;if(L===!0)s=null;else throw T===!0&&(s={message:"The application rejected the certificate.",error:Ce.certificateError.bad_certificate}),(L||L===0)&&(typeof L=="object"&&!Ge.util.isArray(L)?(L.message&&(s.message=L.message),L.error&&(s.error=L.error)):typeof L=="string"&&(s.error=L)),s;a=!1,++l}while(e.length>0);return!0}});var Ag=de((x7,VC)=>{var ar=vt();bi();sl();ls();bg();Cg();ti();Lu();cl();qt();Od();var U=ar.asn1,Tt=ar.pki,Pu=VC.exports=ar.pkcs12=ar.pkcs12||{},GC={name:"ContentInfo",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:U.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},k5={name:"PFX",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:U.Class.UNIVERSAL,type:U.Type.INTEGER,constructed:!1,capture:"version"},GC,{name:"PFX.macData",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:U.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:U.Class.UNIVERSAL,type:U.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:U.Class.UNIVERSAL,type:U.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:U.Class.UNIVERSAL,type:U.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},I5={name:"SafeBag",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:U.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:U.Class.UNIVERSAL,type:U.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},N5={name:"Attribute",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:U.Class.UNIVERSAL,type:U.Type.SET,constructed:!0,capture:"values"}]},R5={name:"CertBag",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:U.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:U.Class.UNIVERSAL,type:U.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function Mu(t,e,r,n){for(var i=[],a=0;a<t.length;a++)for(var s=0;s<t[a].safeBags.length;s++){var l=t[a].safeBags[s];if(!(n!==void 0&&l.type!==n)){if(e===null){i.push(l);continue}l.attributes[e]!==void 0&&l.attributes[e].indexOf(r)>=0&&i.push(l)}}return i}Pu.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!U.validate(t,k5,n,i)){var a=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw a.errors=a,a}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(w){var E={},S;return"localKeyId"in w?S=w.localKeyId:"localKeyIdHex"in w&&(S=ar.util.hexToBytes(w.localKeyIdHex)),S===void 0&&!("friendlyName"in w)&&"bagType"in w&&(E[w.bagType]=Mu(s.safeContents,null,null,w.bagType)),S!==void 0&&(E.localKeyId=Mu(s.safeContents,"localKeyId",S,w.bagType)),"friendlyName"in w&&(E.friendlyName=Mu(s.safeContents,"friendlyName",w.friendlyName,w.bagType)),E},getBagsByFriendlyName:function(w,E){return Mu(s.safeContents,"friendlyName",w,E)},getBagsByLocalKeyId:function(w,E){return Mu(s.safeContents,"localKeyId",w,E)}};if(n.version.charCodeAt(0)!==3){var a=new Error("PKCS#12 PFX of version other than 3 not supported.");throw a.version=n.version.charCodeAt(0),a}if(U.derToOid(n.contentType)!==Tt.oids.data){var a=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw a.oid=U.derToOid(n.contentType),a}var l=n.content.value[0];if(l.tagClass!==U.Class.UNIVERSAL||l.type!==U.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=Sg(l),n.mac){var u=null,f=0,d=U.derToOid(n.macAlgorithm);switch(d){case Tt.oids.sha1:u=ar.md.sha1.create(),f=20;break;case Tt.oids.sha256:u=ar.md.sha256.create(),f=32;break;case Tt.oids.sha384:u=ar.md.sha384.create(),f=48;break;case Tt.oids.sha512:u=ar.md.sha512.create(),f=64;break;case Tt.oids.md5:u=ar.md.md5.create(),f=16;break}if(u===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var h=new ar.util.ByteBuffer(n.macSalt),g="macIterations"in n?parseInt(ar.util.bytesToHex(n.macIterations),16):1,m=Pu.generateKey(r,h,3,g,f,u),y=ar.hmac.create();y.start(u,m),y.update(l.value);var _=y.getMac();if(_.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return D5(s,l.value,e,r),s};function Sg(t){if(t.composed||t.constructed){for(var e=ar.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function D5(t,e,r,n){if(e=U.fromDer(e,r),e.tagClass!==U.Class.UNIVERSAL||e.type!==U.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var a=e.value[i],s={},l=[];if(!U.validate(a,GC,s,l)){var u=new Error("Cannot read ContentInfo.");throw u.errors=l,u}var f={encrypted:!1},d=null,h=s.content.value[0];switch(U.derToOid(s.contentType)){case Tt.oids.data:if(h.tagClass!==U.Class.UNIVERSAL||h.type!==U.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=Sg(h).value;break;case Tt.oids.encryptedData:d=B5(h,n),f.encrypted=!0;break;default:var u=new Error("Unsupported PKCS#12 contentType.");throw u.contentType=U.derToOid(s.contentType),u}f.safeBags=O5(d,r,n),t.safeContents.push(f)}}function B5(t,e){var r={},n=[];if(!U.validate(t,ar.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var a=U.derToOid(r.contentType);if(a!==Tt.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=a,i}a=U.derToOid(r.encAlgorithm);var s=Tt.pbe.getCipher(a,r.encParameter,e),l=Sg(r.encryptedContentAsn1),u=ar.util.createBuffer(l.value);if(s.update(u),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function O5(t,e,r){if(!e&&t.length===0)return[];if(t=U.fromDer(t,e),t.tagClass!==U.Class.UNIVERSAL||t.type!==U.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var a=t.value[i],s={},l=[];if(!U.validate(a,I5,s,l)){var u=new Error("Cannot read SafeBag.");throw u.errors=l,u}var f={type:U.derToOid(s.bagId),attributes:L5(s.bagAttributes)};n.push(f);var d,h,g=s.bagValue.value[0];switch(f.type){case Tt.oids.pkcs8ShroudedKeyBag:if(g=Tt.decryptPrivateKeyInfo(g,r),g===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Tt.oids.keyBag:try{f.key=Tt.privateKeyFromAsn1(g)}catch(y){f.key=null,f.asn1=g}continue;case Tt.oids.certBag:d=R5,h=function(){if(U.derToOid(s.certId)!==Tt.oids.x509Certificate){var y=new Error("Unsupported certificate type, only X.509 supported.");throw y.oid=U.derToOid(s.certId),y}var _=U.fromDer(s.cert,e);try{f.cert=Tt.certificateFromAsn1(_,!0)}catch(w){f.cert=null,f.asn1=_}};break;default:var u=new Error("Unsupported PKCS#12 SafeBag type.");throw u.oid=f.type,u}if(d!==void 0&&!U.validate(g,d,s,l)){var u=new Error("Cannot read PKCS#12 "+d.name);throw u.errors=l,u}h()}return n}function L5(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!U.validate(t[r],N5,n,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var s=U.derToOid(n.oid);if(Tt.oids[s]!==void 0){e[Tt.oids[s]]=[];for(var l=0;l<n.values.length;++l)e[Tt.oids[s]].push(n.values[l].value)}}return e}Pu.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,a;if(i!==null)i=ar.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var s=ar.util.isArray(e)?e[0]:e;typeof s=="string"&&(s=Tt.certificateFromPem(s));var l=ar.md.sha1.create();l.update(U.toDer(Tt.certificateToAsn1(s)).getBytes()),i=l.digest().getBytes()}else i=ar.random.getBytes(20);var u=[];i!==null&&u.push(U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(Tt.oids.localKeyId).getBytes()),U.create(U.Class.UNIVERSAL,U.Type.SET,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&u.push(U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(Tt.oids.friendlyName).getBytes()),U.create(U.Class.UNIVERSAL,U.Type.SET,!0,[U.create(U.Class.UNIVERSAL,U.Type.BMPSTRING,!1,n.friendlyName)])])),u.length>0&&(a=U.create(U.Class.UNIVERSAL,U.Type.SET,!0,u));var f=[],d=[];e!==null&&(ar.util.isArray(e)?d=e:d=[e]);for(var h=[],g=0;g<d.length;++g){e=d[g],typeof e=="string"&&(e=Tt.certificateFromPem(e));var m=g===0?a:void 0,y=Tt.certificateToAsn1(e),_=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(Tt.oids.certBag).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(Tt.oids.x509Certificate).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,U.toDer(y).getBytes())])])]),m]);h.push(_)}if(h.length>0){var w=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,h),E=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(Tt.oids.data).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,U.toDer(w).getBytes())])]);f.push(E)}var S=null;if(t!==null){var T=Tt.wrapRsaPrivateKey(Tt.privateKeyToAsn1(t));r===null?S=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(Tt.oids.keyBag).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[T]),a]):S=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(Tt.oids.pkcs8ShroudedKeyBag).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[Tt.encryptPrivateKeyInfo(T,r,n)]),a]);var L=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[S]),I=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(Tt.oids.data).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,U.toDer(L).getBytes())])]);f.push(I)}var B=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,f),z;if(n.useMac){var l=ar.md.sha1.create(),F=new ar.util.ByteBuffer(ar.random.getBytes(n.saltSize)),G=n.count,t=Pu.generateKey(r,F,3,G,20),te=ar.hmac.create();te.start(l,t),te.update(U.toDer(B).getBytes());var ae=te.getMac();z=U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(Tt.oids.sha1).getBytes()),U.create(U.Class.UNIVERSAL,U.Type.NULL,!1,"")]),U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,ae.getBytes())]),U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,F.getBytes()),U.create(U.Class.UNIVERSAL,U.Type.INTEGER,!1,U.integerToDer(G).getBytes())])}return U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.INTEGER,!1,U.integerToDer(3).getBytes()),U.create(U.Class.UNIVERSAL,U.Type.SEQUENCE,!0,[U.create(U.Class.UNIVERSAL,U.Type.OID,!1,U.oidToDer(Tt.oids.data).getBytes()),U.create(U.Class.CONTEXT_SPECIFIC,0,!0,[U.create(U.Class.UNIVERSAL,U.Type.OCTETSTRING,!1,U.toDer(B).getBytes())])]),z])};Pu.generateKey=ar.pbe.generatePkcs12Key});var Ig=de((T7,HC)=>{var ds=vt();bi();ls();Cg();js();xd();Ag();Rd();Lu();qt();Od();var kg=ds.asn1,pl=HC.exports=ds.pki=ds.pki||{};pl.pemToDer=function(t){var e=ds.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return ds.util.createBuffer(e.body)};pl.privateKeyFromPem=function(t){var e=ds.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=kg.fromDer(e.body);return pl.privateKeyFromAsn1(n)};pl.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:kg.toDer(pl.privateKeyToAsn1(t)).getBytes()};return ds.pem.encode(r,{maxline:e})};pl.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:kg.toDer(t).getBytes()};return ds.pem.encode(r,{maxline:e})}});var Lg=de((S7,JC)=>{var ve=vt();bi();sl();wd();js();Ig();ti();cl();qt();var Ld=function(t,e,r,n){var i=ve.util.createBuffer(),a=t.length>>1,s=a+(t.length&1),l=t.substr(0,s),u=t.substr(a,s),f=ve.util.createBuffer(),d=ve.hmac.create();r=e+r;var h=Math.ceil(n/16),g=Math.ceil(n/20);d.start("MD5",l);var m=ve.util.createBuffer();f.putBytes(r);for(var y=0;y<h;++y)d.start(null,null),d.update(f.getBytes()),f.putBuffer(d.digest()),d.start(null,null),d.update(f.bytes()+r),m.putBuffer(d.digest());d.start("SHA1",u);var _=ve.util.createBuffer();f.clear(),f.putBytes(r);for(var y=0;y<g;++y)d.start(null,null),d.update(f.getBytes()),f.putBuffer(d.digest()),d.start(null,null),d.update(f.bytes()+r),_.putBuffer(d.digest());return i.putBytes(ve.util.xorBytes(m.getBytes(),_.getBytes(),n)),i},P5=function(t,e,r){var n=ve.hmac.create();n.start("SHA1",t);var i=ve.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},M5=function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=ve.util.createBuffer(i),e.length=i.length,n=!0}catch(a){}return n},U5=function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=ve.util.createBuffer(i),e.length=i.length,n=!0}catch(a){}return n},Gn=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return ve.util.createBuffer(t.getBytes(r))},ai=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},A={};A.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};A.SupportedVersions=[A.Versions.TLS_1_1,A.Versions.TLS_1_0];A.Version=A.SupportedVersions[0];A.MaxFragment=16384-1024;A.ConnectionEnd={server:0,client:1};A.PRFAlgorithm={tls_prf_sha256:0};A.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};A.CipherType={stream:0,block:1,aead:2};A.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};A.CompressionMethod={none:0,deflate:1};A.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};A.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};A.Alert={};A.Alert.Level={warning:1,fatal:2};A.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};A.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};A.CipherSuites={};A.getCipherSuite=function(t){var e=null;for(var r in A.CipherSuites){var n=A.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};A.handleUnexpected=function(t,e){var r=!t.open&&t.entity===A.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unexpected_message}})};A.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(A.queue(t,A.createAlert(t,{level:A.Alert.Level.warning,description:A.Alert.Description.no_renegotiation})),A.flush(t)),t.process()};A.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===A.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});else{var a=e.fragment,s=a.length();if(n={version:{major:a.getByte(),minor:a.getByte()},random:ve.util.createBuffer(a.getBytes(32)),session_id:Gn(a,1),extensions:[]},i?(n.cipher_suite=a.getBytes(2),n.compression_method=a.getByte()):(n.cipher_suites=Gn(a,2),n.compression_methods=Gn(a,1)),s=r-(s-a.length()),s>0){for(var l=Gn(a,2);l.length()>0;)n.extensions.push({type:[l.getByte(),l.getByte()],data:Gn(l,2)});if(!i)for(var u=0;u<n.extensions.length;++u){var f=n.extensions[u];if(f.type[0]===0&&f.type[1]===0)for(var d=Gn(f.data,2);d.length()>0;){var h=d.getByte();if(h!==0)break;t.session.extensions.server_name.serverNameList.push(Gn(d,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=A.getCipherSuite(n.cipher_suite);else for(var g=ve.util.createBuffer(n.cipher_suites.bytes());g.length()>0&&(t.session.cipherSuite=A.getCipherSuite(g.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.handshake_failure},cipherSuite:ve.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=A.CompressionMethod.none}return n};A.createSecurityParameters=function(t,e){var r=t.entity===A.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,a=r?n:A.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:A.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:a}};A.handleServerHello=function(t,e,r){var n=A.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=jC,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=q5,t.session.resuming=!1,A.createSecurityParameters(t,n)),t.session.id=i,t.process()}};A.handleClientHello=function(t,e,r){var n=A.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),a=null;if(t.sessionCache&&(a=t.sessionCache.getSession(i),a===null?i="":(a.version.major!==n.version.major||a.version.minor>n.version.minor)&&(a=null,i="")),i.length===0&&(i=ve.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},a)t.version=t.session.version=a.version,t.session.sp=a.sp;else{for(var s,l=1;l<A.SupportedVersions.length&&(s=A.SupportedVersions[l],!(s.minor<=n.version.minor));++l);t.version={major:s.major,minor:s.minor},t.session.version=t.version}a!==null?(t.expect=Rg,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?W5:Ng,t.session.resuming=!1,A.createSecurityParameters(t,n)),t.open=!0,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerHello(t)})),t.session.resuming?(A.queue(t,A.createRecord(t,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),t.state.pending=A.createConnectionState(t),t.state.current.write=t.state.pending.write,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createFinished(t)}))):(A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificate(t)})),t.fail||(A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerKeyExchange(t)})),t.verifyClient!==!1&&A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificateRequest(t)})),A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerHelloDone(t)})))),A.flush(t),t.process()}};A.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:Gn(n,3)},a,s,l=[];try{for(;i.certificate_list.length()>0;)a=Gn(i.certificate_list,3),s=ve.asn1.fromDer(a),a=ve.pki.certificateFromAsn1(s,!0),l.push(a)}catch(f){return t.error(t,{message:"Could not parse certificate list.",cause:f,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate}})}var u=t.entity===A.ConnectionEnd.client;(u||t.verifyClient===!0)&&l.length===0?t.error(t,{message:u?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}}):l.length===0?t.expect=u?KC:Ng:(u?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],A.verifyCertificateChain(t,l)&&(t.expect=u?KC:Ng)),t.process()};A.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unsupported_certificate}});t.expect=G5,t.process()};A.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:Gn(n,2).getBytes()},a=null;if(t.getPrivateKey)try{a=t.getPrivateKey(t,t.session.serverCertificate),a=ve.pki.privateKeyFromPem(a)}catch(u){t.error(t,{message:"Could not get private key.",cause:u,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}})}if(a===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}});try{var s=t.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==s.pre_master_secret.charCodeAt(0)||l.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(u){s.pre_master_secret=ve.random.getBytes(48)}t.expect=Rg,t.session.clientCertificate!==null&&(t.expect=z5),t.process()};A.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:Gn(n,1),certificate_authorities:Gn(n,2)};t.session.certificateRequest=i,t.expect=V5,t.process()};A.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a={signature:Gn(n,2).getBytes()},s=ve.util.createBuffer();s.putBuffer(t.session.md5.digest()),s.putBuffer(t.session.sha1.digest()),s=s.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch(u){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.handshake_failure}})}t.expect=Rg,t.process()};A.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.insufficient_security}},i=0,a=t.verify(t,n.alert.description,i,[]);if(a!==!0)return(a||a===0)&&(typeof a=="object"&&!ve.util.isArray(a)?(a.message&&(n.message=a.message),a.alert&&(n.alert.description=a.alert)):typeof a=="number"&&(n.alert.description=a)),t.error(t,n)}t.session.certificateRequest!==null&&(e=A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificate(t)}),A.queue(t,e)),e=A.createRecord(t,{type:A.ContentType.handshake,data:A.createClientKeyExchange(t)}),A.queue(t,e),t.expect=j5;var s=function(l,u){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&A.queue(l,A.createRecord(l,{type:A.ContentType.handshake,data:A.createCertificateVerify(l,u)})),A.queue(l,A.createRecord(l,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),l.state.pending=A.createConnectionState(l),l.state.current.write=l.state.pending.write,A.queue(l,A.createRecord(l,{type:A.ContentType.handshake,data:A.createFinished(l)})),l.expect=jC,A.flush(l),l.process()};if(t.session.certificateRequest===null||t.session.clientCertificate===null)return s(t,null);A.getClientSignature(t,s)};A.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var r=t.entity===A.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=A.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?H5:Q5,t.process()};A.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a=e.fragment.getBytes();n=ve.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var s=t.entity===A.ConnectionEnd.client,l=s?"server finished":"client finished",u=t.session.sp,f=12,d=Ld;if(n=d(u.master_secret,l,n.getBytes(),f),n.getBytes()!==a)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&s||!t.session.resuming&&!s)&&(A.queue(t,A.createRecord(t,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createFinished(t)}))),t.expect=s?K5:X5,t.handshaking=!1,++t.handshakes,t.peerCertificate=s?t.session.serverCertificate:t.session.clientCertificate,A.flush(t),t.isConnected=!0,t.connected(t),t.process()};A.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case A.Alert.Description.close_notify:i="Connection closed.";break;case A.Alert.Description.unexpected_message:i="Unexpected message.";break;case A.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case A.Alert.Description.decryption_failed:i="Decryption failed.";break;case A.Alert.Description.record_overflow:i="Record overflow.";break;case A.Alert.Description.decompression_failure:i="Decompression failed.";break;case A.Alert.Description.handshake_failure:i="Handshake failure.";break;case A.Alert.Description.bad_certificate:i="Bad certificate.";break;case A.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case A.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case A.Alert.Description.certificate_expired:i="Certificate expired.";break;case A.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case A.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case A.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case A.Alert.Description.access_denied:i="Access denied.";break;case A.Alert.Description.decode_error:i="Decode error.";break;case A.Alert.Description.decrypt_error:i="Decrypt error.";break;case A.Alert.Description.export_restriction:i="Export restriction.";break;case A.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case A.Alert.Description.insufficient_security:i="Insufficient security.";break;case A.Alert.Description.internal_error:i="Internal error.";break;case A.Alert.Description.user_canceled:i="User canceled.";break;case A.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===A.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===A.ConnectionEnd.client?"server":"client",alert:n}),t.process()};A.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=ve.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var a=r.bytes(i+4);r.read+=4,n in Md[t.entity][t.expect]?(t.entity===A.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:ve.md.md5.create(),sha1:ve.md.sha1.create()}),n!==A.HandshakeType.hello_request&&n!==A.HandshakeType.certificate_verify&&n!==A.HandshakeType.finished&&(t.session.md5.update(a),t.session.sha1.update(a)),Md[t.entity][t.expect][n](t,e,i)):A.handleUnexpected(t,e)};A.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};A.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),a=r.getBytes(i);if(n===A.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>a.length)return t.process();A.queue(t,A.createRecord(t,{type:A.ContentType.heartbeat,data:A.createHeartbeat(A.HeartbeatMessageType.heartbeat_response,a)})),A.flush(t)}else if(n===A.HeartbeatMessageType.heartbeat_response){if(a!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,ve.util.createBuffer(a))}t.process()};var F5=0,q5=1,KC=2,G5=3,V5=4,jC=5,H5=6,K5=7,j5=8,Y5=0,W5=1,Ng=2,z5=3,Rg=4,Q5=5,X5=6,x=A.handleUnexpected,YC=A.handleChangeCipherSpec,Jr=A.handleAlert,yn=A.handleHandshake,WC=A.handleApplicationData,Zr=A.handleHeartbeat,Dg=[];Dg[A.ConnectionEnd.client]=[[x,Jr,yn,x,Zr],[x,Jr,yn,x,Zr],[x,Jr,yn,x,Zr],[x,Jr,yn,x,Zr],[x,Jr,yn,x,Zr],[YC,Jr,x,x,Zr],[x,Jr,yn,x,Zr],[x,Jr,yn,WC,Zr],[x,Jr,yn,x,Zr]];Dg[A.ConnectionEnd.server]=[[x,Jr,yn,x,Zr],[x,Jr,yn,x,Zr],[x,Jr,yn,x,Zr],[x,Jr,yn,x,Zr],[YC,Jr,x,x,Zr],[x,Jr,yn,x,Zr],[x,Jr,yn,WC,Zr],[x,Jr,yn,x,Zr]];var hs=A.handleHelloRequest,J5=A.handleServerHello,zC=A.handleCertificate,QC=A.handleServerKeyExchange,Bg=A.handleCertificateRequest,Pd=A.handleServerHelloDone,XC=A.handleFinished,Md=[];Md[A.ConnectionEnd.client]=[[x,x,J5,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[hs,x,x,x,x,x,x,x,x,x,x,zC,QC,Bg,Pd,x,x,x,x,x,x],[hs,x,x,x,x,x,x,x,x,x,x,x,QC,Bg,Pd,x,x,x,x,x,x],[hs,x,x,x,x,x,x,x,x,x,x,x,x,Bg,Pd,x,x,x,x,x,x],[hs,x,x,x,x,x,x,x,x,x,x,x,x,x,Pd,x,x,x,x,x,x],[hs,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[hs,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,XC],[hs,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[hs,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x]];var Z5=A.handleClientHello,$5=A.handleClientKeyExchange,eU=A.handleCertificateVerify;Md[A.ConnectionEnd.server]=[[x,Z5,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,zC,x,x,x,x,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,$5,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,eU,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,XC],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x]];A.generateKeys=function(t,e){var r=Ld,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,a=t.version.major===A.Versions.TLS_1_0.major&&t.version.minor===A.Versions.TLS_1_0.minor;a&&(i+=2*e.fixed_iv_length);var s=r(e.master_secret,"key expansion",n,i),l={client_write_MAC_key:s.getBytes(e.mac_key_length),server_write_MAC_key:s.getBytes(e.mac_key_length),client_write_key:s.getBytes(e.enc_key_length),server_write_key:s.getBytes(e.enc_key_length)};return a&&(l.client_write_IV=s.getBytes(e.fixed_iv_length),l.server_write_IV=s.getBytes(e.fixed_iv_length)),l};A.createConnectionState=function(t){var e=t.entity===A.ConnectionEnd.client,r=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){a.sequenceNumber[1]===4294967295?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1]}};return a},n={read:r(),write:r()};if(n.read.update=function(a,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(a,s,n.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_record_mac}}),!a.fail},n.write.update=function(a,s){return n.write.compressFunction(a,s,n.write)?n.write.cipherFunction(s,n.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}),!a.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=A.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case A.CompressionMethod.none:break;case A.CompressionMethod.deflate:n.read.compressFunction=U5,n.write.compressFunction=M5;break;default:throw new Error("Unsupported compression algorithm.")}}return n};A.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=ve.util.createBuffer();return r.putInt32(e),r.putBytes(ve.random.getBytes(28)),r};A.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};A.createAlert=function(t,e){var r=ve.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),A.createRecord(t,{type:A.ContentType.alert,data:r})};A.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=ve.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),a=ve.util.createBuffer();a.putByte(A.CompressionMethod.none);var s=a.length(),l=ve.util.createBuffer();if(t.virtualHost){var u=ve.util.createBuffer();u.putByte(0),u.putByte(0);var f=ve.util.createBuffer();f.putByte(0),ai(f,2,ve.util.createBuffer(t.virtualHost));var d=ve.util.createBuffer();ai(d,2,f),ai(u,2,d),l.putBuffer(u)}var h=l.length();h>0&&(h+=2);var g=t.session.id,m=g.length+1+2+4+28+2+i+1+s+h,y=ve.util.createBuffer();return y.putByte(A.HandshakeType.client_hello),y.putInt24(m),y.putByte(t.version.major),y.putByte(t.version.minor),y.putBytes(t.session.sp.client_random),ai(y,1,ve.util.createBuffer(g)),ai(y,2,e),ai(y,1,a),h>0&&ai(y,2,l),y};A.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=ve.util.createBuffer();return n.putByte(A.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),ai(n,1,ve.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};A.createCertificate=function(t){var e=t.entity===A.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=ve.util.createBuffer();if(r!==null)try{ve.util.isArray(r)||(r=[r]);for(var a=null,s=0;s<r.length;++s){var l=ve.pem.decode(r[s])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=l.type,u}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var f=ve.util.createBuffer(l.body);a===null&&(a=ve.asn1.fromDer(f.bytes(),!1));var d=ve.util.createBuffer();ai(d,3,f),i.putBuffer(d)}r=ve.pki.certificateFromAsn1(a),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(m){return t.error(t,{message:"Could not send certificate list.",cause:m,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate}})}var h=3+i.length(),g=ve.util.createBuffer();return g.putByte(A.HandshakeType.certificate),g.putInt24(h),ai(g,3,i),g};A.createClientKeyExchange=function(t){var e=ve.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(ve.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,a=ve.util.createBuffer();return a.putByte(A.HandshakeType.client_key_exchange),a.putInt24(i),a.putInt16(e.length),a.putBytes(e),a};A.createServerKeyExchange=function(t){var e=0,r=ve.util.createBuffer();return e>0&&(r.putByte(A.HandshakeType.server_key_exchange),r.putInt24(e)),r};A.getClientSignature=function(t,e){var r=ve.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,a){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=ve.pki.privateKeyFromPem(s)}catch(l){n.error(n,{message:"Could not get private key.",cause:l,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}):i=s.sign(i,null),a(n,i)},t.getSignature(t,r,e)};A.createCertificateVerify=function(t,e){var r=e.length+2,n=ve.util.createBuffer();return n.putByte(A.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};A.createCertificateRequest=function(t){var e=ve.util.createBuffer();e.putByte(1);var r=ve.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],a=ve.pki.distinguishedNameToAsn1(i.subject),s=ve.asn1.toDer(a);r.putInt16(s.length()),r.putBuffer(s)}var l=1+e.length()+2+r.length(),u=ve.util.createBuffer();return u.putByte(A.HandshakeType.certificate_request),u.putInt24(l),ai(u,1,e),ai(u,2,r),u};A.createServerHelloDone=function(t){var e=ve.util.createBuffer();return e.putByte(A.HandshakeType.server_hello_done),e.putInt24(0),e};A.createChangeCipherSpec=function(){var t=ve.util.createBuffer();return t.putByte(1),t};A.createFinished=function(t){var e=ve.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===A.ConnectionEnd.client,n=t.session.sp,i=12,a=Ld,s=r?"client finished":"server finished";e=a(n.master_secret,s,e.getBytes(),i);var l=ve.util.createBuffer();return l.putByte(A.HandshakeType.finished),l.putInt24(e.length()),l.putBuffer(e),l};A.createHeartbeat=function(t,e,r){typeof r=="undefined"&&(r=e.length);var n=ve.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),a=Math.max(16,i-r-3);return n.putBytes(ve.random.getBytes(a)),n};A.queue=function(t,e){if(!!e&&!(e.fragment.length()===0&&(e.type===A.ContentType.handshake||e.type===A.ContentType.alert||e.type===A.ContentType.change_cipher_spec))){if(e.type===A.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=A.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>A.MaxFragment;)n.push(A.createRecord(t,{type:e.type,data:ve.util.createBuffer(i.slice(0,A.MaxFragment))})),i=i.slice(A.MaxFragment);i.length>0&&n.push(A.createRecord(t,{type:e.type,data:ve.util.createBuffer(i)}))}for(var a=0;a<n.length&&!t.fail;++a){var s=n[a],l=t.state.current.write;l.update(t,s)&&t.records.push(s)}}};A.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var Og=function(t){switch(t){case!0:return!0;case ve.pki.certificateError.bad_certificate:return A.Alert.Description.bad_certificate;case ve.pki.certificateError.unsupported_certificate:return A.Alert.Description.unsupported_certificate;case ve.pki.certificateError.certificate_revoked:return A.Alert.Description.certificate_revoked;case ve.pki.certificateError.certificate_expired:return A.Alert.Description.certificate_expired;case ve.pki.certificateError.certificate_unknown:return A.Alert.Description.certificate_unknown;case ve.pki.certificateError.unknown_ca:return A.Alert.Description.unknown_ca;default:return A.Alert.Description.bad_certificate}},tU=function(t){switch(t){case!0:return!0;case A.Alert.Description.bad_certificate:return ve.pki.certificateError.bad_certificate;case A.Alert.Description.unsupported_certificate:return ve.pki.certificateError.unsupported_certificate;case A.Alert.Description.certificate_revoked:return ve.pki.certificateError.certificate_revoked;case A.Alert.Description.certificate_expired:return ve.pki.certificateError.certificate_expired;case A.Alert.Description.certificate_unknown:return ve.pki.certificateError.certificate_unknown;case A.Alert.Description.unknown_ca:return ve.pki.certificateError.unknown_ca;default:return ve.pki.certificateError.bad_certificate}};A.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(a,s,l){var u=Og(a),f=t.verify(t,a,s,l);if(f!==!0){if(typeof f=="object"&&!ve.util.isArray(f)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate},f.message&&(d.message=f.message),f.alert&&(d.alert.description=f.alert),d}f!==a&&(f=tU(f))}return f},ve.pki.verifyCertificateChain(t.caStore,e,r)}catch(a){var i=a;(typeof i!="object"||ve.util.isArray(i))&&(i={send:!0,alert:{level:A.Alert.Level.fatal,description:Og(a)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:A.Alert.Level.fatal,description:Og(i.error)}),t.error(t,i)}return!t.fail};A.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var a=null,s=null;if(i?s=ve.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){a=r.cache[s],delete r.cache[s];for(var l in r.order)if(r.order[l]===s){r.order.splice(l,1);break}}return a},r.setSession=function(i,a){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=ve.util.bytesToHex(i);r.order.push(s),r.cache[s]=a}}return r};A.createConnection=function(t){var e=null;t.caStore?ve.util.isArray(t.caStore)?e=ve.pki.createCaStore(t.caStore):e=t.caStore:e=ve.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in A.CipherSuites)r.push(A.CipherSuites[n])}var i=t.server?A.ConnectionEnd.server:A.ConnectionEnd.client,a=t.sessionCache?A.createSessionCache(t.sessionCache):null,s={version:{major:A.Version.major,minor:A.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:a,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,h,g,m){return h},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:ve.util.createBuffer(),tlsData:ve.util.createBuffer(),data:ve.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(d,h){h.origin=h.origin||(d.entity===A.ConnectionEnd.client?"client":"server"),h.send&&(A.queue(d,A.createAlert(d,h.alert)),A.flush(d));var g=h.fatal!==!1;g&&(d.fail=!0),t.error(d,h),g&&d.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};s.reset=function(d){s.version={major:A.Version.major,minor:A.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===A.ConnectionEnd.client?F5:Y5,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(d||typeof d=="undefined"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=A.createConnectionState(s)},s.reset();var l=function(d,h){var g=h.type-A.ContentType.change_cipher_spec,m=Dg[d.entity][d.expect];g in m?m[g](d,h):A.handleUnexpected(d,h)},u=function(d){var h=0,g=d.input,m=g.length();if(m<5)h=5-m;else{d.record={type:g.getByte(),version:{major:g.getByte(),minor:g.getByte()},length:g.getInt16(),fragment:ve.util.createBuffer(),ready:!1};var y=d.record.version.major===d.version.major;y&&d.session&&d.session.version&&(y=d.record.version.minor===d.version.minor),y||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}})}return h},f=function(d){var h=0,g=d.input,m=g.length();if(m<d.record.length)h=d.record.length-m;else{d.record.fragment.putBytes(g.getBytes(d.record.length)),g.compact();var y=d.state.current.read;y.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unexpected_message}})),d.record.ready=!0)}return h};return s.handshake=function(d){if(s.entity!==A.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,d=d||"";var h=null;d.length>0&&(s.sessionCache&&(h=s.sessionCache.getSession(d)),h===null&&(d="")),d.length===0&&s.sessionCache&&(h=s.sessionCache.getSession(),h!==null&&(d=h.id)),s.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:ve.md.md5.create(),sha1:ve.md.sha1.create()},h&&(s.version=h.version,s.session.sp=h.sp),s.session.sp.client_random=A.createRandom().getBytes(),s.open=!0,A.queue(s,A.createRecord(s,{type:A.ContentType.handshake,data:A.createClientHello(s)})),A.flush(s)}},s.process=function(d){var h=0;return d&&s.input.putBytes(d),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(h=u(s)),!s.fail&&s.record!==null&&!s.record.ready&&(h=f(s)),!s.fail&&s.record!==null&&s.record.ready&&l(s,s.record)),h},s.prepare=function(d){return A.queue(s,A.createRecord(s,{type:A.ContentType.application_data,data:ve.util.createBuffer(d)})),A.flush(s)},s.prepareHeartbeatRequest=function(d,h){return d instanceof ve.util.ByteBuffer&&(d=d.bytes()),typeof h=="undefined"&&(h=d.length),s.expectedHeartbeatPayload=d,A.queue(s,A.createRecord(s,{type:A.ContentType.heartbeat,data:A.createHeartbeat(A.HeartbeatMessageType.heartbeat_request,d,h)})),A.flush(s)},s.close=function(d){if(!s.fail&&s.sessionCache&&s.session){var h={id:s.session.id,version:s.session.version,sp:s.session.sp};h.sp.keys=null,s.sessionCache.setSession(h.id,h)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,A.queue(s,A.createAlert(s,{level:A.Alert.Level.warning,description:A.Alert.Description.close_notify})),A.flush(s)),s.closed(s)),s.reset(d)},s};JC.exports=ve.tls=ve.tls||{};for(Ud in A)typeof A[Ud]!="function"&&(ve.tls[Ud]=A[Ud]);var Ud;ve.tls.prf_tls1=Ld;ve.tls.hmac_sha1=P5;ve.tls.createSessionCache=A.createSessionCache;ve.tls.createConnection=A.createConnection});var eb=de((A7,$C)=>{var ps=vt();os();Lg();var si=$C.exports=ps.tls;si.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=si.BulkCipherAlgorithm.aes,t.cipher_type=si.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=si.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:ZC};si.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=si.BulkCipherAlgorithm.aes,t.cipher_type=si.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=si.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:ZC};function ZC(t,e,r){var n=e.entity===ps.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:ps.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:ps.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=aU,t.write.cipherFunction=rU,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=si.hmac_sha1}function rU(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===si.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=ps.random.getBytesSync(16),e.cipherState.init=!0;var a=e.cipherState.cipher;return a.start({iv:i}),t.version.minor>=si.Versions.TLS_1_1.minor&&a.output.putBytes(i),a.update(t.fragment),a.finish(nU)&&(t.fragment=a.output,t.length=t.fragment.length(),r=!0),r}function nU(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function iU(t,e,r){var n=!0;if(r){for(var i=e.length(),a=e.last(),s=i-1-a;s<i-1;++s)n=n&&e.at(s)==a;n&&e.truncate(a+1)}return n}function aU(t,e){var r=!1,n;t.version.minor===si.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(iU);var a=e.macLength,s=ps.random.getBytesSync(a),l=i.output.length();l>=a?(t.fragment=i.output.getBytes(l-a),s=i.output.getBytes(a)):t.fragment=i.output.getBytes(),t.fragment=ps.util.createBuffer(t.fragment),t.length=t.fragment.length();var u=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=sU(e.macKey,s,u)&&r,r}function sU(t,e,r){var n=ps.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}});var Ug=de((k7,ib)=>{var ur=vt();zi();qt();var Uu=ib.exports=ur.sha512=ur.sha512||{};ur.md.sha512=ur.md.algorithms.sha512=Uu;var tb=ur.sha384=ur.sha512.sha384=ur.sha512.sha384||{};tb.create=function(){return Uu.create("SHA-384")};ur.md.sha384=ur.md.algorithms.sha384=tb;ur.sha512.sha256=ur.sha512.sha256||{create:function(){return Uu.create("SHA-512/256")}};ur.md["sha512/256"]=ur.md.algorithms["sha512/256"]=ur.sha512.sha256;ur.sha512.sha224=ur.sha512.sha224||{create:function(){return Uu.create("SHA-512/224")}};ur.md["sha512/224"]=ur.md.algorithms["sha512/224"]=ur.sha512.sha224;Uu.create=function(t){if(rb||oU(),typeof t=="undefined"&&(t="SHA-512"),!(t in Js))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=Js[t],r=null,n=ur.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var u=l.messageLengthSize/4,f=0;f<u;++f)l.fullMessageLength.push(0);n=ur.util.createBuffer(),r=new Array(e.length);for(var f=0;f<e.length;++f)r[f]=e[f].slice(0);return l},l.start(),l.update=function(u,f){f==="utf8"&&(u=ur.util.encodeUtf8(u));var d=u.length;l.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var h=l.fullMessageLength.length-1;h>=0;--h)l.fullMessageLength[h]+=d[1],d[1]=d[0]+(l.fullMessageLength[h]/4294967296>>>0),l.fullMessageLength[h]=l.fullMessageLength[h]>>>0,d[0]=d[1]/4294967296>>>0;return n.putBytes(u),nb(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),l},l.digest=function(){var u=ur.util.createBuffer();u.putBytes(n.bytes());var f=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,d=f&l.blockLength-1;u.putBytes(Pg.substr(0,l.blockLength-d));for(var h,g,m=l.fullMessageLength[0]*8,y=0;y<l.fullMessageLength.length-1;++y)h=l.fullMessageLength[y+1]*8,g=h/4294967296>>>0,m+=g,u.putInt32(m>>>0),m=h>>>0;u.putInt32(m);for(var _=new Array(r.length),y=0;y<r.length;++y)_[y]=r[y].slice(0);nb(_,i,u);var w=ur.util.createBuffer(),E;t==="SHA-512"?E=_.length:t==="SHA-384"?E=_.length-2:E=_.length-4;for(var y=0;y<E;++y)w.putInt32(_[y][0]),(y!==E-1||t!=="SHA-512/224")&&w.putInt32(_[y][1]);return w},l};var Pg=null,rb=!1,Mg=null,Js=null;function oU(){Pg=String.fromCharCode(128),Pg+=ur.util.fillString(String.fromCharCode(0),128),Mg=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Js={},Js["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Js["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Js["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Js["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],rb=!0}function nb(t,e,r){for(var n,i,a,s,l,u,f,d,h,g,m,y,_,w,E,S,T,L,I,B,z,F,G,te,ae,we,Se,Qe,Re,me,re,Fe,Ze,ct,Je,ft=r.length();ft>=128;){for(Re=0;Re<16;++Re)e[Re][0]=r.getInt32()>>>0,e[Re][1]=r.getInt32()>>>0;for(;Re<80;++Re)Fe=e[Re-2],me=Fe[0],re=Fe[1],n=((me>>>19|re<<13)^(re>>>29|me<<3)^me>>>6)>>>0,i=((me<<13|re>>>19)^(re<<3|me>>>29)^(me<<26|re>>>6))>>>0,ct=e[Re-15],me=ct[0],re=ct[1],a=((me>>>1|re<<31)^(me>>>8|re<<24)^me>>>7)>>>0,s=((me<<31|re>>>1)^(me<<24|re>>>8)^(me<<25|re>>>7))>>>0,Ze=e[Re-7],Je=e[Re-16],re=i+Ze[1]+s+Je[1],e[Re][0]=n+Ze[0]+a+Je[0]+(re/4294967296>>>0)>>>0,e[Re][1]=re>>>0;for(_=t[0][0],w=t[0][1],E=t[1][0],S=t[1][1],T=t[2][0],L=t[2][1],I=t[3][0],B=t[3][1],z=t[4][0],F=t[4][1],G=t[5][0],te=t[5][1],ae=t[6][0],we=t[6][1],Se=t[7][0],Qe=t[7][1],Re=0;Re<80;++Re)f=((z>>>14|F<<18)^(z>>>18|F<<14)^(F>>>9|z<<23))>>>0,d=((z<<18|F>>>14)^(z<<14|F>>>18)^(F<<23|z>>>9))>>>0,h=(ae^z&(G^ae))>>>0,g=(we^F&(te^we))>>>0,l=((_>>>28|w<<4)^(w>>>2|_<<30)^(w>>>7|_<<25))>>>0,u=((_<<4|w>>>28)^(w<<30|_>>>2)^(w<<25|_>>>7))>>>0,m=(_&E|T&(_^E))>>>0,y=(w&S|L&(w^S))>>>0,re=Qe+d+g+Mg[Re][1]+e[Re][1],n=Se+f+h+Mg[Re][0]+e[Re][0]+(re/4294967296>>>0)>>>0,i=re>>>0,re=u+y,a=l+m+(re/4294967296>>>0)>>>0,s=re>>>0,Se=ae,Qe=we,ae=G,we=te,G=z,te=F,re=B+i,z=I+n+(re/4294967296>>>0)>>>0,F=re>>>0,I=T,B=L,T=E,L=S,E=_,S=w,re=i+s,_=n+a+(re/4294967296>>>0)>>>0,w=re>>>0;re=t[0][1]+w,t[0][0]=t[0][0]+_+(re/4294967296>>>0)>>>0,t[0][1]=re>>>0,re=t[1][1]+S,t[1][0]=t[1][0]+E+(re/4294967296>>>0)>>>0,t[1][1]=re>>>0,re=t[2][1]+L,t[2][0]=t[2][0]+T+(re/4294967296>>>0)>>>0,t[2][1]=re>>>0,re=t[3][1]+B,t[3][0]=t[3][0]+I+(re/4294967296>>>0)>>>0,t[3][1]=re>>>0,re=t[4][1]+F,t[4][0]=t[4][0]+z+(re/4294967296>>>0)>>>0,t[4][1]=re>>>0,re=t[5][1]+te,t[5][0]=t[5][0]+G+(re/4294967296>>>0)>>>0,t[5][1]=re>>>0,re=t[6][1]+we,t[6][0]=t[6][0]+ae+(re/4294967296>>>0)>>>0,t[6][1]=re>>>0,re=t[7][1]+Qe,t[7][0]=t[7][0]+Se+(re/4294967296>>>0)>>>0,t[7][1]=re>>>0,ft-=128}}});var ab=de(Fg=>{var lU=vt();bi();var Hr=lU.asn1;Fg.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Hr.Class.UNIVERSAL,type:Hr.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Hr.Class.UNIVERSAL,type:Hr.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Hr.Class.UNIVERSAL,type:Hr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Hr.Class.UNIVERSAL,type:Hr.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Hr.Class.UNIVERSAL,type:Hr.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Fg.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Hr.Class.UNIVERSAL,type:Hr.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Hr.Class.UNIVERSAL,type:Hr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Hr.Class.UNIVERSAL,type:Hr.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Hr.Class.UNIVERSAL,type:Hr.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var vb=de((N7,yb)=>{var $r=vt();Ou();ti();Ug();qt();var sb=ab(),uU=sb.publicKeyValidator,cU=sb.privateKeyValidator;typeof ob=="undefined"&&(ob=$r.jsbn.BigInteger);var ob,qg=$r.util.ByteBuffer,In=typeof Buffer=="undefined"?Uint8Array:Buffer;$r.pki=$r.pki||{};yb.exports=$r.pki.ed25519=$r.ed25519=$r.ed25519||{};var St=$r.ed25519;St.constants={};St.constants.PUBLIC_KEY_BYTE_LENGTH=32;St.constants.PRIVATE_KEY_BYTE_LENGTH=64;St.constants.SEED_BYTE_LENGTH=32;St.constants.SIGN_BYTE_LENGTH=64;St.constants.HASH_BYTE_LENGTH=64;St.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=$r.random.getBytesSync(St.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==St.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+St.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=Ia({message:e,encoding:"binary"});for(var r=new In(St.constants.PUBLIC_KEY_BYTE_LENGTH),n=new In(St.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return pU(r,n),{publicKey:r,privateKey:n}};St.privateKeyFromAsn1=function(t){var e={},r=[],n=$r.asn1.validate(t,cU,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=$r.asn1.derToOid(e.privateKeyOid),s=$r.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var l=e.privateKey,u=Ia({message:$r.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:u}};St.publicKeyFromAsn1=function(t){var e={},r=[],n=$r.asn1.validate(t,uU,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=$r.asn1.derToOid(e.publicKeyOid),s=$r.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var l=e.ed25519PublicKey;if(l.length!==St.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Ia({message:l,encoding:"binary"})};St.publicKeyFromPrivateKey=function(t){t=t||{};var e=Ia({message:t.privateKey,encoding:"binary"});if(e.length!==St.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+St.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new In(St.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};St.sign=function(t){t=t||{};var e=Ia(t),r=Ia({message:t.privateKey,encoding:"binary"});if(r.length===St.constants.SEED_BYTE_LENGTH){var n=St.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==St.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+St.constants.SEED_BYTE_LENGTH+" or "+St.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new In(St.constants.SIGN_BYTE_LENGTH+e.length);gU(i,e,e.length,r);for(var a=new In(St.constants.SIGN_BYTE_LENGTH),s=0;s<a.length;++s)a[s]=i[s];return a};St.verify=function(t){t=t||{};var e=Ia(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Ia({message:t.signature,encoding:"binary"});if(r.length!==St.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+St.constants.SIGN_BYTE_LENGTH);var n=Ia({message:t.publicKey,encoding:"binary"});if(n.length!==St.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+St.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new In(St.constants.SIGN_BYTE_LENGTH+e.length),a=new In(St.constants.SIGN_BYTE_LENGTH+e.length),s;for(s=0;s<St.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<e.length;++s)i[s+St.constants.SIGN_BYTE_LENGTH]=e[s];return mU(a,i,i.length,n)>=0};function Ia(t){var e=t.message;if(e instanceof Uint8Array||e instanceof In)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer!="undefined")return Buffer.from(e,r);e=new qg(e,r)}else if(!(e instanceof qg))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new In(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}var Gg=We(),Fd=We([1]),fU=We([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),dU=We([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),lb=We([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),ub=We([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Vg=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),hU=We([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Fu(t,e){var r=$r.md.sha512.create(),n=new qg(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(i,"binary");for(var a=new In(St.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function pU(t,e){var r=[We(),We(),We(),We()],n,i=Fu(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Yg(r,i),jg(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}function gU(t,e,r,n){var i,a,s=new Float64Array(64),l=[We(),We(),We(),We()],u=Fu(n,32);u[0]&=248,u[31]&=127,u[31]|=64;var f=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=u[32+i];var d=Fu(t.subarray(32),r+32);for(Hg(d),Yg(l,d),jg(t,l),i=32;i<64;++i)t[i]=n[i];var h=Fu(t,r+64);for(Hg(h),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=d[i];for(i=0;i<32;++i)for(a=0;a<32;a++)s[i+a]+=h[i]*u[a];return cb(t.subarray(32),s),f}function mU(t,e,r,n){var i,a,s=new In(32),l=[We(),We(),We(),We()],u=[We(),We(),We(),We()];if(a=-1,r<64||yU(u,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var f=Fu(t,r);if(Hg(f),gb(l,u,f),Yg(u,e.subarray(32)),Kg(l,u),jg(s,l),r-=64,hb(e,0,s,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return a=r,a}function cb(t,e){var r,n,i,a;for(n=63;n>=32;--n){for(r=0,i=n-32,a=n-12;i<a;++i)e[i]+=r-16*e[n]*Vg[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*Vg[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*Vg[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function Hg(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;cb(t,e)}function Kg(t,e){var r=We(),n=We(),i=We(),a=We(),s=We(),l=We(),u=We(),f=We(),d=We();ml(r,t[1],t[0]),ml(d,e[1],e[0]),$t(r,r,d),gl(n,t[0],t[1]),gl(d,e[0],e[1]),$t(n,n,d),$t(i,t[3],e[3]),$t(i,i,dU),$t(a,t[2],e[2]),gl(a,a,a),ml(s,n,r),ml(l,a,i),gl(u,a,i),gl(f,n,r),$t(t[0],s,l),$t(t[1],f,u),$t(t[2],u,l),$t(t[3],s,f)}function fb(t,e,r){for(var n=0;n<4;++n)mb(t[n],e[n],r)}function jg(t,e){var r=We(),n=We(),i=We();EU(i,e[2]),$t(r,e[0],i),$t(n,e[1],i),qd(t,n),t[31]^=pb(r)<<7}function qd(t,e){var r,n,i,a=We(),s=We();for(r=0;r<16;++r)s[r]=e[r];for(Wg(s),Wg(s),Wg(s),n=0;n<2;++n){for(a[0]=s[0]-65517,r=1;r<15;++r)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,mb(s,a,1-i)}for(r=0;r<16;r++)t[2*r]=s[r]&255,t[2*r+1]=s[r]>>8}function yU(t,e){var r=We(),n=We(),i=We(),a=We(),s=We(),l=We(),u=We();return gs(t[2],Fd),vU(t[1],e),Zs(i,t[1]),$t(a,i,fU),ml(i,i,t[2]),gl(a,t[2],a),Zs(s,a),Zs(l,s),$t(u,l,s),$t(r,u,i),$t(r,r,a),_U(r,r),$t(r,r,i),$t(r,r,a),$t(r,r,a),$t(t[0],r,a),Zs(n,t[0]),$t(n,n,a),db(n,i)&&$t(t[0],t[0],hU),Zs(n,t[0]),$t(n,n,a),db(n,i)?-1:(pb(t[0])===e[31]>>7&&ml(t[0],Gg,t[0]),$t(t[3],t[0],t[1]),0)}function vU(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function _U(t,e){var r=We(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)Zs(r,r),n!==1&&$t(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function db(t,e){var r=new In(32),n=new In(32);return qd(r,t),qd(n,e),hb(r,0,n,0)}function hb(t,e,r,n){return wU(t,e,r,n,32)}function wU(t,e,r,n,i){var a,s=0;for(a=0;a<i;++a)s|=t[e+a]^r[n+a];return(1&s-1>>>8)-1}function pb(t){var e=new In(32);return qd(e,t),e[0]&1}function gb(t,e,r){var n,i;for(gs(t[0],Gg),gs(t[1],Fd),gs(t[2],Fd),gs(t[3],Gg),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,fb(t,e,n),Kg(e,t),Kg(t,t),fb(t,e,n)}function Yg(t,e){var r=[We(),We(),We(),We()];gs(r[0],lb),gs(r[1],ub),gs(r[2],Fd),$t(r[3],lb,ub),gb(t,r,e)}function gs(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function EU(t,e){var r=We(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)Zs(r,r),n!==2&&n!==4&&$t(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function Wg(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}function mb(t,e,r){for(var n,i=~(r-1),a=0;a<16;++a)n=i&(t[a]^e[a]),t[a]^=n,e[a]^=n}function We(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function gl(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function ml(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function Zs(t,e){$t(t,e,e)}function $t(t,e,r){var n,i,a=0,s=0,l=0,u=0,f=0,d=0,h=0,g=0,m=0,y=0,_=0,w=0,E=0,S=0,T=0,L=0,I=0,B=0,z=0,F=0,G=0,te=0,ae=0,we=0,Se=0,Qe=0,Re=0,me=0,re=0,Fe=0,Ze=0,ct=r[0],Je=r[1],ft=r[2],le=r[3],Rt=r[4],Dt=r[5],rt=r[6],nt=r[7],dt=r[8],N=r[9],D=r[10],O=r[11],j=r[12],H=r[13],X=r[14],Z=r[15];n=e[0],a+=n*ct,s+=n*Je,l+=n*ft,u+=n*le,f+=n*Rt,d+=n*Dt,h+=n*rt,g+=n*nt,m+=n*dt,y+=n*N,_+=n*D,w+=n*O,E+=n*j,S+=n*H,T+=n*X,L+=n*Z,n=e[1],s+=n*ct,l+=n*Je,u+=n*ft,f+=n*le,d+=n*Rt,h+=n*Dt,g+=n*rt,m+=n*nt,y+=n*dt,_+=n*N,w+=n*D,E+=n*O,S+=n*j,T+=n*H,L+=n*X,I+=n*Z,n=e[2],l+=n*ct,u+=n*Je,f+=n*ft,d+=n*le,h+=n*Rt,g+=n*Dt,m+=n*rt,y+=n*nt,_+=n*dt,w+=n*N,E+=n*D,S+=n*O,T+=n*j,L+=n*H,I+=n*X,B+=n*Z,n=e[3],u+=n*ct,f+=n*Je,d+=n*ft,h+=n*le,g+=n*Rt,m+=n*Dt,y+=n*rt,_+=n*nt,w+=n*dt,E+=n*N,S+=n*D,T+=n*O,L+=n*j,I+=n*H,B+=n*X,z+=n*Z,n=e[4],f+=n*ct,d+=n*Je,h+=n*ft,g+=n*le,m+=n*Rt,y+=n*Dt,_+=n*rt,w+=n*nt,E+=n*dt,S+=n*N,T+=n*D,L+=n*O,I+=n*j,B+=n*H,z+=n*X,F+=n*Z,n=e[5],d+=n*ct,h+=n*Je,g+=n*ft,m+=n*le,y+=n*Rt,_+=n*Dt,w+=n*rt,E+=n*nt,S+=n*dt,T+=n*N,L+=n*D,I+=n*O,B+=n*j,z+=n*H,F+=n*X,G+=n*Z,n=e[6],h+=n*ct,g+=n*Je,m+=n*ft,y+=n*le,_+=n*Rt,w+=n*Dt,E+=n*rt,S+=n*nt,T+=n*dt,L+=n*N,I+=n*D,B+=n*O,z+=n*j,F+=n*H,G+=n*X,te+=n*Z,n=e[7],g+=n*ct,m+=n*Je,y+=n*ft,_+=n*le,w+=n*Rt,E+=n*Dt,S+=n*rt,T+=n*nt,L+=n*dt,I+=n*N,B+=n*D,z+=n*O,F+=n*j,G+=n*H,te+=n*X,ae+=n*Z,n=e[8],m+=n*ct,y+=n*Je,_+=n*ft,w+=n*le,E+=n*Rt,S+=n*Dt,T+=n*rt,L+=n*nt,I+=n*dt,B+=n*N,z+=n*D,F+=n*O,G+=n*j,te+=n*H,ae+=n*X,we+=n*Z,n=e[9],y+=n*ct,_+=n*Je,w+=n*ft,E+=n*le,S+=n*Rt,T+=n*Dt,L+=n*rt,I+=n*nt,B+=n*dt,z+=n*N,F+=n*D,G+=n*O,te+=n*j,ae+=n*H,we+=n*X,Se+=n*Z,n=e[10],_+=n*ct,w+=n*Je,E+=n*ft,S+=n*le,T+=n*Rt,L+=n*Dt,I+=n*rt,B+=n*nt,z+=n*dt,F+=n*N,G+=n*D,te+=n*O,ae+=n*j,we+=n*H,Se+=n*X,Qe+=n*Z,n=e[11],w+=n*ct,E+=n*Je,S+=n*ft,T+=n*le,L+=n*Rt,I+=n*Dt,B+=n*rt,z+=n*nt,F+=n*dt,G+=n*N,te+=n*D,ae+=n*O,we+=n*j,Se+=n*H,Qe+=n*X,Re+=n*Z,n=e[12],E+=n*ct,S+=n*Je,T+=n*ft,L+=n*le,I+=n*Rt,B+=n*Dt,z+=n*rt,F+=n*nt,G+=n*dt,te+=n*N,ae+=n*D,we+=n*O,Se+=n*j,Qe+=n*H,Re+=n*X,me+=n*Z,n=e[13],S+=n*ct,T+=n*Je,L+=n*ft,I+=n*le,B+=n*Rt,z+=n*Dt,F+=n*rt,G+=n*nt,te+=n*dt,ae+=n*N,we+=n*D,Se+=n*O,Qe+=n*j,Re+=n*H,me+=n*X,re+=n*Z,n=e[14],T+=n*ct,L+=n*Je,I+=n*ft,B+=n*le,z+=n*Rt,F+=n*Dt,G+=n*rt,te+=n*nt,ae+=n*dt,we+=n*N,Se+=n*D,Qe+=n*O,Re+=n*j,me+=n*H,re+=n*X,Fe+=n*Z,n=e[15],L+=n*ct,I+=n*Je,B+=n*ft,z+=n*le,F+=n*Rt,G+=n*Dt,te+=n*rt,ae+=n*nt,we+=n*dt,Se+=n*N,Qe+=n*D,Re+=n*O,me+=n*j,re+=n*H,Fe+=n*X,Ze+=n*Z,a+=38*I,s+=38*B,l+=38*z,u+=38*F,f+=38*G,d+=38*te,h+=38*ae,g+=38*we,m+=38*Se,y+=38*Qe,_+=38*Re,w+=38*me,E+=38*re,S+=38*Fe,T+=38*Ze,i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=L+i+65535,i=Math.floor(n/65536),L=n-i*65536,a+=i-1+37*(i-1),i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=L+i+65535,i=Math.floor(n/65536),L=n-i*65536,a+=i-1+37*(i-1),t[0]=a,t[1]=s,t[2]=l,t[3]=u,t[4]=f,t[5]=d,t[6]=h,t[7]=g,t[8]=m,t[9]=y,t[10]=_,t[11]=w,t[12]=E,t[13]=S,t[14]=T,t[15]=L}});var Cb=de((R7,Eb)=>{var Vn=vt();qt();ti();Ou();Eb.exports=Vn.kem=Vn.kem||{};var _b=Vn.jsbn.BigInteger;Vn.kem.rsa={};Vn.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||Vn.random,n={};return n.encrypt=function(i,a){var s=Math.ceil(i.n.bitLength()/8),l;do l=new _b(Vn.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(l.compareTo(_b.ONE)<=0);l=Vn.util.hexToBytes(l.toString(16));var u=s-l.length;u>0&&(l=Vn.util.fillString(String.fromCharCode(0),u)+l);var f=i.encrypt(l,"NONE"),d=t.generate(l,a);return{encapsulation:f,key:d}},n.decrypt=function(i,a,s){var l=i.decrypt(a,"NONE");return t.generate(l,s)},n};Vn.kem.kdf1=function(t,e){wb(this,t,0,e||t.digestLength)};Vn.kem.kdf2=function(t,e){wb(this,t,1,e||t.digestLength)};function wb(t,e,r,n){t.generate=function(i,a){for(var s=new Vn.util.ByteBuffer,l=Math.ceil(a/n)+r,u=new Vn.util.ByteBuffer,f=r;f<l;++f){u.putInt32(f),e.start(),e.update(i+u.getBytes());var d=e.digest();s.putBytes(d.getBytes(n))}return s.truncate(s.length()-a),s.getBytes()}}});var Sb=de((D7,Tb)=>{var It=vt();qt();Tb.exports=It.log=It.log||{};It.log.levels=["none","error","warning","info","debug","verbose","max"];var Gd={},zg=[],qu=null;It.log.LEVEL_LOCKED=1<<1;It.log.NO_LEVEL_CHECK=1<<2;It.log.INTERPOLATE=1<<3;for(ra=0;ra<It.log.levels.length;++ra)Qg=It.log.levels[ra],Gd[Qg]={index:ra,name:Qg.toUpperCase()};var Qg,ra;It.log.logMessage=function(t){for(var e=Gd[t.level].index,r=0;r<zg.length;++r){var n=zg[r];if(n.flags&It.log.NO_LEVEL_CHECK)n.f(t);else{var i=Gd[n.level].index;e<=i&&n.f(n,t)}}};It.log.prepareStandard=function(t){"standard"in t||(t.standard=Gd[t.level].name+" ["+t.category+"] "+t.message)};It.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=It.util.format.apply(this,e)}};It.log.prepareStandardFull=function(t){"standardFull"in t||(It.log.prepareStandard(t),t.standardFull=t.standard)};for(Xg=["error","warning","info","debug","verbose"],ra=0;ra<Xg.length;++ra)(function(e){It.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:e,category:r,message:n,arguments:i};It.log.logMessage(a)}})(Xg[ra]);var Xg,ra;It.log.makeLogger=function(t){var e={flags:0,f:t};return It.log.setLevel(e,"none"),e};It.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&It.log.LEVEL_LOCKED))for(var n=0;n<It.log.levels.length;++n){var i=It.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};It.log.lock=function(t,e){typeof e=="undefined"||e?t.flags|=It.log.LEVEL_LOCKED:t.flags&=~It.log.LEVEL_LOCKED};It.log.addLogger=function(t){zg.push(t)};typeof console!="undefined"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(bb={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},Gu=function(t,e){It.log.prepareStandard(e);var r=bb[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},yl=It.log.makeLogger(Gu)):(Gu=function(e,r){It.log.prepareStandardFull(r),console.log(r.standardFull)},yl=It.log.makeLogger(Gu)),It.log.setLevel(yl,"debug"),It.log.addLogger(yl),qu=yl):console={log:function(){}};var yl,bb,Gu;qu!==null&&typeof window!="undefined"&&window.location&&(Vu=new URL(window.location.href).searchParams,Vu.has("console.level")&&It.log.setLevel(qu,Vu.get("console.level").slice(-1)[0]),Vu.has("console.lock")&&(xb=Vu.get("console.lock").slice(-1)[0],xb=="true"&&It.log.lock(qu)));var Vu,xb;It.log.consoleLogger=qu});var kb=de((B7,Ab)=>{Ab.exports=zi();wd();cl();ug();Ug()});var Rb=de((O7,Nb)=>{var Te=vt();os();bi();Du();ls();js();bg();ti();qt();Od();var V=Te.asn1,vn=Nb.exports=Te.pkcs7=Te.pkcs7||{};vn.messageFromPem=function(t){var e=Te.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=V.fromDer(e.body);return vn.messageFromAsn1(n)};vn.messageToPem=function(t,e){var r={type:"PKCS7",body:V.toDer(t.toAsn1()).getBytes()};return Te.pem.encode(r,{maxline:e})};vn.messageFromAsn1=function(t){var e={},r=[];if(!V.validate(t,vn.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=V.derToOid(e.contentType),a;switch(i){case Te.pki.oids.envelopedData:a=vn.createEnvelopedData();break;case Te.pki.oids.encryptedData:a=vn.createEncryptedData();break;case Te.pki.oids.signedData:a=vn.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return a.fromAsn1(e.content.value[0]),a};vn.createSignedData=function(){var t=null;return t={type:Te.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(Zg(t,n,vn.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,a=0;a<i.length;++a)t.certificates.push(Te.pki.certificateFromAsn1(i[a]))},toAsn1:function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(Te.pki.certificateToAsn1(t.certificates[i]));var a=[],s=V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&s.value[0].value.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!0,n)),a.length>0&&s.value[0].value.push(V.create(V.Class.CONTEXT_SPECIFIC,1,!0,a)),s.value[0].value.push(V.create(V.Class.UNIVERSAL,V.Type.SET,!0,t.signerInfos)),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,a=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=Te.pki.certificateFromPem(s)),i=s.issuer.attributes,a=s.serialNumber}var l=n.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=Te.pki.privateKeyFromPem(l));var u=n.digestAlgorithm||Te.pki.oids.sha1;switch(u){case Te.pki.oids.sha1:case Te.pki.oids.sha256:case Te.pki.oids.sha384:case Te.pki.oids.sha512:case Te.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+u)}var f=n.authenticatedAttributes||[];if(f.length>0){for(var d=!1,h=!1,g=0;g<f.length;++g){var m=f[g];if(!d&&m.type===Te.pki.oids.contentType){if(d=!0,h)break;continue}if(!h&&m.type===Te.pki.oids.messageDigest){if(h=!0,d)break;continue}}if(!d||!h)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:i,serialNumber:a,digestAlgorithm:u,signatureAlgorithm:Te.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:f,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(Te.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Te.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Te.util.encodeUtf8(t.content)),n.detached?t.detachedContent=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var a=e();r(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Te.pki.certificateFromPem(n)),t.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var a=t.signers[i],s=a.digestAlgorithm;s in n||(n[s]=Te.md[Te.pki.oids[s]].create()),a.authenticatedAttributes.length===0?a.md=n[s]:a.md=Te.md[Te.pki.oids[s]].create()}t.digestAlgorithmIdentifiers=[];for(var s in n)t.digestAlgorithmIdentifiers.push(V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(s).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]));return n}function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=V.derToOid(t.contentInfo.value[0].value),s=V.toDer(i);s.getByte(),V.getBerValueLength(s),s=s.getBytes();for(var l in n)n[l].start().update(s);for(var u=new Date,f=0;f<t.signers.length;++f){var d=t.signers[f];if(d.authenticatedAttributes.length===0){if(a!==Te.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[]),g=0;g<d.authenticatedAttributes.length;++g){var m=d.authenticatedAttributes[g];m.type===Te.pki.oids.messageDigest?m.value=n[d.digestAlgorithm].digest():m.type===Te.pki.oids.signingTime&&(m.value||(m.value=u)),h.value.push(Jg(m)),d.authenticatedAttributesAsn1.value.push(Jg(m))}s=V.toDer(h).getBytes(),d.md.start().update(s)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=AU(t.signers)}};vn.createEncryptedData=function(){var t=null;return t={type:Te.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Te.pki.oids["aes256-CBC"]},fromAsn1:function(e){Zg(t,e,vn.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),Ib(t)}},t};vn.createEnvelopedData=function(){var t=null;return t={type:Te.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Te.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=Zg(t,e,vn.asn1.envelopedDataValidator);t.recipients=xU(r.recipientInfos.value)},toAsn1:function(){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.type).getBytes()),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,TU(t.recipients)),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,kU(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],a=i.issuer;if(i.serialNumber===e.serialNumber&&a.length===r.length){for(var s=!0,l=0;l<r.length;++l)if(a[l].type!==r[l].type||a[l].value!==r[l].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Te.pki.oids.rsaEncryption:case Te.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Te.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}Ib(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Te.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,a;switch(r){case Te.pki.oids["aes128-CBC"]:n=16,i=16,a=Te.aes.createEncryptionCipher;break;case Te.pki.oids["aes192-CBC"]:n=24,i=16,a=Te.aes.createEncryptionCipher;break;case Te.pki.oids["aes256-CBC"]:n=32,i=16,a=Te.aes.createEncryptionCipher;break;case Te.pki.oids["des-EDE3-CBC"]:n=24,i=8,a=Te.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Te.util.createBuffer(Te.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Te.util.createBuffer(Te.random.getBytes(i));var s=a(e);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var l=0;l<t.recipients.length;++l){var u=t.recipients[l];if(u.encryptedContent.content===void 0)switch(u.encryptedContent.algorithm){case Te.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}},t};function CU(t){var e={},r=[];if(!V.validate(t,vn.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:Te.pki.RDNAttributesAsArray(e.issuer),serialNumber:Te.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:V.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function bU(t){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[Te.pki.distinguishedNameToAsn1({attributes:t.issuer}),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Te.util.hexToBytes(t.serialNumber))]),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.encryptedContent.algorithm).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]),V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function xU(t){for(var e=[],r=0;r<t.length;++r)e.push(CU(t[r]));return e}function TU(t){for(var e=[],r=0;r<t.length;++r)e.push(bU(t[r]));return e}function SU(t){var e=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[Te.pki.distinguishedNameToAsn1({attributes:t.issuer}),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Te.util.hexToBytes(t.serialNumber))]),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.digestAlgorithm).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.signatureAlgorithm).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])),e.value.push(V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=V.create(V.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(Jg(i))}e.value.push(r)}return e}function AU(t){for(var e=[],r=0;r<t.length;++r)e.push(SU(t[r]));return e}function Jg(t){var e;if(t.type===Te.pki.oids.contentType)e=V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.value).getBytes());else if(t.type===Te.pki.oids.messageDigest)e=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Te.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var a=Date.parse(i);isNaN(a)?i.length===13?i=V.utcTimeToDate(i):i=V.generalizedTimeToDate(i):i=new Date(a)}i>=r&&i<n?e=V.create(V.Class.UNIVERSAL,V.Type.UTCTIME,!1,V.dateToUtcTime(i)):e=V.create(V.Class.UNIVERSAL,V.Type.GENERALIZEDTIME,!1,V.dateToGeneralizedTime(i))}return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.type).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[e])])}function kU(t){return[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(Te.pki.oids.data).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.algorithm).getBytes()),t.parameter?V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.content.getBytes())])]}function Zg(t,e,r){var n={},i=[];if(!V.validate(e,r,n,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var s=V.derToOid(n.contentType);if(s!==Te.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var l="";if(Te.util.isArray(n.encryptedContent))for(var u=0;u<n.encryptedContent.length;++u){if(n.encryptedContent[u].type!==V.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=n.encryptedContent[u].value}else l=n.encryptedContent;t.encryptedContent={algorithm:V.derToOid(n.encAlgorithm),parameter:Te.util.createBuffer(n.encParameter.value),content:Te.util.createBuffer(l)}}if(n.content){var l="";if(Te.util.isArray(n.content))for(var u=0;u<n.content.length;++u){if(n.content[u].type!==V.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=n.content[u].value}else l=n.content;t.content=Te.util.createBuffer(l)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}function Ib(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Te.pki.oids["aes128-CBC"]:case Te.pki.oids["aes192-CBC"]:case Te.pki.oids["aes256-CBC"]:e=Te.aes.createDecryptionCipher(t.encryptedContent.key);break;case Te.pki.oids.desCBC:case Te.pki.oids["des-EDE3-CBC"]:e=Te.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var Bb=de((L7,Db)=>{var kr=vt();os();sl();wd();cl();qt();var Vd=Db.exports=kr.ssh=kr.ssh||{};Vd.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",a="PuTTY-User-Key-File-2: "+n+`\r
`;a+="Encryption: "+i+`\r
`,a+="Comment: "+r+`\r
`;var s=kr.util.createBuffer();vl(s,n),na(s,t.e),na(s,t.n);var l=kr.util.encode64(s.bytes(),64),u=Math.floor(l.length/66)+1;a+="Public-Lines: "+u+`\r
`,a+=l;var f=kr.util.createBuffer();na(f,t.d),na(f,t.p),na(f,t.q),na(f,t.qInv);var d;if(!e)d=kr.util.encode64(f.bytes(),64);else{var h=f.length()+16-1;h-=h%16;var g=Hd(f.bytes());g.truncate(g.length()-h+f.length()),f.putBuffer(g);var m=kr.util.createBuffer();m.putBuffer(Hd("\0\0\0\0",e)),m.putBuffer(Hd("\0\0\0",e));var y=kr.aes.createEncryptionCipher(m.truncate(8),"CBC");y.start(kr.util.createBuffer().fillWithByte(0,16)),y.update(f.copy()),y.finish();var _=y.output;_.truncate(16),d=kr.util.encode64(_.bytes(),64)}u=Math.floor(d.length/66)+1,a+=`\r
Private-Lines: `+u+`\r
`,a+=d;var w=Hd("putty-private-key-file-mac-key",e),E=kr.util.createBuffer();vl(E,n),vl(E,i),vl(E,r),E.putInt32(s.length()),E.putBuffer(s),E.putInt32(f.length()),E.putBuffer(f);var S=kr.hmac.create();return S.start("sha1",w),S.update(E.bytes()),a+=`\r
Private-MAC: `+S.digest().toHex()+`\r
`,a};Vd.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=kr.util.createBuffer();return vl(n,r),na(n,t.e),na(n,t.n),r+" "+kr.util.encode64(n.bytes())+" "+e};Vd.privateKeyToOpenSSH=function(t,e){return e?kr.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):kr.pki.privateKeyToPem(t)};Vd.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||kr.md.md5.create(),n="ssh-rsa",i=kr.util.createBuffer();vl(i,n),na(i,t.e),na(i,t.n),r.start(),r.update(i.getBytes());var a=r.digest();if(e.encoding==="hex"){var s=a.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return a};function na(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=kr.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}function vl(t,e){t.putInt32(e.length),t.putString(e)}function Hd(){for(var t=kr.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}});var Lb=de((P7,Ob)=>{Ob.exports=vt();os();eb();bi();hd();Du();vb();sl();Cb();Sb();kb();xg();xd();js();vg();Ag();Rb();Ig();wg();cg();Rd();ti();hg();Bb();Lg();qt()});var Mb=de(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});jd.getPem=void 0;var IU=require("fs"),Kd=Lb(),NU=require("util"),RU=NU.promisify(IU.readFile);function DU(t,e){if(e)Pb(t).then(r=>e(null,r)).catch(r=>e(r,null));else return Pb(t)}jd.getPem=DU;function Pb(t){return RU(t,{encoding:"base64"}).then(e=>BU(e))}function BU(t){let e=Kd.util.decode64(t),r=Kd.asn1.fromDer(e),i=Kd.pkcs12.pkcs12FromAsn1(r,"notasecret").getBags({friendlyName:"privatekey"});if(i.friendlyName){let a=i.friendlyName[0].key;return Kd.pki.privateKeyToPem(a).replace(/\r\n/g,`
`)}else throw new Error("Unable to get friendly name.")}});var Hb=de(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.GoogleToken=void 0;var Ub=require("fs"),Fb=Hw(),OU=Q0(),LU=require("path"),PU=require("util"),qb=Ub.readFile?PU.promisify(Ub.readFile):()=>P(Ku,null,function*(){throw new Hu("use key rather than keyFile.","MISSING_CREDENTIALS")}),Gb="https://www.googleapis.com/oauth2/v4/token",MU="https://accounts.google.com/o/oauth2/revoke?token=",Hu=class extends Error{constructor(e,r){super(e);this.code=r}},$g,Vb=class{constructor(e){this.configure(e)}get accessToken(){return this.rawToken?this.rawToken.access_token:void 0}get idToken(){return this.rawToken?this.rawToken.id_token:void 0}get tokenType(){return this.rawToken?this.rawToken.token_type:void 0}get refreshToken(){return this.rawToken?this.rawToken.refresh_token:void 0}hasExpired(){let e=new Date().getTime();return this.rawToken&&this.expiresAt?e>=this.expiresAt:!0}isTokenExpiring(){var e;let r=new Date().getTime(),n=(e=this.eagerRefreshThresholdMillis)!==null&&e!==void 0?e:0;return this.rawToken&&this.expiresAt?this.expiresAt<=r+n:!0}getToken(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),r=Object.assign({forceRefresh:!1},r),e){let n=e;this.getTokenAsync(r).then(i=>n(null,i),e);return}return this.getTokenAsync(r)}getCredentials(e){return P(this,null,function*(){switch(LU.extname(e)){case".json":{let n=yield qb(e,"utf8"),i=JSON.parse(n),a=i.private_key,s=i.client_email;if(!a||!s)throw new Hu("private_key and client_email are required.","MISSING_CREDENTIALS");return{privateKey:a,clientEmail:s}}case".der":case".crt":case".pem":return{privateKey:yield qb(e,"utf8")};case".p12":case".pfx":return $g||($g=(yield Promise.resolve().then(()=>Mb())).getPem),{privateKey:yield $g(e)};default:throw new Hu("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, *.pem, and *.p12.","UNKNOWN_CERTIFICATE_TYPE")}})}getTokenAsync(e){return P(this,null,function*(){if(this.inFlightRequest&&!e.forceRefresh)return this.inFlightRequest;try{return yield this.inFlightRequest=this.getTokenAsyncInner(e)}finally{this.inFlightRequest=void 0}})}getTokenAsyncInner(e){return P(this,null,function*(){if(this.isTokenExpiring()===!1&&e.forceRefresh===!1)return Promise.resolve(this.rawToken);if(!this.key&&!this.keyFile)throw new Error("No key or keyFile set.");if(!this.key&&this.keyFile){let r=yield this.getCredentials(this.keyFile);this.key=r.privateKey,this.iss=r.clientEmail||this.iss,r.clientEmail||this.ensureEmail()}return this.requestToken()})}ensureEmail(){if(!this.iss)throw new Hu("email is required.","MISSING_CREDENTIALS")}revokeToken(e){if(e){this.revokeTokenAsync().then(()=>e(),e);return}return this.revokeTokenAsync()}revokeTokenAsync(){return P(this,null,function*(){if(!this.accessToken)throw new Error("No token to revoke.");let e=MU+this.accessToken;yield Fb.request({url:e}),this.configure({email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims})})}configure(e={}){this.keyFile=e.keyFile,this.key=e.key,this.rawToken=void 0,this.iss=e.email||e.iss,this.sub=e.sub,this.additionalClaims=e.additionalClaims,typeof e.scope=="object"?this.scope=e.scope.join(" "):this.scope=e.scope,this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis}requestToken(){return P(this,null,function*(){let e=Math.floor(new Date().getTime()/1e3),r=this.additionalClaims||{},n=Object.assign({iss:this.iss,scope:this.scope,aud:Gb,exp:e+3600,iat:e,sub:this.sub},r),i=OU.sign({header:{alg:"RS256"},payload:n,secret:this.key});try{let a=yield Fb.request({method:"POST",url:Gb,data:{grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:i},headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"json"});return this.rawToken=a.data,this.expiresAt=a.data.expires_in===null||a.data.expires_in===void 0?void 0:(e+a.data.expires_in)*1e3,this.rawToken}catch(a){this.rawToken=void 0,this.tokenExpires=void 0;let s=a.response&&a.response.data?a.response.data:{};if(s.error){let l=s.error_description?`: ${s.error_description}`:"";a.message=`${s.error}${l}`}throw a}})}};Ku.GoogleToken=Vb});var jb=de((F7,Kb)=>{"use strict";Kb.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Wb=de((q7,Yb)=>{"use strict";Yb.exports=Vt;Vt.Node=$s;Vt.create=Vt;function Vt(t){var e=this;if(e instanceof Vt||(e=new Vt),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Vt.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Vt.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Vt.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Vt.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)FU(this,arguments[t]);return this.length};Vt.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)qU(this,arguments[t]);return this.length};Vt.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Vt.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Vt.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Vt.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Vt.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Vt.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Vt.prototype.map=function(t,e){e=e||this;for(var r=new Vt,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Vt.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Vt,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Vt.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};Vt.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};Vt.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Vt.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Vt.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Vt;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};Vt.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Vt;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};Vt.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var a=[],n=0;i&&n<e;n++)a.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=UU(this,i,r[n]);return a};Vt.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function UU(t,e,r){var n=e===t.head?new $s(r,null,e,t):new $s(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function FU(t,e){t.tail=new $s(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function qU(t,e){t.head=new $s(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function $s(t,e,r,n){if(!(this instanceof $s))return new $s(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{jb()(Vt)}catch(t){}});var ex=de((G7,$b)=>{"use strict";var GU=Wb(),eo=Symbol("max"),Na=Symbol("length"),_l=Symbol("lengthCalculator"),ju=Symbol("allowStale"),to=Symbol("maxAge"),Ra=Symbol("dispose"),zb=Symbol("noDisposeOnSet"),Kr=Symbol("lruList"),Ti=Symbol("cache"),Qb=Symbol("updateAgeOnGet"),em=()=>1,Xb=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[eo]=e.max||1/0,n=e.length||em;if(this[_l]=typeof n!="function"?em:n,this[ju]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[to]=e.maxAge||0,this[Ra]=e.dispose,this[zb]=e.noDisposeOnSet||!1,this[Qb]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[eo]=e||1/0,Yu(this)}get max(){return this[eo]}set allowStale(e){this[ju]=!!e}get allowStale(){return this[ju]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[to]=e,Yu(this)}get maxAge(){return this[to]}set lengthCalculator(e){typeof e!="function"&&(e=em),e!==this[_l]&&(this[_l]=e,this[Na]=0,this[Kr].forEach(r=>{r.length=this[_l](r.value,r.key),this[Na]+=r.length})),Yu(this)}get lengthCalculator(){return this[_l]}get length(){return this[Na]}get itemCount(){return this[Kr].length}rforEach(e,r){r=r||this;for(let n=this[Kr].tail;n!==null;){let i=n.prev;Zb(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[Kr].head;n!==null;){let i=n.next;Zb(this,e,n,r),n=i}}keys(){return this[Kr].toArray().map(e=>e.key)}values(){return this[Kr].toArray().map(e=>e.value)}reset(){this[Ra]&&this[Kr]&&this[Kr].length&&this[Kr].forEach(e=>this[Ra](e.key,e.value)),this[Ti]=new Map,this[Kr]=new GU,this[Na]=0}dump(){return this[Kr].map(e=>Yd(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Kr]}set(e,r,n){if(n=n||this[to],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,a=this[_l](r,e);if(this[Ti].has(e)){if(a>this[eo])return wl(this,this[Ti].get(e)),!1;let u=this[Ti].get(e).value;return this[Ra]&&(this[zb]||this[Ra](e,u.value)),u.now=i,u.maxAge=n,u.value=r,this[Na]+=a-u.length,u.length=a,this.get(e),Yu(this),!0}let s=new Jb(e,r,a,i,n);return s.length>this[eo]?(this[Ra]&&this[Ra](e,r),!1):(this[Na]+=s.length,this[Kr].unshift(s),this[Ti].set(e,this[Kr].head),Yu(this),!0)}has(e){if(!this[Ti].has(e))return!1;let r=this[Ti].get(e).value;return!Yd(this,r)}get(e){return tm(this,e,!0)}peek(e){return tm(this,e,!1)}pop(){let e=this[Kr].tail;return e?(wl(this,e),e.value):null}del(e){wl(this,this[Ti].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],a=i.e||0;if(a===0)this.set(i.k,i.v);else{let s=a-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Ti].forEach((e,r)=>tm(this,r,!1))}},tm=(t,e,r)=>{let n=t[Ti].get(e);if(n){let i=n.value;if(Yd(t,i)){if(wl(t,n),!t[ju])return}else r&&(t[Qb]&&(n.value.now=Date.now()),t[Kr].unshiftNode(n));return i.value}},Yd=(t,e)=>{if(!e||!e.maxAge&&!t[to])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[to]&&r>t[to]},Yu=t=>{if(t[Na]>t[eo])for(let e=t[Kr].tail;t[Na]>t[eo]&&e!==null;){let r=e.prev;wl(t,e),e=r}},wl=(t,e)=>{if(e){let r=e.value;t[Ra]&&t[Ra](r.key,r.value),t[Na]-=r.length,t[Ti].delete(r.key),t[Kr].removeNode(e)}},Jb=class{constructor(e,r,n,i,a){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=a||0}},Zb=(t,e,r,n)=>{let i=r.value;Yd(t,i)&&(wl(t,r),t[ju]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};$b.exports=Xb});var rm=de(zd=>{"use strict";Object.defineProperty(zd,"__esModule",{value:!0});zd.JWTAccess=void 0;var VU=Q0(),HU=ex(),tx={alg:"RS256",typ:"JWT"},Wd=class{constructor(e,r,n,i){this.cache=new HU({max:500,maxAge:60*60*1e3}),this.email=e,this.key=r,this.keyId=n,this.eagerRefreshThresholdMillis=i!=null?i:5*60*1e3}getCachedKey(e,r){let n=e;if(r&&Array.isArray(r)&&r.length?n=e?`${e}_${r.join("_")}`:`${r.join("_")}`:typeof r=="string"&&(n=e?`${e}_${r}`:r),!n)throw Error("Scopes or url must be provided");return n}getRequestHeaders(e,r,n){let i=this.getCachedKey(e,n),a=this.cache.get(i),s=Date.now();if(a&&a.expiration-s>this.eagerRefreshThresholdMillis)return a.headers;let l=Math.floor(Date.now()/1e3),u=Wd.getExpirationTime(l),f;if(Array.isArray(n)&&(n=n.join(" ")),n?f={iss:this.email,sub:this.email,scope:n,exp:u,iat:l}:f={iss:this.email,sub:this.email,aud:e,exp:u,iat:l},r){for(let y in f)if(r[y])throw new Error(`The '${y}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let d=this.keyId?Gi(pn({},tx),{kid:this.keyId}):tx,h=Object.assign(f,r),m={Authorization:`Bearer ${VU.sign({header:d,payload:h,secret:this.key})}`};return this.cache.set(i,{expiration:u*1e3,headers:m}),m}static getExpirationTime(e){return e+3600}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{e||n(new Error("Must pass in a stream containing the service account auth settings."));let i="";e.setEncoding("utf8").on("data",a=>i+=a).on("error",n).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),r()}catch(a){n(a)}})})}};zd.JWTAccess=Wd});var nm=de(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});Xd.JWT=void 0;var rx=Hb(),KU=rm(),jU=Hs(),Qd=class extends jU.OAuth2Client{constructor(e,r,n,i,a,s){let l=e&&typeof e=="object"?e:{email:e,keyFile:r,key:n,keyId:s,scopes:i,subject:a};super({eagerRefreshThresholdMillis:l.eagerRefreshThresholdMillis,forceRefreshOnFailure:l.forceRefreshOnFailure});this.email=l.email,this.keyFile=l.keyFile,this.key=l.key,this.keyId=l.keyId,this.scopes=l.scopes,this.subject=l.subject,this.additionalClaims=l.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(e){return new Qd({email:this.email,keyFile:this.keyFile,key:this.key,keyId:this.keyId,scopes:e,subject:this.subject,additionalClaims:this.additionalClaims})}getRequestMetadataAsync(e){var r=n=>super[n];return P(this,null,function*(){e=this.defaultServicePath?`https://${this.defaultServicePath}/`:e;let i=!this.hasUserScopes()&&e||this.useJWTAccessWithScope&&this.hasAnyScopes();if(!this.apiKey&&i)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:a}=yield this.refreshToken();return{headers:this.addSharedMetadataHeaders({Authorization:`Bearer ${a.id_token}`})}}else{this.access||(this.access=new KU.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let a;this.hasUserScopes()?a=this.scopes:e||(a=this.defaultScopes);let s=yield this.access.getRequestHeaders(e!=null?e:void 0,this.additionalClaims,this.useJWTAccessWithScope?a:void 0);return{headers:this.addSharedMetadataHeaders(s)}}else return this.hasAnyScopes()||this.apiKey?r("getRequestMetadataAsync").call(this,e):{headers:{}}})}fetchIdToken(e){return P(this,null,function*(){let r=new rx.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:e}});if(yield r.getToken({forceRefresh:!0}),!r.idToken)throw new Error("Unknown error: Failed to fetch ID token");return r.idToken})}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(e){if(e)this.authorizeAsync().then(r=>e(null,r),e);else return this.authorizeAsync()}authorizeAsync(){return P(this,null,function*(){let e=yield this.refreshToken();if(!e)throw new Error("No result returned");return this.credentials=e.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,e.tokens})}refreshTokenNoCache(e){return P(this,null,function*(){let r=this.createGToken(),i={access_token:(yield r.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:r.expiresAt,id_token:r.idToken};return this.emit("tokens",i),{res:null,tokens:i}})}createGToken(){return this.gtoken||(this.gtoken=new rx.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims})),this.gtoken}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id,this.quotaProjectId=e.quota_project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{if(!e)throw new Error("Must pass in a stream containing the service account auth settings.");let i="";e.setEncoding("utf8").on("error",n).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),r()}catch(a){n(a)}})})}fromAPIKey(e){if(typeof e!="string")throw new Error("Must provide an API Key string.");this.apiKey=e}getCredentials(){return P(this,null,function*(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let r=yield this.createGToken().getCredentials(this.keyFile);return{private_key:r.privateKey,client_email:r.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")})}};Xd.JWT=Qd});var im=de(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});Jd.UserRefreshClient=void 0;var YU=Hs(),nx=class extends YU.OAuth2Client{constructor(e,r,n,i,a){let s=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,refreshToken:n,eagerRefreshThresholdMillis:i,forceRefreshOnFailure:a};super({clientId:s.clientId,clientSecret:s.clientSecret,eagerRefreshThresholdMillis:s.eagerRefreshThresholdMillis,forceRefreshOnFailure:s.forceRefreshOnFailure});this._refreshToken=s.refreshToken,this.credentials.refresh_token=s.refreshToken}refreshTokenNoCache(e){var r=n=>super[n];return P(this,null,function*(){return r("refreshTokenNoCache").call(this,this._refreshToken)})}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the user refresh token");if(e.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!e.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!e.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!e.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=e.client_id,this._clientSecret=e.client_secret,this._refreshToken=e.refresh_token,this.credentials.refresh_token=e.refresh_token,this.quotaProjectId=e.quota_project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return P(this,null,function*(){return new Promise((r,n)=>{if(!e)return n(new Error("Must pass in a stream containing the user refresh token."));let i="";e.setEncoding("utf8").on("error",n).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);return this.fromJSON(a),r()}catch(a){return n(a)}})})})}};Jd.UserRefreshClient=nx});var sx=de(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.getErrorFromOAuthErrorResponse=El.OAuthClientAuthHandler=void 0;var ix=require("querystring"),WU=Xo(),zU=["PUT","POST","PATCH"],ax=class{constructor(e){this.clientAuthentication=e,this.crypto=(0,WU.createCrypto)()}applyClientAuthenticationOptions(e,r){this.injectAuthenticatedHeaders(e,r),r||this.injectAuthenticatedRequestBody(e)}injectAuthenticatedHeaders(e,r){var n;if(r)e.headers=e.headers||{},Object.assign(e.headers,{Authorization:`Bearer ${r}}`});else if(((n=this.clientAuthentication)===null||n===void 0?void 0:n.confidentialClientType)==="basic"){e.headers=e.headers||{};let i=this.clientAuthentication.clientId,a=this.clientAuthentication.clientSecret||"",s=this.crypto.encodeBase64StringUtf8(`${i}:${a}`);Object.assign(e.headers,{Authorization:`Basic ${s}`})}}injectAuthenticatedRequestBody(e){var r;if(((r=this.clientAuthentication)===null||r===void 0?void 0:r.confidentialClientType)==="request-body"){let n=(e.method||"GET").toUpperCase();if(zU.indexOf(n)!==-1){let i,a=e.headers||{};for(let s in a)if(s.toLowerCase()==="content-type"&&a[s]){i=a[s].toLowerCase();break}if(i==="application/x-www-form-urlencoded"){e.data=e.data||"";let s=ix.parse(e.data);Object.assign(s,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""}),e.data=ix.stringify(s)}else if(i==="application/json")e.data=e.data||{},Object.assign(e.data,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""});else throw new Error(`${i} content-types are not supported with ${this.clientAuthentication.confidentialClientType} client authentication`)}else throw new Error(`${n} HTTP method does not support ${this.clientAuthentication.confidentialClientType} client authentication`)}}};El.OAuthClientAuthHandler=ax;function QU(t,e){let r=t.error,n=t.error_description,i=t.error_uri,a=`Error code ${r}`;typeof n!="undefined"&&(a+=`: ${n}`),typeof i!="undefined"&&(a+=` - ${i}`);let s=new Error(a);if(e){let l=Object.keys(e);e.stack&&l.push("stack"),l.forEach(u=>{u!=="message"&&Object.defineProperty(s,u,{value:e[u],writable:!1,enumerable:!0})})}return s}El.getErrorFromOAuthErrorResponse=QU});var am=de(Zd=>{"use strict";Object.defineProperty(Zd,"__esModule",{value:!0});Zd.StsCredentials=void 0;var XU=zo(),JU=require("querystring"),ZU=Cu(),ox=sx(),lx=class extends ox.OAuthClientAuthHandler{constructor(e,r){super(r);this.tokenExchangeEndpoint=e,this.transporter=new ZU.DefaultTransporter}exchangeToken(e,r,n){return P(this,null,function*(){var i,a,s;let l={grant_type:e.grantType,resource:e.resource,audience:e.audience,scope:(i=e.scope)===null||i===void 0?void 0:i.join(" "),requested_token_type:e.requestedTokenType,subject_token:e.subjectToken,subject_token_type:e.subjectTokenType,actor_token:(a=e.actingParty)===null||a===void 0?void 0:a.actorToken,actor_token_type:(s=e.actingParty)===null||s===void 0?void 0:s.actorTokenType,options:n&&JSON.stringify(n)};Object.keys(l).forEach(d=>{typeof l[d]=="undefined"&&delete l[d]});let u={"Content-Type":"application/x-www-form-urlencoded"};Object.assign(u,r||{});let f={url:this.tokenExchangeEndpoint,method:"POST",headers:u,data:JU.stringify(l),responseType:"json"};this.applyClientAuthenticationOptions(f);try{let d=yield this.transporter.request(f),h=d.data;return h.res=d,h}catch(d){throw d instanceof XU.GaxiosError&&d.response?(0,ox.getErrorFromOAuthErrorResponse)(d.response.data,d):d}})}};Zd.StsCredentials=lx});var Cl=de(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.BaseExternalAccountClient=Nn.CLOUD_RESOURCE_MANAGER=Nn.EXTERNAL_ACCOUNT_TYPE=Nn.EXPIRATION_TIME_OFFSET=void 0;var $U=require("stream"),e8=bu(),t8=am(),r8="urn:ietf:params:oauth:grant-type:token-exchange",n8="urn:ietf:params:oauth:token-type:access_token",sm="https://www.googleapis.com/auth/cloud-platform",$d="\\.googleapis\\.com$",om="[^\\.\\s\\/\\\\]+";Nn.EXPIRATION_TIME_OFFSET=5*60*1e3;Nn.EXTERNAL_ACCOUNT_TYPE="external_account";Nn.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";var i8="//iam.googleapis.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",ux=class extends e8.AuthClient{constructor(e,r){super();if(e.type!==Nn.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${Nn.EXTERNAL_ACCOUNT_TYPE}" type but received "${e.type}"`);if(this.clientAuth=e.client_id?{confidentialClientType:"basic",clientId:e.client_id,clientSecret:e.client_secret}:void 0,!this.validateGoogleAPIsUrl("sts",e.token_url))throw new Error(`"${e.token_url}" is not a valid token url.`);this.stsCredential=new t8.StsCredentials(e.token_url,this.clientAuth),this.scopes=[sm],this.cachedAccessToken=null,this.audience=e.audience,this.subjectTokenType=e.subject_token_type,this.quotaProjectId=e.quota_project_id,this.workforcePoolUserProject=e.workforce_pool_user_project;let n=new RegExp(i8);if(this.workforcePoolUserProject&&!this.audience.match(n))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");if(typeof e.service_account_impersonation_url!="undefined"&&!this.validateGoogleAPIsUrl("iamcredentials",e.service_account_impersonation_url))throw new Error(`"${e.service_account_impersonation_url}" is not a valid service account impersonation url.`);this.serviceAccountImpersonationUrl=e.service_account_impersonation_url,typeof(r==null?void 0:r.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=Nn.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=r.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(r==null?void 0:r.forceRefreshOnFailure),this.projectId=null,this.projectNumber=this.getProjectNumber(this.audience)}getServiceAccountEmail(){var e;if(this.serviceAccountImpersonationUrl){let n=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return((e=n==null?void 0:n.groups)===null||e===void 0?void 0:e.email)||null}return null}setCredentials(e){super.setCredentials(e),this.cachedAccessToken=e}getAccessToken(){return P(this,null,function*(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}})}getRequestHeaders(){return P(this,null,function*(){let r={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}getProjectId(){return P(this,null,function*(){let e=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(e){let r=yield this.getRequestHeaders(),n=yield this.transporter.request({headers:r,url:`${Nn.CLOUD_RESOURCE_MANAGER}${e}`,responseType:"json"});return this.projectId=n.data.projectId,this.projectId}return null})}requestAsync(e,r=!1){return P(this,null,function*(){let n;try{let i=yield this.getRequestHeaders();e.headers=e.headers||{},i&&i["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(e.headers.Authorization=i.Authorization),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=a.config.data instanceof $U.Readable;if(!r&&(s===401||s===403)&&!l&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(e,!0)}throw i}return n})}refreshAccessTokenAsync(){return P(this,null,function*(){let e=yield this.retrieveSubjectToken(),r={grantType:r8,audience:this.audience,requestedTokenType:n8,subjectToken:e,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[sm]:this.getScopesArray()},n=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,i=yield this.stsCredential.exchangeToken(r,void 0,n);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=yield this.getImpersonatedAccessToken(i.access_token):i.expires_in?this.cachedAccessToken={access_token:i.access_token,expiry_date:new Date().getTime()+i.expires_in*1e3,res:i.res}:this.cachedAccessToken={access_token:i.access_token,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken})}getProjectNumber(e){let r=e.match(/\/projects\/([^/]+)/);return r?r[1]:null}getImpersonatedAccessToken(e){return P(this,null,function*(){let r={url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},data:{scope:this.getScopesArray()},responseType:"json"},n=yield this.transporter.request(r),i=n.data;return{access_token:i.accessToken,expiry_date:new Date(i.expireTime).getTime(),res:n}})}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:typeof this.scopes=="undefined"?[sm]:this.scopes}validateGoogleAPIsUrl(e,r){let n;try{n=new URL(r)}catch(s){return!1}let i=n.hostname;if(n.protocol!=="https:")return!1;let a=[new RegExp("^"+om+"\\."+e+$d),new RegExp("^"+e+$d),new RegExp("^"+e+"\\."+om+$d),new RegExp("^"+om+"\\-"+e+$d)];for(let s of a)if(i.match(s))return!0;return!1}};Nn.BaseExternalAccountClient=ux});var hm=de(eh=>{"use strict";var lm,um,cm;Object.defineProperty(eh,"__esModule",{value:!0});eh.IdentityPoolClient=void 0;var fm=require("fs"),dm=require("util"),a8=Cl(),s8=(0,dm.promisify)((lm=fm.readFile)!==null&&lm!==void 0?lm:()=>{}),o8=(0,dm.promisify)((um=fm.realpath)!==null&&um!==void 0?um:()=>{}),l8=(0,dm.promisify)((cm=fm.lstat)!==null&&cm!==void 0?cm:()=>{}),cx=class extends a8.BaseExternalAccountClient{constructor(e,r){var n,i;super(e,r);if(this.file=e.credential_source.file,this.url=e.credential_source.url,this.headers=e.credential_source.headers,!this.file&&!this.url)throw new Error('No valid Identity Pool "credential_source" provided');if(this.formatType=((n=e.credential_source.format)===null||n===void 0?void 0:n.type)||"text",this.formatSubjectTokenFieldName=(i=e.credential_source.format)===null||i===void 0?void 0:i.subject_token_field_name,this.formatType!=="json"&&this.formatType!=="text")throw new Error(`Invalid credential_source format "${this.formatType}"`);if(this.formatType==="json"&&!this.formatSubjectTokenFieldName)throw new Error("Missing subject_token_field_name for JSON credential_source format")}retrieveSubjectToken(){return P(this,null,function*(){return this.file?yield this.getTokenFromFile(this.file,this.formatType,this.formatSubjectTokenFieldName):yield this.getTokenFromUrl(this.url,this.formatType,this.formatSubjectTokenFieldName,this.headers)})}getTokenFromFile(e,r,n){return P(this,null,function*(){try{if(e=yield o8(e),!(yield l8(e)).isFile())throw new Error}catch(s){throw s instanceof Error&&(s.message=`The file at ${e} does not exist, or it is not a file. ${s.message}`),s}let i,a=yield s8(e,{encoding:"utf8"});if(r==="text"?i=a:r==="json"&&n&&(i=JSON.parse(a)[n]),!i)throw new Error("Unable to parse the subject_token from the credential_source file");return i})}getTokenFromUrl(e,r,n,i){return P(this,null,function*(){let a={url:e,method:"GET",headers:i,responseType:r},s;if(r==="text"?s=(yield this.transporter.request(a)).data:r==="json"&&n&&(s=(yield this.transporter.request(a)).data[n]),!s)throw new Error("Unable to parse the subject_token from the credential_source URL");return s})}};eh.IdentityPoolClient=cx});var px=de(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});th.AwsRequestSigner=void 0;var fx=Xo(),dx="AWS4-HMAC-SHA256",u8="aws4_request",hx=class{constructor(e,r){this.getCredentials=e,this.region=r,this.crypto=(0,fx.createCrypto)()}getRequestOptions(e){return P(this,null,function*(){if(!e.url)throw new Error('"url" is required in "amzOptions"');let r=typeof e.data=="object"?JSON.stringify(e.data):e.data,n=e.url,i=e.method||"GET",a=e.body||r,s=e.headers,l=yield this.getCredentials(),u=new URL(n),f=yield f8({crypto:this.crypto,host:u.host,canonicalUri:u.pathname,canonicalQuerystring:u.search.substr(1),method:i,region:this.region,securityCredentials:l,requestPayload:a,additionalAmzHeaders:s}),d=Object.assign(f.amzDate?{"x-amz-date":f.amzDate}:{},{Authorization:f.authorizationHeader,host:u.host},s||{});l.token&&Object.assign(d,{"x-amz-security-token":l.token});let h={url:n,method:i,headers:d};return typeof a!="undefined"&&(h.body=a),h})}};th.AwsRequestSigner=hx;function Wu(t,e,r){return P(this,null,function*(){return yield t.signWithHmacSha256(e,r)})}function c8(t,e,r,n,i){return P(this,null,function*(){let a=yield Wu(t,`AWS4${e}`,r),s=yield Wu(t,a,n),l=yield Wu(t,s,i);return yield Wu(t,l,"aws4_request")})}function f8(t){return P(this,null,function*(){let e=t.additionalAmzHeaders||{},r=t.requestPayload||"",n=t.host.split(".")[0],i=new Date,a=i.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),s=i.toISOString().replace(/[-]/g,"").replace(/T.*/,""),l={};Object.keys(e).forEach(T=>{l[T.toLowerCase()]=e[T]}),t.securityCredentials.token&&(l["x-amz-security-token"]=t.securityCredentials.token);let u=Object.assign({host:t.host},l.date?{}:{"x-amz-date":a},l),f="",d=Object.keys(u).sort();d.forEach(T=>{f+=`${T}:${u[T]}
`});let h=d.join(";"),g=yield t.crypto.sha256DigestHex(r),m=`${t.method}
${t.canonicalUri}
${t.canonicalQuerystring}
${f}
${h}
${g}`,y=`${s}/${t.region}/${n}/${u8}`,_=`${dx}
${a}
${y}
`+(yield t.crypto.sha256DigestHex(m)),w=yield c8(t.crypto,t.securityCredentials.secretAccessKey,s,t.region,n),E=yield Wu(t.crypto,w,_),S=`${dx} Credential=${t.securityCredentials.accessKeyId}/${y}, SignedHeaders=${h}, Signature=${(0,fx.fromArrayBufferToHex)(E)}`;return{amzDate:l.date?void 0:a,authorizationHeader:S,canonicalQuerystring:t.canonicalQuerystring}})}});var pm=de(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.AwsClient=void 0;var d8=px(),h8=Cl(),gx=class extends h8.BaseExternalAccountClient{constructor(e,r){var n;super(e,r);this.environmentId=e.credential_source.environment_id,this.regionUrl=e.credential_source.region_url,this.securityCredentialsUrl=e.credential_source.url,this.regionalCredVerificationUrl=e.credential_source.regional_cred_verification_url,this.imdsV2SessionTokenUrl=e.credential_source.imdsv2_session_token_url;let i=(n=this.environmentId)===null||n===void 0?void 0:n.match(/^(aws)(\d+)$/);if(!i||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(i[2],10)!==1)throw new Error(`aws version "${i[2]}" is not supported in the current build.`);this.awsRequestSigner=null,this.region=""}retrieveSubjectToken(){return P(this,null,function*(){if(!this.awsRequestSigner){let i={};this.imdsV2SessionTokenUrl&&(i["x-aws-ec2-metadata-token"]=yield this.getImdsV2SessionToken()),this.region=yield this.getAwsRegion(i),this.awsRequestSigner=new d8.AwsRequestSigner(()=>P(this,null,function*(){if(process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY)return{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN};let a=yield this.getAwsRoleName(i),s=yield this.getAwsSecurityCredentials(a,i);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,token:s.Token}}),this.region)}let e=yield this.awsRequestSigner.getRequestOptions({url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),r=[],n=Object.assign({"x-goog-cloud-target-resource":this.audience},e.headers);for(let i in n)r.push({key:i,value:n[i]});return encodeURIComponent(JSON.stringify({url:e.url,method:e.method,headers:r}))})}getImdsV2SessionToken(){return P(this,null,function*(){let e={url:this.imdsV2SessionTokenUrl,method:"PUT",responseType:"text",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return(yield this.transporter.request(e)).data})}getAwsRegion(e){return P(this,null,function*(){if(process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION)return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION;if(!this.regionUrl)throw new Error('Unable to determine AWS region due to missing "options.credential_source.region_url"');let r={url:this.regionUrl,method:"GET",responseType:"text",headers:e},n=yield this.transporter.request(r);return n.data.substr(0,n.data.length-1)})}getAwsRoleName(e){return P(this,null,function*(){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let r={url:this.securityCredentialsUrl,method:"GET",responseType:"text",headers:e};return(yield this.transporter.request(r)).data})}getAwsSecurityCredentials(e,r){return P(this,null,function*(){return(yield this.transporter.request({url:`${this.securityCredentialsUrl}/${e}`,responseType:"json",headers:r})).data})}};rh.AwsClient=gx});var gm=de(nh=>{"use strict";Object.defineProperty(nh,"__esModule",{value:!0});nh.ExternalAccountClient=void 0;var p8=Cl(),g8=hm(),m8=pm(),mx=class{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options) or via new GoogleAuth(options).getClient()")}static fromJSON(e,r){var n;return e&&e.type===p8.EXTERNAL_ACCOUNT_TYPE?((n=e.credential_source)===null||n===void 0?void 0:n.environment_id)?new m8.AwsClient(e,r):new g8.IdentityPoolClient(e,r):null}};nh.ExternalAccountClient=mx});var _x=de(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.GoogleAuth=xl.CLOUD_SDK_CLIENT_ID=void 0;var y8=require("child_process"),zu=require("fs"),mm=Hf(),v8=require("os"),ym=require("path"),_8=Xo(),w8=Cu(),E8=M0(),C8=U0(),b8=F0(),ro=nm(),yx=im(),vx=gm(),bl=Cl();xl.CLOUD_SDK_CLIENT_ID="764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com";var vm=class{constructor(e){this.checkIsGCE=void 0,this.jsonContent=null,this.cachedCredential=null,e=e||{},this._cachedProjectId=e.projectId||null,this.cachedCredential=e.authClient||null,this.keyFilename=e.keyFilename||e.keyFile,this.scopes=e.scopes,this.jsonContent=e.credentials||null,this.clientOptions=e.clientOptions}get isGCE(){return this.checkIsGCE}setGapicJWTValues(e){e.defaultServicePath=this.defaultServicePath,e.useJWTAccessWithScope=this.useJWTAccessWithScope,e.defaultScopes=this.defaultScopes}getProjectId(e){if(e)this.getProjectIdAsync().then(r=>e(null,r),e);else return this.getProjectIdAsync()}getProjectIdAsync(){return this._cachedProjectId?Promise.resolve(this._cachedProjectId):(this._getDefaultProjectIdPromise||(this._getDefaultProjectIdPromise=new Promise((e,r)=>P(this,null,function*(){try{let n=this.getProductionProjectId()||(yield this.getFileProjectId())||(yield this.getDefaultServiceProjectId())||(yield this.getGCEProjectId())||(yield this.getExternalAccountClientProjectId());if(this._cachedProjectId=n,!n)throw new Error(`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`);e(n)}catch(n){r(n)}}))),this._getDefaultProjectIdPromise)}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(e={},r){let n;if(typeof e=="function"?r=e:n=e,r)this.getApplicationDefaultAsync(n).then(i=>r(null,i.credential,i.projectId),r);else return this.getApplicationDefaultAsync(n)}getApplicationDefaultAsync(){return P(this,arguments,function*(e={}){if(this.cachedCredential)return{credential:this.cachedCredential,projectId:yield this.getProjectIdAsync()};let r,n;if(r=yield this._tryGetApplicationCredentialsFromEnvironmentVariable(e),r)return r instanceof ro.JWT?r.scopes=this.scopes:r instanceof bl.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),this.cachedCredential=r,n=yield this.getProjectId(),{credential:r,projectId:n};if(r=yield this._tryGetApplicationCredentialsFromWellKnownFile(e),r)return r instanceof ro.JWT?r.scopes=this.scopes:r instanceof bl.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),this.cachedCredential=r,n=yield this.getProjectId(),{credential:r,projectId:n};let i;try{i=yield this._checkIsGCE()}catch(a){throw a instanceof Error&&(a.message=`Unexpected error determining execution environment: ${a.message}`),a}if(!i)throw new Error("Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.");return e.scopes=this.getAnyScopes(),this.cachedCredential=new E8.Compute(e),n=yield this.getProjectId(),{projectId:n,credential:this.cachedCredential}})}_checkIsGCE(){return P(this,null,function*(){return this.checkIsGCE===void 0&&(this.checkIsGCE=yield mm.isAvailable()),this.checkIsGCE})}_tryGetApplicationCredentialsFromEnvironmentVariable(e){return P(this,null,function*(){let r=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!r||r.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(r,e)}catch(n){throw n instanceof Error&&(n.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${n.message}`),n}})}_tryGetApplicationCredentialsFromWellKnownFile(e){return P(this,null,function*(){let r=null;if(this._isWindows())r=process.env.APPDATA;else{let i=process.env.HOME;i&&(r=ym.join(i,".config"))}return r&&(r=ym.join(r,"gcloud","application_default_credentials.json"),zu.existsSync(r)||(r=null)),r?yield this._getApplicationCredentialsFromFilePath(r,e):null})}_getApplicationCredentialsFromFilePath(n){return P(this,arguments,function*(e,r={}){if(!e||e.length===0)throw new Error("The file path is invalid.");try{if(e=zu.realpathSync(e),!zu.lstatSync(e).isFile())throw new Error}catch(a){throw a instanceof Error&&(a.message=`The file at ${e} does not exist, or it is not a file. ${a.message}`),a}let i=zu.createReadStream(e);return this.fromStream(i,r)})}fromJSON(e,r){let n;if(!e)throw new Error("Must pass in a JSON object containing the Google auth settings.");return r=r||{},e.type==="authorized_user"?(n=new yx.UserRefreshClient(r),n.fromJSON(e)):e.type===bl.EXTERNAL_ACCOUNT_TYPE?(n=vx.ExternalAccountClient.fromJSON(e,r),n.scopes=this.getAnyScopes()):(r.scopes=this.scopes,n=new ro.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),n}_cacheClientFromJSON(e,r){let n;return r=r||{},e.type==="authorized_user"?(n=new yx.UserRefreshClient(r),n.fromJSON(e)):e.type===bl.EXTERNAL_ACCOUNT_TYPE?(n=vx.ExternalAccountClient.fromJSON(e,r),n.scopes=this.getAnyScopes()):(r.scopes=this.scopes,n=new ro.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),this.jsonContent=e,this.cachedCredential=n,n}fromStream(e,r={},n){let i={};if(typeof r=="function"?n=r:i=r,n)this.fromStreamAsync(e,i).then(a=>n(null,a),n);else return this.fromStreamAsync(e,i)}fromStreamAsync(e,r){return new Promise((n,i)=>{if(!e)throw new Error("Must pass in a stream containing the Google auth settings.");let a="";e.setEncoding("utf8").on("error",i).on("data",s=>a+=s).on("end",()=>{try{try{let s=JSON.parse(a),l=this._cacheClientFromJSON(s,r);return n(l)}catch(s){if(!this.keyFilename)throw s;let l=new ro.JWT(Gi(pn({},this.clientOptions),{keyFile:this.keyFilename}));return this.cachedCredential=l,this.setGapicJWTValues(l),n(l)}}catch(s){return i(s)}})})}fromAPIKey(e,r){r=r||{};let n=new ro.JWT(r);return n.fromAPIKey(e),n}_isWindows(){let e=v8.platform();return!!(e&&e.length>=3&&e.substring(0,3).toLowerCase()==="win")}getDefaultServiceProjectId(){return P(this,null,function*(){return new Promise(e=>{(0,y8.exec)("gcloud config config-helper --format json",(r,n)=>{if(!r&&n)try{let i=JSON.parse(n).configuration.properties.core.project;e(i);return}catch(i){}e(null)})})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}getFileProjectId(){return P(this,null,function*(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let r=yield this.getClient();if(r&&r.projectId)return r.projectId}let e=yield this._tryGetApplicationCredentialsFromEnvironmentVariable();return e?e.projectId:null})}getExternalAccountClientProjectId(){return P(this,null,function*(){return!this.jsonContent||this.jsonContent.type!==bl.EXTERNAL_ACCOUNT_TYPE?null:yield(yield this.getClient()).getProjectId()})}getGCEProjectId(){return P(this,null,function*(){try{return yield mm.project("project-id")}catch(e){return null}})}getCredentials(e){if(e)this.getCredentialsAsync().then(r=>e(null,r),e);else return this.getCredentialsAsync()}getCredentialsAsync(){return P(this,null,function*(){let e=yield this.getClient();if(e instanceof bl.BaseExternalAccountClient){let i=e.getServiceAccountEmail();if(i)return{client_email:i}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key};if(!(yield this._checkIsGCE()))throw new Error("Unknown error.");let n=yield mm.instance({property:"service-accounts/",params:{recursive:"true"}});if(!n||!n.default||!n.default.email)throw new Error("Failure from metadata server.");return{client_email:n.default.email}})}getClient(){return P(this,null,function*(){if(!this.cachedCredential)if(this.jsonContent)this._cacheClientFromJSON(this.jsonContent,this.clientOptions);else if(this.keyFilename){let e=ym.resolve(this.keyFilename),r=zu.createReadStream(e);yield this.fromStreamAsync(r,this.clientOptions)}else yield this.getApplicationDefaultAsync(this.clientOptions);return this.cachedCredential})}getIdTokenClient(e){return P(this,null,function*(){let r=yield this.getClient();if(!("fetchIdToken"in r))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new C8.IdTokenClient({targetAudience:e,idTokenProvider:r})})}getAccessToken(){return P(this,null,function*(){return(yield(yield this.getClient()).getAccessToken()).token})}getRequestHeaders(e){return P(this,null,function*(){return(yield this.getClient()).getRequestHeaders(e)})}authorizeRequest(e){return P(this,null,function*(){e=e||{};let r=e.url||e.uri,i=yield(yield this.getClient()).getRequestHeaders(r);return e.headers=Object.assign(e.headers||{},i),e})}request(e){return P(this,null,function*(){return(yield this.getClient()).request(e)})}getEnv(){return(0,b8.getEnv)()}sign(e){return P(this,null,function*(){let r=yield this.getClient(),n=(0,_8.createCrypto)();if(r instanceof ro.JWT&&r.key)return yield n.sign(r.key,e);if(!(yield this.getProjectId()))throw new Error("Cannot sign data without a project ID.");let a=yield this.getCredentials();if(!a.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(n,a.client_email,e)})}signBlob(e,r,n){return P(this,null,function*(){let i=`https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${r}:signBlob`;return(yield this.request({method:"POST",url:i,data:{payload:e.encodeBase64StringUtf8(n)}})).data.signedBlob})}};xl.GoogleAuth=vm;vm.DefaultTransporter=w8.DefaultTransporter});var Ex=de(ih=>{"use strict";Object.defineProperty(ih,"__esModule",{value:!0});ih.IAMAuth=void 0;var wx=class{constructor(e,r){this.selector=e,this.token=r,this.selector=e,this.token=r}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}};ih.IAMAuth=wx});var xx=de(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});ah.Impersonated=void 0;var Cx=Hs(),x8=zo(),bx=class extends Cx.OAuth2Client{constructor(e={}){var r,n,i,a,s,l;super(e);this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=(r=e.sourceClient)!==null&&r!==void 0?r:new Cx.OAuth2Client,this.targetPrincipal=(n=e.targetPrincipal)!==null&&n!==void 0?n:"",this.delegates=(i=e.delegates)!==null&&i!==void 0?i:[],this.targetScopes=(a=e.targetScopes)!==null&&a!==void 0?a:[],this.lifetime=(s=e.lifetime)!==null&&s!==void 0?s:3600,this.endpoint=(l=e.endpoint)!==null&&l!==void 0?l:"https://iamcredentials.googleapis.com"}refreshToken(e){return P(this,null,function*(){var r,n,i,a,s,l;try{yield this.sourceClient.getAccessToken();let u="projects/-/serviceAccounts/"+this.targetPrincipal,f=`${this.endpoint}/v1/${u}:generateAccessToken`,d={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},h=yield this.sourceClient.request({url:f,data:d,method:"POST"}),g=h.data;return this.credentials.access_token=g.accessToken,this.credentials.expiry_date=Date.parse(g.expireTime),{tokens:this.credentials,res:h}}catch(u){if(!(u instanceof Error))throw u;let f=0,d="";throw u instanceof x8.GaxiosError&&(f=(i=(n=(r=u==null?void 0:u.response)===null||r===void 0?void 0:r.data)===null||n===void 0?void 0:n.error)===null||i===void 0?void 0:i.status,d=(l=(s=(a=u==null?void 0:u.response)===null||a===void 0?void 0:a.data)===null||s===void 0?void 0:s.error)===null||l===void 0?void 0:l.message),f&&d?(u.message=`${f}: unable to impersonate: ${d}`,u):(u.message=`unable to impersonate: ${u}`,u)}})}};ah.Impersonated=bx});var Sx=de(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.DownscopedClient=Si.EXPIRATION_TIME_OFFSET=Si.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;var T8=require("stream"),S8=bu(),A8=am(),k8="urn:ietf:params:oauth:grant-type:token-exchange",I8="urn:ietf:params:oauth:token-type:access_token",N8="urn:ietf:params:oauth:token-type:access_token",R8="https://sts.googleapis.com/v1/token";Si.MAX_ACCESS_BOUNDARY_RULES_COUNT=10;Si.EXPIRATION_TIME_OFFSET=5*60*1e3;var Tx=class extends S8.AuthClient{constructor(e,r,n,i){super();if(this.authClient=e,this.credentialAccessBoundary=r,r.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(r.accessBoundary.accessBoundaryRules.length>Si.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${Si.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let a of r.accessBoundary.accessBoundaryRules)if(a.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new A8.StsCredentials(R8),this.cachedDownscopedAccessToken=null,typeof(n==null?void 0:n.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=Si.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=n.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(n==null?void 0:n.forceRefreshOnFailure),this.quotaProjectId=i}setCredentials(e){if(!e.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(e),this.cachedDownscopedAccessToken=e}getAccessToken(){return P(this,null,function*(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}})}getRequestHeaders(){return P(this,null,function*(){let r={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}requestAsync(e,r=!1){return P(this,null,function*(){let n;try{let i=yield this.getRequestHeaders();e.headers=e.headers||{},i&&i["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(e.headers.Authorization=i.Authorization),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=a.config.data instanceof T8.Readable;if(!r&&(s===401||s===403)&&!l&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(e,!0)}throw i}return n})}refreshAccessTokenAsync(){return P(this,null,function*(){var e;let r=(yield this.authClient.getAccessToken()).token,n={grantType:k8,requestedTokenType:I8,subjectToken:r,subjectTokenType:N8},i=yield this.stsCredential.exchangeToken(n,void 0,this.credentialAccessBoundary),a=((e=this.authClient.credentials)===null||e===void 0?void 0:e.expiry_date)||null,s=i.expires_in?new Date().getTime()+i.expires_in*1e3:a;return this.cachedDownscopedAccessToken={access_token:i.access_token,expiry_date:s,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken})}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}};Si.DownscopedClient=Tx});var Ix=de(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.GoogleAuth=lt.auth=lt.DefaultTransporter=lt.DownscopedClient=lt.BaseExternalAccountClient=lt.ExternalAccountClient=lt.IdentityPoolClient=lt.AwsClient=lt.UserRefreshClient=lt.LoginTicket=lt.OAuth2Client=lt.CodeChallengeMethod=lt.Impersonated=lt.JWT=lt.JWTAccess=lt.IdTokenClient=lt.IAMAuth=lt.GCPEnv=lt.Compute=lt.AuthClient=void 0;var Ax=_x();Object.defineProperty(lt,"GoogleAuth",{enumerable:!0,get:function(){return Ax.GoogleAuth}});var D8=bu();Object.defineProperty(lt,"AuthClient",{enumerable:!0,get:function(){return D8.AuthClient}});var B8=M0();Object.defineProperty(lt,"Compute",{enumerable:!0,get:function(){return B8.Compute}});var O8=F0();Object.defineProperty(lt,"GCPEnv",{enumerable:!0,get:function(){return O8.GCPEnv}});var L8=Ex();Object.defineProperty(lt,"IAMAuth",{enumerable:!0,get:function(){return L8.IAMAuth}});var P8=U0();Object.defineProperty(lt,"IdTokenClient",{enumerable:!0,get:function(){return P8.IdTokenClient}});var M8=rm();Object.defineProperty(lt,"JWTAccess",{enumerable:!0,get:function(){return M8.JWTAccess}});var U8=nm();Object.defineProperty(lt,"JWT",{enumerable:!0,get:function(){return U8.JWT}});var F8=xx();Object.defineProperty(lt,"Impersonated",{enumerable:!0,get:function(){return F8.Impersonated}});var kx=Hs();Object.defineProperty(lt,"CodeChallengeMethod",{enumerable:!0,get:function(){return kx.CodeChallengeMethod}});Object.defineProperty(lt,"OAuth2Client",{enumerable:!0,get:function(){return kx.OAuth2Client}});var q8=L0();Object.defineProperty(lt,"LoginTicket",{enumerable:!0,get:function(){return q8.LoginTicket}});var G8=im();Object.defineProperty(lt,"UserRefreshClient",{enumerable:!0,get:function(){return G8.UserRefreshClient}});var V8=pm();Object.defineProperty(lt,"AwsClient",{enumerable:!0,get:function(){return V8.AwsClient}});var H8=hm();Object.defineProperty(lt,"IdentityPoolClient",{enumerable:!0,get:function(){return H8.IdentityPoolClient}});var K8=gm();Object.defineProperty(lt,"ExternalAccountClient",{enumerable:!0,get:function(){return K8.ExternalAccountClient}});var j8=Cl();Object.defineProperty(lt,"BaseExternalAccountClient",{enumerable:!0,get:function(){return j8.BaseExternalAccountClient}});var Y8=Sx();Object.defineProperty(lt,"DownscopedClient",{enumerable:!0,get:function(){return Y8.DownscopedClient}});var W8=Cu();Object.defineProperty(lt,"DefaultTransporter",{enumerable:!0,get:function(){return W8.DefaultTransporter}});var z8=new Ax.GoogleAuth;lt.auth=z8});var Rx=de((nH,Nx)=>{Nx.exports=Q8;function Q8(t){var e={};t.on("connection",function(r){var n=r.remoteAddress+":"+r.remotePort;e[n]=r,r.on("close",function(){delete e[n]})}),t.destroy=function(r){t.close(r);for(var n in e)e[n].destroy()}}});var hh=de(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});var yr=require("obsidian"),Mm="YYYY-MM-DD",Um="gggg-[W]ww",uT="YYYY-MM",cT="YYYY-[Q]Q",fT="YYYY";function ac(t){var r,n;let e=window.app.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r[t])==null?void 0:n.enabled)}function sc(){var t,e,r,n;try{let{internalPlugins:i,plugins:a}=window.app;if(ac("daily")){let{format:f,folder:d,template:h}=((e=(t=a.getPlugin("periodic-notes"))==null?void 0:t.settings)==null?void 0:e.daily)||{};return{format:f||Mm,folder:(d==null?void 0:d.trim())||"",template:(h==null?void 0:h.trim())||""}}let{folder:s,format:l,template:u}=((n=(r=i.getPluginById("daily-notes"))==null?void 0:r.instance)==null?void 0:n.options)||{};return{format:l||Mm,folder:(s==null?void 0:s.trim())||"",template:(u==null?void 0:u.trim())||""}}catch(i){console.info("No custom daily note settings found!",i)}}function oc(){var t,e,r,n,i,a,s;try{let l=window.app.plugins,u=(t=l.getPlugin("calendar"))==null?void 0:t.options,f=(r=(e=l.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.weekly;if(ac("weekly"))return{format:f.format||Um,folder:((n=f.folder)==null?void 0:n.trim())||"",template:((i=f.template)==null?void 0:i.trim())||""};let d=u||{};return{format:d.weeklyNoteFormat||Um,folder:((a=d.weeklyNoteFolder)==null?void 0:a.trim())||"",template:((s=d.weeklyNoteTemplate)==null?void 0:s.trim())||""}}catch(l){console.info("No custom weekly note settings found!",l)}}function lc(){var e,r,n,i;let t=window.app.plugins;try{let a=ac("monthly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.monthly)||{};return{format:a.format||uT,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom monthly note settings found!",a)}}function uc(){var e,r,n,i;let t=window.app.plugins;try{let a=ac("quarterly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.quarterly)||{};return{format:a.format||cT,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom quarterly note settings found!",a)}}function cc(){var e,r,n,i;let t=window.app.plugins;try{let a=ac("yearly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.yearly)||{};return{format:a.format||fT,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom yearly note settings found!",a)}}function dT(...t){let e=[];for(let n=0,i=t.length;n<i;n++)e=e.concat(t[n].split("/"));let r=[];for(let n=0,i=e.length;n<i;n++){let a=e[n];!a||a==="."||r.push(a)}return e[0]===""&&r.unshift(""),r.join("/")}function BF(t){let e=t.substring(t.lastIndexOf("/")+1);return e.lastIndexOf(".")!=-1&&(e=e.substring(0,e.lastIndexOf("."))),e}function OF(t){return P(this,null,function*(){let e=t.replace(/\\/g,"/").split("/");if(e.pop(),e.length){let r=dT(...e);window.app.vault.getAbstractFileByPath(r)||(yield window.app.vault.createFolder(r))}})}function fc(t,e){return P(this,null,function*(){e.endsWith(".md")||(e+=".md");let r=yr.normalizePath(dT(t,e));return yield OF(r),r})}function Nl(t){return P(this,null,function*(){let{metadataCache:e,vault:r}=window.app,n=yr.normalizePath(t);if(n==="/")return Promise.resolve(["",null]);try{let i=e.getFirstLinkpathDest(n,""),a=yield r.cachedRead(i),s=window.app.foldManager.load(i);return[a,s]}catch(i){return console.error(`Failed to read the daily note template '${n}'`,i),new yr.Notice("Failed to read the daily note template"),["",null]}})}function Ri(t,e="day"){let r=t.clone().startOf(e).format();return`${e}-${r}`}function hT(t){return t.replace(/\[[^\]]*\]/g,"")}function LF(t,e){if(e==="week"){let r=hT(t);return/w{1,2}/i.test(r)&&(/M{1,4}/.test(r)||/D{1,4}/.test(r))}return!1}function Rl(t,e){return pT(t.basename,e)}function PF(t,e){return pT(BF(t),e)}function pT(t,e){let n={day:sc,week:oc,month:lc,quarter:uc,year:cc}[e]().format.split("/").pop(),i=window.moment(t,n,!0);if(!i.isValid())return null;if(LF(n,e)&&e==="week"){let a=hT(n);if(/w{1,2}/i.test(a))return window.moment(t,n.replace(/M{1,4}/g,"").replace(/D{1,4}/g,""),!1)}return i}var gT=class extends Error{};function mT(t){return P(this,null,function*(){let e=window.app,{vault:r}=e,n=window.moment,{template:i,format:a,folder:s}=sc(),[l,u]=yield Nl(i),f=t.format(a),d=yield fc(s,f);try{let h=yield r.create(d,l.replace(/{{\s*date\s*}}/gi,f).replace(/{{\s*time\s*}}/gi,n().format("HH:mm")).replace(/{{\s*title\s*}}/gi,f).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(g,m,y,_,w,E)=>{let S=n(),T=t.clone().set({hour:S.get("hour"),minute:S.get("minute"),second:S.get("second")});return y&&T.add(parseInt(_,10),w),E?T.format(E.substring(1).trim()):T.format(a)}).replace(/{{\s*yesterday\s*}}/gi,t.clone().subtract(1,"day").format(a)).replace(/{{\s*tomorrow\s*}}/gi,t.clone().add(1,"d").format(a)));return e.foldManager.save(h,u),h}catch(h){console.error(`Failed to create file: '${d}'`,h),new yr.Notice("Unable to create new file.")}})}function MF(t,e){var r;return(r=e[Ri(t,"day")])!=null?r:null}function UF(){let{vault:t}=window.app,{folder:e}=sc(),r=t.getAbstractFileByPath(yr.normalizePath(e));if(!r)throw new gT("Failed to find daily notes folder");let n={};return yr.Vault.recurseChildren(r,i=>{if(i instanceof yr.TFile){let a=Rl(i,"day");if(a){let s=Ri(a,"day");n[s]=i}}}),n}var yT=class extends Error{};function FF(){let{moment:t}=window,e=t.localeData()._week.dow,r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(;e;)r.push(r.shift()),e--;return r}function qF(t){return FF().indexOf(t.toLowerCase())}function vT(t){return P(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=oc(),[a,s]=yield Nl(r),l=t.format(n),u=yield fc(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,m,y,_)=>{let w=window.moment(),E=t.clone().set({hour:w.get("hour"),minute:w.get("minute"),second:w.get("second")});return g&&E.add(parseInt(m,10),y),_?E.format(_.substring(1).trim()):E.format(n)}).replace(/{{\s*title\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi,(d,h,g)=>{let m=qF(h);return t.weekday(m).format(g.trim())}));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new yr.Notice("Unable to create new file.")}})}function GF(t,e){var r;return(r=e[Ri(t,"week")])!=null?r:null}function VF(){let t={};if(!bT())return t;let{vault:e}=window.app,{folder:r}=oc(),n=e.getAbstractFileByPath(yr.normalizePath(r));if(!n)throw new yT("Failed to find weekly notes folder");return yr.Vault.recurseChildren(n,i=>{if(i instanceof yr.TFile){let a=Rl(i,"week");if(a){let s=Ri(a,"week");t[s]=i}}}),t}var _T=class extends Error{};function wT(t){return P(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=lc(),[a,s]=yield Nl(r),l=t.format(n),u=yield fc(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,m,y,_)=>{let w=window.moment(),E=t.clone().set({hour:w.get("hour"),minute:w.get("minute"),second:w.get("second")});return g&&E.add(parseInt(m,10),y),_?E.format(_.substring(1).trim()):E.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new yr.Notice("Unable to create new file.")}})}function HF(t,e){var r;return(r=e[Ri(t,"month")])!=null?r:null}function KF(){let t={};if(!xT())return t;let{vault:e}=window.app,{folder:r}=lc(),n=e.getAbstractFileByPath(yr.normalizePath(r));if(!n)throw new _T("Failed to find monthly notes folder");return yr.Vault.recurseChildren(n,i=>{if(i instanceof yr.TFile){let a=Rl(i,"month");if(a){let s=Ri(a,"month");t[s]=i}}}),t}var ET=class extends Error{};function jF(t){return P(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=uc(),[a,s]=yield Nl(r),l=t.format(n),u=yield fc(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,m,y,_)=>{let w=window.moment(),E=t.clone().set({hour:w.get("hour"),minute:w.get("minute"),second:w.get("second")});return g&&E.add(parseInt(m,10),y),_?E.format(_.substring(1).trim()):E.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new yr.Notice("Unable to create new file.")}})}function YF(t,e){var r;return(r=e[Ri(t,"quarter")])!=null?r:null}function WF(){let t={};if(!TT())return t;let{vault:e}=window.app,{folder:r}=uc(),n=e.getAbstractFileByPath(yr.normalizePath(r));if(!n)throw new ET("Failed to find quarterly notes folder");return yr.Vault.recurseChildren(n,i=>{if(i instanceof yr.TFile){let a=Rl(i,"quarter");if(a){let s=Ri(a,"quarter");t[s]=i}}}),t}var CT=class extends Error{};function zF(t){return P(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=cc(),[a,s]=yield Nl(r),l=t.format(n),u=yield fc(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,m,y,_)=>{let w=window.moment(),E=t.clone().set({hour:w.get("hour"),minute:w.get("minute"),second:w.get("second")});return g&&E.add(parseInt(m,10),y),_?E.format(_.substring(1).trim()):E.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new yr.Notice("Unable to create new file.")}})}function QF(t,e){var r;return(r=e[Ri(t,"year")])!=null?r:null}function XF(){let t={};if(!ST())return t;let{vault:e}=window.app,{folder:r}=cc(),n=e.getAbstractFileByPath(yr.normalizePath(r));if(!n)throw new CT("Failed to find yearly notes folder");return yr.Vault.recurseChildren(n,i=>{if(i instanceof yr.TFile){let a=Rl(i,"year");if(a){let s=Ri(a,"year");t[s]=i}}}),t}function JF(){var n,i;let{app:t}=window,e=t.internalPlugins.plugins["daily-notes"];if(e&&e.enabled)return!0;let r=t.plugins.getPlugin("periodic-notes");return r&&((i=(n=r.settings)==null?void 0:n.daily)==null?void 0:i.enabled)}function bT(){var r,n;let{app:t}=window;if(t.plugins.getPlugin("calendar"))return!0;let e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.weekly)==null?void 0:n.enabled)}function xT(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.monthly)==null?void 0:n.enabled)}function TT(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.quarterly)==null?void 0:n.enabled)}function ST(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.yearly)==null?void 0:n.enabled)}function ZF(t){return{day:sc,week:oc,month:lc,quarter:uc,year:cc}[t]()}function $F(t,e){return{day:mT,month:wT,week:vT}[t](e)}Et.DEFAULT_DAILY_NOTE_FORMAT=Mm;Et.DEFAULT_MONTHLY_NOTE_FORMAT=uT;Et.DEFAULT_QUARTERLY_NOTE_FORMAT=cT;Et.DEFAULT_WEEKLY_NOTE_FORMAT=Um;Et.DEFAULT_YEARLY_NOTE_FORMAT=fT;Et.appHasDailyNotesPluginLoaded=JF;Et.appHasMonthlyNotesPluginLoaded=xT;Et.appHasQuarterlyNotesPluginLoaded=TT;Et.appHasWeeklyNotesPluginLoaded=bT;Et.appHasYearlyNotesPluginLoaded=ST;Et.createDailyNote=mT;Et.createMonthlyNote=wT;Et.createPeriodicNote=$F;Et.createQuarterlyNote=jF;Et.createWeeklyNote=vT;Et.createYearlyNote=zF;Et.getAllDailyNotes=UF;Et.getAllMonthlyNotes=KF;Et.getAllQuarterlyNotes=WF;Et.getAllWeeklyNotes=VF;Et.getAllYearlyNotes=XF;Et.getDailyNote=MF;Et.getDailyNoteSettings=sc;Et.getDateFromFile=Rl;Et.getDateFromPath=PF;Et.getDateUID=Ri;Et.getMonthlyNote=HF;Et.getMonthlyNoteSettings=lc;Et.getPeriodicNoteSettings=ZF;Et.getQuarterlyNote=YF;Et.getQuarterlyNoteSettings=uc;Et.getTemplateInfo=Nl;Et.getWeeklyNote=GF;Et.getWeeklyNoteSettings=oc;Et.getYearlyNote=QF;Et.getYearlyNoteSettings=cc});var La=de((Dl,dc)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",a="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",f=1,d=2,h=4,g=1,m=2,y=1,_=2,w=4,E=8,S=16,T=32,L=64,I=128,B=256,z=512,F=30,G="...",te=800,ae=16,we=1,Se=2,Qe=3,Re=1/0,me=9007199254740991,re=17976931348623157e292,Fe=0/0,Ze=4294967295,ct=Ze-1,Je=Ze>>>1,ft=[["ary",I],["bind",y],["bindKey",_],["curry",E],["curryRight",S],["flip",z],["partial",T],["partialRight",L],["rearg",B]],le="[object Arguments]",Rt="[object Array]",Dt="[object AsyncFunction]",rt="[object Boolean]",nt="[object Date]",dt="[object DOMException]",N="[object Error]",D="[object Function]",O="[object GeneratorFunction]",j="[object Map]",H="[object Number]",X="[object Null]",Z="[object Object]",Y="[object Promise]",J="[object Proxy]",ne="[object RegExp]",$="[object Set]",he="[object String]",Oe="[object Symbol]",Ue="[object Undefined]",ht="[object WeakMap]",Qt="[object WeakSet]",Xt="[object ArrayBuffer]",it="[object DataView]",Bt="[object Float32Array]",pr="[object Float64Array]",Va="[object Int8Array]",As="[object Int16Array]",ks="[object Int32Array]",bn="[object Uint8Array]",ha="[object Uint8ClampedArray]",nn="[object Uint16Array]",Rr="[object Uint32Array]",cr=/\b__p \+= '';/g,mk=/\b(__p \+=) '' \+/g,yk=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Iy=/&(?:amp|lt|gt|quot|#39);/g,Ny=/[&<>"']/g,vk=RegExp(Iy.source),_k=RegExp(Ny.source),wk=/<%-([\s\S]+?)%>/g,Ek=/<%([\s\S]+?)%>/g,Ry=/<%=([\s\S]+?)%>/g,Ck=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bk=/^\w*$/,xk=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rp=/[\\^$.*+?()[\]{}|]/g,Tk=RegExp(rp.source),np=/^\s+/,Sk=/\s/,Ak=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,kk=/\{\n\/\* \[wrapped with (.+)\] \*/,Ik=/,? & /,Nk=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rk=/[()=,{}\[\]\/\s]/,Dk=/\\(\\)?/g,Bk=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dy=/\w*$/,Ok=/^[-+]0x[0-9a-f]+$/i,Lk=/^0b[01]+$/i,Pk=/^\[object .+?Constructor\]$/,Mk=/^0o[0-7]+$/i,Uk=/^(?:0|[1-9]\d*)$/,Fk=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Uc=/($^)/,qk=/['\n\r\u2028\u2029\\]/g,Fc="\\ud800-\\udfff",Gk="\\u0300-\\u036f",Vk="\\ufe20-\\ufe2f",Hk="\\u20d0-\\u20ff",By=Gk+Vk+Hk,Oy="\\u2700-\\u27bf",Ly="a-z\\xdf-\\xf6\\xf8-\\xff",Kk="\\xac\\xb1\\xd7\\xf7",jk="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Yk="\\u2000-\\u206f",Wk=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Py="A-Z\\xc0-\\xd6\\xd8-\\xde",My="\\ufe0e\\ufe0f",Uy=Kk+jk+Yk+Wk,ip="['\u2019]",zk="["+Fc+"]",Fy="["+Uy+"]",qc="["+By+"]",qy="\\d+",Qk="["+Oy+"]",Gy="["+Ly+"]",Vy="[^"+Fc+Uy+qy+Oy+Ly+Py+"]",ap="\\ud83c[\\udffb-\\udfff]",Xk="(?:"+qc+"|"+ap+")",Hy="[^"+Fc+"]",sp="(?:\\ud83c[\\udde6-\\uddff]){2}",op="[\\ud800-\\udbff][\\udc00-\\udfff]",Io="["+Py+"]",Ky="\\u200d",jy="(?:"+Gy+"|"+Vy+")",Jk="(?:"+Io+"|"+Vy+")",Yy="(?:"+ip+"(?:d|ll|m|re|s|t|ve))?",Wy="(?:"+ip+"(?:D|LL|M|RE|S|T|VE))?",zy=Xk+"?",Qy="["+My+"]?",Zk="(?:"+Ky+"(?:"+[Hy,sp,op].join("|")+")"+Qy+zy+")*",$k="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",eI="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Xy=Qy+zy+Zk,tI="(?:"+[Qk,sp,op].join("|")+")"+Xy,rI="(?:"+[Hy+qc+"?",qc,sp,op,zk].join("|")+")",nI=RegExp(ip,"g"),iI=RegExp(qc,"g"),lp=RegExp(ap+"(?="+ap+")|"+rI+Xy,"g"),aI=RegExp([Io+"?"+Gy+"+"+Yy+"(?="+[Fy,Io,"$"].join("|")+")",Jk+"+"+Wy+"(?="+[Fy,Io+jy,"$"].join("|")+")",Io+"?"+jy+"+"+Yy,Io+"+"+Wy,eI,$k,qy,tI].join("|"),"g"),sI=RegExp("["+Ky+Fc+By+My+"]"),oI=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,lI=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],uI=-1,or={};or[Bt]=or[pr]=or[Va]=or[As]=or[ks]=or[bn]=or[ha]=or[nn]=or[Rr]=!0,or[le]=or[Rt]=or[Xt]=or[rt]=or[it]=or[nt]=or[N]=or[D]=or[j]=or[H]=or[Z]=or[ne]=or[$]=or[he]=or[ht]=!1;var rr={};rr[le]=rr[Rt]=rr[Xt]=rr[it]=rr[rt]=rr[nt]=rr[Bt]=rr[pr]=rr[Va]=rr[As]=rr[ks]=rr[j]=rr[H]=rr[Z]=rr[ne]=rr[$]=rr[he]=rr[Oe]=rr[bn]=rr[ha]=rr[nn]=rr[Rr]=!0,rr[N]=rr[D]=rr[ht]=!1;var cI={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},fI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dI={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},hI={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},pI=parseFloat,gI=parseInt,Jy=typeof global=="object"&&global&&global.Object===Object&&global,mI=typeof self=="object"&&self&&self.Object===Object&&self,Ur=Jy||mI||Function("return this")(),up=typeof Dl=="object"&&Dl&&!Dl.nodeType&&Dl,Is=up&&typeof dc=="object"&&dc&&!dc.nodeType&&dc,Zy=Is&&Is.exports===up,cp=Zy&&Jy.process,Yn=function(){try{var W=Is&&Is.require&&Is.require("util").types;return W||cp&&cp.binding&&cp.binding("util")}catch(fe){}}(),$y=Yn&&Yn.isArrayBuffer,ev=Yn&&Yn.isDate,tv=Yn&&Yn.isMap,rv=Yn&&Yn.isRegExp,nv=Yn&&Yn.isSet,iv=Yn&&Yn.isTypedArray;function On(W,fe,se){switch(se.length){case 0:return W.call(fe);case 1:return W.call(fe,se[0]);case 2:return W.call(fe,se[0],se[1]);case 3:return W.call(fe,se[0],se[1],se[2])}return W.apply(fe,se)}function yI(W,fe,se,De){for(var et=-1,Ht=W==null?0:W.length;++et<Ht;){var Dr=W[et];fe(De,Dr,se(Dr),W)}return De}function Wn(W,fe){for(var se=-1,De=W==null?0:W.length;++se<De&&fe(W[se],se,W)!==!1;);return W}function vI(W,fe){for(var se=W==null?0:W.length;se--&&fe(W[se],se,W)!==!1;);return W}function av(W,fe){for(var se=-1,De=W==null?0:W.length;++se<De;)if(!fe(W[se],se,W))return!1;return!0}function Ha(W,fe){for(var se=-1,De=W==null?0:W.length,et=0,Ht=[];++se<De;){var Dr=W[se];fe(Dr,se,W)&&(Ht[et++]=Dr)}return Ht}function Gc(W,fe){var se=W==null?0:W.length;return!!se&&No(W,fe,0)>-1}function fp(W,fe,se){for(var De=-1,et=W==null?0:W.length;++De<et;)if(se(fe,W[De]))return!0;return!1}function fr(W,fe){for(var se=-1,De=W==null?0:W.length,et=Array(De);++se<De;)et[se]=fe(W[se],se,W);return et}function Ka(W,fe){for(var se=-1,De=fe.length,et=W.length;++se<De;)W[et+se]=fe[se];return W}function dp(W,fe,se,De){var et=-1,Ht=W==null?0:W.length;for(De&&Ht&&(se=W[++et]);++et<Ht;)se=fe(se,W[et],et,W);return se}function _I(W,fe,se,De){var et=W==null?0:W.length;for(De&&et&&(se=W[--et]);et--;)se=fe(se,W[et],et,W);return se}function hp(W,fe){for(var se=-1,De=W==null?0:W.length;++se<De;)if(fe(W[se],se,W))return!0;return!1}var wI=pp("length");function EI(W){return W.split("")}function CI(W){return W.match(Nk)||[]}function sv(W,fe,se){var De;return se(W,function(et,Ht,Dr){if(fe(et,Ht,Dr))return De=Ht,!1}),De}function Vc(W,fe,se,De){for(var et=W.length,Ht=se+(De?1:-1);De?Ht--:++Ht<et;)if(fe(W[Ht],Ht,W))return Ht;return-1}function No(W,fe,se){return fe===fe?OI(W,fe,se):Vc(W,ov,se)}function bI(W,fe,se,De){for(var et=se-1,Ht=W.length;++et<Ht;)if(De(W[et],fe))return et;return-1}function ov(W){return W!==W}function lv(W,fe){var se=W==null?0:W.length;return se?mp(W,fe)/se:Fe}function pp(W){return function(fe){return fe==null?t:fe[W]}}function gp(W){return function(fe){return W==null?t:W[fe]}}function uv(W,fe,se,De,et){return et(W,function(Ht,Dr,Zt){se=De?(De=!1,Ht):fe(se,Ht,Dr,Zt)}),se}function xI(W,fe){var se=W.length;for(W.sort(fe);se--;)W[se]=W[se].value;return W}function mp(W,fe){for(var se,De=-1,et=W.length;++De<et;){var Ht=fe(W[De]);Ht!==t&&(se=se===t?Ht:se+Ht)}return se}function yp(W,fe){for(var se=-1,De=Array(W);++se<W;)De[se]=fe(se);return De}function TI(W,fe){return fr(fe,function(se){return[se,W[se]]})}function cv(W){return W&&W.slice(0,pv(W)+1).replace(np,"")}function Ln(W){return function(fe){return W(fe)}}function vp(W,fe){return fr(fe,function(se){return W[se]})}function eu(W,fe){return W.has(fe)}function fv(W,fe){for(var se=-1,De=W.length;++se<De&&No(fe,W[se],0)>-1;);return se}function dv(W,fe){for(var se=W.length;se--&&No(fe,W[se],0)>-1;);return se}function SI(W,fe){for(var se=W.length,De=0;se--;)W[se]===fe&&++De;return De}var AI=gp(cI),kI=gp(fI);function II(W){return"\\"+hI[W]}function NI(W,fe){return W==null?t:W[fe]}function Ro(W){return sI.test(W)}function RI(W){return oI.test(W)}function DI(W){for(var fe,se=[];!(fe=W.next()).done;)se.push(fe.value);return se}function _p(W){var fe=-1,se=Array(W.size);return W.forEach(function(De,et){se[++fe]=[et,De]}),se}function hv(W,fe){return function(se){return W(fe(se))}}function ja(W,fe){for(var se=-1,De=W.length,et=0,Ht=[];++se<De;){var Dr=W[se];(Dr===fe||Dr===u)&&(W[se]=u,Ht[et++]=se)}return Ht}function Hc(W){var fe=-1,se=Array(W.size);return W.forEach(function(De){se[++fe]=De}),se}function BI(W){var fe=-1,se=Array(W.size);return W.forEach(function(De){se[++fe]=[De,De]}),se}function OI(W,fe,se){for(var De=se-1,et=W.length;++De<et;)if(W[De]===fe)return De;return-1}function LI(W,fe,se){for(var De=se+1;De--;)if(W[De]===fe)return De;return De}function Do(W){return Ro(W)?MI(W):wI(W)}function mi(W){return Ro(W)?UI(W):EI(W)}function pv(W){for(var fe=W.length;fe--&&Sk.test(W.charAt(fe)););return fe}var PI=gp(dI);function MI(W){for(var fe=lp.lastIndex=0;lp.test(W);)++fe;return fe}function UI(W){return W.match(lp)||[]}function FI(W){return W.match(aI)||[]}var qI=function W(fe){fe=fe==null?Ur:Ya.defaults(Ur.Object(),fe,Ya.pick(Ur,lI));var se=fe.Array,De=fe.Date,et=fe.Error,Ht=fe.Function,Dr=fe.Math,Zt=fe.Object,wp=fe.RegExp,GI=fe.String,zn=fe.TypeError,Kc=se.prototype,VI=Ht.prototype,Bo=Zt.prototype,jc=fe["__core-js_shared__"],Yc=VI.toString,zt=Bo.hasOwnProperty,HI=0,gv=function(){var o=/[^.]+$/.exec(jc&&jc.keys&&jc.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Wc=Bo.toString,KI=Yc.call(Zt),jI=Ur._,YI=wp("^"+Yc.call(zt).replace(rp,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zc=Zy?fe.Buffer:t,Wa=fe.Symbol,Qc=fe.Uint8Array,mv=zc?zc.allocUnsafe:t,Xc=hv(Zt.getPrototypeOf,Zt),yv=Zt.create,vv=Bo.propertyIsEnumerable,Jc=Kc.splice,_v=Wa?Wa.isConcatSpreadable:t,tu=Wa?Wa.iterator:t,Ns=Wa?Wa.toStringTag:t,Zc=function(){try{var o=Ls(Zt,"defineProperty");return o({},"",{}),o}catch(c){}}(),WI=fe.clearTimeout!==Ur.clearTimeout&&fe.clearTimeout,zI=De&&De.now!==Ur.Date.now&&De.now,QI=fe.setTimeout!==Ur.setTimeout&&fe.setTimeout,$c=Dr.ceil,ef=Dr.floor,Ep=Zt.getOwnPropertySymbols,XI=zc?zc.isBuffer:t,wv=fe.isFinite,JI=Kc.join,ZI=hv(Zt.keys,Zt),Br=Dr.max,an=Dr.min,$I=De.now,eN=fe.parseInt,Ev=Dr.random,tN=Kc.reverse,Cp=Ls(fe,"DataView"),ru=Ls(fe,"Map"),bp=Ls(fe,"Promise"),Oo=Ls(fe,"Set"),nu=Ls(fe,"WeakMap"),iu=Ls(Zt,"create"),tf=nu&&new nu,Lo={},rN=Ps(Cp),nN=Ps(ru),iN=Ps(bp),aN=Ps(Oo),sN=Ps(nu),rf=Wa?Wa.prototype:t,au=rf?rf.valueOf:t,Cv=rf?rf.toString:t;function k(o){if(_r(o)&&!at(o)&&!(o instanceof kt)){if(o instanceof Qn)return o;if(zt.call(o,"__wrapped__"))return b1(o)}return new Qn(o)}var Po=function(){function o(){}return function(c){if(!gr(c))return{};if(yv)return yv(c);o.prototype=c;var p=new o;return o.prototype=t,p}}();function nf(){}function Qn(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}k.templateSettings={escape:wk,evaluate:Ek,interpolate:Ry,variable:"",imports:{_:k}},k.prototype=nf.prototype,k.prototype.constructor=k,Qn.prototype=Po(nf.prototype),Qn.prototype.constructor=Qn;function kt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ze,this.__views__=[]}function oN(){var o=new kt(this.__wrapped__);return o.__actions__=xn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=xn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=xn(this.__views__),o}function lN(){if(this.__filtered__){var o=new kt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function uN(){var o=this.__wrapped__.value(),c=this.__dir__,p=at(o),v=c<0,C=p?o.length:0,R=ER(0,C,this.__views__),M=R.start,q=R.end,Q=q-M,pe=v?q:M-1,ge=this.__iteratees__,_e=ge.length,Ae=0,Pe=an(Q,this.__takeCount__);if(!p||!v&&C==Q&&Pe==Q)return Yv(o,this.__actions__);var je=[];e:for(;Q--&&Ae<Pe;){pe+=c;for(var mt=-1,Ye=o[pe];++mt<_e;){var bt=ge[mt],Ot=bt.iteratee,Un=bt.type,hn=Ot(Ye);if(Un==Se)Ye=hn;else if(!hn){if(Un==we)continue e;break e}}je[Ae++]=Ye}return je}kt.prototype=Po(nf.prototype),kt.prototype.constructor=kt;function Rs(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function cN(){this.__data__=iu?iu(null):{},this.size=0}function fN(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function dN(o){var c=this.__data__;if(iu){var p=c[o];return p===s?t:p}return zt.call(c,o)?c[o]:t}function hN(o){var c=this.__data__;return iu?c[o]!==t:zt.call(c,o)}function pN(o,c){var p=this.__data__;return this.size+=this.has(o)?0:1,p[o]=iu&&c===t?s:c,this}Rs.prototype.clear=cN,Rs.prototype.delete=fN,Rs.prototype.get=dN,Rs.prototype.has=hN,Rs.prototype.set=pN;function pa(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function gN(){this.__data__=[],this.size=0}function mN(o){var c=this.__data__,p=af(c,o);if(p<0)return!1;var v=c.length-1;return p==v?c.pop():Jc.call(c,p,1),--this.size,!0}function yN(o){var c=this.__data__,p=af(c,o);return p<0?t:c[p][1]}function vN(o){return af(this.__data__,o)>-1}function _N(o,c){var p=this.__data__,v=af(p,o);return v<0?(++this.size,p.push([o,c])):p[v][1]=c,this}pa.prototype.clear=gN,pa.prototype.delete=mN,pa.prototype.get=yN,pa.prototype.has=vN,pa.prototype.set=_N;function ga(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function wN(){this.size=0,this.__data__={hash:new Rs,map:new(ru||pa),string:new Rs}}function EN(o){var c=yf(this,o).delete(o);return this.size-=c?1:0,c}function CN(o){return yf(this,o).get(o)}function bN(o){return yf(this,o).has(o)}function xN(o,c){var p=yf(this,o),v=p.size;return p.set(o,c),this.size+=p.size==v?0:1,this}ga.prototype.clear=wN,ga.prototype.delete=EN,ga.prototype.get=CN,ga.prototype.has=bN,ga.prototype.set=xN;function Ds(o){var c=-1,p=o==null?0:o.length;for(this.__data__=new ga;++c<p;)this.add(o[c])}function TN(o){return this.__data__.set(o,s),this}function SN(o){return this.__data__.has(o)}Ds.prototype.add=Ds.prototype.push=TN,Ds.prototype.has=SN;function yi(o){var c=this.__data__=new pa(o);this.size=c.size}function AN(){this.__data__=new pa,this.size=0}function kN(o){var c=this.__data__,p=c.delete(o);return this.size=c.size,p}function IN(o){return this.__data__.get(o)}function NN(o){return this.__data__.has(o)}function RN(o,c){var p=this.__data__;if(p instanceof pa){var v=p.__data__;if(!ru||v.length<r-1)return v.push([o,c]),this.size=++p.size,this;p=this.__data__=new ga(v)}return p.set(o,c),this.size=p.size,this}yi.prototype.clear=AN,yi.prototype.delete=kN,yi.prototype.get=IN,yi.prototype.has=NN,yi.prototype.set=RN;function bv(o,c){var p=at(o),v=!p&&Ms(o),C=!p&&!v&&Za(o),R=!p&&!v&&!C&&qo(o),M=p||v||C||R,q=M?yp(o.length,GI):[],Q=q.length;for(var pe in o)(c||zt.call(o,pe))&&!(M&&(pe=="length"||C&&(pe=="offset"||pe=="parent")||R&&(pe=="buffer"||pe=="byteLength"||pe=="byteOffset")||_a(pe,Q)))&&q.push(pe);return q}function xv(o){var c=o.length;return c?o[Op(0,c-1)]:t}function DN(o,c){return vf(xn(o),Bs(c,0,o.length))}function BN(o){return vf(xn(o))}function xp(o,c,p){(p!==t&&!vi(o[c],p)||p===t&&!(c in o))&&ma(o,c,p)}function su(o,c,p){var v=o[c];(!(zt.call(o,c)&&vi(v,p))||p===t&&!(c in o))&&ma(o,c,p)}function af(o,c){for(var p=o.length;p--;)if(vi(o[p][0],c))return p;return-1}function ON(o,c,p,v){return za(o,function(C,R,M){c(v,C,p(C),M)}),v}function Tv(o,c){return o&&Fi(c,Fr(c),o)}function LN(o,c){return o&&Fi(c,Sn(c),o)}function ma(o,c,p){c=="__proto__"&&Zc?Zc(o,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):o[c]=p}function Tp(o,c){for(var p=-1,v=c.length,C=se(v),R=o==null;++p<v;)C[p]=R?t:a0(o,c[p]);return C}function Bs(o,c,p){return o===o&&(p!==t&&(o=o<=p?o:p),c!==t&&(o=o>=c?o:c)),o}function Xn(o,c,p,v,C,R){var M,q=c&f,Q=c&d,pe=c&h;if(p&&(M=C?p(o,v,C,R):p(o)),M!==t)return M;if(!gr(o))return o;var ge=at(o);if(ge){if(M=bR(o),!q)return xn(o,M)}else{var _e=sn(o),Ae=_e==D||_e==O;if(Za(o))return Qv(o,q);if(_e==Z||_e==le||Ae&&!C){if(M=Q||Ae?{}:p1(o),!q)return Q?dR(o,LN(M,o)):fR(o,Tv(M,o))}else{if(!rr[_e])return C?o:{};M=xR(o,_e,q)}}R||(R=new yi);var Pe=R.get(o);if(Pe)return Pe;R.set(o,M),H1(o)?o.forEach(function(Ye){M.add(Xn(Ye,c,p,Ye,o,R))}):G1(o)&&o.forEach(function(Ye,bt){M.set(bt,Xn(Ye,c,p,bt,o,R))});var je=pe?Q?jp:Kp:Q?Sn:Fr,mt=ge?t:je(o);return Wn(mt||o,function(Ye,bt){mt&&(bt=Ye,Ye=o[bt]),su(M,bt,Xn(Ye,c,p,bt,o,R))}),M}function PN(o){var c=Fr(o);return function(p){return Sv(p,o,c)}}function Sv(o,c,p){var v=p.length;if(o==null)return!v;for(o=Zt(o);v--;){var C=p[v],R=c[C],M=o[C];if(M===t&&!(C in o)||!R(M))return!1}return!0}function Av(o,c,p){if(typeof o!="function")throw new zn(i);return hu(function(){o.apply(t,p)},c)}function ou(o,c,p,v){var C=-1,R=Gc,M=!0,q=o.length,Q=[],pe=c.length;if(!q)return Q;p&&(c=fr(c,Ln(p))),v?(R=fp,M=!1):c.length>=r&&(R=eu,M=!1,c=new Ds(c));e:for(;++C<q;){var ge=o[C],_e=p==null?ge:p(ge);if(ge=v||ge!==0?ge:0,M&&_e===_e){for(var Ae=pe;Ae--;)if(c[Ae]===_e)continue e;Q.push(ge)}else R(c,_e,v)||Q.push(ge)}return Q}var za=e1(Ui),kv=e1(Ap,!0);function MN(o,c){var p=!0;return za(o,function(v,C,R){return p=!!c(v,C,R),p}),p}function sf(o,c,p){for(var v=-1,C=o.length;++v<C;){var R=o[v],M=c(R);if(M!=null&&(q===t?M===M&&!Mn(M):p(M,q)))var q=M,Q=R}return Q}function UN(o,c,p,v){var C=o.length;for(p=pt(p),p<0&&(p=-p>C?0:C+p),v=v===t||v>C?C:pt(v),v<0&&(v+=C),v=p>v?0:j1(v);p<v;)o[p++]=c;return o}function Iv(o,c){var p=[];return za(o,function(v,C,R){c(v,C,R)&&p.push(v)}),p}function Qr(o,c,p,v,C){var R=-1,M=o.length;for(p||(p=SR),C||(C=[]);++R<M;){var q=o[R];c>0&&p(q)?c>1?Qr(q,c-1,p,v,C):Ka(C,q):v||(C[C.length]=q)}return C}var Sp=t1(),Nv=t1(!0);function Ui(o,c){return o&&Sp(o,c,Fr)}function Ap(o,c){return o&&Nv(o,c,Fr)}function of(o,c){return Ha(c,function(p){return wa(o[p])})}function Os(o,c){c=Xa(c,o);for(var p=0,v=c.length;o!=null&&p<v;)o=o[qi(c[p++])];return p&&p==v?o:t}function Rv(o,c,p){var v=c(o);return at(o)?v:Ka(v,p(o))}function fn(o){return o==null?o===t?Ue:X:Ns&&Ns in Zt(o)?wR(o):BR(o)}function kp(o,c){return o>c}function FN(o,c){return o!=null&&zt.call(o,c)}function qN(o,c){return o!=null&&c in Zt(o)}function GN(o,c,p){return o>=an(c,p)&&o<Br(c,p)}function Ip(o,c,p){for(var v=p?fp:Gc,C=o[0].length,R=o.length,M=R,q=se(R),Q=1/0,pe=[];M--;){var ge=o[M];M&&c&&(ge=fr(ge,Ln(c))),Q=an(ge.length,Q),q[M]=!p&&(c||C>=120&&ge.length>=120)?new Ds(M&&ge):t}ge=o[0];var _e=-1,Ae=q[0];e:for(;++_e<C&&pe.length<Q;){var Pe=ge[_e],je=c?c(Pe):Pe;if(Pe=p||Pe!==0?Pe:0,!(Ae?eu(Ae,je):v(pe,je,p))){for(M=R;--M;){var mt=q[M];if(!(mt?eu(mt,je):v(o[M],je,p)))continue e}Ae&&Ae.push(je),pe.push(Pe)}}return pe}function VN(o,c,p,v){return Ui(o,function(C,R,M){c(v,p(C),R,M)}),v}function lu(o,c,p){c=Xa(c,o),o=v1(o,c);var v=o==null?o:o[qi(Zn(c))];return v==null?t:On(v,o,p)}function Dv(o){return _r(o)&&fn(o)==le}function HN(o){return _r(o)&&fn(o)==Xt}function KN(o){return _r(o)&&fn(o)==nt}function uu(o,c,p,v,C){return o===c?!0:o==null||c==null||!_r(o)&&!_r(c)?o!==o&&c!==c:jN(o,c,p,v,uu,C)}function jN(o,c,p,v,C,R){var M=at(o),q=at(c),Q=M?Rt:sn(o),pe=q?Rt:sn(c);Q=Q==le?Z:Q,pe=pe==le?Z:pe;var ge=Q==Z,_e=pe==Z,Ae=Q==pe;if(Ae&&Za(o)){if(!Za(c))return!1;M=!0,ge=!1}if(Ae&&!ge)return R||(R=new yi),M||qo(o)?f1(o,c,p,v,C,R):vR(o,c,Q,p,v,C,R);if(!(p&g)){var Pe=ge&&zt.call(o,"__wrapped__"),je=_e&&zt.call(c,"__wrapped__");if(Pe||je){var mt=Pe?o.value():o,Ye=je?c.value():c;return R||(R=new yi),C(mt,Ye,p,v,R)}}return Ae?(R||(R=new yi),_R(o,c,p,v,C,R)):!1}function YN(o){return _r(o)&&sn(o)==j}function Np(o,c,p,v){var C=p.length,R=C,M=!v;if(o==null)return!R;for(o=Zt(o);C--;){var q=p[C];if(M&&q[2]?q[1]!==o[q[0]]:!(q[0]in o))return!1}for(;++C<R;){q=p[C];var Q=q[0],pe=o[Q],ge=q[1];if(M&&q[2]){if(pe===t&&!(Q in o))return!1}else{var _e=new yi;if(v)var Ae=v(pe,ge,Q,o,c,_e);if(!(Ae===t?uu(ge,pe,g|m,v,_e):Ae))return!1}}return!0}function Bv(o){if(!gr(o)||kR(o))return!1;var c=wa(o)?YI:Pk;return c.test(Ps(o))}function WN(o){return _r(o)&&fn(o)==ne}function zN(o){return _r(o)&&sn(o)==$}function QN(o){return _r(o)&&xf(o.length)&&!!or[fn(o)]}function Ov(o){return typeof o=="function"?o:o==null?An:typeof o=="object"?at(o)?Mv(o[0],o[1]):Pv(o):r_(o)}function Rp(o){if(!du(o))return ZI(o);var c=[];for(var p in Zt(o))zt.call(o,p)&&p!="constructor"&&c.push(p);return c}function XN(o){if(!gr(o))return DR(o);var c=du(o),p=[];for(var v in o)v=="constructor"&&(c||!zt.call(o,v))||p.push(v);return p}function Dp(o,c){return o<c}function Lv(o,c){var p=-1,v=Tn(o)?se(o.length):[];return za(o,function(C,R,M){v[++p]=c(C,R,M)}),v}function Pv(o){var c=Wp(o);return c.length==1&&c[0][2]?m1(c[0][0],c[0][1]):function(p){return p===o||Np(p,o,c)}}function Mv(o,c){return Qp(o)&&g1(c)?m1(qi(o),c):function(p){var v=a0(p,o);return v===t&&v===c?s0(p,o):uu(c,v,g|m)}}function lf(o,c,p,v,C){o!==c&&Sp(c,function(R,M){if(C||(C=new yi),gr(R))JN(o,c,M,p,lf,v,C);else{var q=v?v(Jp(o,M),R,M+"",o,c,C):t;q===t&&(q=R),xp(o,M,q)}},Sn)}function JN(o,c,p,v,C,R,M){var q=Jp(o,p),Q=Jp(c,p),pe=M.get(Q);if(pe){xp(o,p,pe);return}var ge=R?R(q,Q,p+"",o,c,M):t,_e=ge===t;if(_e){var Ae=at(Q),Pe=!Ae&&Za(Q),je=!Ae&&!Pe&&qo(Q);ge=Q,Ae||Pe||je?at(q)?ge=q:Cr(q)?ge=xn(q):Pe?(_e=!1,ge=Qv(Q,!0)):je?(_e=!1,ge=Xv(Q,!0)):ge=[]:pu(Q)||Ms(Q)?(ge=q,Ms(q)?ge=Y1(q):(!gr(q)||wa(q))&&(ge=p1(Q))):_e=!1}_e&&(M.set(Q,ge),C(ge,Q,v,R,M),M.delete(Q)),xp(o,p,ge)}function Uv(o,c){var p=o.length;if(!!p)return c+=c<0?p:0,_a(c,p)?o[c]:t}function Fv(o,c,p){c.length?c=fr(c,function(R){return at(R)?function(M){return Os(M,R.length===1?R[0]:R)}:R}):c=[An];var v=-1;c=fr(c,Ln(He()));var C=Lv(o,function(R,M,q){var Q=fr(c,function(pe){return pe(R)});return{criteria:Q,index:++v,value:R}});return xI(C,function(R,M){return cR(R,M,p)})}function ZN(o,c){return qv(o,c,function(p,v){return s0(o,v)})}function qv(o,c,p){for(var v=-1,C=c.length,R={};++v<C;){var M=c[v],q=Os(o,M);p(q,M)&&cu(R,Xa(M,o),q)}return R}function $N(o){return function(c){return Os(c,o)}}function Bp(o,c,p,v){var C=v?bI:No,R=-1,M=c.length,q=o;for(o===c&&(c=xn(c)),p&&(q=fr(o,Ln(p)));++R<M;)for(var Q=0,pe=c[R],ge=p?p(pe):pe;(Q=C(q,ge,Q,v))>-1;)q!==o&&Jc.call(q,Q,1),Jc.call(o,Q,1);return o}function Gv(o,c){for(var p=o?c.length:0,v=p-1;p--;){var C=c[p];if(p==v||C!==R){var R=C;_a(C)?Jc.call(o,C,1):Mp(o,C)}}return o}function Op(o,c){return o+ef(Ev()*(c-o+1))}function eR(o,c,p,v){for(var C=-1,R=Br($c((c-o)/(p||1)),0),M=se(R);R--;)M[v?R:++C]=o,o+=p;return M}function Lp(o,c){var p="";if(!o||c<1||c>me)return p;do c%2&&(p+=o),c=ef(c/2),c&&(o+=o);while(c);return p}function wt(o,c){return Zp(y1(o,c,An),o+"")}function tR(o){return xv(Go(o))}function rR(o,c){var p=Go(o);return vf(p,Bs(c,0,p.length))}function cu(o,c,p,v){if(!gr(o))return o;c=Xa(c,o);for(var C=-1,R=c.length,M=R-1,q=o;q!=null&&++C<R;){var Q=qi(c[C]),pe=p;if(Q==="__proto__"||Q==="constructor"||Q==="prototype")return o;if(C!=M){var ge=q[Q];pe=v?v(ge,Q,q):t,pe===t&&(pe=gr(ge)?ge:_a(c[C+1])?[]:{})}su(q,Q,pe),q=q[Q]}return o}var Vv=tf?function(o,c){return tf.set(o,c),o}:An,nR=Zc?function(o,c){return Zc(o,"toString",{configurable:!0,enumerable:!1,value:l0(c),writable:!0})}:An;function iR(o){return vf(Go(o))}function Jn(o,c,p){var v=-1,C=o.length;c<0&&(c=-c>C?0:C+c),p=p>C?C:p,p<0&&(p+=C),C=c>p?0:p-c>>>0,c>>>=0;for(var R=se(C);++v<C;)R[v]=o[v+c];return R}function aR(o,c){var p;return za(o,function(v,C,R){return p=c(v,C,R),!p}),!!p}function uf(o,c,p){var v=0,C=o==null?v:o.length;if(typeof c=="number"&&c===c&&C<=Je){for(;v<C;){var R=v+C>>>1,M=o[R];M!==null&&!Mn(M)&&(p?M<=c:M<c)?v=R+1:C=R}return C}return Pp(o,c,An,p)}function Pp(o,c,p,v){var C=0,R=o==null?0:o.length;if(R===0)return 0;c=p(c);for(var M=c!==c,q=c===null,Q=Mn(c),pe=c===t;C<R;){var ge=ef((C+R)/2),_e=p(o[ge]),Ae=_e!==t,Pe=_e===null,je=_e===_e,mt=Mn(_e);if(M)var Ye=v||je;else pe?Ye=je&&(v||Ae):q?Ye=je&&Ae&&(v||!Pe):Q?Ye=je&&Ae&&!Pe&&(v||!mt):Pe||mt?Ye=!1:Ye=v?_e<=c:_e<c;Ye?C=ge+1:R=ge}return an(R,ct)}function Hv(o,c){for(var p=-1,v=o.length,C=0,R=[];++p<v;){var M=o[p],q=c?c(M):M;if(!p||!vi(q,Q)){var Q=q;R[C++]=M===0?0:M}}return R}function Kv(o){return typeof o=="number"?o:Mn(o)?Fe:+o}function Pn(o){if(typeof o=="string")return o;if(at(o))return fr(o,Pn)+"";if(Mn(o))return Cv?Cv.call(o):"";var c=o+"";return c=="0"&&1/o==-Re?"-0":c}function Qa(o,c,p){var v=-1,C=Gc,R=o.length,M=!0,q=[],Q=q;if(p)M=!1,C=fp;else if(R>=r){var pe=c?null:mR(o);if(pe)return Hc(pe);M=!1,C=eu,Q=new Ds}else Q=c?[]:q;e:for(;++v<R;){var ge=o[v],_e=c?c(ge):ge;if(ge=p||ge!==0?ge:0,M&&_e===_e){for(var Ae=Q.length;Ae--;)if(Q[Ae]===_e)continue e;c&&Q.push(_e),q.push(ge)}else C(Q,_e,p)||(Q!==q&&Q.push(_e),q.push(ge))}return q}function Mp(o,c){return c=Xa(c,o),o=v1(o,c),o==null||delete o[qi(Zn(c))]}function jv(o,c,p,v){return cu(o,c,p(Os(o,c)),v)}function cf(o,c,p,v){for(var C=o.length,R=v?C:-1;(v?R--:++R<C)&&c(o[R],R,o););return p?Jn(o,v?0:R,v?R+1:C):Jn(o,v?R+1:0,v?C:R)}function Yv(o,c){var p=o;return p instanceof kt&&(p=p.value()),dp(c,function(v,C){return C.func.apply(C.thisArg,Ka([v],C.args))},p)}function Up(o,c,p){var v=o.length;if(v<2)return v?Qa(o[0]):[];for(var C=-1,R=se(v);++C<v;)for(var M=o[C],q=-1;++q<v;)q!=C&&(R[C]=ou(R[C]||M,o[q],c,p));return Qa(Qr(R,1),c,p)}function Wv(o,c,p){for(var v=-1,C=o.length,R=c.length,M={};++v<C;){var q=v<R?c[v]:t;p(M,o[v],q)}return M}function Fp(o){return Cr(o)?o:[]}function qp(o){return typeof o=="function"?o:An}function Xa(o,c){return at(o)?o:Qp(o,c)?[o]:C1(Kt(o))}var sR=wt;function Ja(o,c,p){var v=o.length;return p=p===t?v:p,!c&&p>=v?o:Jn(o,c,p)}var zv=WI||function(o){return Ur.clearTimeout(o)};function Qv(o,c){if(c)return o.slice();var p=o.length,v=mv?mv(p):new o.constructor(p);return o.copy(v),v}function Gp(o){var c=new o.constructor(o.byteLength);return new Qc(c).set(new Qc(o)),c}function oR(o,c){var p=c?Gp(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.byteLength)}function lR(o){var c=new o.constructor(o.source,Dy.exec(o));return c.lastIndex=o.lastIndex,c}function uR(o){return au?Zt(au.call(o)):{}}function Xv(o,c){var p=c?Gp(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.length)}function Jv(o,c){if(o!==c){var p=o!==t,v=o===null,C=o===o,R=Mn(o),M=c!==t,q=c===null,Q=c===c,pe=Mn(c);if(!q&&!pe&&!R&&o>c||R&&M&&Q&&!q&&!pe||v&&M&&Q||!p&&Q||!C)return 1;if(!v&&!R&&!pe&&o<c||pe&&p&&C&&!v&&!R||q&&p&&C||!M&&C||!Q)return-1}return 0}function cR(o,c,p){for(var v=-1,C=o.criteria,R=c.criteria,M=C.length,q=p.length;++v<M;){var Q=Jv(C[v],R[v]);if(Q){if(v>=q)return Q;var pe=p[v];return Q*(pe=="desc"?-1:1)}}return o.index-c.index}function Zv(o,c,p,v){for(var C=-1,R=o.length,M=p.length,q=-1,Q=c.length,pe=Br(R-M,0),ge=se(Q+pe),_e=!v;++q<Q;)ge[q]=c[q];for(;++C<M;)(_e||C<R)&&(ge[p[C]]=o[C]);for(;pe--;)ge[q++]=o[C++];return ge}function $v(o,c,p,v){for(var C=-1,R=o.length,M=-1,q=p.length,Q=-1,pe=c.length,ge=Br(R-q,0),_e=se(ge+pe),Ae=!v;++C<ge;)_e[C]=o[C];for(var Pe=C;++Q<pe;)_e[Pe+Q]=c[Q];for(;++M<q;)(Ae||C<R)&&(_e[Pe+p[M]]=o[C++]);return _e}function xn(o,c){var p=-1,v=o.length;for(c||(c=se(v));++p<v;)c[p]=o[p];return c}function Fi(o,c,p,v){var C=!p;p||(p={});for(var R=-1,M=c.length;++R<M;){var q=c[R],Q=v?v(p[q],o[q],q,p,o):t;Q===t&&(Q=o[q]),C?ma(p,q,Q):su(p,q,Q)}return p}function fR(o,c){return Fi(o,zp(o),c)}function dR(o,c){return Fi(o,d1(o),c)}function ff(o,c){return function(p,v){var C=at(p)?yI:ON,R=c?c():{};return C(p,o,He(v,2),R)}}function Mo(o){return wt(function(c,p){var v=-1,C=p.length,R=C>1?p[C-1]:t,M=C>2?p[2]:t;for(R=o.length>3&&typeof R=="function"?(C--,R):t,M&&dn(p[0],p[1],M)&&(R=C<3?t:R,C=1),c=Zt(c);++v<C;){var q=p[v];q&&o(c,q,v,R)}return c})}function e1(o,c){return function(p,v){if(p==null)return p;if(!Tn(p))return o(p,v);for(var C=p.length,R=c?C:-1,M=Zt(p);(c?R--:++R<C)&&v(M[R],R,M)!==!1;);return p}}function t1(o){return function(c,p,v){for(var C=-1,R=Zt(c),M=v(c),q=M.length;q--;){var Q=M[o?q:++C];if(p(R[Q],Q,R)===!1)break}return c}}function hR(o,c,p){var v=c&y,C=fu(o);function R(){var M=this&&this!==Ur&&this instanceof R?C:o;return M.apply(v?p:this,arguments)}return R}function r1(o){return function(c){c=Kt(c);var p=Ro(c)?mi(c):t,v=p?p[0]:c.charAt(0),C=p?Ja(p,1).join(""):c.slice(1);return v[o]()+C}}function Uo(o){return function(c){return dp(e_($1(c).replace(nI,"")),o,"")}}function fu(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=Po(o.prototype),v=o.apply(p,c);return gr(v)?v:p}}function pR(o,c,p){var v=fu(o);function C(){for(var R=arguments.length,M=se(R),q=R,Q=Fo(C);q--;)M[q]=arguments[q];var pe=R<3&&M[0]!==Q&&M[R-1]!==Q?[]:ja(M,Q);if(R-=pe.length,R<p)return o1(o,c,df,C.placeholder,t,M,pe,t,t,p-R);var ge=this&&this!==Ur&&this instanceof C?v:o;return On(ge,this,M)}return C}function n1(o){return function(c,p,v){var C=Zt(c);if(!Tn(c)){var R=He(p,3);c=Fr(c),p=function(q){return R(C[q],q,C)}}var M=o(c,p,v);return M>-1?C[R?c[M]:M]:t}}function i1(o){return va(function(c){var p=c.length,v=p,C=Qn.prototype.thru;for(o&&c.reverse();v--;){var R=c[v];if(typeof R!="function")throw new zn(i);if(C&&!M&&mf(R)=="wrapper")var M=new Qn([],!0)}for(v=M?v:p;++v<p;){R=c[v];var q=mf(R),Q=q=="wrapper"?Yp(R):t;Q&&Xp(Q[0])&&Q[1]==(I|E|T|B)&&!Q[4].length&&Q[9]==1?M=M[mf(Q[0])].apply(M,Q[3]):M=R.length==1&&Xp(R)?M[q]():M.thru(R)}return function(){var pe=arguments,ge=pe[0];if(M&&pe.length==1&&at(ge))return M.plant(ge).value();for(var _e=0,Ae=p?c[_e].apply(this,pe):ge;++_e<p;)Ae=c[_e].call(this,Ae);return Ae}})}function df(o,c,p,v,C,R,M,q,Q,pe){var ge=c&I,_e=c&y,Ae=c&_,Pe=c&(E|S),je=c&z,mt=Ae?t:fu(o);function Ye(){for(var bt=arguments.length,Ot=se(bt),Un=bt;Un--;)Ot[Un]=arguments[Un];if(Pe)var hn=Fo(Ye),Fn=SI(Ot,hn);if(v&&(Ot=Zv(Ot,v,C,Pe)),R&&(Ot=$v(Ot,R,M,Pe)),bt-=Fn,Pe&&bt<pe){var br=ja(Ot,hn);return o1(o,c,df,Ye.placeholder,p,Ot,br,q,Q,pe-bt)}var _i=_e?p:this,Ca=Ae?_i[o]:o;return bt=Ot.length,q?Ot=OR(Ot,q):je&&bt>1&&Ot.reverse(),ge&&Q<bt&&(Ot.length=Q),this&&this!==Ur&&this instanceof Ye&&(Ca=mt||fu(Ca)),Ca.apply(_i,Ot)}return Ye}function a1(o,c){return function(p,v){return VN(p,o,c(v),{})}}function hf(o,c){return function(p,v){var C;if(p===t&&v===t)return c;if(p!==t&&(C=p),v!==t){if(C===t)return v;typeof p=="string"||typeof v=="string"?(p=Pn(p),v=Pn(v)):(p=Kv(p),v=Kv(v)),C=o(p,v)}return C}}function Vp(o){return va(function(c){return c=fr(c,Ln(He())),wt(function(p){var v=this;return o(c,function(C){return On(C,v,p)})})})}function pf(o,c){c=c===t?" ":Pn(c);var p=c.length;if(p<2)return p?Lp(c,o):c;var v=Lp(c,$c(o/Do(c)));return Ro(c)?Ja(mi(v),0,o).join(""):v.slice(0,o)}function gR(o,c,p,v){var C=c&y,R=fu(o);function M(){for(var q=-1,Q=arguments.length,pe=-1,ge=v.length,_e=se(ge+Q),Ae=this&&this!==Ur&&this instanceof M?R:o;++pe<ge;)_e[pe]=v[pe];for(;Q--;)_e[pe++]=arguments[++q];return On(Ae,C?p:this,_e)}return M}function s1(o){return function(c,p,v){return v&&typeof v!="number"&&dn(c,p,v)&&(p=v=t),c=Ea(c),p===t?(p=c,c=0):p=Ea(p),v=v===t?c<p?1:-1:Ea(v),eR(c,p,v,o)}}function gf(o){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=$n(c),p=$n(p)),o(c,p)}}function o1(o,c,p,v,C,R,M,q,Q,pe){var ge=c&E,_e=ge?M:t,Ae=ge?t:M,Pe=ge?R:t,je=ge?t:R;c|=ge?T:L,c&=~(ge?L:T),c&w||(c&=~(y|_));var mt=[o,c,C,Pe,_e,je,Ae,q,Q,pe],Ye=p.apply(t,mt);return Xp(o)&&_1(Ye,mt),Ye.placeholder=v,w1(Ye,o,c)}function Hp(o){var c=Dr[o];return function(p,v){if(p=$n(p),v=v==null?0:an(pt(v),292),v&&wv(p)){var C=(Kt(p)+"e").split("e"),R=c(C[0]+"e"+(+C[1]+v));return C=(Kt(R)+"e").split("e"),+(C[0]+"e"+(+C[1]-v))}return c(p)}}var mR=Oo&&1/Hc(new Oo([,-0]))[1]==Re?function(o){return new Oo(o)}:f0;function l1(o){return function(c){var p=sn(c);return p==j?_p(c):p==$?BI(c):TI(c,o(c))}}function ya(o,c,p,v,C,R,M,q){var Q=c&_;if(!Q&&typeof o!="function")throw new zn(i);var pe=v?v.length:0;if(pe||(c&=~(T|L),v=C=t),M=M===t?M:Br(pt(M),0),q=q===t?q:pt(q),pe-=C?C.length:0,c&L){var ge=v,_e=C;v=C=t}var Ae=Q?t:Yp(o),Pe=[o,c,p,v,C,ge,_e,R,M,q];if(Ae&&RR(Pe,Ae),o=Pe[0],c=Pe[1],p=Pe[2],v=Pe[3],C=Pe[4],q=Pe[9]=Pe[9]===t?Q?0:o.length:Br(Pe[9]-pe,0),!q&&c&(E|S)&&(c&=~(E|S)),!c||c==y)var je=hR(o,c,p);else c==E||c==S?je=pR(o,c,q):(c==T||c==(y|T))&&!C.length?je=gR(o,c,p,v):je=df.apply(t,Pe);var mt=Ae?Vv:_1;return w1(mt(je,Pe),o,c)}function u1(o,c,p,v){return o===t||vi(o,Bo[p])&&!zt.call(v,p)?c:o}function c1(o,c,p,v,C,R){return gr(o)&&gr(c)&&(R.set(c,o),lf(o,c,t,c1,R),R.delete(c)),o}function yR(o){return pu(o)?t:o}function f1(o,c,p,v,C,R){var M=p&g,q=o.length,Q=c.length;if(q!=Q&&!(M&&Q>q))return!1;var pe=R.get(o),ge=R.get(c);if(pe&&ge)return pe==c&&ge==o;var _e=-1,Ae=!0,Pe=p&m?new Ds:t;for(R.set(o,c),R.set(c,o);++_e<q;){var je=o[_e],mt=c[_e];if(v)var Ye=M?v(mt,je,_e,c,o,R):v(je,mt,_e,o,c,R);if(Ye!==t){if(Ye)continue;Ae=!1;break}if(Pe){if(!hp(c,function(bt,Ot){if(!eu(Pe,Ot)&&(je===bt||C(je,bt,p,v,R)))return Pe.push(Ot)})){Ae=!1;break}}else if(!(je===mt||C(je,mt,p,v,R))){Ae=!1;break}}return R.delete(o),R.delete(c),Ae}function vR(o,c,p,v,C,R,M){switch(p){case it:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case Xt:return!(o.byteLength!=c.byteLength||!R(new Qc(o),new Qc(c)));case rt:case nt:case H:return vi(+o,+c);case N:return o.name==c.name&&o.message==c.message;case ne:case he:return o==c+"";case j:var q=_p;case $:var Q=v&g;if(q||(q=Hc),o.size!=c.size&&!Q)return!1;var pe=M.get(o);if(pe)return pe==c;v|=m,M.set(o,c);var ge=f1(q(o),q(c),v,C,R,M);return M.delete(o),ge;case Oe:if(au)return au.call(o)==au.call(c)}return!1}function _R(o,c,p,v,C,R){var M=p&g,q=Kp(o),Q=q.length,pe=Kp(c),ge=pe.length;if(Q!=ge&&!M)return!1;for(var _e=Q;_e--;){var Ae=q[_e];if(!(M?Ae in c:zt.call(c,Ae)))return!1}var Pe=R.get(o),je=R.get(c);if(Pe&&je)return Pe==c&&je==o;var mt=!0;R.set(o,c),R.set(c,o);for(var Ye=M;++_e<Q;){Ae=q[_e];var bt=o[Ae],Ot=c[Ae];if(v)var Un=M?v(Ot,bt,Ae,c,o,R):v(bt,Ot,Ae,o,c,R);if(!(Un===t?bt===Ot||C(bt,Ot,p,v,R):Un)){mt=!1;break}Ye||(Ye=Ae=="constructor")}if(mt&&!Ye){var hn=o.constructor,Fn=c.constructor;hn!=Fn&&"constructor"in o&&"constructor"in c&&!(typeof hn=="function"&&hn instanceof hn&&typeof Fn=="function"&&Fn instanceof Fn)&&(mt=!1)}return R.delete(o),R.delete(c),mt}function va(o){return Zp(y1(o,t,S1),o+"")}function Kp(o){return Rv(o,Fr,zp)}function jp(o){return Rv(o,Sn,d1)}var Yp=tf?function(o){return tf.get(o)}:f0;function mf(o){for(var c=o.name+"",p=Lo[c],v=zt.call(Lo,c)?p.length:0;v--;){var C=p[v],R=C.func;if(R==null||R==o)return C.name}return c}function Fo(o){var c=zt.call(k,"placeholder")?k:o;return c.placeholder}function He(){var o=k.iteratee||u0;return o=o===u0?Ov:o,arguments.length?o(arguments[0],arguments[1]):o}function yf(o,c){var p=o.__data__;return AR(c)?p[typeof c=="string"?"string":"hash"]:p.map}function Wp(o){for(var c=Fr(o),p=c.length;p--;){var v=c[p],C=o[v];c[p]=[v,C,g1(C)]}return c}function Ls(o,c){var p=NI(o,c);return Bv(p)?p:t}function wR(o){var c=zt.call(o,Ns),p=o[Ns];try{o[Ns]=t;var v=!0}catch(R){}var C=Wc.call(o);return v&&(c?o[Ns]=p:delete o[Ns]),C}var zp=Ep?function(o){return o==null?[]:(o=Zt(o),Ha(Ep(o),function(c){return vv.call(o,c)}))}:d0,d1=Ep?function(o){for(var c=[];o;)Ka(c,zp(o)),o=Xc(o);return c}:d0,sn=fn;(Cp&&sn(new Cp(new ArrayBuffer(1)))!=it||ru&&sn(new ru)!=j||bp&&sn(bp.resolve())!=Y||Oo&&sn(new Oo)!=$||nu&&sn(new nu)!=ht)&&(sn=function(o){var c=fn(o),p=c==Z?o.constructor:t,v=p?Ps(p):"";if(v)switch(v){case rN:return it;case nN:return j;case iN:return Y;case aN:return $;case sN:return ht}return c});function ER(o,c,p){for(var v=-1,C=p.length;++v<C;){var R=p[v],M=R.size;switch(R.type){case"drop":o+=M;break;case"dropRight":c-=M;break;case"take":c=an(c,o+M);break;case"takeRight":o=Br(o,c-M);break}}return{start:o,end:c}}function CR(o){var c=o.match(kk);return c?c[1].split(Ik):[]}function h1(o,c,p){c=Xa(c,o);for(var v=-1,C=c.length,R=!1;++v<C;){var M=qi(c[v]);if(!(R=o!=null&&p(o,M)))break;o=o[M]}return R||++v!=C?R:(C=o==null?0:o.length,!!C&&xf(C)&&_a(M,C)&&(at(o)||Ms(o)))}function bR(o){var c=o.length,p=new o.constructor(c);return c&&typeof o[0]=="string"&&zt.call(o,"index")&&(p.index=o.index,p.input=o.input),p}function p1(o){return typeof o.constructor=="function"&&!du(o)?Po(Xc(o)):{}}function xR(o,c,p){var v=o.constructor;switch(c){case Xt:return Gp(o);case rt:case nt:return new v(+o);case it:return oR(o,p);case Bt:case pr:case Va:case As:case ks:case bn:case ha:case nn:case Rr:return Xv(o,p);case j:return new v;case H:case he:return new v(o);case ne:return lR(o);case $:return new v;case Oe:return uR(o)}}function TR(o,c){var p=c.length;if(!p)return o;var v=p-1;return c[v]=(p>1?"& ":"")+c[v],c=c.join(p>2?", ":" "),o.replace(Ak,`{
/* [wrapped with `+c+`] */
`)}function SR(o){return at(o)||Ms(o)||!!(_v&&o&&o[_v])}function _a(o,c){var p=typeof o;return c=c==null?me:c,!!c&&(p=="number"||p!="symbol"&&Uk.test(o))&&o>-1&&o%1==0&&o<c}function dn(o,c,p){if(!gr(p))return!1;var v=typeof c;return(v=="number"?Tn(p)&&_a(c,p.length):v=="string"&&c in p)?vi(p[c],o):!1}function Qp(o,c){if(at(o))return!1;var p=typeof o;return p=="number"||p=="symbol"||p=="boolean"||o==null||Mn(o)?!0:bk.test(o)||!Ck.test(o)||c!=null&&o in Zt(c)}function AR(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function Xp(o){var c=mf(o),p=k[c];if(typeof p!="function"||!(c in kt.prototype))return!1;if(o===p)return!0;var v=Yp(p);return!!v&&o===v[0]}function kR(o){return!!gv&&gv in o}var IR=jc?wa:h0;function du(o){var c=o&&o.constructor,p=typeof c=="function"&&c.prototype||Bo;return o===p}function g1(o){return o===o&&!gr(o)}function m1(o,c){return function(p){return p==null?!1:p[o]===c&&(c!==t||o in Zt(p))}}function NR(o){var c=Cf(o,function(v){return p.size===l&&p.clear(),v}),p=c.cache;return c}function RR(o,c){var p=o[1],v=c[1],C=p|v,R=C<(y|_|I),M=v==I&&p==E||v==I&&p==B&&o[7].length<=c[8]||v==(I|B)&&c[7].length<=c[8]&&p==E;if(!(R||M))return o;v&y&&(o[2]=c[2],C|=p&y?0:w);var q=c[3];if(q){var Q=o[3];o[3]=Q?Zv(Q,q,c[4]):q,o[4]=Q?ja(o[3],u):c[4]}return q=c[5],q&&(Q=o[5],o[5]=Q?$v(Q,q,c[6]):q,o[6]=Q?ja(o[5],u):c[6]),q=c[7],q&&(o[7]=q),v&I&&(o[8]=o[8]==null?c[8]:an(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=C,o}function DR(o){var c=[];if(o!=null)for(var p in Zt(o))c.push(p);return c}function BR(o){return Wc.call(o)}function y1(o,c,p){return c=Br(c===t?o.length-1:c,0),function(){for(var v=arguments,C=-1,R=Br(v.length-c,0),M=se(R);++C<R;)M[C]=v[c+C];C=-1;for(var q=se(c+1);++C<c;)q[C]=v[C];return q[c]=p(M),On(o,this,q)}}function v1(o,c){return c.length<2?o:Os(o,Jn(c,0,-1))}function OR(o,c){for(var p=o.length,v=an(c.length,p),C=xn(o);v--;){var R=c[v];o[v]=_a(R,p)?C[R]:t}return o}function Jp(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var _1=E1(Vv),hu=QI||function(o,c){return Ur.setTimeout(o,c)},Zp=E1(nR);function w1(o,c,p){var v=c+"";return Zp(o,TR(v,LR(CR(v),p)))}function E1(o){var c=0,p=0;return function(){var v=$I(),C=ae-(v-p);if(p=v,C>0){if(++c>=te)return arguments[0]}else c=0;return o.apply(t,arguments)}}function vf(o,c){var p=-1,v=o.length,C=v-1;for(c=c===t?v:c;++p<c;){var R=Op(p,C),M=o[R];o[R]=o[p],o[p]=M}return o.length=c,o}var C1=NR(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(xk,function(p,v,C,R){c.push(C?R.replace(Dk,"$1"):v||p)}),c});function qi(o){if(typeof o=="string"||Mn(o))return o;var c=o+"";return c=="0"&&1/o==-Re?"-0":c}function Ps(o){if(o!=null){try{return Yc.call(o)}catch(c){}try{return o+""}catch(c){}}return""}function LR(o,c){return Wn(ft,function(p){var v="_."+p[0];c&p[1]&&!Gc(o,v)&&o.push(v)}),o.sort()}function b1(o){if(o instanceof kt)return o.clone();var c=new Qn(o.__wrapped__,o.__chain__);return c.__actions__=xn(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function PR(o,c,p){(p?dn(o,c,p):c===t)?c=1:c=Br(pt(c),0);var v=o==null?0:o.length;if(!v||c<1)return[];for(var C=0,R=0,M=se($c(v/c));C<v;)M[R++]=Jn(o,C,C+=c);return M}function MR(o){for(var c=-1,p=o==null?0:o.length,v=0,C=[];++c<p;){var R=o[c];R&&(C[v++]=R)}return C}function UR(){var o=arguments.length;if(!o)return[];for(var c=se(o-1),p=arguments[0],v=o;v--;)c[v-1]=arguments[v];return Ka(at(p)?xn(p):[p],Qr(c,1))}var FR=wt(function(o,c){return Cr(o)?ou(o,Qr(c,1,Cr,!0)):[]}),qR=wt(function(o,c){var p=Zn(c);return Cr(p)&&(p=t),Cr(o)?ou(o,Qr(c,1,Cr,!0),He(p,2)):[]}),GR=wt(function(o,c){var p=Zn(c);return Cr(p)&&(p=t),Cr(o)?ou(o,Qr(c,1,Cr,!0),t,p):[]});function VR(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:pt(c),Jn(o,c<0?0:c,v)):[]}function HR(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:pt(c),c=v-c,Jn(o,0,c<0?0:c)):[]}function KR(o,c){return o&&o.length?cf(o,He(c,3),!0,!0):[]}function jR(o,c){return o&&o.length?cf(o,He(c,3),!0):[]}function YR(o,c,p,v){var C=o==null?0:o.length;return C?(p&&typeof p!="number"&&dn(o,c,p)&&(p=0,v=C),UN(o,c,p,v)):[]}function x1(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=p==null?0:pt(p);return C<0&&(C=Br(v+C,0)),Vc(o,He(c,3),C)}function T1(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=v-1;return p!==t&&(C=pt(p),C=p<0?Br(v+C,0):an(C,v-1)),Vc(o,He(c,3),C,!0)}function S1(o){var c=o==null?0:o.length;return c?Qr(o,1):[]}function WR(o){var c=o==null?0:o.length;return c?Qr(o,Re):[]}function zR(o,c){var p=o==null?0:o.length;return p?(c=c===t?1:pt(c),Qr(o,c)):[]}function QR(o){for(var c=-1,p=o==null?0:o.length,v={};++c<p;){var C=o[c];v[C[0]]=C[1]}return v}function A1(o){return o&&o.length?o[0]:t}function XR(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=p==null?0:pt(p);return C<0&&(C=Br(v+C,0)),No(o,c,C)}function JR(o){var c=o==null?0:o.length;return c?Jn(o,0,-1):[]}var ZR=wt(function(o){var c=fr(o,Fp);return c.length&&c[0]===o[0]?Ip(c):[]}),$R=wt(function(o){var c=Zn(o),p=fr(o,Fp);return c===Zn(p)?c=t:p.pop(),p.length&&p[0]===o[0]?Ip(p,He(c,2)):[]}),eD=wt(function(o){var c=Zn(o),p=fr(o,Fp);return c=typeof c=="function"?c:t,c&&p.pop(),p.length&&p[0]===o[0]?Ip(p,t,c):[]});function tD(o,c){return o==null?"":JI.call(o,c)}function Zn(o){var c=o==null?0:o.length;return c?o[c-1]:t}function rD(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=v;return p!==t&&(C=pt(p),C=C<0?Br(v+C,0):an(C,v-1)),c===c?LI(o,c,C):Vc(o,ov,C,!0)}function nD(o,c){return o&&o.length?Uv(o,pt(c)):t}var iD=wt(k1);function k1(o,c){return o&&o.length&&c&&c.length?Bp(o,c):o}function aD(o,c,p){return o&&o.length&&c&&c.length?Bp(o,c,He(p,2)):o}function sD(o,c,p){return o&&o.length&&c&&c.length?Bp(o,c,t,p):o}var oD=va(function(o,c){var p=o==null?0:o.length,v=Tp(o,c);return Gv(o,fr(c,function(C){return _a(C,p)?+C:C}).sort(Jv)),v});function lD(o,c){var p=[];if(!(o&&o.length))return p;var v=-1,C=[],R=o.length;for(c=He(c,3);++v<R;){var M=o[v];c(M,v,o)&&(p.push(M),C.push(v))}return Gv(o,C),p}function $p(o){return o==null?o:tN.call(o)}function uD(o,c,p){var v=o==null?0:o.length;return v?(p&&typeof p!="number"&&dn(o,c,p)?(c=0,p=v):(c=c==null?0:pt(c),p=p===t?v:pt(p)),Jn(o,c,p)):[]}function cD(o,c){return uf(o,c)}function fD(o,c,p){return Pp(o,c,He(p,2))}function dD(o,c){var p=o==null?0:o.length;if(p){var v=uf(o,c);if(v<p&&vi(o[v],c))return v}return-1}function hD(o,c){return uf(o,c,!0)}function pD(o,c,p){return Pp(o,c,He(p,2),!0)}function gD(o,c){var p=o==null?0:o.length;if(p){var v=uf(o,c,!0)-1;if(vi(o[v],c))return v}return-1}function mD(o){return o&&o.length?Hv(o):[]}function yD(o,c){return o&&o.length?Hv(o,He(c,2)):[]}function vD(o){var c=o==null?0:o.length;return c?Jn(o,1,c):[]}function _D(o,c,p){return o&&o.length?(c=p||c===t?1:pt(c),Jn(o,0,c<0?0:c)):[]}function wD(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:pt(c),c=v-c,Jn(o,c<0?0:c,v)):[]}function ED(o,c){return o&&o.length?cf(o,He(c,3),!1,!0):[]}function CD(o,c){return o&&o.length?cf(o,He(c,3)):[]}var bD=wt(function(o){return Qa(Qr(o,1,Cr,!0))}),xD=wt(function(o){var c=Zn(o);return Cr(c)&&(c=t),Qa(Qr(o,1,Cr,!0),He(c,2))}),TD=wt(function(o){var c=Zn(o);return c=typeof c=="function"?c:t,Qa(Qr(o,1,Cr,!0),t,c)});function SD(o){return o&&o.length?Qa(o):[]}function AD(o,c){return o&&o.length?Qa(o,He(c,2)):[]}function kD(o,c){return c=typeof c=="function"?c:t,o&&o.length?Qa(o,t,c):[]}function e0(o){if(!(o&&o.length))return[];var c=0;return o=Ha(o,function(p){if(Cr(p))return c=Br(p.length,c),!0}),yp(c,function(p){return fr(o,pp(p))})}function I1(o,c){if(!(o&&o.length))return[];var p=e0(o);return c==null?p:fr(p,function(v){return On(c,t,v)})}var ID=wt(function(o,c){return Cr(o)?ou(o,c):[]}),ND=wt(function(o){return Up(Ha(o,Cr))}),RD=wt(function(o){var c=Zn(o);return Cr(c)&&(c=t),Up(Ha(o,Cr),He(c,2))}),DD=wt(function(o){var c=Zn(o);return c=typeof c=="function"?c:t,Up(Ha(o,Cr),t,c)}),BD=wt(e0);function OD(o,c){return Wv(o||[],c||[],su)}function LD(o,c){return Wv(o||[],c||[],cu)}var PD=wt(function(o){var c=o.length,p=c>1?o[c-1]:t;return p=typeof p=="function"?(o.pop(),p):t,I1(o,p)});function N1(o){var c=k(o);return c.__chain__=!0,c}function MD(o,c){return c(o),o}function _f(o,c){return c(o)}var UD=va(function(o){var c=o.length,p=c?o[0]:0,v=this.__wrapped__,C=function(R){return Tp(R,o)};return c>1||this.__actions__.length||!(v instanceof kt)||!_a(p)?this.thru(C):(v=v.slice(p,+p+(c?1:0)),v.__actions__.push({func:_f,args:[C],thisArg:t}),new Qn(v,this.__chain__).thru(function(R){return c&&!R.length&&R.push(t),R}))});function FD(){return N1(this)}function qD(){return new Qn(this.value(),this.__chain__)}function GD(){this.__values__===t&&(this.__values__=K1(this.value()));var o=this.__index__>=this.__values__.length,c=o?t:this.__values__[this.__index__++];return{done:o,value:c}}function VD(){return this}function HD(o){for(var c,p=this;p instanceof nf;){var v=b1(p);v.__index__=0,v.__values__=t,c?C.__wrapped__=v:c=v;var C=v;p=p.__wrapped__}return C.__wrapped__=o,c}function KD(){var o=this.__wrapped__;if(o instanceof kt){var c=o;return this.__actions__.length&&(c=new kt(this)),c=c.reverse(),c.__actions__.push({func:_f,args:[$p],thisArg:t}),new Qn(c,this.__chain__)}return this.thru($p)}function jD(){return Yv(this.__wrapped__,this.__actions__)}var YD=ff(function(o,c,p){zt.call(o,p)?++o[p]:ma(o,p,1)});function WD(o,c,p){var v=at(o)?av:MN;return p&&dn(o,c,p)&&(c=t),v(o,He(c,3))}function zD(o,c){var p=at(o)?Ha:Iv;return p(o,He(c,3))}var QD=n1(x1),XD=n1(T1);function JD(o,c){return Qr(wf(o,c),1)}function ZD(o,c){return Qr(wf(o,c),Re)}function $D(o,c,p){return p=p===t?1:pt(p),Qr(wf(o,c),p)}function R1(o,c){var p=at(o)?Wn:za;return p(o,He(c,3))}function D1(o,c){var p=at(o)?vI:kv;return p(o,He(c,3))}var eB=ff(function(o,c,p){zt.call(o,p)?o[p].push(c):ma(o,p,[c])});function tB(o,c,p,v){o=Tn(o)?o:Go(o),p=p&&!v?pt(p):0;var C=o.length;return p<0&&(p=Br(C+p,0)),Tf(o)?p<=C&&o.indexOf(c,p)>-1:!!C&&No(o,c,p)>-1}var rB=wt(function(o,c,p){var v=-1,C=typeof c=="function",R=Tn(o)?se(o.length):[];return za(o,function(M){R[++v]=C?On(c,M,p):lu(M,c,p)}),R}),nB=ff(function(o,c,p){ma(o,p,c)});function wf(o,c){var p=at(o)?fr:Lv;return p(o,He(c,3))}function iB(o,c,p,v){return o==null?[]:(at(c)||(c=c==null?[]:[c]),p=v?t:p,at(p)||(p=p==null?[]:[p]),Fv(o,c,p))}var aB=ff(function(o,c,p){o[p?0:1].push(c)},function(){return[[],[]]});function sB(o,c,p){var v=at(o)?dp:uv,C=arguments.length<3;return v(o,He(c,4),p,C,za)}function oB(o,c,p){var v=at(o)?_I:uv,C=arguments.length<3;return v(o,He(c,4),p,C,kv)}function lB(o,c){var p=at(o)?Ha:Iv;return p(o,bf(He(c,3)))}function uB(o){var c=at(o)?xv:tR;return c(o)}function cB(o,c,p){(p?dn(o,c,p):c===t)?c=1:c=pt(c);var v=at(o)?DN:rR;return v(o,c)}function fB(o){var c=at(o)?BN:iR;return c(o)}function dB(o){if(o==null)return 0;if(Tn(o))return Tf(o)?Do(o):o.length;var c=sn(o);return c==j||c==$?o.size:Rp(o).length}function hB(o,c,p){var v=at(o)?hp:aR;return p&&dn(o,c,p)&&(c=t),v(o,He(c,3))}var pB=wt(function(o,c){if(o==null)return[];var p=c.length;return p>1&&dn(o,c[0],c[1])?c=[]:p>2&&dn(c[0],c[1],c[2])&&(c=[c[0]]),Fv(o,Qr(c,1),[])}),Ef=zI||function(){return Ur.Date.now()};function gB(o,c){if(typeof c!="function")throw new zn(i);return o=pt(o),function(){if(--o<1)return c.apply(this,arguments)}}function B1(o,c,p){return c=p?t:c,c=o&&c==null?o.length:c,ya(o,I,t,t,t,t,c)}function O1(o,c){var p;if(typeof c!="function")throw new zn(i);return o=pt(o),function(){return--o>0&&(p=c.apply(this,arguments)),o<=1&&(c=t),p}}var t0=wt(function(o,c,p){var v=y;if(p.length){var C=ja(p,Fo(t0));v|=T}return ya(o,v,c,p,C)}),L1=wt(function(o,c,p){var v=y|_;if(p.length){var C=ja(p,Fo(L1));v|=T}return ya(c,v,o,p,C)});function P1(o,c,p){c=p?t:c;var v=ya(o,E,t,t,t,t,t,c);return v.placeholder=P1.placeholder,v}function M1(o,c,p){c=p?t:c;var v=ya(o,S,t,t,t,t,t,c);return v.placeholder=M1.placeholder,v}function U1(o,c,p){var v,C,R,M,q,Q,pe=0,ge=!1,_e=!1,Ae=!0;if(typeof o!="function")throw new zn(i);c=$n(c)||0,gr(p)&&(ge=!!p.leading,_e="maxWait"in p,R=_e?Br($n(p.maxWait)||0,c):R,Ae="trailing"in p?!!p.trailing:Ae);function Pe(br){var _i=v,Ca=C;return v=C=t,pe=br,M=o.apply(Ca,_i),M}function je(br){return pe=br,q=hu(bt,c),ge?Pe(br):M}function mt(br){var _i=br-Q,Ca=br-pe,n_=c-_i;return _e?an(n_,R-Ca):n_}function Ye(br){var _i=br-Q,Ca=br-pe;return Q===t||_i>=c||_i<0||_e&&Ca>=R}function bt(){var br=Ef();if(Ye(br))return Ot(br);q=hu(bt,mt(br))}function Ot(br){return q=t,Ae&&v?Pe(br):(v=C=t,M)}function Un(){q!==t&&zv(q),pe=0,v=Q=C=q=t}function hn(){return q===t?M:Ot(Ef())}function Fn(){var br=Ef(),_i=Ye(br);if(v=arguments,C=this,Q=br,_i){if(q===t)return je(Q);if(_e)return zv(q),q=hu(bt,c),Pe(Q)}return q===t&&(q=hu(bt,c)),M}return Fn.cancel=Un,Fn.flush=hn,Fn}var mB=wt(function(o,c){return Av(o,1,c)}),yB=wt(function(o,c,p){return Av(o,$n(c)||0,p)});function vB(o){return ya(o,z)}function Cf(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new zn(i);var p=function(){var v=arguments,C=c?c.apply(this,v):v[0],R=p.cache;if(R.has(C))return R.get(C);var M=o.apply(this,v);return p.cache=R.set(C,M)||R,M};return p.cache=new(Cf.Cache||ga),p}Cf.Cache=ga;function bf(o){if(typeof o!="function")throw new zn(i);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function _B(o){return O1(2,o)}var wB=sR(function(o,c){c=c.length==1&&at(c[0])?fr(c[0],Ln(He())):fr(Qr(c,1),Ln(He()));var p=c.length;return wt(function(v){for(var C=-1,R=an(v.length,p);++C<R;)v[C]=c[C].call(this,v[C]);return On(o,this,v)})}),r0=wt(function(o,c){var p=ja(c,Fo(r0));return ya(o,T,t,c,p)}),F1=wt(function(o,c){var p=ja(c,Fo(F1));return ya(o,L,t,c,p)}),EB=va(function(o,c){return ya(o,B,t,t,t,c)});function CB(o,c){if(typeof o!="function")throw new zn(i);return c=c===t?c:pt(c),wt(o,c)}function bB(o,c){if(typeof o!="function")throw new zn(i);return c=c==null?0:Br(pt(c),0),wt(function(p){var v=p[c],C=Ja(p,0,c);return v&&Ka(C,v),On(o,this,C)})}function xB(o,c,p){var v=!0,C=!0;if(typeof o!="function")throw new zn(i);return gr(p)&&(v="leading"in p?!!p.leading:v,C="trailing"in p?!!p.trailing:C),U1(o,c,{leading:v,maxWait:c,trailing:C})}function TB(o){return B1(o,1)}function SB(o,c){return r0(qp(c),o)}function AB(){if(!arguments.length)return[];var o=arguments[0];return at(o)?o:[o]}function kB(o){return Xn(o,h)}function IB(o,c){return c=typeof c=="function"?c:t,Xn(o,h,c)}function NB(o){return Xn(o,f|h)}function RB(o,c){return c=typeof c=="function"?c:t,Xn(o,f|h,c)}function DB(o,c){return c==null||Sv(o,c,Fr(c))}function vi(o,c){return o===c||o!==o&&c!==c}var BB=gf(kp),OB=gf(function(o,c){return o>=c}),Ms=Dv(function(){return arguments}())?Dv:function(o){return _r(o)&&zt.call(o,"callee")&&!vv.call(o,"callee")},at=se.isArray,LB=$y?Ln($y):HN;function Tn(o){return o!=null&&xf(o.length)&&!wa(o)}function Cr(o){return _r(o)&&Tn(o)}function PB(o){return o===!0||o===!1||_r(o)&&fn(o)==rt}var Za=XI||h0,MB=ev?Ln(ev):KN;function UB(o){return _r(o)&&o.nodeType===1&&!pu(o)}function FB(o){if(o==null)return!0;if(Tn(o)&&(at(o)||typeof o=="string"||typeof o.splice=="function"||Za(o)||qo(o)||Ms(o)))return!o.length;var c=sn(o);if(c==j||c==$)return!o.size;if(du(o))return!Rp(o).length;for(var p in o)if(zt.call(o,p))return!1;return!0}function qB(o,c){return uu(o,c)}function GB(o,c,p){p=typeof p=="function"?p:t;var v=p?p(o,c):t;return v===t?uu(o,c,t,p):!!v}function n0(o){if(!_r(o))return!1;var c=fn(o);return c==N||c==dt||typeof o.message=="string"&&typeof o.name=="string"&&!pu(o)}function VB(o){return typeof o=="number"&&wv(o)}function wa(o){if(!gr(o))return!1;var c=fn(o);return c==D||c==O||c==Dt||c==J}function q1(o){return typeof o=="number"&&o==pt(o)}function xf(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=me}function gr(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function _r(o){return o!=null&&typeof o=="object"}var G1=tv?Ln(tv):YN;function HB(o,c){return o===c||Np(o,c,Wp(c))}function KB(o,c,p){return p=typeof p=="function"?p:t,Np(o,c,Wp(c),p)}function jB(o){return V1(o)&&o!=+o}function YB(o){if(IR(o))throw new et(n);return Bv(o)}function WB(o){return o===null}function zB(o){return o==null}function V1(o){return typeof o=="number"||_r(o)&&fn(o)==H}function pu(o){if(!_r(o)||fn(o)!=Z)return!1;var c=Xc(o);if(c===null)return!0;var p=zt.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&Yc.call(p)==KI}var i0=rv?Ln(rv):WN;function QB(o){return q1(o)&&o>=-me&&o<=me}var H1=nv?Ln(nv):zN;function Tf(o){return typeof o=="string"||!at(o)&&_r(o)&&fn(o)==he}function Mn(o){return typeof o=="symbol"||_r(o)&&fn(o)==Oe}var qo=iv?Ln(iv):QN;function XB(o){return o===t}function JB(o){return _r(o)&&sn(o)==ht}function ZB(o){return _r(o)&&fn(o)==Qt}var $B=gf(Dp),eO=gf(function(o,c){return o<=c});function K1(o){if(!o)return[];if(Tn(o))return Tf(o)?mi(o):xn(o);if(tu&&o[tu])return DI(o[tu]());var c=sn(o),p=c==j?_p:c==$?Hc:Go;return p(o)}function Ea(o){if(!o)return o===0?o:0;if(o=$n(o),o===Re||o===-Re){var c=o<0?-1:1;return c*re}return o===o?o:0}function pt(o){var c=Ea(o),p=c%1;return c===c?p?c-p:c:0}function j1(o){return o?Bs(pt(o),0,Ze):0}function $n(o){if(typeof o=="number")return o;if(Mn(o))return Fe;if(gr(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=gr(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=cv(o);var p=Lk.test(o);return p||Mk.test(o)?gI(o.slice(2),p?2:8):Ok.test(o)?Fe:+o}function Y1(o){return Fi(o,Sn(o))}function tO(o){return o?Bs(pt(o),-me,me):o===0?o:0}function Kt(o){return o==null?"":Pn(o)}var rO=Mo(function(o,c){if(du(c)||Tn(c)){Fi(c,Fr(c),o);return}for(var p in c)zt.call(c,p)&&su(o,p,c[p])}),W1=Mo(function(o,c){Fi(c,Sn(c),o)}),Sf=Mo(function(o,c,p,v){Fi(c,Sn(c),o,v)}),nO=Mo(function(o,c,p,v){Fi(c,Fr(c),o,v)}),iO=va(Tp);function aO(o,c){var p=Po(o);return c==null?p:Tv(p,c)}var sO=wt(function(o,c){o=Zt(o);var p=-1,v=c.length,C=v>2?c[2]:t;for(C&&dn(c[0],c[1],C)&&(v=1);++p<v;)for(var R=c[p],M=Sn(R),q=-1,Q=M.length;++q<Q;){var pe=M[q],ge=o[pe];(ge===t||vi(ge,Bo[pe])&&!zt.call(o,pe))&&(o[pe]=R[pe])}return o}),oO=wt(function(o){return o.push(t,c1),On(z1,t,o)});function lO(o,c){return sv(o,He(c,3),Ui)}function uO(o,c){return sv(o,He(c,3),Ap)}function cO(o,c){return o==null?o:Sp(o,He(c,3),Sn)}function fO(o,c){return o==null?o:Nv(o,He(c,3),Sn)}function dO(o,c){return o&&Ui(o,He(c,3))}function hO(o,c){return o&&Ap(o,He(c,3))}function pO(o){return o==null?[]:of(o,Fr(o))}function gO(o){return o==null?[]:of(o,Sn(o))}function a0(o,c,p){var v=o==null?t:Os(o,c);return v===t?p:v}function mO(o,c){return o!=null&&h1(o,c,FN)}function s0(o,c){return o!=null&&h1(o,c,qN)}var yO=a1(function(o,c,p){c!=null&&typeof c.toString!="function"&&(c=Wc.call(c)),o[c]=p},l0(An)),vO=a1(function(o,c,p){c!=null&&typeof c.toString!="function"&&(c=Wc.call(c)),zt.call(o,c)?o[c].push(p):o[c]=[p]},He),_O=wt(lu);function Fr(o){return Tn(o)?bv(o):Rp(o)}function Sn(o){return Tn(o)?bv(o,!0):XN(o)}function wO(o,c){var p={};return c=He(c,3),Ui(o,function(v,C,R){ma(p,c(v,C,R),v)}),p}function EO(o,c){var p={};return c=He(c,3),Ui(o,function(v,C,R){ma(p,C,c(v,C,R))}),p}var CO=Mo(function(o,c,p){lf(o,c,p)}),z1=Mo(function(o,c,p,v){lf(o,c,p,v)}),bO=va(function(o,c){var p={};if(o==null)return p;var v=!1;c=fr(c,function(R){return R=Xa(R,o),v||(v=R.length>1),R}),Fi(o,jp(o),p),v&&(p=Xn(p,f|d|h,yR));for(var C=c.length;C--;)Mp(p,c[C]);return p});function xO(o,c){return Q1(o,bf(He(c)))}var TO=va(function(o,c){return o==null?{}:ZN(o,c)});function Q1(o,c){if(o==null)return{};var p=fr(jp(o),function(v){return[v]});return c=He(c),qv(o,p,function(v,C){return c(v,C[0])})}function SO(o,c,p){c=Xa(c,o);var v=-1,C=c.length;for(C||(C=1,o=t);++v<C;){var R=o==null?t:o[qi(c[v])];R===t&&(v=C,R=p),o=wa(R)?R.call(o):R}return o}function AO(o,c,p){return o==null?o:cu(o,c,p)}function kO(o,c,p,v){return v=typeof v=="function"?v:t,o==null?o:cu(o,c,p,v)}var X1=l1(Fr),J1=l1(Sn);function IO(o,c,p){var v=at(o),C=v||Za(o)||qo(o);if(c=He(c,4),p==null){var R=o&&o.constructor;C?p=v?new R:[]:gr(o)?p=wa(R)?Po(Xc(o)):{}:p={}}return(C?Wn:Ui)(o,function(M,q,Q){return c(p,M,q,Q)}),p}function NO(o,c){return o==null?!0:Mp(o,c)}function RO(o,c,p){return o==null?o:jv(o,c,qp(p))}function DO(o,c,p,v){return v=typeof v=="function"?v:t,o==null?o:jv(o,c,qp(p),v)}function Go(o){return o==null?[]:vp(o,Fr(o))}function BO(o){return o==null?[]:vp(o,Sn(o))}function OO(o,c,p){return p===t&&(p=c,c=t),p!==t&&(p=$n(p),p=p===p?p:0),c!==t&&(c=$n(c),c=c===c?c:0),Bs($n(o),c,p)}function LO(o,c,p){return c=Ea(c),p===t?(p=c,c=0):p=Ea(p),o=$n(o),GN(o,c,p)}function PO(o,c,p){if(p&&typeof p!="boolean"&&dn(o,c,p)&&(c=p=t),p===t&&(typeof c=="boolean"?(p=c,c=t):typeof o=="boolean"&&(p=o,o=t)),o===t&&c===t?(o=0,c=1):(o=Ea(o),c===t?(c=o,o=0):c=Ea(c)),o>c){var v=o;o=c,c=v}if(p||o%1||c%1){var C=Ev();return an(o+C*(c-o+pI("1e-"+((C+"").length-1))),c)}return Op(o,c)}var MO=Uo(function(o,c,p){return c=c.toLowerCase(),o+(p?Z1(c):c)});function Z1(o){return o0(Kt(o).toLowerCase())}function $1(o){return o=Kt(o),o&&o.replace(Fk,AI).replace(iI,"")}function UO(o,c,p){o=Kt(o),c=Pn(c);var v=o.length;p=p===t?v:Bs(pt(p),0,v);var C=p;return p-=c.length,p>=0&&o.slice(p,C)==c}function FO(o){return o=Kt(o),o&&_k.test(o)?o.replace(Ny,kI):o}function qO(o){return o=Kt(o),o&&Tk.test(o)?o.replace(rp,"\\$&"):o}var GO=Uo(function(o,c,p){return o+(p?"-":"")+c.toLowerCase()}),VO=Uo(function(o,c,p){return o+(p?" ":"")+c.toLowerCase()}),HO=r1("toLowerCase");function KO(o,c,p){o=Kt(o),c=pt(c);var v=c?Do(o):0;if(!c||v>=c)return o;var C=(c-v)/2;return pf(ef(C),p)+o+pf($c(C),p)}function jO(o,c,p){o=Kt(o),c=pt(c);var v=c?Do(o):0;return c&&v<c?o+pf(c-v,p):o}function YO(o,c,p){o=Kt(o),c=pt(c);var v=c?Do(o):0;return c&&v<c?pf(c-v,p)+o:o}function WO(o,c,p){return p||c==null?c=0:c&&(c=+c),eN(Kt(o).replace(np,""),c||0)}function zO(o,c,p){return(p?dn(o,c,p):c===t)?c=1:c=pt(c),Lp(Kt(o),c)}function QO(){var o=arguments,c=Kt(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var XO=Uo(function(o,c,p){return o+(p?"_":"")+c.toLowerCase()});function JO(o,c,p){return p&&typeof p!="number"&&dn(o,c,p)&&(c=p=t),p=p===t?Ze:p>>>0,p?(o=Kt(o),o&&(typeof c=="string"||c!=null&&!i0(c))&&(c=Pn(c),!c&&Ro(o))?Ja(mi(o),0,p):o.split(c,p)):[]}var ZO=Uo(function(o,c,p){return o+(p?" ":"")+o0(c)});function $O(o,c,p){return o=Kt(o),p=p==null?0:Bs(pt(p),0,o.length),c=Pn(c),o.slice(p,p+c.length)==c}function e3(o,c,p){var v=k.templateSettings;p&&dn(o,c,p)&&(c=t),o=Kt(o),c=Sf({},c,v,u1);var C=Sf({},c.imports,v.imports,u1),R=Fr(C),M=vp(C,R),q,Q,pe=0,ge=c.interpolate||Uc,_e="__p += '",Ae=wp((c.escape||Uc).source+"|"+ge.source+"|"+(ge===Ry?Bk:Uc).source+"|"+(c.evaluate||Uc).source+"|$","g"),Pe="//# sourceURL="+(zt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++uI+"]")+`
`;o.replace(Ae,function(Ye,bt,Ot,Un,hn,Fn){return Ot||(Ot=Un),_e+=o.slice(pe,Fn).replace(qk,II),bt&&(q=!0,_e+=`' +
__e(`+bt+`) +
'`),hn&&(Q=!0,_e+=`';
`+hn+`;
__p += '`),Ot&&(_e+=`' +
((__t = (`+Ot+`)) == null ? '' : __t) +
'`),pe=Fn+Ye.length,Ye}),_e+=`';
`;var je=zt.call(c,"variable")&&c.variable;if(!je)_e=`with (obj) {
`+_e+`
}
`;else if(Rk.test(je))throw new et(a);_e=(Q?_e.replace(cr,""):_e).replace(mk,"$1").replace(yk,"$1;"),_e="function("+(je||"obj")+`) {
`+(je?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(Q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_e+`return __p
}`;var mt=t_(function(){return Ht(R,Pe+"return "+_e).apply(t,M)});if(mt.source=_e,n0(mt))throw mt;return mt}function t3(o){return Kt(o).toLowerCase()}function r3(o){return Kt(o).toUpperCase()}function n3(o,c,p){if(o=Kt(o),o&&(p||c===t))return cv(o);if(!o||!(c=Pn(c)))return o;var v=mi(o),C=mi(c),R=fv(v,C),M=dv(v,C)+1;return Ja(v,R,M).join("")}function i3(o,c,p){if(o=Kt(o),o&&(p||c===t))return o.slice(0,pv(o)+1);if(!o||!(c=Pn(c)))return o;var v=mi(o),C=dv(v,mi(c))+1;return Ja(v,0,C).join("")}function a3(o,c,p){if(o=Kt(o),o&&(p||c===t))return o.replace(np,"");if(!o||!(c=Pn(c)))return o;var v=mi(o),C=fv(v,mi(c));return Ja(v,C).join("")}function s3(o,c){var p=F,v=G;if(gr(c)){var C="separator"in c?c.separator:C;p="length"in c?pt(c.length):p,v="omission"in c?Pn(c.omission):v}o=Kt(o);var R=o.length;if(Ro(o)){var M=mi(o);R=M.length}if(p>=R)return o;var q=p-Do(v);if(q<1)return v;var Q=M?Ja(M,0,q).join(""):o.slice(0,q);if(C===t)return Q+v;if(M&&(q+=Q.length-q),i0(C)){if(o.slice(q).search(C)){var pe,ge=Q;for(C.global||(C=wp(C.source,Kt(Dy.exec(C))+"g")),C.lastIndex=0;pe=C.exec(ge);)var _e=pe.index;Q=Q.slice(0,_e===t?q:_e)}}else if(o.indexOf(Pn(C),q)!=q){var Ae=Q.lastIndexOf(C);Ae>-1&&(Q=Q.slice(0,Ae))}return Q+v}function o3(o){return o=Kt(o),o&&vk.test(o)?o.replace(Iy,PI):o}var l3=Uo(function(o,c,p){return o+(p?" ":"")+c.toUpperCase()}),o0=r1("toUpperCase");function e_(o,c,p){return o=Kt(o),c=p?t:c,c===t?RI(o)?FI(o):CI(o):o.match(c)||[]}var t_=wt(function(o,c){try{return On(o,t,c)}catch(p){return n0(p)?p:new et(p)}}),u3=va(function(o,c){return Wn(c,function(p){p=qi(p),ma(o,p,t0(o[p],o))}),o});function c3(o){var c=o==null?0:o.length,p=He();return o=c?fr(o,function(v){if(typeof v[1]!="function")throw new zn(i);return[p(v[0]),v[1]]}):[],wt(function(v){for(var C=-1;++C<c;){var R=o[C];if(On(R[0],this,v))return On(R[1],this,v)}})}function f3(o){return PN(Xn(o,f))}function l0(o){return function(){return o}}function d3(o,c){return o==null||o!==o?c:o}var h3=i1(),p3=i1(!0);function An(o){return o}function u0(o){return Ov(typeof o=="function"?o:Xn(o,f))}function g3(o){return Pv(Xn(o,f))}function m3(o,c){return Mv(o,Xn(c,f))}var y3=wt(function(o,c){return function(p){return lu(p,o,c)}}),v3=wt(function(o,c){return function(p){return lu(o,p,c)}});function c0(o,c,p){var v=Fr(c),C=of(c,v);p==null&&!(gr(c)&&(C.length||!v.length))&&(p=c,c=o,o=this,C=of(c,Fr(c)));var R=!(gr(p)&&"chain"in p)||!!p.chain,M=wa(o);return Wn(C,function(q){var Q=c[q];o[q]=Q,M&&(o.prototype[q]=function(){var pe=this.__chain__;if(R||pe){var ge=o(this.__wrapped__),_e=ge.__actions__=xn(this.__actions__);return _e.push({func:Q,args:arguments,thisArg:o}),ge.__chain__=pe,ge}return Q.apply(o,Ka([this.value()],arguments))})}),o}function _3(){return Ur._===this&&(Ur._=jI),this}function f0(){}function w3(o){return o=pt(o),wt(function(c){return Uv(c,o)})}var E3=Vp(fr),C3=Vp(av),b3=Vp(hp);function r_(o){return Qp(o)?pp(qi(o)):$N(o)}function x3(o){return function(c){return o==null?t:Os(o,c)}}var T3=s1(),S3=s1(!0);function d0(){return[]}function h0(){return!1}function A3(){return{}}function k3(){return""}function I3(){return!0}function N3(o,c){if(o=pt(o),o<1||o>me)return[];var p=Ze,v=an(o,Ze);c=He(c),o-=Ze;for(var C=yp(v,c);++p<o;)c(p);return C}function R3(o){return at(o)?fr(o,qi):Mn(o)?[o]:xn(C1(Kt(o)))}function D3(o){var c=++HI;return Kt(o)+c}var B3=hf(function(o,c){return o+c},0),O3=Hp("ceil"),L3=hf(function(o,c){return o/c},1),P3=Hp("floor");function M3(o){return o&&o.length?sf(o,An,kp):t}function U3(o,c){return o&&o.length?sf(o,He(c,2),kp):t}function F3(o){return lv(o,An)}function q3(o,c){return lv(o,He(c,2))}function G3(o){return o&&o.length?sf(o,An,Dp):t}function V3(o,c){return o&&o.length?sf(o,He(c,2),Dp):t}var H3=hf(function(o,c){return o*c},1),K3=Hp("round"),j3=hf(function(o,c){return o-c},0);function Y3(o){return o&&o.length?mp(o,An):0}function W3(o,c){return o&&o.length?mp(o,He(c,2)):0}return k.after=gB,k.ary=B1,k.assign=rO,k.assignIn=W1,k.assignInWith=Sf,k.assignWith=nO,k.at=iO,k.before=O1,k.bind=t0,k.bindAll=u3,k.bindKey=L1,k.castArray=AB,k.chain=N1,k.chunk=PR,k.compact=MR,k.concat=UR,k.cond=c3,k.conforms=f3,k.constant=l0,k.countBy=YD,k.create=aO,k.curry=P1,k.curryRight=M1,k.debounce=U1,k.defaults=sO,k.defaultsDeep=oO,k.defer=mB,k.delay=yB,k.difference=FR,k.differenceBy=qR,k.differenceWith=GR,k.drop=VR,k.dropRight=HR,k.dropRightWhile=KR,k.dropWhile=jR,k.fill=YR,k.filter=zD,k.flatMap=JD,k.flatMapDeep=ZD,k.flatMapDepth=$D,k.flatten=S1,k.flattenDeep=WR,k.flattenDepth=zR,k.flip=vB,k.flow=h3,k.flowRight=p3,k.fromPairs=QR,k.functions=pO,k.functionsIn=gO,k.groupBy=eB,k.initial=JR,k.intersection=ZR,k.intersectionBy=$R,k.intersectionWith=eD,k.invert=yO,k.invertBy=vO,k.invokeMap=rB,k.iteratee=u0,k.keyBy=nB,k.keys=Fr,k.keysIn=Sn,k.map=wf,k.mapKeys=wO,k.mapValues=EO,k.matches=g3,k.matchesProperty=m3,k.memoize=Cf,k.merge=CO,k.mergeWith=z1,k.method=y3,k.methodOf=v3,k.mixin=c0,k.negate=bf,k.nthArg=w3,k.omit=bO,k.omitBy=xO,k.once=_B,k.orderBy=iB,k.over=E3,k.overArgs=wB,k.overEvery=C3,k.overSome=b3,k.partial=r0,k.partialRight=F1,k.partition=aB,k.pick=TO,k.pickBy=Q1,k.property=r_,k.propertyOf=x3,k.pull=iD,k.pullAll=k1,k.pullAllBy=aD,k.pullAllWith=sD,k.pullAt=oD,k.range=T3,k.rangeRight=S3,k.rearg=EB,k.reject=lB,k.remove=lD,k.rest=CB,k.reverse=$p,k.sampleSize=cB,k.set=AO,k.setWith=kO,k.shuffle=fB,k.slice=uD,k.sortBy=pB,k.sortedUniq=mD,k.sortedUniqBy=yD,k.split=JO,k.spread=bB,k.tail=vD,k.take=_D,k.takeRight=wD,k.takeRightWhile=ED,k.takeWhile=CD,k.tap=MD,k.throttle=xB,k.thru=_f,k.toArray=K1,k.toPairs=X1,k.toPairsIn=J1,k.toPath=R3,k.toPlainObject=Y1,k.transform=IO,k.unary=TB,k.union=bD,k.unionBy=xD,k.unionWith=TD,k.uniq=SD,k.uniqBy=AD,k.uniqWith=kD,k.unset=NO,k.unzip=e0,k.unzipWith=I1,k.update=RO,k.updateWith=DO,k.values=Go,k.valuesIn=BO,k.without=ID,k.words=e_,k.wrap=SB,k.xor=ND,k.xorBy=RD,k.xorWith=DD,k.zip=BD,k.zipObject=OD,k.zipObjectDeep=LD,k.zipWith=PD,k.entries=X1,k.entriesIn=J1,k.extend=W1,k.extendWith=Sf,c0(k,k),k.add=B3,k.attempt=t_,k.camelCase=MO,k.capitalize=Z1,k.ceil=O3,k.clamp=OO,k.clone=kB,k.cloneDeep=NB,k.cloneDeepWith=RB,k.cloneWith=IB,k.conformsTo=DB,k.deburr=$1,k.defaultTo=d3,k.divide=L3,k.endsWith=UO,k.eq=vi,k.escape=FO,k.escapeRegExp=qO,k.every=WD,k.find=QD,k.findIndex=x1,k.findKey=lO,k.findLast=XD,k.findLastIndex=T1,k.findLastKey=uO,k.floor=P3,k.forEach=R1,k.forEachRight=D1,k.forIn=cO,k.forInRight=fO,k.forOwn=dO,k.forOwnRight=hO,k.get=a0,k.gt=BB,k.gte=OB,k.has=mO,k.hasIn=s0,k.head=A1,k.identity=An,k.includes=tB,k.indexOf=XR,k.inRange=LO,k.invoke=_O,k.isArguments=Ms,k.isArray=at,k.isArrayBuffer=LB,k.isArrayLike=Tn,k.isArrayLikeObject=Cr,k.isBoolean=PB,k.isBuffer=Za,k.isDate=MB,k.isElement=UB,k.isEmpty=FB,k.isEqual=qB,k.isEqualWith=GB,k.isError=n0,k.isFinite=VB,k.isFunction=wa,k.isInteger=q1,k.isLength=xf,k.isMap=G1,k.isMatch=HB,k.isMatchWith=KB,k.isNaN=jB,k.isNative=YB,k.isNil=zB,k.isNull=WB,k.isNumber=V1,k.isObject=gr,k.isObjectLike=_r,k.isPlainObject=pu,k.isRegExp=i0,k.isSafeInteger=QB,k.isSet=H1,k.isString=Tf,k.isSymbol=Mn,k.isTypedArray=qo,k.isUndefined=XB,k.isWeakMap=JB,k.isWeakSet=ZB,k.join=tD,k.kebabCase=GO,k.last=Zn,k.lastIndexOf=rD,k.lowerCase=VO,k.lowerFirst=HO,k.lt=$B,k.lte=eO,k.max=M3,k.maxBy=U3,k.mean=F3,k.meanBy=q3,k.min=G3,k.minBy=V3,k.stubArray=d0,k.stubFalse=h0,k.stubObject=A3,k.stubString=k3,k.stubTrue=I3,k.multiply=H3,k.nth=nD,k.noConflict=_3,k.noop=f0,k.now=Ef,k.pad=KO,k.padEnd=jO,k.padStart=YO,k.parseInt=WO,k.random=PO,k.reduce=sB,k.reduceRight=oB,k.repeat=zO,k.replace=QO,k.result=SO,k.round=K3,k.runInContext=W,k.sample=uB,k.size=dB,k.snakeCase=XO,k.some=hB,k.sortedIndex=cD,k.sortedIndexBy=fD,k.sortedIndexOf=dD,k.sortedLastIndex=hD,k.sortedLastIndexBy=pD,k.sortedLastIndexOf=gD,k.startCase=ZO,k.startsWith=$O,k.subtract=j3,k.sum=Y3,k.sumBy=W3,k.template=e3,k.times=N3,k.toFinite=Ea,k.toInteger=pt,k.toLength=j1,k.toLower=t3,k.toNumber=$n,k.toSafeInteger=tO,k.toString=Kt,k.toUpper=r3,k.trim=n3,k.trimEnd=i3,k.trimStart=a3,k.truncate=s3,k.unescape=o3,k.uniqueId=D3,k.upperCase=l3,k.upperFirst=o0,k.each=R1,k.eachRight=D1,k.first=A1,c0(k,function(){var o={};return Ui(k,function(c,p){zt.call(k.prototype,p)||(o[p]=c)}),o}(),{chain:!1}),k.VERSION=e,Wn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){k[o].placeholder=k}),Wn(["drop","take"],function(o,c){kt.prototype[o]=function(p){p=p===t?1:Br(pt(p),0);var v=this.__filtered__&&!c?new kt(this):this.clone();return v.__filtered__?v.__takeCount__=an(p,v.__takeCount__):v.__views__.push({size:an(p,Ze),type:o+(v.__dir__<0?"Right":"")}),v},kt.prototype[o+"Right"]=function(p){return this.reverse()[o](p).reverse()}}),Wn(["filter","map","takeWhile"],function(o,c){var p=c+1,v=p==we||p==Qe;kt.prototype[o]=function(C){var R=this.clone();return R.__iteratees__.push({iteratee:He(C,3),type:p}),R.__filtered__=R.__filtered__||v,R}}),Wn(["head","last"],function(o,c){var p="take"+(c?"Right":"");kt.prototype[o]=function(){return this[p](1).value()[0]}}),Wn(["initial","tail"],function(o,c){var p="drop"+(c?"":"Right");kt.prototype[o]=function(){return this.__filtered__?new kt(this):this[p](1)}}),kt.prototype.compact=function(){return this.filter(An)},kt.prototype.find=function(o){return this.filter(o).head()},kt.prototype.findLast=function(o){return this.reverse().find(o)},kt.prototype.invokeMap=wt(function(o,c){return typeof o=="function"?new kt(this):this.map(function(p){return lu(p,o,c)})}),kt.prototype.reject=function(o){return this.filter(bf(He(o)))},kt.prototype.slice=function(o,c){o=pt(o);var p=this;return p.__filtered__&&(o>0||c<0)?new kt(p):(o<0?p=p.takeRight(-o):o&&(p=p.drop(o)),c!==t&&(c=pt(c),p=c<0?p.dropRight(-c):p.take(c-o)),p)},kt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},kt.prototype.toArray=function(){return this.take(Ze)},Ui(kt.prototype,function(o,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),v=/^(?:head|last)$/.test(c),C=k[v?"take"+(c=="last"?"Right":""):c],R=v||/^find/.test(c);!C||(k.prototype[c]=function(){var M=this.__wrapped__,q=v?[1]:arguments,Q=M instanceof kt,pe=q[0],ge=Q||at(M),_e=function(bt){var Ot=C.apply(k,Ka([bt],q));return v&&Ae?Ot[0]:Ot};ge&&p&&typeof pe=="function"&&pe.length!=1&&(Q=ge=!1);var Ae=this.__chain__,Pe=!!this.__actions__.length,je=R&&!Ae,mt=Q&&!Pe;if(!R&&ge){M=mt?M:new kt(this);var Ye=o.apply(M,q);return Ye.__actions__.push({func:_f,args:[_e],thisArg:t}),new Qn(Ye,Ae)}return je&&mt?o.apply(this,q):(Ye=this.thru(_e),je?v?Ye.value()[0]:Ye.value():Ye)})}),Wn(["pop","push","shift","sort","splice","unshift"],function(o){var c=Kc[o],p=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",v=/^(?:pop|shift)$/.test(o);k.prototype[o]=function(){var C=arguments;if(v&&!this.__chain__){var R=this.value();return c.apply(at(R)?R:[],C)}return this[p](function(M){return c.apply(at(M)?M:[],C)})}}),Ui(kt.prototype,function(o,c){var p=k[c];if(p){var v=p.name+"";zt.call(Lo,v)||(Lo[v]=[]),Lo[v].push({name:c,func:p})}}),Lo[df(t,_).name]=[{name:"wrapper",func:t}],kt.prototype.clone=oN,kt.prototype.reverse=lN,kt.prototype.value=uN,k.prototype.at=UD,k.prototype.chain=FD,k.prototype.commit=qD,k.prototype.next=GD,k.prototype.plant=HD,k.prototype.reverse=KD,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=jD,k.prototype.first=k.prototype.head,tu&&(k.prototype[tu]=VD),k},Ya=qI();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ur._=Ya,define(function(){return Ya})):Is?((Is.exports=Ya)._=Ya,up._=Ya):Ur._=Ya}).call(Dl)});var Qm=de((WW,Th)=>{var OT,LT,PT,MT,UT,FT,qT,GT,VT,bh,zm,HT,KT,jT,Pl,YT,WT,zT,QT,XT,JT,ZT,$T,xh;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof Th=="object"&&typeof Th.exports=="object"?t(r(e,r(Th.exports))):t(r(e));function r(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,s){return n[a]=i?i(a,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])};OT=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function a(){this.constructor=n}n.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)},LT=Object.assign||function(n){for(var i,a=1,s=arguments.length;a<s;a++){i=arguments[a];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},PT=function(n,i){var a={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&i.indexOf(s)<0&&(a[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(n);l<s.length;l++)i.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(n,s[l])&&(a[s[l]]=n[s[l]]);return a},MT=function(n,i,a,s){var l=arguments.length,u=l<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,a):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,a,s);else for(var d=n.length-1;d>=0;d--)(f=n[d])&&(u=(l<3?f(u):l>3?f(i,a,u):f(i,a))||u);return l>3&&u&&Object.defineProperty(i,a,u),u},UT=function(n,i){return function(a,s){i(a,s,n)}},FT=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},qT=function(n,i,a,s){function l(u){return u instanceof a?u:new a(function(f){f(u)})}return new(a||(a=Promise))(function(u,f){function d(m){try{g(s.next(m))}catch(y){f(y)}}function h(m){try{g(s.throw(m))}catch(y){f(y)}}function g(m){m.done?u(m.value):l(m.value).then(d,h)}g((s=s.apply(n,i||[])).next())})},GT=function(n,i){var a={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,l,u,f;return f={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function d(g){return function(m){return h([g,m])}}function h(g){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,l&&(u=g[0]&2?l.return:g[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,g[1])).done)return u;switch(l=0,u&&(g=[g[0]&2,u.value]),g[0]){case 0:case 1:u=g;break;case 4:return a.label++,{value:g[1],done:!1};case 5:a.label++,l=g[1],g=[0];continue;case 7:g=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(g[0]===6||g[0]===2)){a=0;continue}if(g[0]===3&&(!u||g[1]>u[0]&&g[1]<u[3])){a.label=g[1];break}if(g[0]===6&&a.label<u[1]){a.label=u[1],u=g;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(g);break}u[2]&&a.ops.pop(),a.trys.pop();continue}g=i.call(n,a)}catch(m){g=[6,m],l=0}finally{s=u=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},VT=function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&xh(i,n,a)},xh=Object.create?function(n,i,a,s){s===void 0&&(s=a),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]},bh=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&n[i],s=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},zm=function(n,i){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var s=a.call(n),l,u=[],f;try{for(;(i===void 0||i-- >0)&&!(l=s.next()).done;)u.push(l.value)}catch(d){f={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(f)throw f.error}}return u},HT=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(zm(arguments[i]));return n},KT=function(){for(var n=0,i=0,a=arguments.length;i<a;i++)n+=arguments[i].length;for(var s=Array(n),l=0,i=0;i<a;i++)for(var u=arguments[i],f=0,d=u.length;f<d;f++,l++)s[l]=u[f];return s},jT=function(n,i){for(var a=0,s=i.length,l=n.length;a<s;a++,l++)n[l]=i[a];return n},Pl=function(n){return this instanceof Pl?(this.v=n,this):new Pl(n)},YT=function(n,i,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=a.apply(n,i||[]),l,u=[];return l={},f("next"),f("throw"),f("return"),l[Symbol.asyncIterator]=function(){return this},l;function f(_){s[_]&&(l[_]=function(w){return new Promise(function(E,S){u.push([_,w,E,S])>1||d(_,w)})})}function d(_,w){try{h(s[_](w))}catch(E){y(u[0][3],E)}}function h(_){_.value instanceof Pl?Promise.resolve(_.value.v).then(g,m):y(u[0][2],_)}function g(_){d("next",_)}function m(_){d("throw",_)}function y(_,w){_(w),u.shift(),u.length&&d(u[0][0],u[0][1])}},WT=function(n){var i,a;return i={},s("next"),s("throw",function(l){throw l}),s("return"),i[Symbol.iterator]=function(){return this},i;function s(l,u){i[l]=n[l]?function(f){return(a=!a)?{value:Pl(n[l](f)),done:l==="return"}:u?u(f):f}:u}},zT=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],a;return i?i.call(n):(n=typeof bh=="function"?bh(n):n[Symbol.iterator](),a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a);function s(u){a[u]=n[u]&&function(f){return new Promise(function(d,h){f=n[u](f),l(d,h,f.done,f.value)})}}function l(u,f,d,h){Promise.resolve(h).then(function(g){u({value:g,done:d})},f)}},QT=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var r=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};XT=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var a in n)a!=="default"&&Object.prototype.hasOwnProperty.call(n,a)&&xh(i,n,a);return r(i,n),i},JT=function(n){return n&&n.__esModule?n:{default:n}},ZT=function(n,i,a,s){if(a==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!s:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?s:a==="a"?s.call(n):s?s.value:i.get(n)},$T=function(n,i,a,s,l){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!l:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?l.call(n,a):l?l.value=a:i.set(n,a),a},t("__extends",OT),t("__assign",LT),t("__rest",PT),t("__decorate",MT),t("__param",UT),t("__metadata",FT),t("__awaiter",qT),t("__generator",GT),t("__exportStar",VT),t("__createBinding",xh),t("__values",bh),t("__read",zm),t("__spread",HT),t("__spreadArrays",KT),t("__spreadArray",jT),t("__await",Pl),t("__asyncGenerator",YT),t("__asyncDelegator",WT),t("__asyncValues",zT),t("__makeTemplateObject",QT),t("__importStar",XT),t("__importDefault",JT),t("__classPrivateFieldGet",ZT),t("__classPrivateFieldSet",$T)})});var TS=de((rQ,Ih)=>{var aS,sS,oS,lS,uS,cS,fS,dS,hS,kh,Jm,pS,gS,ql,mS,yS,vS,_S,wS,ES,CS,bS,xS;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof Ih=="object"&&typeof Ih.exports=="object"?t(r(e,r(Ih.exports))):t(r(e));function r(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,s){return n[a]=i?i(a,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])};aS=function(r,n){e(r,n);function i(){this.constructor=r}r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)},sS=Object.assign||function(r){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},oS=function(r,n){var i={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&n.indexOf(a)<0&&(i[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(r);s<a.length;s++)n.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(r,a[s])&&(i[a[s]]=r[a[s]]);return i},lS=function(r,n,i,a){var s=arguments.length,l=s<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,i):a,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,n,i,a);else for(var f=r.length-1;f>=0;f--)(u=r[f])&&(l=(s<3?u(l):s>3?u(n,i,l):u(n,i))||l);return s>3&&l&&Object.defineProperty(n,i,l),l},uS=function(r,n){return function(i,a){n(i,a,r)}},cS=function(r,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,n)},fS=function(r,n,i,a){function s(l){return l instanceof i?l:new i(function(u){u(l)})}return new(i||(i=Promise))(function(l,u){function f(g){try{h(a.next(g))}catch(m){u(m)}}function d(g){try{h(a.throw(g))}catch(m){u(m)}}function h(g){g.done?l(g.value):s(g.value).then(f,d)}h((a=a.apply(r,n||[])).next())})},dS=function(r,n){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,s,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(h){return function(g){return d([h,g])}}function d(h){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,s&&(l=h[0]&2?s.return:h[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,h[1])).done)return l;switch(s=0,l&&(h=[h[0]&2,l.value]),h[0]){case 0:case 1:l=h;break;case 4:return i.label++,{value:h[1],done:!1};case 5:i.label++,s=h[1],h=[0];continue;case 7:h=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(h[0]===6||h[0]===2)){i=0;continue}if(h[0]===3&&(!l||h[1]>l[0]&&h[1]<l[3])){i.label=h[1];break}if(h[0]===6&&i.label<l[1]){i.label=l[1],l=h;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(h);break}l[2]&&i.ops.pop(),i.trys.pop();continue}h=n.call(r,i)}catch(g){h=[6,g],s=0}finally{a=l=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},xS=function(r,n,i,a){a===void 0&&(a=i),r[a]=n[i]},hS=function(r,n){for(var i in r)i!=="default"&&!n.hasOwnProperty(i)&&(n[i]=r[i])},kh=function(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],a=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},Jm=function(r,n){var i=typeof Symbol=="function"&&r[Symbol.iterator];if(!i)return r;var a=i.call(r),s,l=[],u;try{for(;(n===void 0||n-- >0)&&!(s=a.next()).done;)l.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return l},pS=function(){for(var r=[],n=0;n<arguments.length;n++)r=r.concat(Jm(arguments[n]));return r},gS=function(){for(var r=0,n=0,i=arguments.length;n<i;n++)r+=arguments[n].length;for(var a=Array(r),s=0,n=0;n<i;n++)for(var l=arguments[n],u=0,f=l.length;u<f;u++,s++)a[s]=l[u];return a},ql=function(r){return this instanceof ql?(this.v=r,this):new ql(r)},mS=function(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(r,n||[]),s,l=[];return s={},u("next"),u("throw"),u("return"),s[Symbol.asyncIterator]=function(){return this},s;function u(y){a[y]&&(s[y]=function(_){return new Promise(function(w,E){l.push([y,_,w,E])>1||f(y,_)})})}function f(y,_){try{d(a[y](_))}catch(w){m(l[0][3],w)}}function d(y){y.value instanceof ql?Promise.resolve(y.value.v).then(h,g):m(l[0][2],y)}function h(y){f("next",y)}function g(y){f("throw",y)}function m(y,_){y(_),l.shift(),l.length&&f(l[0][0],l[0][1])}},yS=function(r){var n,i;return n={},a("next"),a("throw",function(s){throw s}),a("return"),n[Symbol.iterator]=function(){return this},n;function a(s,l){n[s]=r[s]?function(u){return(i=!i)?{value:ql(r[s](u)),done:s==="return"}:l?l(u):u}:l}},vS=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],i;return n?n.call(r):(r=typeof kh=="function"?kh(r):r[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(l){i[l]=r[l]&&function(u){return new Promise(function(f,d){u=r[l](u),s(f,d,u.done,u.value)})}}function s(l,u,f,d){Promise.resolve(d).then(function(h){l({value:h,done:f})},u)}},_S=function(r,n){return Object.defineProperty?Object.defineProperty(r,"raw",{value:n}):r.raw=n,r},wS=function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var i in r)Object.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n.default=r,n},ES=function(r){return r&&r.__esModule?r:{default:r}},CS=function(r,n){if(!n.has(r))throw new TypeError("attempted to get private field on non-instance");return n.get(r)},bS=function(r,n,i){if(!n.has(r))throw new TypeError("attempted to set private field on non-instance");return n.set(r,i),i},t("__extends",aS),t("__assign",sS),t("__rest",oS),t("__decorate",lS),t("__param",uS),t("__metadata",cS),t("__awaiter",fS),t("__generator",dS),t("__exportStar",hS),t("__createBinding",xS),t("__values",kh),t("__read",Jm),t("__spread",pS),t("__spreadArrays",gS),t("__await",ql),t("__asyncGenerator",mS),t("__asyncDelegator",yS),t("__asyncValues",vS),t("__makeTemplateObject",_S),t("__importStar",wS),t("__importDefault",ES),t("__classPrivateFieldGet",CS),t("__classPrivateFieldSet",bS)})});var EA=de(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.isDate=bs.isComparable=bs.isIterable=void 0;bs.isIterable=t=>!(t==null||t[Symbol.iterator]==null);bs.isComparable=t=>{let e=Object.prototype.toString,r=t;return r.compare!=null&&e.call(r.compare).endsWith("Function]")};bs.isDate=t=>Object.prototype.toString.call(t).endsWith("Date]")});var bA=de(CA=>{"use strict";Object.defineProperty(CA,"__esModule",{value:!0})});var xA=de(Oh=>{"use strict";Object.defineProperty(Oh,"__esModule",{value:!0});var iG=Qm(),sy=EA(),aG=(t,e)=>t-e,sG=(t,e)=>Number(t-e),oG=(t,e)=>t.localeCompare(e),lG=(t,e)=>t.getTime()-e.getTime(),Wl={number:aG,string:oG,Date:lG,bigInt:sG,none:()=>0},uG=t=>{if(typeof t=="number")return Wl.number;if(typeof t=="string")return Wl.string;if(typeof t=="bigint")return Wl.bigInt;if(sy.isDate(t))return Wl.Date;if(sy.isComparable(t))return(e,r)=>e.compare(r);throw new Error("Cannot sort keys in this map. You have to specify compareFn if the type of key in this map is not number, string, or Date.")},bo=class extends Map{constructor(e,r){super();this.specifiedCompareFn=!1,this.isCompareFn=n=>typeof n=="function",this.compareFn=Wl.none,this.sortedKeys=[],sy.isIterable(e)&&this._constructor(e,r),this.isCompareFn(e)&&this._constructor(null,e),e==null&&this._constructor(null,r)}get comparator(){return this.compareFn}compare(e,r){return Math.sign(this.compareFn(e,r))}_constructor(e,r){if(this.compareFn=r==null?Wl.none:r,this.specifiedCompareFn=r!=null,e!=null)for(let n of e)this.set(...n)}static fromMap(e,r){let n=new bo(r);return n.setAll(e),n}duplicate(){return bo.fromMap(this,this.compareFn)}toMap(){let e=new Map,r=Array.from(super.entries());return r.sort((n,i)=>this.compareFn(n[0],i[0])),r.forEach(([n,i])=>{e.set(n,i)}),e}reverseKeys(){return[...this.sortedKeys].reverse().values()}get(e){let r=this.sortedKeys.find(n=>this.comparator(n,e)===0);if(r!=null)return super.get(r)}set(e,r){this.sortedKeys.length===0&&!this.specifiedCompareFn&&(this.compareFn=uG(e),this.specifiedCompareFn=!0);let n=this.sortedKeys.find(i=>this.compareFn(i,e)===0);return n==null?(this.sortedKeys.push(e),super.set(e,r)):super.set(n,r),this.sortedKeys.sort(this.compareFn),this}setAll(e){return e.forEach((r,n)=>{this.set(n,r)}),this}delete(e){return super.delete(e)?(this.sortedKeys=this.sortedKeys.filter(r=>this.compare(r,e)!==0),!0):!1}clear(){super.clear(),this.sortedKeys=[]}keys(){return this.sortedKeys.values()}values(){return this.sortedKeys.map(e=>super.get(e)).values()}entries(){return this.toMap().entries()}firstEntry(){let e=this.firstKey();if(e==null)return;let r=this.get(e);return r===void 0?void 0:[e,r]}firstKey(){return this.sortedKeys[0]}lastEntry(){let e=this.lastKey();if(e==null)return;let r=this.get(e);return r===void 0?void 0:[e,r]}lastKey(){return[...this.sortedKeys].reverse()[0]}shiftEntry(){let e=this.firstEntry();if(e!=null)return this.delete(e[0]),e}popEntry(){let e=this.lastEntry();if(e!=null)return this.delete(e[0]),e}floorEntry(e){let r=this.floorKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}floorKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)<=0).reverse()[0]}ceilingEntry(e){let r=this.ceilingKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}ceilingKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)>=0)[0]}lowerEntry(e){let r=this.lowerKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}lowerKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)<0).reverse()[0]}higherEntry(e){let r=this.higherKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}higherKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)>0)[0]}splitLower(e,r=!0){let n=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],e)<0;return r?a||this.compare(i[0],e)===0:a});return new bo(n,this.compareFn)}splitHigher(e,r=!0){let n=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],e)>0;return r?a||this.compare(i[0],e)===0:a});return new bo(n,this.compareFn)}forEach(e,r){Array.from(this.entries()).forEach(([n,i])=>{e(i,n,this)},r)}};Oh.default=bo;iG.__exportStar(bA(),Oh)});tL(exports,{default:()=>$e});var $l=yt(require("obsidian"));var p0=yt(require("obsidian")),Af=new Map;function ot(t,e=!1){let r=window.moment();Af.has(t)?(Af.get(t).isBefore(r)||e)&&(new p0.Notice(t),Af.set(t,r.add(1,"minute"))):(console.log(`[Google Calendar] ${t}`),new p0.Notice(t),Af.set(t,r.add(0,"minute")))}var Ut=yt(require("obsidian"));var kf=()=>{var t;return(t=window.localStorage.getItem("googleCalendarAccessToken"))!=null?t:""},ba=()=>{var t;return(t=window.localStorage.getItem("googleCalendarRefreshToken"))!=null?t:""},If=()=>{var e;let t=(e=window.localStorage.getItem("googleCalendarExpirationTime"))!=null?e:"0";return parseInt(t,10)},Us=()=>{var t;return(t=window.localStorage.getItem("googleCalendarUserId"))!=null?t:""},$a=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarAccessToken",t)},Nf=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarUserId",t)},mu=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarRefreshToken",t)},es=t=>{isNaN(t)||window.localStorage.setItem("googleCalendarExpirationTime",t+"")};var sh=yt(require("obsidian"));var l_=yt(require("obsidian")),Xr=(t,e,r,n=!1)=>P(void 0,null,function*(){let i=$e.getInstance(),a={"Content-Type":"application/json"};if(n==!1){let l=yield u_(i);if(!l)return;a.Authorization="Bearer "+l}if(i.settings.debugMode){console.log(`New Request ${e}:${t}`);let l=pn({},a);l.Authorization&&(l.Authorization=l.Authorization.substring(0,15)+"..."),console.log({body:r,headers:l});let u=yield fetch(t,{method:e,body:r?JSON.stringify(r):null,headers:a});return u.status>=400?void 0:e.toLowerCase()=="delete"?{status:"success"}:yield u.json()}let s=yield(0,l_.requestUrl)({method:e,url:t,body:r?JSON.stringify(r):null,headers:a});if(!(s.status>=400))return e.toLowerCase()=="delete"?{status:"success"}:yield s.json});var _m=42813;function X8(){return!(!kf()||kf()==""||!If()||isNaN(If())||If()<+new Date)}var J8=t=>P(void 0,null,function*(){let e={client_id:t.settings.googleClientId,client_secret:t.settings.googleClientSecret.trim(),grant_type:"refresh_token",refresh_token:ba()},r=yield Xr("https://oauth2.googleapis.com/token","POST",e,!0);return r?($a(r.access_token),es(+new Date+r.expires_in*1e3),!0):(ot("Error while refreshing authentication"),!1)}),Dx=t=>P(void 0,null,function*(){let e={uid:Us()},r=yield Xr(`${t.settings.googleOAuthServer}/api/google/refresh`,"POST",e,!0);return r?($a(r.access_token),es(+new Date+r.expires_in*1e3),!0):(ot("Error while refreshing authentication"),!1)});function u_(t){return P(this,null,function*(){if(!Yt())return"";let e=!1;return X8()==!1&&(ba()!=""||Us()!="")&&(t.settings.useCustomClient?(e=yield J8(t),e==!1&&(e=yield Dx(t))):e=yield Dx(t)),kf()})}function Bx(){return P(this,null,function*(){let t=$e.getInstance();if(sh.Platform.isDesktop){if(!Ox())return;let{OAuth2Client:e}=Ix(),r=require("http"),n=require("url"),i=Rx(),a=new e(t.settings.googleClientId,t.settings.googleClientSecret.trim(),`http://127.0.0.1:${_m}/callback`),s=a.generateAuthUrl({scope:["https://www.googleapis.com/auth/calendar"],access_type:"offline",prompt:"consent"}),l=r.createServer((u,f)=>P(this,null,function*(){try{if(u.url.indexOf("/callback")>-1){let h=new n.URL(u.url,`http://localhost:${_m}`).searchParams.get("code");f.end("Authentication successful! Please return to obsidian."),l.destroy();let g=yield a.getToken(h);mu(g.tokens.refresh_token),$a(g.tokens.access_token),es(g.tokens.expiry_date),console.info("Tokens acquired."),t.settingsTab.display()}}catch(d){console.log("Auth failed")}})).listen(_m,()=>P(this,null,function*(){window.open(s)}));i(l)}else new sh.Notice("Can't use OAuth on this device")})}var wm=new Map,Em=new Map;function Lx(){return P(this,null,function*(){if(!Yt())return;let t=yield Xr("https://www.googleapis.com/calendar/v3/colors","GET",null);if(!t){ot("Error fetching color data from google");return}Object.keys(t.calendar).forEach(e=>{wm.set(e,t.calendar[e].background)}),Object.keys(t.event).forEach(e=>{Em.set(e,t.event[e].background)})})}function Qu(t){return t.colorId&&Em.has(t.colorId)?Em.get(t.colorId):t.parent.colorId&&wm.has(t.parent.colorId)?wm.get(t.parent.colorId):"#a4bdfc"}var Cm=[];function Px(t,e){return e.filter(n=>!t.settings.calendarBlackList.some(i=>i[0]==n.id))}function Or(){return P(this,null,function*(){if(!Yt())return[];let t=$e.getInstance();if(Cm.length)return Px(t,Cm);yield Lx();let e=yield Xr("https://www.googleapis.com/calendar/v3/users/me/calendarList","GET",null);return e?(Cm=e.items,Px(t,e.items)):(ot("Could not list Google Calendars"),[])})}var Ni=yt(require("obsidian"));var iT=yt(require("obsidian"));var Er="top",Lr="bottom",Ir="right",xr="left",oh="auto",ms=[Er,Lr,Ir,xr],Da="start",no="end",Mx="clippingParents",lh="viewport",Tl="popper",Ux="reference",bm=ms.reduce(function(t,e){return t.concat([e+"-"+Da,e+"-"+no])},[]),uh=[].concat(ms,[oh]).reduce(function(t,e){return t.concat([e,e+"-"+Da,e+"-"+no])},[]),Z8="beforeRead",$8="read",eF="afterRead",tF="beforeMain",rF="main",nF="afterMain",iF="beforeWrite",aF="write",sF="afterWrite",Fx=[Z8,$8,eF,tF,rF,nF,iF,aF,sF];function jr(t){return t?(t.nodeName||"").toLowerCase():null}function mr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function oi(t){var e=mr(t).Element;return t instanceof e||t instanceof Element}function Pr(t){var e=mr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Sl(t){if(typeof ShadowRoot=="undefined")return!1;var e=mr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function oF(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},i=e.attributes[r]||{},a=e.elements[r];!Pr(a)||!jr(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(s){var l=i[s];l===!1?a.removeAttribute(s):a.setAttribute(s,l===!0?"":l)}))})}function lF(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],a=e.attributes[n]||{},s=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),l=s.reduce(function(u,f){return u[f]="",u},{});!Pr(i)||!jr(i)||(Object.assign(i.style,l),Object.keys(a).forEach(function(u){i.removeAttribute(u)}))})}}var qx={name:"applyStyles",enabled:!0,phase:"write",fn:oF,effect:lF,requires:["computeStyles"]};function Yr(t){return t.split("-")[0]}var Ai=Math.max,io=Math.min,Ba=Math.round;function Al(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Xu(){return!/^((?!chrome|android).)*safari/i.test(Al())}function li(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=t.getBoundingClientRect(),i=1,a=1;e&&Pr(t)&&(i=t.offsetWidth>0&&Ba(n.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Ba(n.height)/t.offsetHeight||1);var s=oi(t)?mr(t):window,l=s.visualViewport,u=!Xu()&&r,f=(n.left+(u&&l?l.offsetLeft:0))/i,d=(n.top+(u&&l?l.offsetTop:0))/a,h=n.width/i,g=n.height/a;return{width:h,height:g,top:d,right:f+h,bottom:d+g,left:f,x:f,y:d}}function ao(t){var e=li(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function Ju(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&Sl(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function _n(t){return mr(t).getComputedStyle(t)}function xm(t){return["table","td","th"].indexOf(jr(t))>=0}function en(t){return((oi(t)?t.ownerDocument:t.document)||window.document).documentElement}function Oa(t){return jr(t)==="html"?t:t.assignedSlot||t.parentNode||(Sl(t)?t.host:null)||en(t)}function Gx(t){return!Pr(t)||_n(t).position==="fixed"?null:t.offsetParent}function uF(t){var e=/firefox/i.test(Al()),r=/Trident/i.test(Al());if(r&&Pr(t)){var n=_n(t);if(n.position==="fixed")return null}var i=Oa(t);for(Sl(i)&&(i=i.host);Pr(i)&&["html","body"].indexOf(jr(i))<0;){var a=_n(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function ki(t){for(var e=mr(t),r=Gx(t);r&&xm(r)&&_n(r).position==="static";)r=Gx(r);return r&&(jr(r)==="html"||jr(r)==="body"&&_n(r).position==="static")?e:r||uF(t)||e}function so(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function oo(t,e,r){return Ai(t,io(e,r))}function Vx(t,e,r){var n=oo(t,e,r);return n>r?r:n}function Zu(){return{top:0,right:0,bottom:0,left:0}}function $u(t){return Object.assign({},Zu(),t)}function ec(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var cF=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,$u(typeof e!="number"?e:ec(e,ms))};function fF(t){var e,r=t.state,n=t.name,i=t.options,a=r.elements.arrow,s=r.modifiersData.popperOffsets,l=Yr(r.placement),u=so(l),f=[xr,Ir].indexOf(l)>=0,d=f?"height":"width";if(!(!a||!s)){var h=cF(i.padding,r),g=ao(a),m=u==="y"?Er:xr,y=u==="y"?Lr:Ir,_=r.rects.reference[d]+r.rects.reference[u]-s[u]-r.rects.popper[d],w=s[u]-r.rects.reference[u],E=ki(a),S=E?u==="y"?E.clientHeight||0:E.clientWidth||0:0,T=_/2-w/2,L=h[m],I=S-g[d]-h[y],B=S/2-g[d]/2+T,z=oo(L,B,I),F=u;r.modifiersData[n]=(e={},e[F]=z,e.centerOffset=z-B,e)}}function dF(t){var e=t.state,r=t.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!Ju(e.elements.popper,i)||(e.elements.arrow=i))}var Hx={name:"arrow",enabled:!0,phase:"main",fn:fF,effect:dF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ui(t){return t.split("-")[1]}var hF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function pF(t){var e=t.x,r=t.y,n=window,i=n.devicePixelRatio||1;return{x:Ba(e*i)/i||0,y:Ba(r*i)/i||0}}function Kx(t){var e,r=t.popper,n=t.popperRect,i=t.placement,a=t.variation,s=t.offsets,l=t.position,u=t.gpuAcceleration,f=t.adaptive,d=t.roundOffsets,h=t.isFixed,g=s.x,m=g===void 0?0:g,y=s.y,_=y===void 0?0:y,w=typeof d=="function"?d({x:m,y:_}):{x:m,y:_};m=w.x,_=w.y;var E=s.hasOwnProperty("x"),S=s.hasOwnProperty("y"),T=xr,L=Er,I=window;if(f){var B=ki(r),z="clientHeight",F="clientWidth";if(B===mr(r)&&(B=en(r),_n(B).position!=="static"&&l==="absolute"&&(z="scrollHeight",F="scrollWidth")),B=B,i===Er||(i===xr||i===Ir)&&a===no){L=Lr;var G=h&&B===I&&I.visualViewport?I.visualViewport.height:B[z];_-=G-n.height,_*=u?1:-1}if(i===xr||(i===Er||i===Lr)&&a===no){T=Ir;var te=h&&B===I&&I.visualViewport?I.visualViewport.width:B[F];m-=te-n.width,m*=u?1:-1}}var ae=Object.assign({position:l},f&&hF),we=d===!0?pF({x:m,y:_}):{x:m,y:_};if(m=we.x,_=we.y,u){var Se;return Object.assign({},ae,(Se={},Se[L]=S?"0":"",Se[T]=E?"0":"",Se.transform=(I.devicePixelRatio||1)<=1?"translate("+m+"px, "+_+"px)":"translate3d("+m+"px, "+_+"px, 0)",Se))}return Object.assign({},ae,(e={},e[L]=S?_+"px":"",e[T]=E?m+"px":"",e.transform="",e))}function gF(t){var e=t.state,r=t.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,s=a===void 0?!0:a,l=r.roundOffsets,u=l===void 0?!0:l;if(!1)var f;var d={placement:Yr(e.placement),variation:ui(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Kx(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Kx(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var jx={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:gF,data:{}};var ch={passive:!0};function mF(t){var e=t.state,r=t.instance,n=t.options,i=n.scroll,a=i===void 0?!0:i,s=n.resize,l=s===void 0?!0:s,u=mr(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&f.forEach(function(d){d.addEventListener("scroll",r.update,ch)}),l&&u.addEventListener("resize",r.update,ch),function(){a&&f.forEach(function(d){d.removeEventListener("scroll",r.update,ch)}),l&&u.removeEventListener("resize",r.update,ch)}}var Yx={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:mF,data:{}};var yF={left:"right",right:"left",bottom:"top",top:"bottom"};function kl(t){return t.replace(/left|right|bottom|top/g,function(e){return yF[e]})}var vF={start:"end",end:"start"};function fh(t){return t.replace(/start|end/g,function(e){return vF[e]})}function lo(t){var e=mr(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function uo(t){return li(en(t)).left+lo(t).scrollLeft}function Tm(t,e){var r=mr(t),n=en(t),i=r.visualViewport,a=n.clientWidth,s=n.clientHeight,l=0,u=0;if(i){a=i.width,s=i.height;var f=Xu();(f||!f&&e==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:a,height:s,x:l+uo(t),y:u}}function Sm(t){var e,r=en(t),n=lo(t),i=(e=t.ownerDocument)==null?void 0:e.body,a=Ai(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Ai(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-n.scrollLeft+uo(t),u=-n.scrollTop;return _n(i||r).direction==="rtl"&&(l+=Ai(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:l,y:u}}function co(t){var e=_n(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function dh(t){return["html","body","#document"].indexOf(jr(t))>=0?t.ownerDocument.body:Pr(t)&&co(t)?t:dh(Oa(t))}function ys(t,e){var r;e===void 0&&(e=[]);var n=dh(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),a=mr(n),s=i?[a].concat(a.visualViewport||[],co(n)?n:[]):n,l=e.concat(s);return i?l:l.concat(ys(Oa(s)))}function Il(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function _F(t,e){var r=li(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function Wx(t,e,r){return e===lh?Il(Tm(t,r)):oi(e)?_F(e,r):Il(Sm(en(t)))}function wF(t){var e=ys(Oa(t)),r=["absolute","fixed"].indexOf(_n(t).position)>=0,n=r&&Pr(t)?ki(t):t;return oi(n)?e.filter(function(i){return oi(i)&&Ju(i,n)&&jr(i)!=="body"}):[]}function Am(t,e,r,n){var i=e==="clippingParents"?wF(t):[].concat(e),a=[].concat(i,[r]),s=a[0],l=a.reduce(function(u,f){var d=Wx(t,f,n);return u.top=Ai(d.top,u.top),u.right=io(d.right,u.right),u.bottom=io(d.bottom,u.bottom),u.left=Ai(d.left,u.left),u},Wx(t,s,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function tc(t){var e=t.reference,r=t.element,n=t.placement,i=n?Yr(n):null,a=n?ui(n):null,s=e.x+e.width/2-r.width/2,l=e.y+e.height/2-r.height/2,u;switch(i){case Er:u={x:s,y:e.y-r.height};break;case Lr:u={x:s,y:e.y+e.height};break;case Ir:u={x:e.x+e.width,y:l};break;case xr:u={x:e.x-r.width,y:l};break;default:u={x:e.x,y:e.y}}var f=i?so(i):null;if(f!=null){var d=f==="y"?"height":"width";switch(a){case Da:u[f]=u[f]-(e[d]/2-r[d]/2);break;case no:u[f]=u[f]+(e[d]/2-r[d]/2);break;default:}}return u}function Ii(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=n===void 0?t.placement:n,a=r.strategy,s=a===void 0?t.strategy:a,l=r.boundary,u=l===void 0?Mx:l,f=r.rootBoundary,d=f===void 0?lh:f,h=r.elementContext,g=h===void 0?Tl:h,m=r.altBoundary,y=m===void 0?!1:m,_=r.padding,w=_===void 0?0:_,E=$u(typeof w!="number"?w:ec(w,ms)),S=g===Tl?Ux:Tl,T=t.rects.popper,L=t.elements[y?S:g],I=Am(oi(L)?L:L.contextElement||en(t.elements.popper),u,d,s),B=li(t.elements.reference),z=tc({reference:B,element:T,strategy:"absolute",placement:i}),F=Il(Object.assign({},T,z)),G=g===Tl?F:B,te={top:I.top-G.top+E.top,bottom:G.bottom-I.bottom+E.bottom,left:I.left-G.left+E.left,right:G.right-I.right+E.right},ae=t.modifiersData.offset;if(g===Tl&&ae){var we=ae[i];Object.keys(te).forEach(function(Se){var Qe=[Ir,Lr].indexOf(Se)>=0?1:-1,Re=[Er,Lr].indexOf(Se)>=0?"y":"x";te[Se]+=we[Re]*Qe})}return te}function km(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=r.boundary,a=r.rootBoundary,s=r.padding,l=r.flipVariations,u=r.allowedAutoPlacements,f=u===void 0?uh:u,d=ui(n),h=d?l?bm:bm.filter(function(y){return ui(y)===d}):ms,g=h.filter(function(y){return f.indexOf(y)>=0});g.length===0&&(g=h);var m=g.reduce(function(y,_){return y[_]=Ii(t,{placement:_,boundary:i,rootBoundary:a,padding:s})[Yr(_)],y},{});return Object.keys(m).sort(function(y,_){return m[y]-m[_]})}function EF(t){if(Yr(t)===oh)return[];var e=kl(t);return[fh(t),e,fh(e)]}function CF(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,l=s===void 0?!0:s,u=r.fallbackPlacements,f=r.padding,d=r.boundary,h=r.rootBoundary,g=r.altBoundary,m=r.flipVariations,y=m===void 0?!0:m,_=r.allowedAutoPlacements,w=e.options.placement,E=Yr(w),S=E===w,T=u||(S||!y?[kl(w)]:EF(w)),L=[w].concat(T).reduce(function(Rt,Dt){return Rt.concat(Yr(Dt)===oh?km(e,{placement:Dt,boundary:d,rootBoundary:h,padding:f,flipVariations:y,allowedAutoPlacements:_}):Dt)},[]),I=e.rects.reference,B=e.rects.popper,z=new Map,F=!0,G=L[0],te=0;te<L.length;te++){var ae=L[te],we=Yr(ae),Se=ui(ae)===Da,Qe=[Er,Lr].indexOf(we)>=0,Re=Qe?"width":"height",me=Ii(e,{placement:ae,boundary:d,rootBoundary:h,altBoundary:g,padding:f}),re=Qe?Se?Ir:xr:Se?Lr:Er;I[Re]>B[Re]&&(re=kl(re));var Fe=kl(re),Ze=[];if(a&&Ze.push(me[we]<=0),l&&Ze.push(me[re]<=0,me[Fe]<=0),Ze.every(function(Rt){return Rt})){G=ae,F=!1;break}z.set(ae,Ze)}if(F)for(var ct=y?3:1,Je=function(Dt){var rt=L.find(function(nt){var dt=z.get(nt);if(dt)return dt.slice(0,Dt).every(function(N){return N})});if(rt)return G=rt,"break"},ft=ct;ft>0;ft--){var le=Je(ft);if(le==="break")break}e.placement!==G&&(e.modifiersData[n]._skip=!0,e.placement=G,e.reset=!0)}}var zx={name:"flip",enabled:!0,phase:"main",fn:CF,requiresIfExists:["offset"],data:{_skip:!1}};function Qx(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function Xx(t){return[Er,Ir,Lr,xr].some(function(e){return t[e]>=0})}function bF(t){var e=t.state,r=t.name,n=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,s=Ii(e,{elementContext:"reference"}),l=Ii(e,{altBoundary:!0}),u=Qx(s,n),f=Qx(l,i,a),d=Xx(u),h=Xx(f);e.modifiersData[r]={referenceClippingOffsets:u,popperEscapeOffsets:f,isReferenceHidden:d,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}var Jx={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:bF};function xF(t,e,r){var n=Yr(t),i=[xr,Er].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,s=a[0],l=a[1];return s=s||0,l=(l||0)*i,[xr,Ir].indexOf(n)>=0?{x:l,y:s}:{x:s,y:l}}function TF(t){var e=t.state,r=t.options,n=t.name,i=r.offset,a=i===void 0?[0,0]:i,s=uh.reduce(function(d,h){return d[h]=xF(h,e.rects,a),d},{}),l=s[e.placement],u=l.x,f=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=f),e.modifiersData[n]=s}var Zx={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:TF};function SF(t){var e=t.state,r=t.name;e.modifiersData[r]=tc({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var $x={name:"popperOffsets",enabled:!0,phase:"read",fn:SF,data:{}};function Im(t){return t==="x"?"y":"x"}function AF(t){var e=t.state,r=t.options,n=t.name,i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,l=s===void 0?!1:s,u=r.boundary,f=r.rootBoundary,d=r.altBoundary,h=r.padding,g=r.tether,m=g===void 0?!0:g,y=r.tetherOffset,_=y===void 0?0:y,w=Ii(e,{boundary:u,rootBoundary:f,padding:h,altBoundary:d}),E=Yr(e.placement),S=ui(e.placement),T=!S,L=so(E),I=Im(L),B=e.modifiersData.popperOffsets,z=e.rects.reference,F=e.rects.popper,G=typeof _=="function"?_(Object.assign({},e.rects,{placement:e.placement})):_,te=typeof G=="number"?{mainAxis:G,altAxis:G}:Object.assign({mainAxis:0,altAxis:0},G),ae=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,we={x:0,y:0};if(!!B){if(a){var Se,Qe=L==="y"?Er:xr,Re=L==="y"?Lr:Ir,me=L==="y"?"height":"width",re=B[L],Fe=re+w[Qe],Ze=re-w[Re],ct=m?-F[me]/2:0,Je=S===Da?z[me]:F[me],ft=S===Da?-F[me]:-z[me],le=e.elements.arrow,Rt=m&&le?ao(le):{width:0,height:0},Dt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Zu(),rt=Dt[Qe],nt=Dt[Re],dt=oo(0,z[me],Rt[me]),N=T?z[me]/2-ct-dt-rt-te.mainAxis:Je-dt-rt-te.mainAxis,D=T?-z[me]/2+ct+dt+nt+te.mainAxis:ft+dt+nt+te.mainAxis,O=e.elements.arrow&&ki(e.elements.arrow),j=O?L==="y"?O.clientTop||0:O.clientLeft||0:0,H=(Se=ae==null?void 0:ae[L])!=null?Se:0,X=re+N-H-j,Z=re+D-H,Y=oo(m?io(Fe,X):Fe,re,m?Ai(Ze,Z):Ze);B[L]=Y,we[L]=Y-re}if(l){var J,ne=L==="x"?Er:xr,$=L==="x"?Lr:Ir,he=B[I],Oe=I==="y"?"height":"width",Ue=he+w[ne],ht=he-w[$],Qt=[Er,xr].indexOf(E)!==-1,Xt=(J=ae==null?void 0:ae[I])!=null?J:0,it=Qt?Ue:he-z[Oe]-F[Oe]-Xt+te.altAxis,Bt=Qt?he+z[Oe]+F[Oe]-Xt-te.altAxis:ht,pr=m&&Qt?Vx(it,he,Bt):oo(m?it:Ue,he,m?Bt:ht);B[I]=pr,we[I]=pr-he}e.modifiersData[n]=we}}var eT={name:"preventOverflow",enabled:!0,phase:"main",fn:AF,requiresIfExists:["offset"]};function Nm(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Rm(t){return t===mr(t)||!Pr(t)?lo(t):Nm(t)}function kF(t){var e=t.getBoundingClientRect(),r=Ba(e.width)/t.offsetWidth||1,n=Ba(e.height)/t.offsetHeight||1;return r!==1||n!==1}function Dm(t,e,r){r===void 0&&(r=!1);var n=Pr(e),i=Pr(e)&&kF(e),a=en(e),s=li(t,i,r),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(n||!n&&!r)&&((jr(e)!=="body"||co(a))&&(l=Rm(e)),Pr(e)?(u=li(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=uo(a))),{x:s.left+l.scrollLeft-u.x,y:s.top+l.scrollTop-u.y,width:s.width,height:s.height}}function IF(t){var e=new Map,r=new Set,n=[];t.forEach(function(a){e.set(a.name,a)});function i(a){r.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(l){if(!r.has(l)){var u=e.get(l);u&&i(u)}}),n.push(a)}return t.forEach(function(a){r.has(a.name)||i(a)}),n}function Bm(t){var e=IF(t);return Fx.reduce(function(r,n){return r.concat(e.filter(function(i){return i.phase===n}))},[])}function Om(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function Lm(t){var e=t.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var tT={placement:"bottom",modifiers:[],strategy:"absolute"};function rT(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function nT(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,i=e.defaultOptions,a=i===void 0?tT:i;return function(l,u,f){f===void 0&&(f=a);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},tT,a),modifiersData:{},elements:{reference:l,popper:u},attributes:{},styles:{}},h=[],g=!1,m={state:d,setOptions:function(E){var S=typeof E=="function"?E(d.options):E;_(),d.options=Object.assign({},a,d.options,S),d.scrollParents={reference:oi(l)?ys(l):l.contextElement?ys(l.contextElement):[],popper:ys(u)};var T=Bm(Lm([].concat(n,d.options.modifiers)));if(d.orderedModifiers=T.filter(function(ae){return ae.enabled}),!1){var L;if(getBasePlacement(d.options.placement)===auto)var I;var B,z,F,G,te}return y(),m.update()},forceUpdate:function(){if(!g){var E=d.elements,S=E.reference,T=E.popper;if(!!rT(S,T)){d.rects={reference:Dm(S,ki(T),d.options.strategy==="fixed"),popper:ao(T)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(ae){return d.modifiersData[ae.name]=Object.assign({},ae.data)});for(var L=0,I=0;I<d.orderedModifiers.length;I++){if(d.reset===!0){d.reset=!1,I=-1;continue}var B=d.orderedModifiers[I],z=B.fn,F=B.options,G=F===void 0?{}:F,te=B.name;typeof z=="function"&&(d=z({state:d,options:G,name:te,instance:m})||d)}}}},update:Om(function(){return new Promise(function(w){m.forceUpdate(),w(d)})}),destroy:function(){_(),g=!0}};if(!rT(l,u))return m;m.setOptions(f).then(function(w){!g&&f.onFirstUpdate&&f.onFirstUpdate(w)});function y(){d.orderedModifiers.forEach(function(w){var E=w.name,S=w.options,T=S===void 0?{}:S,L=w.effect;if(typeof L=="function"){var I=L({state:d,name:E,instance:m,options:T}),B=function(){};h.push(I||B)}})}function _(){h.forEach(function(w){return w()}),h=[]}return m}}var NF=[Yx,$x,jx,qx,Zx,zx,eT,Hx,Jx],Pm=nT({defaultModifiers:NF});var RF=(t,e)=>(t%e+e)%e,aT=class{constructor(e,r,n){this.owner=e,this.containerEl=r,r.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),r.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),n.register([],"ArrowUp",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem-1,!0),!1}),n.register([],"ArrowDown",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem+1,!0),!1}),n.register([],"Enter",i=>{if(!i.isComposing)return this.useSelectedItem(i),!1})}onSuggestionClick(e,r){e.preventDefault();let n=this.suggestions.indexOf(r);this.setSelectedItem(n,!1),this.useSelectedItem(e)}onSuggestionMouseover(e,r){let n=this.suggestions.indexOf(r);this.setSelectedItem(n,!1)}setSuggestions(e){this.containerEl.empty();let r=[];e.forEach(n=>{let i=this.containerEl.createDiv("suggestion-item");this.owner.renderSuggestion(n,i),r.push(i)}),this.values=e,this.suggestions=r,this.setSelectedItem(0,!1)}useSelectedItem(e){let r=this.values[this.selectedItem];r&&this.owner.selectSuggestion(r,e)}setSelectedItem(e,r){let n=RF(e,this.suggestions.length),i=this.suggestions[this.selectedItem],a=this.suggestions[n];i==null||i.removeClass("is-selected"),a==null||a.addClass("is-selected"),this.selectedItem=n,r&&a.scrollIntoView(!1)}},rc=class{constructor(e){this.inputEl=e,this.scope=new iT.Scope,this.suggestEl=createDiv("suggestion-container");let r=this.suggestEl.createDiv("suggestion");this.suggest=new aT(this,r,this.scope),this.scope.register([],"Escape",this.close.bind(this)),this.inputEl.addEventListener("input",this.onInputChanged.bind(this)),this.inputEl.addEventListener("focus",this.onInputChanged.bind(this)),this.inputEl.addEventListener("blur",this.close.bind(this)),this.suggestEl.on("mousedown",".suggestion-container",n=>{n.preventDefault()})}onInputChanged(){let e=this.inputEl.value,r=this.getSuggestions(e);if(!r){this.close();return}r.length>0?(this.suggest.setSuggestions(r),this.open(app.dom.appContainerEl,this.inputEl)):this.close()}open(e,r){app.keymap.pushScope(this.scope),e.appendChild(this.suggestEl),this.popper=Pm(r,this.suggestEl,{placement:"bottom-start",modifiers:[{name:"sameWidth",enabled:!0,fn:({state:n,instance:i})=>{let a=`${n.rects.reference.width}px`;n.styles.popper.width!==a&&(n.styles.popper.width=a,i.update())},phase:"beforeWrite",requires:["computeStyles"]}]})}close(){app.keymap.popScope(this.scope),this.suggest.setSuggestions([]),this.popper&&this.popper.destroy(),this.suggestEl.detach()}};function DF(t){t=(0,Ni.normalizePath)(t);let e=app.vault.getAbstractFileByPath(t);return!e||!(e instanceof Ni.TFolder)?null:e}function sT(t){let e=DF(t),r=[];return Ni.Vault.recurseChildren(e,n=>{n instanceof Ni.TFile&&r.push(n)}),r.sort((n,i)=>n.basename.localeCompare(i.basename)),r}var oT;(function(r){r[r.TemplateFiles=0]="TemplateFiles",r[r.ScriptFiles=1]="ScriptFiles"})(oT||(oT={}));var nc=class extends rc{constructor(e,r){super(e);this.inputEl=e;this.plugin=r}getSuggestions(e){var s,l,u,f,d,h,g;let r=[];if(this.plugin.templaterPlugin){let m=(0,Ni.normalizePath)((u=(l=(s=this.plugin)==null?void 0:s.templaterPlugin)==null?void 0:l.settings)==null?void 0:u.templates_folder),y=sT(m);r=[...r,...y]}if(this.plugin.coreTemplatePlugin){let m=(0,Ni.normalizePath)((g=(h=(d=(f=this.plugin)==null?void 0:f.coreTemplatePlugin)==null?void 0:d.instance)==null?void 0:h.options)==null?void 0:g.folder),y=sT(m);r=[...r,...y]}if(!r)return[];let n=new Set(r),i=[],a=e.toLowerCase();return n.forEach(m=>{m instanceof Ni.TFile&&m.extension==="md"&&m.path.toLowerCase().contains(a)&&i.push(m)}),i}renderSuggestion(e,r){r.setText(e.path)}selectSuggestion(e){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close()}};var lT=yt(require("obsidian"));var ic=class extends rc{getSuggestions(e){let r=app.vault.getAllLoadedFiles(),n=[],i=e.toLowerCase();return r.forEach(a=>{a instanceof lT.TFolder&&a.path.toLowerCase().contains(i)&&n.push(a)}),n}renderSuggestion(e,r){r.setText(e.path)}selectSuggestion(e){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close()}};var vs=yt(hh()),Fm=yt(La()),ph={},qm={},hc=t=>P(void 0,null,function*(){if(!app.workspace.layoutReady||!t.settings.activateDailyNoteAddon)return;let e={};try{e=(0,vs.getAllDailyNotes)()}catch(r){console.log("Daily note folder not set. Deactivated Show Daily notes setting."),t.settings.activateDailyNoteAddon=!1,t.saveSettings()}Fm.default.isEqual(ph,e)==!1&&(ph=e)}),fo=t=>P(void 0,null,function*(){if(!app.workspace.layoutReady||!t.settings.activateDailyNoteAddon||!t.settings.useWeeklyNotes)return;let e={};try{e=(0,vs.getAllWeeklyNotes)()}catch(r){console.log("Daily note folder not set. Deactivated Show Daily notes setting."),t.settings.activateDailyNoteAddon=!1,t.saveSettings()}Fm.default.isEqual(qm,e)==!1&&(qm=e)}),gh=()=>ph,pc=t=>(0,vs.getDailyNote)(t,ph);var Gm=t=>(0,vs.getWeeklyNote)(t,qm);var Vm=class extends Ut.PluginSettingTab{constructor(e,r){super(e,r);this.plugin=r}display(){let{containerEl:e}=this,r=ba()||Us();e.empty(),e.createEl("h2",{text:"Settings for Google Calendar"}),e.createEl("h4",{text:"Please restart Obsidian to let changes take effect"}),new Ut.Setting(e).setName("Use own authentication client").setDesc("Please create your own client.").addToggle(i=>i.setValue(this.plugin.settings.useCustomClient).onChange(a=>P(this,null,function*(){this.plugin.settings.useCustomClient=a,yield this.plugin.saveSettings(),this.display()}))),this.plugin.settings.useCustomClient?(new Ut.Setting(e).setName("ClientId").setDesc("Google client id").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter your client id").setValue(this.plugin.settings.googleClientId).onChange(a=>P(this,null,function*(){this.plugin.settings.googleClientId=a.trim(),yield this.plugin.saveSettings()}))),new Ut.Setting(e).setName("ClientSecret").setDesc("Google client secret").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter your client secret").setValue(this.plugin.settings.googleClientSecret).onChange(a=>P(this,null,function*(){this.plugin.settings.googleClientSecret=a.trim(),yield this.plugin.saveSettings()}))),Ut.Platform.isMobileApp&&new Ut.Setting(e).setName("Refresh Token").setDesc("Google Refresh Token from OAuth").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter refresh token").setValue(this.plugin.settings.googleRefreshToken).onChange(a=>P(this,null,function*(){this.plugin.settings.googleRefreshToken=a.trim(),mu(a)})))):new Ut.Setting(e).setName("Server url").setDesc("The url to the server where the oauth takes place").setClass("SubSettings").addText(i=>{i.setValue(this.plugin.settings.googleOAuthServer).onChange(a=>P(this,null,function*(){this.plugin.settings.googleOAuthServer=a.trim(),yield this.plugin.saveSettings()}))}),new Ut.Setting(e).setName("Login with google").addButton(i=>{i.setButtonText(r?"Logout":"Login").onClick(()=>{r?(mu(""),Nf(""),$a(""),es(0),this.hide(),this.display()):this.plugin.settings.useCustomClient?Bx():window.open(`${this.plugin.settings.googleOAuthServer}/api/google`)})}),new Ut.Setting(e).setName("Refresh Interval").setDesc("Time in seconds between refresh request from google server").addSlider(i=>{i.setValue(this.plugin.settings.refreshInterval),i.setLimits(10,360,1),i.setDynamicTooltip(),i.onChange(a=>P(this,null,function*(){this.plugin.settings.refreshInterval=a,yield this.plugin.saveSettings()}))}),new Ut.Setting(e).setName("Use event Notification").setDesc("Will send notification when an event starts").addToggle(i=>{i.setValue(this.plugin.settings.useNotification),i.onChange(a=>P(this,null,function*(){this.plugin.settings.useNotification=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Ut.Setting(e).setName("Default webview theme").addDropdown(i=>P(this,null,function*(){i.addOption("auto","Auto"),i.addOption("dark","Dark"),i.addOption("light","Light"),i.setValue(this.plugin.settings.webViewDefaultColorMode),i.onChange(a=>P(this,null,function*(){this.plugin.settings.webViewDefaultColorMode=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))})),new Ut.Setting(e).setName("Show daily notes").setDesc("Will display daily notes and allow to open and create daily notes").addToggle(i=>{i.setValue(this.plugin.settings.activateDailyNoteAddon),i.onChange(a=>P(this,null,function*(){this.plugin.settings.activateDailyNoteAddon=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),this.plugin.settings.activateDailyNoteAddon&&(new Ut.Setting(e).setName("Use Weekly Notes").setDesc("Will show week numbers with weekly note dots").setClass("SubSettings").addToggle(i=>{i.setValue(this.plugin.settings.useWeeklyNotes),i.onChange(a=>P(this,null,function*(){this.plugin.settings.useWeeklyNotes=a,a&&fo(this.plugin),yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Ut.Setting(e).setName("Daily dot color").setDesc("Color for daily note dots in month view").setClass("SubSettings").addText(i=>{i.inputEl.type="color",i.setValue(this.plugin.settings.dailyNoteDotColor),i.onChange(a=>P(this,null,function*(){this.plugin.settings.dailyNoteDotColor=a,yield this.plugin.saveSettings()}))})),new Ut.Setting(e).setName("Enable @ Annotations").setDesc("Will help you to easily link events from you calendar in your notes").addToggle(i=>{i.setValue(this.plugin.settings.atAnnotationEnabled),i.onChange(a=>P(this,null,function*(){this.plugin.settings.atAnnotationEnabled=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),this.plugin.settings.atAnnotationEnabled&&new Ut.Setting(e).setName("@ Annotation date format").setDesc("SWitch between mm/dd/yyyy and dd/mm/yyyy").setClass("SubSettings").addDropdown(i=>{i.addOption("mm/dd/yyyy","mm/dd/yyyy"),i.addOption("dd/mm/yyyy","dd/mm/yyyy"),i.setValue(this.plugin.settings.usDateFormat?"mm/dd/yyyy":"dd/mm/yyyy"),i.onChange(a=>P(this,null,function*(){a=="mm/dd/yyyy"?this.plugin.settings.usDateFormat=!0:this.plugin.settings.usDateFormat=!1,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Ut.Setting(e).setName("Auto create Event Notes").setDesc("Will create new notes from a event if the description contains :obsidian:").addToggle(i=>{i.setValue(this.plugin.settings.autoCreateEventNotes),i.onChange(a=>P(this,null,function*(){this.plugin.settings.autoCreateEventNotes=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Ut.Setting(e).setName("Keep auto created Notes open").setDesc("When creating a new note should it stay open for direct editing").setClass("SubSettings").addToggle(i=>{i.setValue(this.plugin.settings.autoCreateEventKeepOpen),i.onChange(a=>P(this,null,function*(){this.plugin.settings.autoCreateEventKeepOpen=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Ut.Setting(e).setName("Import Start Offset").setDesc("Days in the past from events to import").setClass("SubSettings").addSlider(i=>{i.setValue(this.plugin.settings.importStartOffset),i.setLimits(0,7,1),i.setDynamicTooltip(),i.onChange(a=>P(this,null,function*(){i.showTooltip(),this.plugin.settings.importStartOffset=a,yield this.plugin.saveSettings()}))}),new Ut.Setting(e).setName("Import End Offset").setDesc("Days in the future from events to import").setClass("SubSettings").addSlider(i=>{i.setValue(this.plugin.settings.importEndOffset),i.setLimits(0,7,1),i.setDynamicTooltip(),i.onChange(a=>P(this,null,function*(){this.plugin.settings.importEndOffset=a,yield this.plugin.saveSettings()}))}),new Ut.Setting(e).setName("Debug Mode").setDesc("Enable if something is not working").addToggle(i=>{i.setValue(this.plugin.settings.debugMode),i.onChange(a=>P(this,null,function*(){this.plugin.settings.debugMode=a,yield this.plugin.saveSettings()}))}),new Ut.Setting(e).setName("Use defaults for note creation").setDesc("If active creating notes will be faster but less flexible").addToggle(i=>{i.setValue(this.plugin.settings.useDefaultTemplate),i.onChange(a=>P(this,null,function*(){this.plugin.settings.useDefaultTemplate=a,yield this.plugin.saveSettings(),this.display()}))}),this.plugin.settings.useDefaultTemplate&&(new Ut.Setting(e).setName("Default Template").setDesc("Template to use at note creation").setClass("SubSettings").addSearch(i=>{new nc(i.inputEl,this.plugin),i.setPlaceholder("Template").setValue(this.plugin.settings.defaultTemplate).onChange(a=>P(this,null,function*(){this.plugin.settings.defaultTemplate=a,yield this.plugin.saveSettings()})),i.containerEl.addClass("templater_search")}),new Ut.Setting(e).setName("Default Folder").setDesc("Folder to save notes to after creation").setClass("SubSettings").addSearch(i=>{new ic(i.inputEl),i.setPlaceholder("Example: folder1/folder2").setValue(this.plugin.settings.defaultFolder).onChange(a=>P(this,null,function*(){this.plugin.settings.defaultFolder=a,yield this.plugin.saveSettings()})),i.containerEl.addClass("templater_search")}));let n=this.plugin.settings.insertTemplates;if(n.length&&(new Ut.Setting(e).setName("Saved Templates"),n.forEach(i=>{let a=new Ut.Setting(e).setClass("SubSettings").setName(i.name).addButton(s=>{s.setButtonText("Remove"),s.onClick(()=>P(this,null,function*(){this.plugin.settings.insertTemplates.remove(i),a.settingEl.remove(),yield this.plugin.saveSettings(),this.hide(),this.display()}))})})),Yt()){new Ut.Setting(e).setName("Default Calendar").addDropdown(a=>P(this,null,function*(){a.addOption("Default","Select a calendar"),(yield Or()).forEach(l=>{a.addOption(l.id,l.summary)}),a.setValue(this.plugin.settings.defaultCalendar),a.onChange(l=>P(this,null,function*(){this.plugin.settings.defaultCalendar=l,yield this.plugin.saveSettings()}))})),e.createEl("h3","Calendar Blacklist");let i=this.plugin.settings.calendarBlackList;new Ut.Setting(e).setName("Add Item to BlackList").addDropdown(a=>P(this,null,function*(){a.addOption("Default","Select Option to add"),(yield Or()).forEach(l=>{a.addOption(l.id+"_=_"+l.summary,l.summary)}),a.onChange(l=>P(this,null,function*(){let[u,f]=l.split("_=_");i.contains([u,f])||(this.plugin.settings.calendarBlackList=[...i,[u,f]],yield this.plugin.saveSettings());let d=new Ut.Setting(e).setClass("SubSettings").setName(f).addButton(h=>{h.setButtonText("Remove"),h.onClick(()=>P(this,null,function*(){this.plugin.settings.calendarBlackList.remove([u,f]),d.settingEl.remove(),yield this.plugin.saveSettings()}))})}))})),i.forEach(a=>{let s=new Ut.Setting(e).setClass("SubSettings").setName(a[1]).addButton(l=>{l.setButtonText("Remove"),l.onClick(()=>P(this,null,function*(){this.plugin.settings.calendarBlackList.remove(a),s.settingEl.remove(),yield this.plugin.saveSettings()}))})})}}};function Ox(){let t=$e.getInstance();return t.settings.googleClientId==""||t.settings.googleClientSecret==""?(ot("Google Calendar missing settings"),!1):!0}function Yt(){return(!ba()||ba()=="")&&(!Us()||Us()=="")?(ot("Google Calendar missing settings or not logged in"),!1):!0}var wA=yt(require("obsidian"));var AT=yt(La());var mh=new Map;function Di(){mh.clear()}function er(){return P(this,arguments,function*({startDate:t,endDate:e,exclude:r,include:n}={}){let i=$e.getInstance();t||(t=window.moment()),t=t.startOf("day"),e||(e=t.clone()),e=e.endOf("day");let a=yield Or();n&&n.length?a=a.filter(l=>n.contains(l.id)||n.contains(l.summary)):r&&r.length&&(a=a.filter(l=>!(r.contains(l.id)||r.contains(l.summary))));let s=[];for(let l=0;l<a.length;l++){let u=yield rq(i,a[l],t,e);s=[...s,...u]}return s=AT.default.orderBy(s,[l=>{var u;return new Date((u=l.start.date)!=null?u:l.start.dateTime)}],"asc"),s})}function eq(t,e,r){return P(this,null,function*(){if(!Yt())return[];let n,i=2500,a=[];do{let s=`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(t.id)}/events?`;if(s+=`maxResults=${i}`,s+="&futureevents=true",s+="&singleEvents=true",s+="&orderby=starttime",s+="&sortorder=ascending",s+=`&timeMin=${e}`,s+=`&timeMax=${r}`,n&&n.nextPageToken&&(s+=`&nextPageToken=${n.nextPageToken}`),n=yield Xr(s,"GET",null),!n){ot("Could not list Google Events");continue}let l=n.items.filter(u=>(u.parent=t,u.status!="cancelled"));a=[...a,...l]}while(n.items.length==i);return a})}function tq(t,e,r){let n=[];return t.forEach(i=>{if(!i.start.dateTime||!i.end.dateTime)return;let a=window.moment(i.end.dateTime),s=window.moment(i.start.dateTime);if(s.isSame(a,"day"))return;let l=[],u=a.endOf("day").diff(s.startOf("day"),"days")+1,f=i.summary,d=1;do i.summary=`${f} (Day ${d}/${u})`,i.eventType="multiDay",l=[...l,structuredClone(i)],d++,s=s.add(1,"days"),i.start.dateTime=s.format("YYYY-MM-DD HH:mm");while(!s.isAfter(a,"day"));l=l.filter(h=>{let g=window.moment(h.start.dateTime);return!(e&&g.isBefore(e,"day")||r&&g.isSameOrAfter(r,"day"))}),i.eventType="delete",n=[...n,...l]}),t=[...t,...n],t}function rq(t,e,r,n){return P(this,null,function*(){let i=r.toISOString(),a=n.toISOString(),s=JSON.stringify({start:i,end:a,calendar:e.id});if(mh.has(s)){let{events:u,updated:f}=mh.get(s);if(f.clone().add(t.settings.refreshInterval,"second").isAfter(window.moment()))return u}let l=yield eq(e,i,a);return l=tq(l,r,n),l=l.filter(u=>u.eventType!=="delete"),mh.set(s,{events:l,updated:window.moment()}),l})}var vA=yt(require("obsidian"));var yA=yt(require("obsidian"));function At(){}function Hm(t){return t()}function kT(){return Object.create(null)}function on(t){t.forEach(Hm)}function IT(t){return typeof t=="function"}function Rn(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}var yh;function gc(t,e){return yh||(yh=document.createElement("a")),yh.href=e,t===yh.href}function NT(t){return Object.keys(t).length===0}function Bl(t){return t==null?"":t}var GW=typeof window!="undefined";var VW=new Set;var RT=!1;function nq(){RT=!0}function iq(){RT=!1}function oe(t,e){t.appendChild(e)}function ci(t,e,r){let n=aq(t);if(!n.getElementById(e)){let i=ce("style");i.id=e,i.textContent=r,sq(n,i)}}function aq(t){if(!t)return document;let e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function sq(t,e){oe(t.head||t,e)}function xe(t,e,r){t.insertBefore(e,r||null)}function be(t){t.parentNode.removeChild(t)}function wn(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function ce(t){return document.createElement(t)}function Tr(t){return document.createTextNode(t)}function Le(){return Tr(" ")}function ia(){return Tr("")}function tt(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function ie(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function oq(t){return Array.from(t.childNodes)}function fi(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Bi(t,e){t.value=e==null?"":e}function Xe(t,e,r,n){r===null?t.style.removeProperty(e):t.style.setProperty(e,r,n?"important":"")}function mc(t,e){for(let r=0;r<t.options.length;r+=1){let n=t.options[r];if(n.__value===e){n.selected=!0;return}}t.selectedIndex=-1}function Km(t){let e=t.querySelector(":checked")||t.options[0];return e&&e.__value}var HW=new Map;var yc;function vc(t){yc=t}function DT(){if(!yc)throw new Error("Function called outside component initialization");return yc}function ho(t){DT().$$.on_mount.push(t)}function po(t){DT().$$.on_destroy.push(t)}var _c=[];var Dn=[],vh=[],jm=[],lq=Promise.resolve(),Ym=!1;function uq(){Ym||(Ym=!0,lq.then(BT))}function Ol(t){vh.push(t)}function Pa(t){jm.push(t)}var Wm=new Set,_h=0;function BT(){let t=yc;do{for(;_h<_c.length;){let e=_c[_h];_h++,vc(e),cq(e.$$)}for(vc(null),_c.length=0,_h=0;Dn.length;)Dn.pop()();for(let e=0;e<vh.length;e+=1){let r=vh[e];Wm.has(r)||(Wm.add(r),r())}vh.length=0}while(_c.length);for(;jm.length;)jm.pop()();Ym=!1,Wm.clear(),vc(t)}function cq(t){if(t.fragment!==null){t.update(),on(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ol)}}var wh=new Set,go;function Eh(){go={r:0,c:[],p:go}}function Ch(){go.r||on(go.c),go=go.p}function di(t,e){t&&t.i&&(wh.delete(t),t.i(e))}function Oi(t,e,r,n){if(t&&t.o){if(wh.has(t))return;wh.add(t),go.c.push(()=>{wh.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}var KW=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var jW=new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);function Ma(t,e,r){let n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=r,r(t.$$.ctx[n]))}function wc(t){t&&t.c()}function Ll(t,e,r,n){let{fragment:i,on_mount:a,on_destroy:s,after_update:l}=t.$$;i&&i.m(e,r),n||Ol(()=>{let u=a.map(Hm).filter(IT);s?s.push(...u):on(u),t.$$.on_mount=[]}),l.forEach(Ol)}function mo(t,e){let r=t.$$;r.fragment!==null&&(on(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function fq(t,e){t.$$.dirty[0]===-1&&(_c.push(t),uq(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Bn(t,e,r,n,i,a,s,l=[-1]){let u=yc;vc(t);let f=t.$$={fragment:null,ctx:null,props:a,update:At,not_equal:i,bound:kT(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:kT(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};s&&s(f.root);let d=!1;if(f.ctx=r?r(t,e.props||{},(h,g,...m)=>{let y=m.length?m[0]:g;return f.ctx&&i(f.ctx[h],f.ctx[h]=y)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](y),d&&fq(t,h)),g}):[],f.update(),d=!0,on(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){nq();let h=oq(e.target);f.fragment&&f.fragment.l(h),h.forEach(be)}else f.fragment&&f.fragment.c();e.intro&&di(t.$$.fragment),Ll(t,e.target,e.anchor,e.customElement),iq(),BT()}vc(u)}var dq;typeof HTMLElement=="function"&&(dq=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(Hm).filter(IT);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,r){this[t]=r}disconnectedCallback(){on(this.$$.on_disconnect)}$destroy(){mo(this,1),this.$destroy=At}$on(t,e){let r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{let n=r.indexOf(e);n!==-1&&r.splice(n,1)}}$set(t){this.$$set&&!NT(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var En=class{$destroy(){mo(this,1),this.$destroy=At}$on(e,r){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!NT(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var eS=yt(Qm()),{__extends:zW,__assign:QW,__rest:XW,__decorate:JW,__param:ZW,__metadata:$W,__awaiter:vr,__generator:ez,__exportStar:tz,__createBinding:rz,__values:nz,__read:iz,__spread:az,__spreadArrays:sz,__spreadArray:oz,__await:lz,__asyncGenerator:uz,__asyncDelegator:cz,__asyncValues:fz,__makeTemplateObject:dz,__importStar:hz,__importDefault:pz,__classPrivateFieldGet:gz,__classPrivateFieldSet:mz}=eS.default;function Ml(t,e=!1){return P(this,null,function*(){var s,l,u;let r=$e.getInstance();if(!Yt())return!1;let n=(s=t.parent)==null?void 0:s.id;if(n||(n=(l=r.settings.defaultCalendar)!=null?l:""),n==="")return ot("Calendar id missing"),!1;let i=(u=t.recurringEventId)!=null?u:t.id;return!e&&t.recurringEventId&&(i=t.id),!!(yield Xr(`https://www.googleapis.com/calendar/v3/calendars/${n}/events/${i}`,"DELETE",null))})}function aa(t,e){return P(this,null,function*(){if(!Yt())return null;let r=yield Xr(`https://www.googleapis.com/calendar/v3/calendars/${e}/events/${t}`,"GET",null);return r.parent=(yield Or()).find(n=>n.id===e),r||(ot("Could not get Google Event"),null)})}function Ul(t,e=!1){return P(this,null,function*(){if(!Yt())return null;if(e&&t.recurringEventId){console.log("REOCCURING");let i=yield aa(t.recurringEventId,t.parent.id);console.log(i),t=pn(pn({},i),t),t.start.dateTime?(t.start.dateTime=window.moment(t.start.dateTime).date(window.moment(i.start.dateTime).date()).format(),t.end.dateTime=window.moment(t.end.dateTime).date(window.moment(i.end.dateTime).date()).format()):(t.start.date=window.moment(i.start.date).format("YYYY-MM-DD"),t.end.date=window.moment(i.end.date).format("YYYY-MM-DD")),t.id=i.id,t.recurrence=i.recurrence,t.id=i.id,delete t.recurringEventId,delete t.originalStartTime,console.log(t)}let r=t.parent.id;delete t.parent;let n=yield Xr(`https://www.googleapis.com/calendar/v3/calendars/${r}/events/${t.id}`,"PUT",t);return n?(ot("Updated Event",!0),n):(ot("Could not create Google Event"),null)})}function tS(t){return window.moment(t).format("YYYY-MM-DD")}function rS(t){return window.moment(t).format("YYYY-MM-DD HH:mm:ss")}function Fl(t){return P(this,null,function*(){var i;let e=$e.getInstance();if(t.start.date?(t.start.date=tS(t.start.date),t.end.date=tS(t.end.date)):(t.start.dateTime=rS(t.start.dateTime),t.end.dateTime=rS(t.end.dateTime)),!Yt())return null;let r="";if(((i=t==null?void 0:t.parent)==null?void 0:i.id)?(r=t.parent.id,t.start.timeZone=t.parent.timeZone,t.end.timeZone=t.parent.timeZone,delete t.parent):(r=e.settings.defaultCalendar,console.log(r)),r==="")return ot("Could not create Google Event because no default calendar selected in Settings"),null;let n=yield Xr(`https://www.googleapis.com/calendar/v3/calendars/${r}/events`,"POST",t);return n?(ot(`Google Event ${n.summary} created`,!0),n):(ot("Could not create Google Event"),null)})}var Sh=["MO","TU","WE","TH","FR","SA","SU"],Nr=function(){function t(e,r){if(r===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=r}return t.fromStr=function(e){return new t(Sh.indexOf(e))},t.prototype.nth=function(e){return this.n===e?this:new t(this.weekday,e)},t.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},t.prototype.toString=function(){var e=Sh[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},t.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},t}();var sr=function(t){return t!=null},Hn=function(t){return typeof t=="number"},Xm=function(t){return Sh.indexOf(t)>=0},tn=Array.isArray,hi=function(t,e){e===void 0&&(e=t),arguments.length===1&&(e=t,t=0);for(var r=[],n=t;n<e;n++)r.push(n);return r};var Nt=function(t,e){var r=0,n=[];if(tn(t))for(;r<e;r++)n[r]=[].concat(t);else for(;r<e;r++)n[r]=t;return n},nS=function(t){return tn(t)?t:[t]};function yo(t,e,r){r===void 0&&(r=" ");var n=String(t);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>r.length&&(r+=Nt(r,e/r.length)),r.slice(0,e)+String(n))}var iS=function(t,e,r){var n=t.split(e);return r?n.slice(0,r).concat([n.slice(r).join(e)]):n},ln=function(t,e){var r=t%e;return r*e<0?r+e:r},Ah=function(t,e){return{div:Math.floor(t/e),mod:ln(t,e)}},Kn=function(t){return!sr(t)||t.length===0},Sr=function(t){return!Kn(t)},Lt=function(t,e){return Sr(t)&&t.indexOf(e)!==-1};var _s;(function(t){t.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],t.ONE_DAY=1e3*60*60*24,t.MAXYEAR=9999,t.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),t.PY_WEEKDAYS=[6,0,1,2,3,4,5],t.getYearDay=function(e){var r=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((r.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/t.ONE_DAY)+1},t.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},t.isDate=function(e){return e instanceof Date},t.isValidDate=function(e){return t.isDate(e)&&!isNaN(e.getTime())},t.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},t.daysBetween=function(e,r){var n=e.getTime()-t.tzOffset(e),i=r.getTime()-t.tzOffset(r),a=n-i;return Math.round(a/t.ONE_DAY)},t.toOrdinal=function(e){return t.daysBetween(e,t.ORDINAL_BASE)},t.fromOrdinal=function(e){return new Date(t.ORDINAL_BASE.getTime()+e*t.ONE_DAY)},t.getMonthDays=function(e){var r=e.getUTCMonth();return r===1&&t.isLeapYear(e.getUTCFullYear())?29:t.MONTH_DAYS[r]},t.getWeekday=function(e){return t.PY_WEEKDAYS[e.getUTCDay()]},t.monthRange=function(e,r){var n=new Date(Date.UTC(e,r,1));return[t.getWeekday(n),t.getMonthDays(n)]},t.combine=function(e,r){return r=r||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()))},t.clone=function(e){var r=new Date(e.getTime());return r},t.cloneDates=function(e){for(var r=[],n=0;n<e.length;n++)r.push(t.clone(e[n]));return r},t.sort=function(e){e.sort(function(r,n){return r.getTime()-n.getTime()})},t.timeToUntilString=function(e,r){r===void 0&&(r=!0);var n=new Date(e);return[yo(n.getUTCFullYear().toString(),4,"0"),yo(n.getUTCMonth()+1,2,"0"),yo(n.getUTCDate(),2,"0"),"T",yo(n.getUTCHours(),2,"0"),yo(n.getUTCMinutes(),2,"0"),yo(n.getUTCSeconds(),2,"0"),r?"Z":""].join("")},t.untilStringToDate=function(e){var r=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=r.exec(e);if(!n)throw new Error("Invalid UNTIL value: "+e);return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(_s||(_s={}));var ze=_s;var hq=function(){function t(e,r){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=r,e==="between"?(this.maxDate=r.inc?r.before:new Date(r.before.getTime()-1),this.minDate=r.inc?r.after:new Date(r.after.getTime()+1)):e==="before"?this.maxDate=r.inc?r.dt:new Date(r.dt.getTime()-1):e==="after"&&(this.minDate=r.inc?r.dt:new Date(r.dt.getTime()+1))}return t.prototype.accept=function(e){++this.total;var r=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(r)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return r?!0:(this.add(e),!1);return this.add(e)},t.prototype.add=function(e){return this._result.push(e),!0},t.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},t.prototype.clone=function(){return new t(this.method,this.args)},t}(),Ua=hq;var SS=yt(TS()),{__extends:Gl,__assign:Cn,__rest:nQ,__decorate:iQ,__param:aQ,__metadata:sQ,__awaiter:oQ,__generator:lQ,__exportStar:uQ,__createBinding:cQ,__values:fQ,__read:dQ,__spread:hQ,__spreadArrays:vo,__await:pQ,__asyncGenerator:gQ,__asyncDelegator:mQ,__asyncValues:yQ,__makeTemplateObject:vQ,__importStar:_Q,__importDefault:wQ,__classPrivateFieldGet:EQ,__classPrivateFieldSet:CQ}=SS.default;var pq=function(t){Gl(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.iterator=i,a}return e.prototype.add=function(r){return this.iterator(r,this._result.length)?(this._result.push(r),!0):!1},e}(Ua),Zm=pq;var gq={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},_o=gq;var AS=function(t,e){return t.indexOf(e)!==-1},mq=function(t){return t.toString()},yq=function(t,e,r){return e+" "+r+", "+t},vq=function(){function t(e,r,n,i){if(r===void 0&&(r=mq),n===void 0&&(n=_o),i===void 0&&(i=yq),this.text=[],this.language=n||_o,this.gettext=r,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),s=[].concat(this.options.bynmonthday);a.sort(function(d,h){return d-h}),s.sort(function(d,h){return h-d}),this.bymonthday=a.concat(s),this.bymonthday.length||(this.bymonthday=null)}if(sr(this.origOptions.byweekday)){var l=tn(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(l);this.byweekday={allWeeks:l.filter(function(d){return!d.n}),someWeeks:l.filter(function(d){return Boolean(d.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var f=function(d,h){return d.weekday-h.weekday};this.byweekday.allWeeks.sort(f),this.byweekday.someWeeks.sort(f),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return t.isFullyConvertible=function(e){var r=!0;if(!(e.options.freq in t.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(AS(["dtstart","wkst","freq"],n))return!0;if(!AS(t.IMPLEMENTED[e.options.freq],n))return!1}return r},t.prototype.isFullyConvertible=function(){return t.isFullyConvertible(this.rrule)},t.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in t.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[Me.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var r=this.options.until;this.add(this.dateFormatter(r.getUTCFullYear(),this.language.monthNames[r.getUTCMonth()],r.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},t.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},t.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},t.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},t.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},t.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},t.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},t.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},t.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},t.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},t.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},t.prototype.nth=function(e){e=parseInt(e.toString(),10);var r,n,i=this.gettext;if(e===-1)return i("last");switch(n=Math.abs(e),n){case 1:case 21:case 31:r=n+i("st");break;case 2:case 22:r=n+i("nd");break;case 3:case 23:r=n+i("rd");break;default:r=n+i("th")}return e<0?r+" "+i("last"):r},t.prototype.monthtext=function(e){return this.language.monthNames[e-1]},t.prototype.weekdaytext=function(e){var r=Hn(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[r]},t.prototype.plural=function(e){return e%100!=1},t.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},t.prototype.list=function(e,r,n,i){i===void 0&&(i=","),tn(e)||(e=[e]);var a=function(u,f,d){for(var h="",g=0;g<u.length;g++)g!==0&&(g===u.length-1?h+=" "+d+" ":h+=f+" "),h+=u[g];return h};r=r||function(u){return u.toString()};var s=this,l=function(u){return r&&r.call(s,u)};return n?a(e.map(l),i,n):e.map(l).join(i+" ")},t}(),sa=vq;var _q=function(){function t(e){this.done=!0,this.rules=e}return t.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},t.prototype.isDone=function(){return this.done&&this.symbol===null},t.prototype.nextSymbol=function(){var e,r,n=this;this.symbol=null,this.value=null;do{if(this.done)return!1;var i=void 0;e=null;for(var a in this.rules){i=this.rules[a];var s=i.exec(n.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,r=a)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(r==="SKIP");return this.symbol=r,this.value=e,!0},t.prototype.accept=function(e){if(this.symbol===e){if(this.value){var r=this.value;return this.nextSymbol(),r}return this.nextSymbol(),!0}return!1},t.prototype.acceptNumber=function(){return this.accept("number")},t.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},t}();function Ec(t,e){e===void 0&&(e=_o);var r={},n=new _q(e.tokens);if(!n.start(t))return null;return i(),r;function i(){n.expect("every");var g=n.acceptNumber();if(g&&(r.interval=parseInt(g[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":r.freq=Me.DAILY,n.nextSymbol()&&(s(),h());break;case"weekday(s)":r.freq=Me.WEEKLY,r.byweekday=[Me.MO,Me.TU,Me.WE,Me.TH,Me.FR],n.nextSymbol(),h();break;case"week(s)":r.freq=Me.WEEKLY,n.nextSymbol()&&(a(),h());break;case"hour(s)":r.freq=Me.HOURLY,n.nextSymbol()&&(a(),h());break;case"minute(s)":r.freq=Me.MINUTELY,n.nextSymbol()&&(a(),h());break;case"month(s)":r.freq=Me.MONTHLY,n.nextSymbol()&&(a(),h());break;case"year(s)":r.freq=Me.YEARLY,n.nextSymbol()&&(a(),h());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":r.freq=Me.WEEKLY;var m=n.symbol.substr(0,2).toUpperCase();if(r.byweekday=[Me[m]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");r.byweekday.push(Me[y]),n.nextSymbol()}d(),h();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(r.freq=Me.YEARLY,r.bymonth=[l()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var _=l();if(!_)throw new Error("Unexpected symbol "+n.symbol+", expected month");r.bymonth.push(_),n.nextSymbol()}a(),h();break;default:throw new Error("Unknown symbol")}}function a(){var g=n.accept("on"),m=n.accept("the");if(!!(g||m))do{var y=f(),_=u(),w=l();if(y)_?(n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(Me[_].nth(y))):(r.bymonthday||(r.bymonthday=[]),r.bymonthday.push(y),n.accept("day(s)"));else if(_)n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(Me[_]);else if(n.symbol==="weekday(s)")n.nextSymbol(),r.byweekday||(r.byweekday=[Me.MO,Me.TU,Me.WE,Me.TH,Me.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var E=n.acceptNumber();if(!E)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(r.byweekno=[parseInt(E[0],10)];n.accept("comma");){if(E=n.acceptNumber(),!E)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.byweekno.push(parseInt(E[0],10))}}else if(w)n.nextSymbol(),r.bymonth||(r.bymonth=[]),r.bymonth.push(w);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function s(){var g=n.accept("at");if(!!g)do{var m=n.acceptNumber();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(r.byhour=[parseInt(m[0],10)];n.accept("comma");){if(m=n.acceptNumber(),!m)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");r.byhour.push(parseInt(m[0],10))}}while(n.accept("comma")||n.accept("at"))}function l(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function f(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var g=parseInt(n.value[1],10);if(g<-366||g>366)throw new Error("Nth out of range: "+g);return n.nextSymbol(),n.accept("last")?-g:g;default:return!1}}function d(){n.accept("on"),n.accept("the");var g=f();if(!!g)for(r.bymonthday=[g],n.nextSymbol();n.accept("comma");){if(g=f(),!g)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.bymonthday.push(g),n.nextSymbol()}}function h(){if(n.symbol==="until"){var g=Date.parse(n.text);if(!g)throw new Error("Cannot parse until date:"+n.text);r.until=new Date(g)}else n.accept("for")&&(r.count=parseInt(n.value[0],10),n.expect("number"))}}var Ct;(function(t){t[t.YEARLY=0]="YEARLY",t[t.MONTHLY=1]="MONTHLY",t[t.WEEKLY=2]="WEEKLY",t[t.DAILY=3]="DAILY",t[t.HOURLY=4]="HOURLY",t[t.MINUTELY=5]="MINUTELY",t[t.SECONDLY=6]="SECONDLY"})(Ct||(Ct={}));function Cc(t){return t<Ct.HOURLY}var kS=function(t,e){return e===void 0&&(e=_o),new Me(Ec(t,e)||void 0)},Vl=["count","until","interval","byweekday","bymonthday","bymonth"];sa.IMPLEMENTED=[];sa.IMPLEMENTED[Ct.HOURLY]=Vl;sa.IMPLEMENTED[Ct.MINUTELY]=Vl;sa.IMPLEMENTED[Ct.DAILY]=["byhour"].concat(Vl);sa.IMPLEMENTED[Ct.WEEKLY]=Vl;sa.IMPLEMENTED[Ct.MONTHLY]=Vl;sa.IMPLEMENTED[Ct.YEARLY]=["byweekno","byyearday"].concat(Vl);var IS=function(t,e,r,n){return new sa(t,e,r,n).toString()},NS=sa.isFullyConvertible;var Hl=function(){function t(e,r,n,i){this.hour=e,this.minute=r,this.second=n,this.millisecond=i||0}return t.prototype.getHours=function(){return this.hour},t.prototype.getMinutes=function(){return this.minute},t.prototype.getSeconds=function(){return this.second},t.prototype.getMilliseconds=function(){return this.millisecond},t.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},t}();var RS=function(t){Gl(e,t);function e(r,n,i,a,s,l,u){var f=t.call(this,a,s,l,u)||this;return f.year=r,f.month=n,f.day=i,f}return e.fromDate=function(r){return new this(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.valueOf()%1e3)},e.prototype.getWeekday=function(){return _s.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(r){this.year+=r},e.prototype.addMonths=function(r){if(this.month+=r,this.month>12){var n=Math.floor(this.month/12),i=ln(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(r,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+r*7:this.day+=-(this.getWeekday()-n)+r*7,this.fixDay()},e.prototype.addDaily=function(r){this.day+=r,this.fixDay()},e.prototype.addHours=function(r,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/r)*r);;){this.hour+=r;var a=Ah(this.hour,24),s=a.div,l=a.mod;if(s&&(this.hour=l,this.addDaily(s)),Kn(i)||Lt(i,this.hour))break}},e.prototype.addMinutes=function(r,n,i,a){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/r)*r);;){this.minute+=r;var s=Ah(this.minute,60),l=s.div,u=s.mod;if(l&&(this.minute=u,this.addHours(l,!1,i)),(Kn(i)||Lt(i,this.hour))&&(Kn(a)||Lt(a,this.minute)))break}},e.prototype.addSeconds=function(r,n,i,a,s){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/r)*r);;){this.second+=r;var l=Ah(this.second,60),u=l.div,f=l.mod;if(u&&(this.second=f,this.addMinutes(u,!1,i,a)),(Kn(i)||Lt(i,this.hour))&&(Kn(a)||Lt(a,this.minute))&&(Kn(s)||Lt(s,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var r=_s.monthRange(this.year,this.month-1)[1];if(!(this.day<=r))for(;this.day>r;){if(this.day-=r,++this.month,this.month===13&&(this.month=1,++this.year,this.year>_s.MAXYEAR))return;r=_s.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(r,n){var i=r.freq,a=r.interval,s=r.wkst,l=r.byhour,u=r.byminute,f=r.bysecond;switch(i){case Ct.YEARLY:return this.addYears(a);case Ct.MONTHLY:return this.addMonths(a);case Ct.WEEKLY:return this.addWeekly(a,s);case Ct.DAILY:return this.addDaily(a);case Ct.HOURLY:return this.addHours(a,n,l);case Ct.MINUTELY:return this.addMinutes(a,n,l,u);case Ct.SECONDLY:return this.addSeconds(a,n,l,u,f)}},e}(Hl);function $m(t){for(var e=[],r=Object.keys(t),n=0,i=r;n<i.length;n++){var a=i[n];Lt(OS,a)||e.push(a),ze.isDate(t[a])&&!ze.isValidDate(t[a])&&e.push(a)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return Cn({},t)}function DS(t){var e=Cn(Cn({},bc),$m(t));if(sr(e.byeaster)&&(e.freq=Me.YEARLY),!(sr(e.freq)&&Me.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: "+e.freq+" "+t.freq);if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),sr(e.wkst)?Hn(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=Me.MO.weekday,sr(e.bysetpos)){Hn(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var r=0;r<e.bysetpos.length;r++){var n=e.bysetpos[r];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||Sr(e.byweekno)||Sr(e.byyearday)||Boolean(e.bymonthday)||Sr(e.bymonthday)||sr(e.byweekday)||sr(e.byeaster)))switch(e.freq){case Me.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case Me.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case Me.WEEKLY:e.byweekday=[ze.getWeekday(e.dtstart)];break}if(sr(e.bymonth)&&!tn(e.bymonth)&&(e.bymonth=[e.bymonth]),sr(e.byyearday)&&!tn(e.byyearday)&&Hn(e.byyearday)&&(e.byyearday=[e.byyearday]),!sr(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(tn(e.bymonthday)){for(var i=[],a=[],r=0;r<e.bymonthday.length;r++){var n=e.bymonthday[r];n>0?i.push(n):n<0&&a.push(n)}e.bymonthday=i,e.bynmonthday=a}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(sr(e.byweekno)&&!tn(e.byweekno)&&(e.byweekno=[e.byweekno]),!sr(e.byweekday))e.bynweekday=null;else if(Hn(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(Xm(e.byweekday))e.byweekday=[Nr.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof Nr)!e.byweekday.n||e.freq>Me.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var s=[],l=[],r=0;r<e.byweekday.length;r++){var u=e.byweekday[r];if(Hn(u)){s.push(u);continue}else if(Xm(u)){s.push(Nr.fromStr(u).weekday);continue}!u.n||e.freq>Me.MONTHLY?s.push(u.weekday):l.push([u.weekday,u.n])}e.byweekday=Sr(s)?s:null,e.bynweekday=Sr(l)?l:null}return sr(e.byhour)?Hn(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<Me.HOURLY?[e.dtstart.getUTCHours()]:null,sr(e.byminute)?Hn(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<Me.MINUTELY?[e.dtstart.getUTCMinutes()]:null,sr(e.bysecond)?Hn(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<Me.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function BS(t){var e=t.dtstart.getTime()%1e3;if(!Cc(t.freq))return[];var r=[];return t.byhour.forEach(function(n){t.byminute.forEach(function(i){t.bysecond.forEach(function(a){r.push(new Hl(n,i,a,e))})})}),r}function xc(t){var e=t.split(`
`).map(wq).filter(function(r){return r!==null});return Cn(Cn({},e[0]),e[1])}function Tc(t){var e={},r=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(t);if(!r)return e;var n=r[0],i=r[1],a=r[2];return i&&(e.tzid=i),e.dtstart=ze.untilStringToDate(a),e}function wq(t){if(t=t.replace(/^\s+|\s+$/,""),!t.length)return null;var e=/^([A-Z]+?)[:;]/.exec(t.toUpperCase());if(!e)return LS(t);var r=e[0],n=e[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return LS(t);case"DTSTART":return Tc(t);default:throw new Error("Unsupported RFC prop "+n+" in "+t)}}function LS(t){var e=t.replace(/^RRULE:/i,""),r=Tc(e),n=t.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var a=i.split("="),s=a[0],l=a[1];switch(s.toUpperCase()){case"FREQ":r.freq=Ct[l.toUpperCase()];break;case"WKST":r.wkst=pi[l.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=Eq(l),f=s.toLowerCase();r[f]=u;break;case"BYWEEKDAY":case"BYDAY":r.byweekday=Cq(l);break;case"DTSTART":case"TZID":var d=Tc(t);r.tzid=d.tzid,r.dtstart=d.dtstart;break;case"UNTIL":r.until=ze.untilStringToDate(l);break;case"BYEASTER":r.byeaster=Number(l);break;default:throw new Error("Unknown RRULE property '"+s+"'")}}),r}function Eq(t){if(t.indexOf(",")!==-1){var e=t.split(",");return e.map(PS)}return PS(t)}function PS(t){return/^[+-]?\d+$/.test(t)?Number(t):t}function Cq(t){var e=t.split(",");return e.map(function(r){if(r.length===2)return pi[r];var n=r.match(/^([+-]?\d{1,2})([A-Z]{2})$/),i=Number(n[1]),a=n[2],s=pi[a].weekday;return new Nr(s,i)})}var wo=function(){function t(e,r){this.date=e,this.tzid=r}return Object.defineProperty(t.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){var e=ze.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":"+e:";TZID="+this.tzid+":"+e},t.prototype.getTime=function(){return this.date.getTime()},t.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var r=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:r})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid,e!=null?e:"UTC")})),a=i.getTime()-n.getTime();return new Date(this.date.getTime()-a)},t}();function Sc(t){for(var e=[],r="",n=Object.keys(t),i=Object.keys(bc),a=0;a<n.length;a++)if(n[a]!=="tzid"&&!!Lt(i,n[a])){var s=n[a].toUpperCase(),l=t[n[a]],u="";if(!(!sr(l)||tn(l)&&!l.length)){switch(s){case"FREQ":u=Me.FREQUENCIES[t.freq];break;case"WKST":Hn(l)?u=new Nr(l).toString():u=l.toString();break;case"BYWEEKDAY":s="BYDAY",u=nS(l).map(function(m){return m instanceof Nr?m:tn(m)?new Nr(m[0],m[1]):new Nr(m)}).toString();break;case"DTSTART":r=bq(l,t.tzid);break;case"UNTIL":u=ze.timeToUntilString(l,!t.tzid);break;default:if(tn(l)){for(var f=[],d=0;d<l.length;d++)f[d]=String(l[d]);u=f.toString()}else u=String(l)}u&&e.push([s,u])}}var h=e.map(function(m){var y=m[0],_=m[1];return y+"="+_.toString()}).join(";"),g="";return h!==""&&(g="RRULE:"+h),[r,g].filter(function(m){return!!m}).join(`
`)}function bq(t,e){return t?"DTSTART"+new wo(new Date(t),e).toString():""}function xq(t,e){return Array.isArray(t)?!Array.isArray(e)||t.length!==e.length?!1:t.every(function(r,n){return r.getTime()===e[n].getTime()}):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():t===e}var MS=function(){function t(){this.all=!1,this.before=[],this.after=[],this.between=[]}return t.prototype._cacheAdd=function(e,r,n){r&&(r=r instanceof Date?ze.clone(r):ze.cloneDates(r)),e==="all"?this.all=r:(n._value=r,this[e].push(n))},t.prototype._cacheGet=function(e,r){var n=!1,i=r?Object.keys(r):[],a=function(d){for(var h=0;h<i.length;h++){var g=i[h];if(!xq(r[g],d[g]))return!0}return!1},s=this[e];if(e==="all")n=this.all;else if(tn(s))for(var l=0;l<s.length;l++){var u=s[l];if(!(i.length&&a(u))){n=u._value;break}}if(!n&&this.all){for(var f=new Ua(e,r),l=0;l<this.all.length&&f.accept(this.all[l]);l++);n=f.getValue(),this._cacheAdd(e,n,r)}return tn(n)?ze.cloneDates(n):n instanceof Date?ze.clone(n):n},t}();var US=vo(Nt(1,31),Nt(2,28),Nt(3,31),Nt(4,30),Nt(5,31),Nt(6,30),Nt(7,31),Nt(8,31),Nt(9,30),Nt(10,31),Nt(11,30),Nt(12,31),Nt(1,7)),FS=vo(Nt(1,31),Nt(2,29),Nt(3,31),Nt(4,30),Nt(5,31),Nt(6,30),Nt(7,31),Nt(8,31),Nt(9,30),Nt(10,31),Nt(11,30),Nt(12,31),Nt(1,7)),Tq=hi(1,29),Sq=hi(1,30),ws=hi(1,31),un=hi(1,32),qS=vo(un,Sq,un,ws,un,ws,un,un,ws,un,ws,un,un.slice(0,7)),GS=vo(un,Tq,un,ws,un,ws,un,un,ws,un,ws,un,un.slice(0,7)),Aq=hi(-28,0),kq=hi(-29,0),Es=hi(-30,0),cn=hi(-31,0),VS=vo(cn,kq,cn,Es,cn,Es,cn,cn,Es,cn,Es,cn,cn.slice(0,7)),HS=vo(cn,Aq,cn,Es,cn,Es,cn,cn,Es,cn,Es,cn,cn.slice(0,7)),KS=[0,31,60,91,121,152,182,213,244,274,305,335,366],jS=[0,31,59,90,120,151,181,212,243,273,304,334,365],ey=function(){for(var t=[],e=0;e<55;e++)t=t.concat(hi(7));return t}();function YS(t,e){var r=new Date(Date.UTC(t,0,1)),n=ze.isLeapYear(t)?366:365,i=ze.isLeapYear(t+1)?366:365,a=ze.toOrdinal(r),s=ze.getWeekday(r),l=Cn(Cn({yearlen:n,nextyearlen:i,yearordinal:a,yearweekday:s},Iq(t)),{wnomask:null});if(Kn(e.byweekno))return l;l.wnomask=Nt(0,n+7);var u,f,d=u=ln(7-s+e.wkst,7);d>=4?(d=0,f=l.yearlen+ln(s-e.wkst,7)):f=n-d;for(var h=Math.floor(f/7),g=ln(f,7),m=Math.floor(h+g/4),y=0;y<e.byweekno.length;y++){var _=e.byweekno[y];if(_<0&&(_+=m+1),_>0&&_<=m){var w=void 0;_>1?(w=d+(_-1)*7,d!==u&&(w-=7-u)):w=d;for(var E=0;E<7&&(l.wnomask[w]=1,w++,l.wdaymask[w]!==e.wkst);E++);}}if(Lt(e.byweekno,1)){var w=d+m*7;if(d!==u&&(w-=7-u),w<n)for(var y=0;y<7&&(l.wnomask[w]=1,w+=1,l.wdaymask[w]!==e.wkst);y++);}if(d){var S=void 0;if(Lt(e.byweekno,-1))S=-1;else{var T=ze.getWeekday(new Date(Date.UTC(t-1,0,1))),L=ln(7-T.valueOf()+e.wkst,7),I=ze.isLeapYear(t-1)?366:365,B=void 0;L>=4?(L=0,B=I+ln(T-e.wkst,7)):B=n-d,S=Math.floor(52+ln(B,7)/4)}if(Lt(e.byweekno,S))for(var w=0;w<d;w++)l.wnomask[w]=1}return l}function Iq(t){var e=ze.isLeapYear(t)?366:365,r=new Date(Date.UTC(t,0,1)),n=ze.getWeekday(r);return e===365?{mmask:US,mdaymask:GS,nmdaymask:HS,wdaymask:ey.slice(n),mrange:jS}:{mmask:FS,mdaymask:qS,nmdaymask:VS,wdaymask:ey.slice(n),mrange:KS}}function WS(t,e,r,n,i,a){var s={lastyear:t,lastmonth:e,nwdaymask:[]},l=[];if(a.freq===Me.YEARLY)if(Kn(a.bymonth))l=[[0,r]];else for(var u=0;u<a.bymonth.length;u++)e=a.bymonth[u],l.push(n.slice(e-1,e+1));else a.freq===Me.MONTHLY&&(l=[n.slice(e-1,e+1)]);if(Kn(l))return s;s.nwdaymask=Nt(0,r);for(var u=0;u<l.length;u++)for(var f=l[u],d=f[0],h=f[1]-1,g=0;g<a.bynweekday.length;g++){var m=void 0,y=a.bynweekday[g],_=y[0],w=y[1];w<0?(m=h+(w+1)*7,m-=ln(i[m]-_,7)):(m=d+(w-1)*7,m+=ln(7-i[m]+_,7)),d<=m&&m<=h&&(s.nwdaymask[m]=1)}return s}function zS(t,e){e===void 0&&(e=0);var r=t%19,n=Math.floor(t/100),i=t%100,a=Math.floor(n/4),s=n%4,l=Math.floor((n+8)/25),u=Math.floor((n-l+1)/3),f=Math.floor(19*r+n-a-u+15)%30,d=Math.floor(i/4),h=i%4,g=Math.floor(32+2*s+2*d-f-h)%7,m=Math.floor((r+11*f+22*g)/451),y=Math.floor((f+g-7*m+114)/31),_=(f+g-7*m+114)%31+1,w=Date.UTC(t,y-1,_+e),E=Date.UTC(t,0,1);return[Math.ceil((w-E)/(1e3*60*60*24))]}var Nq=function(){function t(e){this.options=e}return t.prototype.rebuild=function(e,r){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=YS(e,n)),Sr(n.bynweekday)&&(r!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,a=i.yearlen,s=i.mrange,l=i.wdaymask;this.monthinfo=WS(e,r,a,s,l,n)}sr(n.byeaster)&&(this.eastermask=zS(e,n.byeaster))},Object.defineProperty(t.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!0,configurable:!0}),t.prototype.ydayset=function(){return[hi(this.yearlen),0,this.yearlen]},t.prototype.mdayset=function(e,r,n){for(var i=this.mrange[r-1],a=this.mrange[r],s=Nt(null,this.yearlen),l=i;l<a;l++)s[l]=l;return[s,i,a]},t.prototype.wdayset=function(e,r,n){for(var i=Nt(null,this.yearlen+7),a=ze.toOrdinal(new Date(Date.UTC(e,r-1,n)))-this.yearordinal,s=a,l=0;l<7&&(i[a]=a,++a,this.wdaymask[a]!==this.options.wkst);l++);return[i,s,a]},t.prototype.ddayset=function(e,r,n){var i=Nt(null,this.yearlen),a=ze.toOrdinal(new Date(Date.UTC(e,r-1,n)))-this.yearordinal;return i[a]=a,[i,a,a+1]},t.prototype.htimeset=function(e,r,n,i){var a=this,s=[];return this.options.byminute.forEach(function(l){s=s.concat(a.mtimeset(e,l,n,i))}),ze.sort(s),s},t.prototype.mtimeset=function(e,r,n,i){var a=this.options.bysecond.map(function(s){return new Hl(e,r,s,i)});return ze.sort(a),a},t.prototype.stimeset=function(e,r,n,i){return[new Hl(e,r,n,i)]},t.prototype.getdayset=function(e){switch(e){case Ct.YEARLY:return this.ydayset.bind(this);case Ct.MONTHLY:return this.mdayset.bind(this);case Ct.WEEKLY:return this.wdayset.bind(this);case Ct.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},t.prototype.gettimeset=function(e){switch(e){case Ct.HOURLY:return this.htimeset.bind(this);case Ct.MINUTELY:return this.mtimeset.bind(this);case Ct.SECONDLY:return this.stimeset.bind(this)}},t}(),QS=Nq;function XS(t,e,r,n,i,a){for(var s=[],l=0;l<t.length;l++){var u=void 0,f=void 0,d=t[l];d<0?(u=Math.floor(d/e.length),f=ln(d,e.length)):(u=Math.floor((d-1)/e.length),f=ln(d-1,e.length));for(var h=[],g=r;g<n;g++){var m=a[g];!sr(m)||h.push(m)}var y=void 0;u<0?y=h.slice(u)[0]:y=h[u];var _=e[f],w=ze.fromOrdinal(i.yearordinal+y),E=ze.combine(w,_);Lt(s,E)||s.push(E)}return ze.sort(s),s}function Nh(t,e){var r=e.dtstart,n=e.freq,i=e.interval,a=e.until,s=e.bysetpos,l=e.count;if(l===0||i===0)return Fa(t);var u=RS.fromDate(r),f=new QS(e);f.rebuild(u.year,u.month);for(var d=Bq(f,u,e);;){var h=f.getdayset(n)(u.year,u.month,u.day),g=h[0],m=h[1],y=h[2],_=Dq(g,m,y,f,e);if(Sr(s))for(var w=XS(s,d,m,y,f,g),E=0;E<w.length;E++){var S=w[E];if(a&&S>a)return Fa(t);if(S>=r){var T=JS(S,e);if(!t.accept(T)||l&&(--l,!l))return Fa(t)}}else for(var E=m;E<y;E++){var L=g[E];if(!!sr(L))for(var I=ze.fromOrdinal(f.yearordinal+L),B=0;B<d.length;B++){var z=d[B],S=ze.combine(I,z);if(a&&S>a)return Fa(t);if(S>=r){var T=JS(S,e);if(!t.accept(T)||l&&(--l,!l))return Fa(t)}}}if(e.interval===0||(u.add(e,_),u.year>ze.MAXYEAR))return Fa(t);Cc(n)||(d=f.gettimeset(n)(u.hour,u.minute,u.second,0)),f.rebuild(u.year,u.month)}}function Rq(t,e,r){var n=r.bymonth,i=r.byweekno,a=r.byweekday,s=r.byeaster,l=r.bymonthday,u=r.bynmonthday,f=r.byyearday;return Sr(n)&&!Lt(n,t.mmask[e])||Sr(i)&&!t.wnomask[e]||Sr(a)&&!Lt(a,t.wdaymask[e])||Sr(t.nwdaymask)&&!t.nwdaymask[e]||s!==null&&!Lt(t.eastermask,e)||(Sr(l)||Sr(u))&&!Lt(l,t.mdaymask[e])&&!Lt(u,t.nmdaymask[e])||Sr(f)&&(e<t.yearlen&&!Lt(f,e+1)&&!Lt(f,-t.yearlen+e)||e>=t.yearlen&&!Lt(f,e+1-t.yearlen)&&!Lt(f,-t.nextyearlen+e-t.yearlen))}function JS(t,e){return new wo(t,e.tzid).rezonedDate()}function Fa(t){return t.getValue()}function Dq(t,e,r,n,i){for(var a=!1,s=e;s<r;s++){var l=t[s];a=Rq(n,l,i),a&&(t[l]=null)}return a}function Bq(t,e,r){var n=r.freq,i=r.byhour,a=r.byminute,s=r.bysecond;return Cc(n)?BS(r):n>=Me.HOURLY&&Sr(i)&&!Lt(i,e.hour)||n>=Me.MINUTELY&&Sr(a)&&!Lt(a,e.minute)||n>=Me.SECONDLY&&Sr(s)&&!Lt(s,e.second)?[]:t.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var pi={MO:new Nr(0),TU:new Nr(1),WE:new Nr(2),TH:new Nr(3),FR:new Nr(4),SA:new Nr(5),SU:new Nr(6)},bc={freq:Ct.YEARLY,dtstart:null,interval:1,wkst:pi.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},OS=Object.keys(bc),Me=function(){function t(e,r){e===void 0&&(e={}),r===void 0&&(r=!1),this._cache=r?null:new MS,this.origOptions=$m(e);var n=DS(e).parsedOptions;this.options=n}return t.parseText=function(e,r){return Ec(e,r)},t.fromText=function(e,r){return kS(e,r)},t.fromString=function(e){return new t(t.parseString(e)||void 0)},t.prototype._iter=function(e){return Nh(e,this.options)},t.prototype._cacheGet=function(e,r){return this._cache?this._cache._cacheGet(e,r):!1},t.prototype._cacheAdd=function(e,r,n){if(!!this._cache)return this._cache._cacheAdd(e,r,n)},t.prototype.all=function(e){if(e)return this._iter(new Zm("all",{},e));var r=this._cacheGet("all");return r===!1&&(r=this._iter(new Ua("all",{})),this._cacheAdd("all",r)),r},t.prototype.between=function(e,r,n,i){if(n===void 0&&(n=!1),!ze.isValidDate(e)||!ze.isValidDate(r))throw new Error("Invalid date passed in to RRule.between");var a={before:r,after:e,inc:n};if(i)return this._iter(new Zm("between",a,i));var s=this._cacheGet("between",a);return s===!1&&(s=this._iter(new Ua("between",a)),this._cacheAdd("between",s,a)),s},t.prototype.before=function(e,r){if(r===void 0&&(r=!1),!ze.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:r},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Ua("before",n)),this._cacheAdd("before",i,n)),i},t.prototype.after=function(e,r){if(r===void 0&&(r=!1),!ze.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:r},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Ua("after",n)),this._cacheAdd("after",i,n)),i},t.prototype.count=function(){return this.all().length},t.prototype.toString=function(){return Sc(this.origOptions)},t.prototype.toText=function(e,r,n){return IS(this,e,r,n)},t.prototype.isFullyConvertibleToText=function(){return NS(this)},t.prototype.clone=function(){return new t(this.origOptions)},t.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],t.YEARLY=Ct.YEARLY,t.MONTHLY=Ct.MONTHLY,t.WEEKLY=Ct.WEEKLY,t.DAILY=Ct.DAILY,t.HOURLY=Ct.HOURLY,t.MINUTELY=Ct.MINUTELY,t.SECONDLY=Ct.SECONDLY,t.MO=pi.MO,t.TU=pi.TU,t.WE=pi.WE,t.TH=pi.TH,t.FR=pi.FR,t.SA=pi.SA,t.SU=pi.SU,t.parseString=xc,t.optionsToString=Sc,t}();function ZS(t,e,r,n,i,a){var s={},l=t.accept;function u(g,m){r.forEach(function(y){y.between(g,m,!0).forEach(function(_){s[Number(_)]=!0})})}i.forEach(function(g){var m=new wo(g,a).rezonedDate();s[Number(m)]=!0}),t.accept=function(g){var m=Number(g);return isNaN(m)?l.call(this,g):!s[m]&&(u(new Date(m-1),new Date(m+1)),!s[m])?(s[m]=!0,l.call(this,g)):!0},t.method==="between"&&(u(t.args.after,t.args.before),t.accept=function(g){var m=Number(g);return s[m]?!0:(s[m]=!0,l.call(this,g))});for(var f=0;f<n.length;f++){var d=new wo(n[f],a).rezonedDate();if(!t.accept(new Date(d.getTime())))break}e.forEach(function(g){Nh(t,g.options)});var h=t._result;switch(ze.sort(h),t.method){case"all":case"between":return h;case"before":return h.length&&h[h.length-1]||null;case"after":default:return h.length&&h[0]||null}}var $S={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function Oq(t,e){var r=[],n=[],i=[],a=[],s=Tc(t),l=s.dtstart,u=s.tzid,f=Fq(t,e.unfold);return f.forEach(function(d){if(!!d){var h=Uq(d),g=h.name,m=h.parms,y=h.value;switch(g.toUpperCase()){case"RRULE":if(m.length)throw new Error("unsupported RRULE parm: "+m.join(","));r.push(xc(d));break;case"RDATE":var _=/RDATE(?:;TZID=([^:=]+))?/i.exec(d),w=_[0],E=_[1];E&&!u&&(u=E),n=n.concat(eA(y,m));break;case"EXRULE":if(m.length)throw new Error("unsupported EXRULE parm: "+m.join(","));i.push(xc(y));break;case"EXDATE":a=a.concat(eA(y,m));break;case"DTSTART":break;default:throw new Error("unsupported property: "+g)}}}),{dtstart:l,tzid:u,rrulevals:r,rdatevals:n,exrulevals:i,exdatevals:a}}function Lq(t,e){var r=Oq(t,e),n=r.rrulevals,i=r.rdatevals,a=r.exrulevals,s=r.exdatevals,l=r.dtstart,u=r.tzid,f=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||a.length||s.length){var d=new Eo(f);return d.dtstart(l),d.tzid(u||void 0),n.forEach(function(g){d.rrule(new Me(ty(g,l,u),f))}),i.forEach(function(g){d.rdate(g)}),a.forEach(function(g){d.exrule(new Me(ty(g,l,u),f))}),s.forEach(function(g){d.exdate(g)}),e.compatible&&e.dtstart&&d.rdate(l),d}var h=n[0]||{};return new Me(ty(h,h.dtstart||e.dtstart||l,h.tzid||e.tzid||u),f)}function Kl(t,e){return e===void 0&&(e={}),Lq(t,Pq(e))}function ty(t,e,r){return Cn(Cn({},t),{dtstart:e,tzid:r})}function Pq(t){var e=[],r=Object.keys(t),n=Object.keys($S);if(r.forEach(function(i){Lt(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return Cn(Cn({},$S),t)}function Mq(t){if(t.indexOf(":")===-1)return{name:"RRULE",value:t};var e=iS(t,":",1),r=e[0],n=e[1];return{name:r,value:n}}function Uq(t){var e=Mq(t),r=e.name,n=e.value,i=r.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function Fq(t,e){if(e===void 0&&(e=!1),t=t&&t.trim(),!t)throw new Error("Invalid empty string");if(!e)return t.split(/\s/);for(var r=t.split(`
`),n=0;n<r.length;){var i=r[n]=r[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(r[n-1]+=i.slice(1),r.splice(n,1)):n+=1:r.splice(n,1)}return r}function qq(t){t.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function eA(t,e){return qq(e),t.split(",").map(function(r){return ze.untilStringToDate(r)})}function tA(t){var e=this;return function(r){if(r!==void 0&&(e["_"+t]=r),e["_"+t]!==void 0)return e["_"+t];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[t];if(i)return i}}}var Eo=function(t){Gl(e,t);function e(r){r===void 0&&(r=!1);var n=t.call(this,{},r)||this;return n.dtstart=tA.apply(n,["dtstart"]),n.tzid=tA.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(r){return ZS(r,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(r){rA(r,this._rrule)},e.prototype.exrule=function(r){rA(r,this._exrule)},e.prototype.rdate=function(r){nA(r,this._rdate)},e.prototype.exdate=function(r){nA(r,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(r){return Kl(r.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(r){return Kl(r.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(r){return new Date(r.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(r){return new Date(r.getTime())})},e.prototype.valueOf=function(){var r=[];return!this._rrule.length&&this._dtstart&&(r=r.concat(Sc({dtstart:this._dtstart}))),this._rrule.forEach(function(n){r=r.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){r=r.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&r.push(iA("RDATE",this._rdate,this.tzid())),this._exdate.length&&r.push(iA("EXDATE",this._exdate,this.tzid())),r},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var r=new e(!!this._cache);return this._rrule.forEach(function(n){return r.rrule(n.clone())}),this._exrule.forEach(function(n){return r.exrule(n.clone())}),this._rdate.forEach(function(n){return r.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return r.exdate(new Date(n.getTime()))}),r},e}(Me);function rA(t,e){if(!(t instanceof Me))throw new TypeError(String(t)+" is not RRule instance");Lt(e.map(String),String(t))||e.push(t)}function nA(t,e){if(!(t instanceof Date))throw new TypeError(String(t)+" is not Date instance");Lt(e.map(Number),Number(t))||(e.push(t),ze.sort(e))}function iA(t,e,r){var n=!r||r.toUpperCase()==="UTC",i=n?t+":":t+";TZID="+r+":",a=e.map(function(s){return ze.timeToUntilString(s.valueOf(),n)}).join(",");return""+i+a}var aA=Me;var uA=yt(La());var Yl=yt(require("obsidian"));var Co=yt(require("obsidian"));var Dh=yt(La());function Ac(t){return t.getHours()/24+t.getMinutes()/(60*24)}function sA(t,e){if(t.start.date||(t==null?void 0:t.eventType)=="multiDay")return 0;let r=Ac(new Date(t.start.dateTime));return e*r}function oA(t,e){if(t.start.date||(t==null?void 0:t.eventType)=="multiDay")return 25;let r=Ac(new Date(t.start.dateTime)),n=Ac(new Date(t.end.dateTime));return e*(n-r)}function ry(t,e){return t/24*e}function ny(t,e){return t-t/24*e}var Rh=()=>app.vault.config.theme?app.vault.config.theme=="obsidian"?"dark":"light":"dark",iy=t=>t?t.trim().replace("<","lt").replace(">","gt").replace('"',"''").replace("\\","-").replace("/","-").replace(":","-").replace("|","-").replace("*","").replace("?",""):"",jl=t=>{let e=app.vault.getFiles().filter(i=>i.basename===iy(t.summary)),[r,n]=e.reduce(([i,a,s],l)=>{let u=app.metadataCache.getFileCache(l).frontmatter;return(u==null?void 0:u["event-id"])===t.id?[[...i,l],a,s]:(u==null?void 0:u["event-id"])?[i,a,[...s,l]]:[i,[...a,l],s]},[[],[],[]]);return{event:t,file:r[0]||n[0]||null,match:r.length>0?"id":"title"}};var ay=t=>P(void 0,null,function*(){var s,l;if(!t.settings.autoCreateEventNotes||!Yt())return;let e=Math.abs(t.settings.importStartOffset),r=Math.abs(t.settings.importEndOffset),n=window.moment().local().subtract(e,"day"),i=window.moment().local().add(r,"day"),a=yield er({startDate:n,endDate:i});for(let u=0;u<a.length;u++){let f=(l=(s=a[u].description)==null?void 0:s.match(/:(.*-)?obsidian-?(.*)?:/))!=null?l:[];f.length==3&&(yield oa(a[u],f[1],f[2],!0))}}),lA=(t,e,r)=>{var s,l,u,f;let n=(l=(s=r==null?void 0:r.start)==null?void 0:s.offset)!=null?l:0,i=(f=(u=r==null?void 0:r.end)==null?void 0:u.offset)!=null?f:0,a=e.substring(n,i);return a.contains("event-id:")||(a.contains("---")?a=a.replace("---",`---
event-id: ${t.id}`):a=`---
event-id: ${t.id}
---
`,e=e.substring(0,n)+a+e.substring(i)),e},Gq=(t,e)=>{let r=/{{gEvent\.([^}>]*)}}/gm,n,i=[];do n=r.exec(e),i.push(n);while(n);return i.forEach(a=>{if(a){let s="";if(a[1]=="attendees"){let l=Dh.default.get(t,a[1],"");for(let u=0;u<l.length;u++)l[u].displayName?s+=`- [[@${l[u].displayName}]]
`:s+=`- [[@${l[u].email}]]
`}else if(a[1]=="attachments"){let l=Dh.default.get(t,a[1],"");for(let u=0;u<l.length;u++)l[u].title?s+=`- [${l[u].title}](${l[u].fileUrl})
`:s+=`- [${l[u].fileUrl}](${l[u].fileUrl})
`}else s=Dh.default.get(t,a[1],"");s===Object(s)&&(s=JSON.stringify(s)),e=e.replace(a[0],s!=null?s:"")}}),e};function Vq(t,e){var r,n,i,a,s;return e=e.replace("{{date}}",window.moment().format("YYYY-MM-DD")),e=e.replace("{{date-year}}",window.moment().format("YYYY")),e=e.replace("{{date-month}}",window.moment().format("MM")),e=e.replace("{{date-day}}",window.moment().format("DD")),e=e.replace("{{event-date}}",window.moment((r=t.start.date)!=null?r:t.start.dateTime).format("YYYY-MM-DD")),e=e.replace("{{event-year}}",window.moment((n=t.start.date)!=null?n:t.start.dateTime).format("YYYY")),e=e.replace("{{event-month}}",window.moment((i=t.start.date)!=null?i:t.start.dateTime).format("MM")),e=e.replace("{{event-day}}",window.moment((a=t.start.date)!=null?a:t.start.dateTime).format("DD")),e=e.replace("{{event-title}}",(s=t.summary)!=null?s:"event-title"),e}function Hq(t,e){return P(this,null,function*(){let{adapter:r}=app.vault;e?(e.endsWith("-")&&(e=e.slice(0,-1)),e="/"+e.split(/[/\\]/).join("/"),(yield r.exists(e))||(yield r.mkdir(e))):e=app.fileManager.getNewFileParent("").path;let n=iy(t);return(0,Co.normalizePath)(`${e}/${n}.md`)})}function Kq(t,e){return P(this,null,function*(){let{vault:r}=app,{adapter:n}=r;if(yield n.exists(e)){let i=r.getAbstractFileByPath(e);return ot(`EventNote ${t.summary} already exists.`),new la(t,a=>i=a).open(),i}})}var oa=(t,e,r,n=!1)=>P(void 0,null,function*(){let i=$e.getInstance(),{vault:a}=app,{adapter:s}=a;e&&(e=Vq(t,e));let l=yield Hq(t.summary,e);if(!n){let h=yield Kq(t,l);if(h)return h}let u=yield a.create(l,"");if(ot(`EventNote ${t.summary} created.`),!i.coreTemplatePlugin&&!i.templaterPlugin||!r){let h=lA(t,"",null);yield s.write(l,h);let g=a.getAbstractFileByPath(l);return i.settings.autoCreateEventKeepOpen&&(yield app.workspace.getLeaf(!0).openFile(g)),g}r.match(/.*\.md/)||(r=r+".md");let f=yield app.workspace.getLeaf(!0);return yield f.setViewState({type:"MarkdownView"}),yield app.workspace.setActiveLeaf(f,!1,!0),yield f.openFile(u,{state:{mode:"source"},active:!0}),i.templaterPlugin&&i.coreTemplatePlugin?(yield d(!0))||(yield d(!1))||ot("Template not compatible"):i.templaterPlugin?(yield d(!0))||ot("Template not compatible"):i.coreTemplatePlugin&&((yield d(!1))||ot("Template not compatible")),i.settings.autoCreateEventKeepOpen||f.detach(),a.getAbstractFileByPath(l);function d(h){return P(this,null,function*(){var T,L,I,B,z,F;let g;h?g=(0,Co.normalizePath)((L=(T=i==null?void 0:i.templaterPlugin)==null?void 0:T.settings)==null?void 0:L.templates_folder):g=(0,Co.normalizePath)((z=(B=(I=i==null?void 0:i.coreTemplatePlugin)==null?void 0:I.instance)==null?void 0:B.options)==null?void 0:z.folder);let m;if((yield s.exists(r))?m=r:(m=`${g}/${r}`,g==="/"&&(m=r)),!(yield s.exists(m)))return ot(`Template: ${r} doesn't exit.`),!1;let y=a.getAbstractFileByPath(m);if(!(y instanceof Co.TFile))return!1;let _=yield a.cachedRead(y),w=lA(t,_,(F=app.metadataCache.getFileCache(y).frontmatter)==null?void 0:F.position);if(w=Gq(t,w),h&&w.contains("{{")&&w.contains("}}"))return!1;if(!h&&w.contains("<%")&&w.contains("%>"))return!1;let E=y.path+".tmp";yield s.write(E,w);let S=app.vault.getAbstractFileByPath(E);if(!(S instanceof Co.TFile))return!1;try{return h?yield i.templaterPlugin.templater.append_template_to_active_file(S):yield i.coreTemplatePlugin.instance.insertTemplate(S),s.remove(E),!0}catch(G){return s.remove(E),!1}})}});var la=class extends Yl.Modal{constructor(e,r){super(window.app);this.template=null;this.folder=null;this.plugin=$e.getInstance();this.event=e,this.onSubmit=r}onOpen(){let{contentEl:e}=this;e.createEl("h1",{text:"You can now select a template to use"}),new Yl.Setting(e).setName("Template").addSearch(r=>{new nc(r.inputEl,this.plugin),r.setPlaceholder("Template").setValue("").onChange(n=>this.template=n),r.containerEl.addClass("templater_search")}),new Yl.Setting(e).setName("Folder").addSearch(r=>{new ic(r.inputEl),r.setPlaceholder("Example: folder1/folder2").setValue(app.vault.config.newFileFolderPath).onChange(n=>this.folder=n),r.containerEl.addClass("templater_search")}),new Yl.Setting(e).setName("").addButton(r=>{r.setButtonText("Create Note"),r.onClick(()=>P(this,null,function*(){let n=yield oa(this.event,this.folder,this.template);this.onSubmit(n),this.close()}))})}onClose(){let{contentEl:e}=this;e.empty()}};function jq(t){ci(t,"svelte-47446l",".buttonRow.svelte-47446l.svelte-47446l{display:flex;flex-direction:row;align-items:center;justify-content:space-around;padding:5px}.summaryInput.svelte-47446l.svelte-47446l{border:none;border-bottom:2px solid;border-radius:0px;height:40px;font-size:35px;text-align:center}label.svelte-47446l.svelte-47446l{margin-top:5px}.googleFullDayContainer.svelte-47446l.svelte-47446l{margin-top:10px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.googleEventButtonContainer.svelte-47446l.svelte-47446l{margin-top:10px;display:flex;flex-direction:column;justify-content:space-around}.googleEventButtonContainer.svelte-47446l button.svelte-47446l{width:40%}")}function cA(t,e,r){let n=t.slice();return n[29]=e[r],n}function Yq(t){let e,r,n,i,a,s,l=t[3],u=[];for(let f=0;f<l.length;f+=1)u[f]=fA(cA(t,l,f));return{c(){var f;e=ce("label"),e.textContent="Calendar",r=Le(),n=ce("select");for(let d=0;d<u.length;d+=1)u[d].c();ie(e,"for","calendar"),ie(e,"class","svelte-47446l"),ie(n,"name","calendar"),ie(n,"class","dropdown"),n.disabled=i=((f=t[0])==null?void 0:f.id)!==void 0},m(f,d){xe(f,e,d),xe(f,r,d),xe(f,n,d);for(let h=0;h<u.length;h+=1)u[h].m(n,null);a||(s=tt(n,"change",t[11]),a=!0)},p(f,d){var h;if(d[0]&9){l=f[3];let g;for(g=0;g<l.length;g+=1){let m=cA(f,l,g);u[g]?u[g].p(m,d):(u[g]=fA(m),u[g].c(),u[g].m(n,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=l.length}d[0]&1&&i!==(i=((h=f[0])==null?void 0:h.id)!==void 0)&&(n.disabled=i)},d(f){f&&be(e),f&&be(r),f&&be(n),wn(u,f),a=!1,s()}}}function Wq(t){let e;return{c(){e=ce("span"),e.textContent="Loading"},m(r,n){xe(r,e,n)},p:At,d(r){r&&be(e)}}}function fA(t){let e,r=t[29].summary+"",n,i,a,s;return{c(){var l,u;e=ce("option"),n=Tr(r),ie(e,"id",i=t[29].id),e.__value=a=t[29].id,e.value=e.__value,e.selected=s=t[29].id==((u=(l=t[0])==null?void 0:l.parent)==null?void 0:u.id)},m(l,u){xe(l,e,u),oe(e,n)},p(l,u){var f,d;u[0]&8&&r!==(r=l[29].summary+"")&&fi(n,r),u[0]&8&&i!==(i=l[29].id)&&ie(e,"id",i),u[0]&8&&a!==(a=l[29].id)&&(e.__value=a,e.value=e.__value),u[0]&9&&s!==(s=l[29].id==((d=(f=l[0])==null?void 0:f.parent)==null?void 0:d.id))&&(e.selected=s)},d(l){l&&be(e)}}}function zq(t){let e,r,n,i,a,s,l,u,f,d;return{c(){e=ce("label"),e.textContent="Start Date",r=Le(),n=ce("input"),i=Le(),a=ce("label"),a.textContent="End Date",s=Le(),l=ce("input"),ie(e,"for","eventStartDate"),ie(e,"class","svelte-47446l"),ie(n,"type","datetime-local"),ie(n,"name","eventStartDate"),ie(a,"for","eventEndDate"),ie(a,"class","svelte-47446l"),ie(l,"type","datetime-local"),ie(l,"name","eventEndDate"),ie(l,"min",u=window.moment(t[1]).format("YYYY-MM-DDThh:mm"))},m(h,g){xe(h,e,g),xe(h,r,g),xe(h,n,g),Bi(n,t[1]),xe(h,i,g),xe(h,a,g),xe(h,s,g),xe(h,l,g),Bi(l,t[2]),f||(d=[tt(n,"input",t[24]),tt(l,"input",t[25])],f=!0)},p(h,g){g[0]&2&&Bi(n,h[1]),g[0]&2&&u!==(u=window.moment(h[1]).format("YYYY-MM-DDThh:mm"))&&ie(l,"min",u),g[0]&4&&Bi(l,h[2])},d(h){h&&be(e),h&&be(r),h&&be(n),h&&be(i),h&&be(a),h&&be(s),h&&be(l),f=!1,on(d)}}}function Qq(t){let e,r,n,i,a;return{c(){e=ce("label"),e.textContent="Date",r=Le(),n=ce("input"),ie(e,"for","eventDate"),ie(e,"class","svelte-47446l"),ie(n,"type","date"),ie(n,"name","eventDate")},m(s,l){xe(s,e,l),xe(s,r,l),xe(s,n,l),Bi(n,t[6]),i||(a=tt(n,"input",t[23]),i=!0)},p(s,l){l[0]&64&&Bi(n,s[6])},d(s){s&&be(e),s&&be(r),s&&be(n),i=!1,a()}}}function Xq(t){let e,r,n,i;return{c(){e=ce("div"),r=ce("button"),r.textContent="Create",ie(r,"class","svelte-47446l"),ie(e,"class","buttonRow svelte-47446l")},m(a,s){xe(a,e,s),oe(e,r),n||(i=tt(r,"click",t[12]),n=!0)},p:At,d(a){a&&be(e),n=!1,i()}}}function Jq(t){let e,r,n,i,a,s,l,u,f,d,h;function g(T,L){return T[7]!=""?$q:Zq}let m=g(t,[-1,-1]),y=m(t);function _(T,L){return T[8].file?tG:eG}let w=_(t,[-1,-1]),E=w(t),S=t[7]!=""&&hA(t);return{c(){e=ce("div"),y.c(),r=Le(),E.c(),n=Le(),i=ce("div"),a=ce("button"),a.textContent="Update",s=Le(),l=ce("button"),l.textContent="Delete",u=Le(),S&&S.c(),f=ia(),ie(e,"class","buttonRow svelte-47446l"),ie(a,"class","svelte-47446l"),ie(l,"class","svelte-47446l"),ie(i,"class","buttonRow svelte-47446l")},m(T,L){xe(T,e,L),y.m(e,null),oe(e,r),E.m(e,null),xe(T,n,L),xe(T,i,L),oe(i,a),oe(i,s),oe(i,l),xe(T,u,L),S&&S.m(T,L),xe(T,f,L),d||(h=[tt(a,"click",t[15]),tt(l,"click",t[13])],d=!0)},p(T,L){m===(m=g(T,L))&&y?y.p(T,L):(y.d(1),y=m(T),y&&(y.c(),y.m(e,r))),w===(w=_(T,L))&&E?E.p(T,L):(E.d(1),E=w(T),E&&(E.c(),E.m(e,null))),T[7]!=""?S?S.p(T,L):(S=hA(T),S.c(),S.m(f.parentNode,f)):S&&(S.d(1),S=null)},d(T){T&&be(e),y.d(),E.d(),T&&be(n),T&&be(i),T&&be(u),S&&S.d(T),T&&be(f),d=!1,on(h)}}}function Zq(t){let e,r,n;return{c(){e=ce("button"),e.textContent="Show Single Event",ie(e,"class","svelte-47446l")},m(i,a){xe(i,e,a),r||(n=tt(e,"click",t[19]),r=!0)},p:At,d(i){i&&be(e),r=!1,n()}}}function $q(t){let e,r,n;return{c(){e=ce("button"),e.textContent="Show Recurring Event",ie(e,"class","svelte-47446l")},m(i,a){xe(i,e,a),r||(n=tt(e,"click",t[19]),r=!0)},p:At,d(i){i&&be(e),r=!1,n()}}}function eG(t){let e,r,n;return{c(){e=ce("button"),e.textContent="Create Event Note",ie(e,"class","svelte-47446l")},m(i,a){xe(i,e,a),r||(n=tt(e,"click",t[18]),r=!0)},p:At,d(i){i&&be(e),r=!1,n()}}}function tG(t){let e,r,n,i,a=t[8].match=="title"&&dA(t);return{c(){a&&a.c(),e=Le(),r=ce("button"),r.textContent="Open Event Note",ie(r,"class","svelte-47446l")},m(s,l){a&&a.m(s,l),xe(s,e,l),xe(s,r,l),n||(i=tt(r,"click",t[17]),n=!0)},p(s,l){s[8].match=="title"?a?a.p(s,l):(a=dA(s),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},d(s){a&&a.d(s),s&&be(e),s&&be(r),n=!1,i()}}}function dA(t){let e,r,n;return{c(){e=ce("button"),e.textContent="Create Event Note for this date",ie(e,"class","svelte-47446l")},m(i,a){xe(i,e,a),r||(n=tt(e,"click",t[18]),r=!0)},p:At,d(i){i&&be(e),r=!1,n()}}}function hA(t){let e,r,n,i,a,s;return{c(){e=ce("div"),r=ce("button"),r.textContent="Update All",n=Le(),i=ce("button"),i.textContent="Delete All",ie(r,"class","svelte-47446l"),ie(i,"class","svelte-47446l"),ie(e,"class","buttonRow svelte-47446l")},m(l,u){xe(l,e,u),oe(e,r),oe(e,n),oe(e,i),a||(s=[tt(r,"click",t[16]),tt(i,"click",t[14])],a=!0)},p:At,d(l){l&&be(e),a=!1,on(s)}}}function rG(t){let e,r,n,i,a,s,l,u,f,d,h,g,m,y,_,w,E,S,T,L,I,B,z;function F(re,Fe){return re[4]?Wq:Yq}let G=F(t,[-1,-1]),te=G(t);function ae(re,Fe){return re[5]?Qq:zq}let we=ae(t,[-1,-1]),Se=we(t);function Qe(re,Fe){return re[0].id?Jq:Xq}let Re=Qe(t,[-1,-1]),me=Re(t);return{c(){e=ce("div"),r=ce("input"),n=Le(),i=ce("label"),i.textContent="Description",a=Le(),s=ce("textarea"),u=Le(),te.c(),f=Le(),d=ce("div"),h=ce("label"),h.textContent="Full Day",g=Le(),m=ce("input"),y=Le(),Se.c(),_=Le(),w=ce("label"),w.textContent="Reoccurring",E=Le(),S=ce("input"),L=Le(),I=ce("div"),me.c(),ie(r,"class","summaryInput svelte-47446l"),ie(r,"name","summary"),ie(r,"type","text"),ie(r,"placeholder","Summary"),ie(i,"for","description"),ie(i,"class","svelte-47446l"),ie(s,"name","description"),s.value=l=t[9](),ie(h,"for","fullDay"),ie(h,"class","svelte-47446l"),ie(m,"type","checkbox"),ie(m,"name","fullDay"),ie(d,"class","googleFullDayContainer svelte-47446l"),ie(w,"for","reoccurring"),ie(w,"class","svelte-47446l"),ie(S,"type","text"),ie(S,"name","Reoccurring"),S.disabled=T=t[0].id!=null,ie(I,"class","googleEventButtonContainer svelte-47446l"),ie(e,"class","googleEventDetails")},m(re,Fe){xe(re,e,Fe),oe(e,r),Bi(r,t[0].summary),oe(e,n),oe(e,i),oe(e,a),oe(e,s),oe(e,u),te.m(e,null),oe(e,f),oe(e,d),oe(d,h),oe(d,g),oe(d,m),m.checked=t[5],oe(e,y),Se.m(e,null),oe(e,_),oe(e,w),oe(e,E),oe(e,S),Bi(S,t[7]),oe(e,L),oe(e,I),me.m(I,null),B||(z=[tt(r,"input",t[21]),tt(s,"change",t[10]),tt(m,"change",t[22]),tt(S,"input",t[26])],B=!0)},p(re,Fe){Fe[0]&1&&r.value!==re[0].summary&&Bi(r,re[0].summary),G===(G=F(re,Fe))&&te?te.p(re,Fe):(te.d(1),te=G(re),te&&(te.c(),te.m(e,f))),Fe[0]&32&&(m.checked=re[5]),we===(we=ae(re,Fe))&&Se?Se.p(re,Fe):(Se.d(1),Se=we(re),Se&&(Se.c(),Se.m(e,_))),Fe[0]&1&&T!==(T=re[0].id!=null)&&(S.disabled=T),Fe[0]&128&&S.value!==re[7]&&Bi(S,re[7]),Re===(Re=Qe(re,Fe))&&me?me.p(re,Fe):(me.d(1),me=Re(re),me&&(me.c(),me.m(I,null)))},i:At,o:At,d(re){re&&be(e),te.d(),Se.d(),me.d(),B=!1,on(z)}}}function pA(){let t=15,e=1e3*60*t;return window.moment(new Date(Math.round(new Date().getTime()/e)*e))}function nG(t,e,r){let{event:n}=e,{closeFunction:i}=e,a,s=!0,l,u=$e.getInstance(),f,d,h,g="",m=jl(n);function y(me){let re=uA.default.cloneDeep(me);return l?(re.start.date=window.moment(h).format("YYYY-MM-DD"),re.end.date=window.moment(h).format("YYYY-MM-DD"),delete re.start.dateTime,delete re.end.dateTime):(re.start.dateTime=window.moment(f).format(),re.end.dateTime=window.moment(d).format(),delete re.start.date,delete re.end.date),re}ho(()=>vr(void 0,void 0,void 0,function*(){var me,re,Fe,Ze,ct;if(r(5,l=((me=n==null?void 0:n.start)===null||me===void 0?void 0:me.dateTime)==null&&((re=n==null?void 0:n.start)===null||re===void 0?void 0:re.date)!==void 0),r(3,a=yield Or()),r(4,s=!1),n.id==null){r(0,n.summary=(Fe=n.summary)!==null&&Fe!==void 0?Fe:"",n),r(0,n.description=(Ze=n.description)!==null&&Ze!==void 0?Ze:"",n),r(0,n.parent=a.find(ft=>ft.id===u.settings.defaultCalendar),n),n.parent||r(0,n.parent=a[a.length-1],n),r(7,g="");let Je=pA();r(1,f=Je.format("YYYY-MM-DDTHH:mm")),r(2,d=Je.add(1,"hour").format("YYYY-MM-DDTHH:mm")),r(6,h=Je.format("YYYY-MM-DD")),n.start.date&&r(6,h=window.moment(n.start.date).format("YYYY-MM-DD")),n.start.dateTime&&n.end.dateTime&&(r(1,f=window.moment(n.start.dateTime).format("YYYY-MM-DDTHH:mm")),r(2,d=window.moment(n.end.dateTime).format("YYYY-MM-DDTHH:mm")))}else{let Je=yield aa((ct=n.recurringEventId)!==null&&ct!==void 0?ct:n.id,n.parent.id);if(Je==null?void 0:Je.recurrence){let ft=Kl(Je.recurrence[0]);r(7,g=ft.toText())}else r(7,g="");if(l){let ft=pA();r(1,f=ft.format("YYYY-MM-DDTHH:mm")),r(2,d=ft.add(1,"hour").format("YYYY-MM-DDTHH:mm")),r(6,h=window.moment(n.start.date).format("YYYY-MM-DD"))}else r(1,f=window.moment(n.start.dateTime).format("YYYY-MM-DDTHH:mm")),r(2,d=window.moment(n.end.dateTime).format("YYYY-MM-DDTHH:mm")),r(6,h=window.moment().format("YYYY-MM-DD"))}}));let _=()=>n.description?n.description.replace(/<\/?[^>]+(>|$)/g,""):"",w=me=>{me.target instanceof HTMLTextAreaElement&&r(0,n.description=me.target.value,n)},E=me=>{let re=me.target;if(re instanceof HTMLSelectElement){let Fe=re.value;r(0,n.parent.id=Fe,n)}},S=()=>vr(void 0,void 0,void 0,function*(){if(g&&g!="")try{let re=Me.fromText(g),Fe=new Eo;Fe.rrule(re);let Ze=Fe.valueOf();if(g&&Ze[0]==""){ot("Event not created. Error in recurrence text.",!0);return}r(0,n.recurrence=Ze,n)}catch(re){ot("Event not created. Error in recurrence text.",!0);return}(yield Fl(y(n))).id&&i()}),T=me=>vr(void 0,void 0,void 0,function*(){let re=!1;n.recurringEventId?re=yield Ml(n):re=yield Ml(n),re&&i()}),L=()=>vr(void 0,void 0,void 0,function*(){(yield Ml(y(n),!0))&&i()}),I=()=>vr(void 0,void 0,void 0,function*(){let me=y(n),re;me.recurringEventId?re=yield Ul(me):re=yield Ul(me),re.id&&i()}),B=()=>vr(void 0,void 0,void 0,function*(){(yield Ul(y(n),!0)).id&&i()}),z=()=>vr(void 0,void 0,void 0,function*(){app.workspace.getLeaf(!0).openFile(m.file),i()}),F=()=>vr(void 0,void 0,void 0,function*(){u.settings.useDefaultTemplate&&u.settings.defaultFolder&&u.settings.defaultFolder?oa(n,u.settings.defaultFolder,u.settings.defaultTemplate):new la(n,me=>r(8,m.file=me,m)).open()}),G=()=>{window.open(n.htmlLink)};function te(){n.summary=this.value,r(0,n)}function ae(){l=this.checked,r(5,l)}function we(){h=this.value,r(6,h)}function Se(){f=this.value,r(1,f)}function Qe(){d=this.value,r(2,d),r(1,f)}function Re(){g=this.value,r(7,g)}return t.$$set=me=>{"event"in me&&r(0,n=me.event),"closeFunction"in me&&r(20,i=me.closeFunction)},t.$$.update=()=>{if(t.$$.dirty[0]&6){e:{let me=window.moment(f);window.moment(d).isBefore(me)&&r(2,d=me.add(1,"hour").format("YYYY-MM-DDTHH:mm"))}}},[n,f,d,a,s,l,h,g,m,_,w,E,S,T,L,I,B,z,F,G,i,te,ae,we,Se,Qe,Re]}var gA=class extends En{constructor(e){super();Bn(this,e,nG,rG,Rn,{event:0,closeFunction:20},jq,[-1,-1])}},mA=gA;var gi=class extends yA.Modal{constructor(e,r){super($e.getInstance().app);this.selectedEvent=e,r&&(this.closeFunction=r)}onOpen(){return P(this,null,function*(){let{contentEl:e}=this;new mA({target:e,props:{event:this.selectedEvent,closeFunction:()=>{this.closeFunction&&this.closeFunction(),this.close()}}})})}onClose(){let{contentEl:e}=this;e.empty()}};var _A=yt(hh());var Li=class extends vA.FuzzySuggestModal{constructor(e,r,n=window.moment(),i=!1,a){super(window.app);this.plugin=$e.getInstance();this.eventList=[...e],this.modalSelectMode=r,this.setPlaceholder(`${n.format("MM/DD/YYYY")} Arrow left/right to switch day`),this.emptyStateText="No events found enter to create a new one",this.eventsChanged=i,this.currentDate=n.clone(),a&&(this.closeFunction=a),this.inputEl.addEventListener("keydown",s=>P(this,null,function*(){let l=!1;!this.getSuggestions(this.inputEl.value).length&&s.key=="Enter"&&new gi({summary:this.inputEl.value,start:{date:n.format()},end:{}},()=>{this.eventsChanged=!0,this.close()}).open(),s.key=="ArrowRight"?(s.ctrlKey?this.currentDate=this.currentDate.add(1,"month"):s.shiftKey?this.currentDate=this.currentDate.add(1,"week"):this.currentDate=this.currentDate.add(1,"day"),l=!0):s.key=="ArrowLeft"&&(s.ctrlKey?this.currentDate=this.currentDate.subtract(1,"month"):s.shiftKey?this.currentDate=this.currentDate.subtract(1,"week"):this.currentDate=this.currentDate.subtract(1,"day"),l=!0),l&&(this.setPlaceholder("Loading"),this.eventList=yield er({startDate:this.currentDate}),this.inputEl.dispatchEvent(new Event("input")),this.setPlaceholder(`${this.currentDate.format("MM/DD/YYYY")} Arrow left and right to switch day`))}))}getItems(){return this.plugin.settings.activateDailyNoteAddon?[{id:"xxx",start:null,end:null},...this.eventList]:this.eventList}getItemText(e){return e.id=="xxx"?pc(this.currentDate)?"Open daily note":"Create daily note":e.start.date?`${e.start.date}		 | ${e.summary}	`:`${window.moment(e.start.dateTime).format("YYYY-MM-DD HH:mm")}	 | ${e.summary}	`}onChooseItem(e){return P(this,null,function*(){if(e.id=="xxx"){let r=pc(this.currentDate);r||(r=yield(0,_A.createDailyNote)(this.currentDate)),yield app.workspace.getLeaf(!1).openFile(r,{active:!0});return}this.modalSelectMode=="details"?(this.open(),new gi(e,()=>this.eventsChanged=!0).open()):this.modalSelectMode=="createNote"&&(this.plugin.settings.useDefaultTemplate?oa(e,this.plugin.settings.defaultFolder,this.plugin.settings.defaultTemplate):new la(e,()=>{}).open())})}onClose(){this.closeFunction&&this.eventsChanged&&this.closeFunction()}};var Bh=class extends wA.FuzzySuggestModal{constructor(e){super($e.getInstance().app);this.calendarList=e,this.setPlaceholder("Select a calendar to view it")}getItems(){return this.calendarList}getItemText(e){return`${e.summary}	`}onChooseItem(e){return P(this,null,function*(){let r=yield er({include:[e.id]});new Li(r,"details").open()})}};var Cs;(function(i){i.web="web",i.month="month",i.day="day",i.schedule="schedule"})(Cs||(Cs={}));var Xh=yt(require("obsidian"));var TA=yt(xA());function cG(t){ci(t,"svelte-ozfeab",'.googleCalendarEvent.svelte-ozfeab{display:flex;padding:10px;padding-top:0;position:absolute;cursor:pointer;width:150px;left:40px;border-radius:5px;color:black;font-size:0.5em;box-shadow:3px 2px 8px 4px rgba(0,0,0,0.36);overflow:hidden}.hourLine.svelte-ozfeab::after{content:"";position:absolute;width:90%;left:25px;border-bottom:1px solid white}.hourLineLarge.svelte-ozfeab::after{width:80%;left:50px}.hourText.svelte-ozfeab{display:block;font-family:"consolas"}.timeline.svelte-ozfeab,.hourText.svelte-ozfeab,.hourTextContainer.svelte-ozfeab{overflow:hidden}.timeDisplay.svelte-ozfeab{position:absolute;height:3px;background:red;overflow:visible}.timeline.svelte-ozfeab{position:relative;display:flex;flex-direction:row;overflow:visible}')}function SA(t,e,r){let n=t.slice();return n[20]=e[r],n[22]=r,n}function AA(t,e,r){let n=t.slice();return n[23]=e[r],n[22]=r,n}function kA(t,e,r){let n=t.slice();return n[23]=e[r],n[22]=r,n}function fG(t){let e,r,n,i,a=`-${t[1]/52}px`,s,l=window.moment().isSame(t[0],"day"),u,f=`${t[1]}px`,d=`${t[2]}px`,h=` -${ry(t[1],t[3][0])}px 0px -${ny(t[1],t[3][1])}px 0px`,g={length:24},m=[];for(let T=0;T<g.length;T+=1)m[T]=IA(kA(t,g,T));let y={length:24},_=[];for(let T=0;T<y.length;T+=1)_[T]=NA(AA(t,y,T));let w=l&&RA(t),E=t[6],S=[];for(let T=0;T<E.length;T+=1)S[T]=DA(SA(t,E,T));return{c(){e=ce("div"),r=ce("div");for(let T=0;T<m.length;T+=1)m[T].c();n=Le(),i=ce("div");for(let T=0;T<_.length;T+=1)_[T].c();s=Le(),w&&w.c(),u=Le();for(let T=0;T<S.length;T+=1)S[T].c();ie(r,"class","hourLineContainer"),ie(i,"class","hourTextContainer svelte-ozfeab"),Xe(i,"margin-top",a,!1),ie(e,"class","timeline svelte-ozfeab"),Xe(e,"height",f,!1),Xe(e,"width",d,!1),Xe(e,"margin",h,!1)},m(T,L){xe(T,e,L),oe(e,r);for(let I=0;I<m.length;I+=1)m[I].m(r,null);oe(e,n),oe(e,i);for(let I=0;I<_.length;I+=1)_[I].m(i,null);oe(e,s),w&&w.m(e,null),oe(e,u);for(let I=0;I<S.length;I+=1)S[I].m(e,null)},p(T,L){if(L&130){g={length:24};let I;for(I=0;I<g.length;I+=1){let B=kA(T,g,I);m[I]?m[I].p(B,L):(m[I]=IA(B),m[I].c(),m[I].m(r,null))}for(;I<m.length;I+=1)m[I].d(1);m.length=g.length}if(L&1666){y={length:24};let I;for(I=0;I<y.length;I+=1){let B=AA(T,y,I);_[I]?_[I].p(B,L):(_[I]=NA(B),_[I].c(),_[I].m(i,null))}for(;I<_.length;I+=1)_[I].d(1);_.length=y.length}if(L&2&&a!==(a=`-${T[1]/52}px`)&&Xe(i,"margin-top",a,!1),L&1&&(l=window.moment().isSame(T[0],"day")),l?w?w.p(T,L):(w=RA(T),w.c(),w.m(e,u)):w&&(w.d(1),w=null),L&320){E=T[6];let I;for(I=0;I<E.length;I+=1){let B=SA(T,E,I);S[I]?S[I].p(B,L):(S[I]=DA(B),S[I].c(),S[I].m(e,null))}for(;I<S.length;I+=1)S[I].d(1);S.length=E.length}L&2&&f!==(f=`${T[1]}px`)&&Xe(e,"height",f,!1),L&4&&d!==(d=`${T[2]}px`)&&Xe(e,"width",d,!1),L&10&&h!==(h=` -${ry(T[1],T[3][0])}px 0px -${ny(T[1],T[3][1])}px 0px`)&&Xe(e,"margin",h,!1)},d(T){T&&be(e),wn(m,T),wn(_,T),w&&w.d(),wn(S,T)}}}function dG(t){let e;return{c(){e=ce("p"),e.textContent="Loading"},m(r,n){xe(r,e,n)},p:At,d(r){r&&be(e)}}}function IA(t){let e,r,n=`${t[1]/24}px`;return{c(){e=ce("div"),ie(e,"class",r=""+(Bl(t[7]==2?"hourLine hourLineLarge":"hourLine")+" svelte-ozfeab")),Xe(e,"height",n,!1)},m(i,a){xe(i,e,a)},p(i,a){a&128&&r!==(r=""+(Bl(i[7]==2?"hourLine hourLineLarge":"hourLine")+" svelte-ozfeab"))&&ie(e,"class",r),a&2&&n!==(n=`${i[1]/24}px`)&&Xe(e,"height",n,!1)},d(i){i&&be(e)}}}function NA(t){let e,r=t[10](t[22],t[7])+"",n,i=`${t[1]/24}px`,a=`${t[1]/50}px`,s,l;return{c(){e=ce("span"),n=Tr(r),ie(e,"class","hourText svelte-ozfeab"),Xe(e,"height",i,!1),Xe(e,"font-size",a,!1)},m(u,f){xe(u,e,f),oe(e,n),s||(l=tt(e,"click",t[9]),s=!0)},p(u,f){f&128&&r!==(r=u[10](u[22],u[7])+"")&&fi(n,r),f&2&&i!==(i=`${u[1]/24}px`)&&Xe(e,"height",i,!1),f&2&&a!==(a=`${u[1]/50}px`)&&Xe(e,"font-size",a,!1)},d(u){u&&be(e),s=!1,l()}}}function RA(t){let e,r=`${t[5]}px`,n=`${t[2]}px`;return{c(){e=ce("div"),ie(e,"class","timeDisplay svelte-ozfeab"),Xe(e,"top",r,!1),Xe(e,"width",n,!1)},m(i,a){xe(i,e,a)},p(i,a){a&32&&r!==(r=`${i[5]}px`)&&Xe(e,"top",r,!1),a&4&&n!==(n=`${i[2]}px`)&&Xe(e,"width",n,!1)},d(i){i&&be(e)}}}function DA(t){let e,r,n=t[20].event.summary+"",i,a,s,l,u,f=`${t[20].y}px`,d=`${t[20].x}px`,h=`${t[20].width}px`,g=`${t[20].height}px`,m,y;function _(...w){return t[14](t[20],...w)}return{c(){e=ce("div"),r=ce("span"),i=Tr(n),s=Le(),ie(r,"class",a="googleCalendarName googleCalendarName_Calendar_Color_"+t[20].event.parent.colorId+" googleCalendarName_Event_Color_"+t[20].event.parent.colorId+" googleCalendarName_Id_"+t[20].event.parent.id+" svelte-ozfeab"),ie(e,"class",l="googleCalendarEvent googleCalendarEvent_Calendar_Color_"+t[20].event.parent.colorId+" googleCalendarEvent_Event_Color_"+t[20].event.parent.colorId+" googleCalendarEvent_Id_"+t[20].event.parent.id+" svelte-ozfeab"),ie(e,"id",u=t[20].event.id),Xe(e,"top",f,!1),Xe(e,"left",d,!1),Xe(e,"width",h,!1),Xe(e,"height",g,!1),Xe(e,"background",Qu(t[20].event),!1)},m(w,E){xe(w,e,E),oe(e,r),oe(r,i),oe(e,s),m||(y=tt(e,"click",_),m=!0)},p(w,E){t=w,E&64&&n!==(n=t[20].event.summary+"")&&fi(i,n),E&64&&a!==(a="googleCalendarName googleCalendarName_Calendar_Color_"+t[20].event.parent.colorId+" googleCalendarName_Event_Color_"+t[20].event.parent.colorId+" googleCalendarName_Id_"+t[20].event.parent.id+" svelte-ozfeab")&&ie(r,"class",a),E&64&&l!==(l="googleCalendarEvent googleCalendarEvent_Calendar_Color_"+t[20].event.parent.colorId+" googleCalendarEvent_Event_Color_"+t[20].event.parent.colorId+" googleCalendarEvent_Id_"+t[20].event.parent.id+" svelte-ozfeab")&&ie(e,"class",l),E&64&&u!==(u=t[20].event.id)&&ie(e,"id",u),E&64&&f!==(f=`${t[20].y}px`)&&Xe(e,"top",f,!1),E&64&&d!==(d=`${t[20].x}px`)&&Xe(e,"left",d,!1),E&64&&h!==(h=`${t[20].width}px`)&&Xe(e,"width",h,!1),E&64&&g!==(g=`${t[20].height}px`)&&Xe(e,"height",g,!1),E&64&&Xe(e,"background",Qu(t[20].event),!1)},d(w){w&&be(e),m=!1,y()}}}function hG(t){let e;function r(a,s){return a[4]?dG:fG}let n=r(t,-1),i=n(t);return{c(){i.c(),e=ia()},m(a,s){i.m(a,s),xe(a,e,s)},p(a,[s]){n===(n=r(a,s))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:At,o:At,d(a){i.d(a),a&&be(e)}}}function pG(t,e,r){let{height:n=700}=e,{width:i=300}=e,{date:a=window.moment()}=e,{include:s}=e,{exclude:l}=e,{hourRange:u=[0,24]}=e,f=!0,d=0,h=[],g=[],m,y=$e.getInstance(),_=y.settings.timelineHourFormat,w=()=>vr(void 0,void 0,void 0,function*(){r(7,_=y.settings.timelineHourFormat),yield S();let z=Ac(new Date);r(5,d=Math.floor(n*z))}),E=()=>{let z=new TA.default;h.forEach(te=>{let ae=te.start.date||te.start.dateTime;z.has(ae)?z.get(ae).push(te):z.set(ae,[te])});let F=0,G=null;for(let te of z.values()){if(te[0].start.dateTime){let ae=window.moment(te[0].start.dateTime);G&&ae.isBefore(G,"minutes")?F++:F=0,G=window.moment(te[0].end.dateTime)}te.forEach((ae,we)=>{let Se=30;_==2&&(Se=50);let Qe=Se+F*10,Re=(i-Qe)/te.length;r(6,g=[...g,{event:ae,x:Qe+Re*we,y:sA(ae,n),width:Re,height:oA(ae,n),fullDay:ae.start.date!=null}])})}},S=()=>vr(void 0,void 0,void 0,function*(){if(!a.isValid())return;let z=yield er({startDate:a,include:s,exclude:l});JSON.stringify(z)!=JSON.stringify(h)&&(h=z,r(6,g=[]),E()),r(4,f=!1)}),T=(z,F)=>{F.shiftKey?window.open(z.htmlLink):new gi(z,()=>{Di(),r(0,a),r(13,m)}).open()};po(()=>{clearInterval(m)});let L=()=>{r(7,_+=1),_>2&&r(7,_=0),y.settings.timelineHourFormat=_,y.saveSettings()},I=(z,F)=>{let G=window.moment(`${z}:00:00`,"H:mm:ss");switch(F){case 0:return G.format("HH");case 1:return G.format("hh");case 2:return G.format("hh A")}},B=(z,F)=>T(z.event,F);return t.$$set=z=>{"height"in z&&r(1,n=z.height),"width"in z&&r(2,i=z.width),"date"in z&&r(0,a=z.date),"include"in z&&r(11,s=z.include),"exclude"in z&&r(12,l=z.exclude),"hourRange"in z&&r(3,u=z.hourRange)},t.$$.update=()=>{if(t.$$.dirty&8193){e:r(0,a),r(13,m),m&&clearInterval(m),r(4,f=!0),r(13,m=setInterval(w,5e3)),w()}},[a,n,i,u,f,d,g,_,T,L,I,s,l,m,B]}var BA=class extends En{constructor(e){super();Bn(this,e,pG,hG,Rn,{height:1,width:2,date:0,include:11,exclude:12,hourRange:3},cG)}},OA=BA;function gG(t){ci(t,"svelte-169s007",".fixedSizeButton.svelte-169s007{text-align:center;padding:10px 5%;margin:0}.titleContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}.navigationContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:space-around;flex-wrap:wrap;padding-bottom:30px}")}function LA(t){let e,r,n,i,a,s=t[0].format("YYYY-MM-DD")+"",l,u,f,d,h,g,m,y,_,w,E,S,T,L;return{c(){e=ce("div"),r=ce("button"),r.textContent="+",n=Le(),i=ce("h3"),a=Tr("Google Calendar "),l=Tr(s),u=Le(),f=ce("div"),d=ce("button"),d.textContent="<<",h=Le(),g=ce("button"),g.textContent="<",m=Le(),y=ce("button"),y.textContent="Today",_=Le(),w=ce("button"),w.textContent=">",E=Le(),S=ce("button"),S.textContent=">>",ie(r,"aria-label","Create Event"),ie(e,"class","titleContainer svelte-169s007"),ie(d,"class","fixedSizeButton svelte-169s007"),ie(d,"aria-label","Back 1 week"),ie(g,"class","fixedSizeButton svelte-169s007"),ie(g,"aria-label","Back 1 day"),ie(y,"class","fixedSizeButton svelte-169s007"),ie(y,"aria-label","Jump to today"),ie(w,"class","fixedSizeButton svelte-169s007"),ie(w,"aria-label","Forward 1 day"),ie(S,"class","fixedSizeButton svelte-169s007"),ie(S,"aria-label","Forward 1 week"),ie(f,"class","navigationContainer svelte-169s007")},m(I,B){xe(I,e,B),oe(e,r),oe(e,n),oe(e,i),oe(i,a),oe(i,l),xe(I,u,B),xe(I,f,B),oe(f,d),oe(f,h),oe(f,g),oe(f,m),oe(f,y),oe(f,_),oe(f,w),oe(f,E),oe(f,S),T||(L=[tt(r,"click",t[12]),tt(d,"click",t[7]),tt(g,"click",t[8]),tt(y,"click",t[9]),tt(w,"click",t[11]),tt(S,"click",t[10])],T=!0)},p(I,B){B&1&&s!==(s=I[0].format("YYYY-MM-DD")+"")&&fi(l,s)},d(I){I&&be(e),I&&be(u),I&&be(f),T=!1,on(L)}}}function mG(t){let e,r,n,i,a,s,l=t[3]&&t[0]&&LA(t);function u(d){t[14](d)}let f={height:t[1],width:t[2],include:t[4],exclude:t[5],hourRange:t[6]};return t[0]!==void 0&&(f.date=t[0]),i=new OA({props:f}),Dn.push(()=>Ma(i,"date",u)),{c(){e=ce("div"),l&&l.c(),r=Le(),n=ce("div"),wc(i.$$.fragment),Xe(n,"overflow","hidden"),Xe(e,"padding-left","10px")},m(d,h){xe(d,e,h),l&&l.m(e,null),oe(e,r),oe(e,n),Ll(i,n,null),s=!0},p(d,[h]){d[3]&&d[0]?l?l.p(d,h):(l=LA(d),l.c(),l.m(e,r)):l&&(l.d(1),l=null);let g={};h&2&&(g.height=d[1]),h&4&&(g.width=d[2]),h&16&&(g.include=d[4]),h&32&&(g.exclude=d[5]),h&64&&(g.hourRange=d[6]),!a&&h&1&&(a=!0,g.date=d[0],Pa(()=>a=!1)),i.$set(g)},i(d){s||(di(i.$$.fragment,d),s=!0)},o(d){Oi(i.$$.fragment,d),s=!1},d(d){d&&be(e),l&&l.d(),mo(i)}}}function yG(t,e,r){let{height:n=void 0}=e,{width:i=void 0}=e,{date:a=void 0}=e,{navigation:s=!1}=e,{include:l}=e,{exclude:u}=e,{hourRange:f=void 0}=e,d=0,h=()=>r(13,d-=7),g=()=>r(13,d-=1),m=()=>r(13,d=0),y=()=>r(13,d+=7),_=()=>r(13,d+=1),w=S=>{new gi({start:{},end:{}},()=>{Di(),r(0,a),r(3,s),r(13,d)}).open()};function E(S){a=S,r(0,a),r(3,s),r(13,d)}return t.$$set=S=>{"height"in S&&r(1,n=S.height),"width"in S&&r(2,i=S.width),"date"in S&&r(0,a=S.date),"navigation"in S&&r(3,s=S.navigation),"include"in S&&r(4,l=S.include),"exclude"in S&&r(5,u=S.exclude),"hourRange"in S&&r(6,f=S.hourRange)},t.$$.update=()=>{if(t.$$.dirty&8201){e:r(0,a=s?window.moment().local().add(d,"days"):a)}},[a,n,i,s,l,u,f,h,g,m,y,_,w,d,E]}var PA=class extends En{constructor(e){super();Bn(this,e,yG,mG,Rn,{height:1,width:2,date:0,navigation:3,include:4,exclude:5,hourRange:6},gG)}},Lh=PA;function vG(t){ci(t,"svelte-1ficnkj",".fullSize.svelte-1ficnkj,.content.svelte-1ficnkj,.box.svelte-1ficnkj{width:100%;height:100%;overflow:scoll !important}")}function _G(t){let e,r,n=`${t[0]}px`,i=`${t[1]}px`;return{c(){e=ce("webview"),gc(e.src,r=t[3])||ie(e,"src",r),ie(e,"allowpopups",""),Xe(e,"width",n,!1),Xe(e,"height",i,!1)},m(a,s){xe(a,e,s),t[7](e)},p(a,s){s&8&&!gc(e.src,r=a[3])&&ie(e,"src",r),s&1&&n!==(n=`${a[0]}px`)&&Xe(e,"width",n,!1),s&2&&i!==(i=`${a[1]}px`)&&Xe(e,"height",i,!1)},d(a){a&&be(e),t[7](null)}}}function wG(t){let e,r;return{c(){e=ce("webview"),gc(e.src,r=t[3])||ie(e,"src",r),ie(e,"allowpopups",""),ie(e,"class","fullSize svelte-1ficnkj")},m(n,i){xe(n,e,i),t[6](e)},p(n,i){i&8&&!gc(e.src,r=n[3])&&ie(e,"src",r)},d(n){n&&be(e),t[6](null)}}}function EG(t){let e,r;function n(s,l){return s[0]==0?wG:_G}let i=n(t,-1),a=i(t);return{c(){e=ce("div"),r=ce("div"),a.c(),ie(r,"class","content svelte-1ficnkj"),ie(e,"class","box svelte-1ficnkj")},m(s,l){xe(s,e,l),oe(e,r),a.m(r,null)},p(s,[l]){i===(i=n(s,l))&&a?a.p(s,l):(a.d(1),a=i(s),a&&(a.c(),a.m(r,null)))},i:At,o:At,d(s){s&&be(e),a.d()}}}function CG(t,e,r){let n=$e.getInstance(),{date:i=window.moment()}=e,{width:a=0}=e,{height:s=0}=e,{theme:l=n.settings.webViewDefaultColorMode}=e,u,f="";i.isValid()?f=`https://calendar.google.com/calendar/u/0/r/day/${i.format("yyyy/M/D")}`:f="https://calendar.google.com/calendar/u/0/r/day/",ho(()=>{l=="auto"&&r(4,l=Rh()),l=="dark"&&u.addEventListener("dom-ready",()=>{u.insertCSS(`
                html {
                    filter: hue-rotate(180deg)invert(100)contrast(93%) !important;
                }
            
            `)})});function d(g){Dn[g?"unshift":"push"](()=>{u=g,r(2,u)})}function h(g){Dn[g?"unshift":"push"](()=>{u=g,r(2,u)})}return t.$$set=g=>{"date"in g&&r(5,i=g.date),"width"in g&&r(0,a=g.width),"height"in g&&r(1,s=g.height),"theme"in g&&r(4,l=g.theme)},[a,s,u,f,l,i,d,h]}var MA=class extends En{constructor(e){super();Bn(this,e,CG,EG,Rn,{date:5,width:0,height:1,theme:4},vG)}},Ph=MA;var XZ=yt(require("obsidian"));function Wr(){}function kc(t,e){for(let r in e)t[r]=e[r];return t}function bG(t){return t&&typeof t=="object"&&typeof t.then=="function"}function UA(t){return t()}function FA(){return Object.create(null)}function xs(t){t.forEach(UA)}function ua(t){return typeof t=="function"}function oy(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Mh(t,e){return t!=t?e==e:t!==e}function xG(t){return Object.keys(t).length===0}function qA(t,e,r,n){if(t){let i=GA(t,e,r,n);return t[0](i)}}function GA(t,e,r,n){return t[1]&&n?kc(r.ctx.slice(),t[1](n(e))):r.ctx}function TG(t,e,r,n){if(t[2]&&n){let i=t[2](n(r));if(e.dirty===void 0)return i;if(typeof i=="object"){let a=[],s=Math.max(e.dirty.length,i.length);for(let l=0;l<s;l+=1)a[l]=e.dirty[l]|i[l];return a}return e.dirty|i}return e.dirty}function VA(t,e,r,n,i,a,s){let l=TG(e,n,i,a);if(l){let u=GA(e,r,n,s);t.p(u,l)}}function zl(t){return t==null?"":t}function _t(t,e){t.appendChild(e)}function zr(t,e,r){t.insertBefore(e,r||null)}function Mr(t){t.parentNode.removeChild(t)}function Uh(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function Wt(t){return document.createElement(t)}function Ql(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function xo(t){return document.createTextNode(t)}function jn(){return xo(" ")}function Fh(){return xo("")}function qa(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function ut(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function HA(t,e){let r=Object.getOwnPropertyDescriptors(t.__proto__);for(let n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:r[n]&&r[n].set?t[n]=e[n]:ut(t,n,e[n])}function SG(t){return Array.from(t.childNodes)}function Ic(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ar(t,e,r){t.classList[r?"add":"remove"](e)}var qh;function Ts(t){qh=t}function AG(){if(!qh)throw new Error("Function called outside component initialization");return qh}var Nc=[],KA=[],Gh=[],jA=[],kG=Promise.resolve(),ly=!1;function IG(){ly||(ly=!0,kG.then(dy))}function uy(t){Gh.push(t)}var cy=!1,fy=new Set;function dy(){if(!cy){cy=!0;do{for(let t=0;t<Nc.length;t+=1){let e=Nc[t];Ts(e),NG(e.$$)}for(Ts(null),Nc.length=0;KA.length;)KA.pop()();for(let t=0;t<Gh.length;t+=1){let e=Gh[t];fy.has(e)||(fy.add(e),e())}Gh.length=0}while(Nc.length);for(;jA.length;)jA.pop()();ly=!1,cy=!1,fy.clear()}}function NG(t){if(t.fragment!==null){t.update(),xs(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(uy)}}var Vh=new Set,To;function So(){To={r:0,c:[],p:To}}function Ao(){To.r||xs(To.c),To=To.p}function Jt(t,e){t&&t.i&&(Vh.delete(t),t.i(e))}function hr(t,e,r,n){if(t&&t.o){if(Vh.has(t))return;Vh.add(t),To.c.push(()=>{Vh.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}}function YA(t,e){let r=e.token={};function n(i,a,s,l){if(e.token!==r)return;e.resolved=l;let u=e.ctx;s!==void 0&&(u=u.slice(),u[s]=l);let f=i&&(e.current=i)(u),d=!1;e.block&&(e.blocks?e.blocks.forEach((h,g)=>{g!==a&&h&&(So(),hr(h,1,1,()=>{e.blocks[g]===h&&(e.blocks[g]=null)}),Ao())}):e.block.d(1),f.c(),Jt(f,1),f.m(e.mount(),e.anchor),d=!0),e.block=f,e.blocks&&(e.blocks[a]=f),d&&dy()}if(bG(t)){let i=AG();if(t.then(a=>{Ts(i),n(e.then,1,e.value,a),Ts(null)},a=>{if(Ts(i),n(e.catch,2,e.error,a),Ts(null),!e.hasCatch)throw a}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function WA(t,e){hr(t,1,1,()=>{e.delete(t.key)})}function zA(t,e,r,n,i,a,s,l,u,f,d,h){let g=t.length,m=a.length,y=g,_={};for(;y--;)_[t[y].key]=y;let w=[],E=new Map,S=new Map;for(y=m;y--;){let B=h(i,a,y),z=r(B),F=s.get(z);F?n&&F.p(B,e):(F=f(z,B),F.c()),E.set(z,w[y]=F),z in _&&S.set(z,Math.abs(y-_[z]))}let T=new Set,L=new Set;function I(B){Jt(B,1),B.m(l,d),s.set(B.key,B),d=B.first,m--}for(;g&&m;){let B=w[m-1],z=t[g-1],F=B.key,G=z.key;B===z?(d=B.first,g--,m--):E.has(G)?!s.has(F)||T.has(F)?I(B):L.has(G)?g--:S.get(F)>S.get(G)?(L.add(F),I(B)):(T.add(G),g--):(u(z,s),g--)}for(;g--;){let B=t[g];E.has(B.key)||u(B,s)}for(;m;)I(w[m-1]);return w}function Hh(t,e){let r={},n={},i={$$scope:1},a=t.length;for(;a--;){let s=t[a],l=e[a];if(l){for(let u in s)u in l||(n[u]=1);for(let u in l)i[u]||(r[u]=l[u],i[u]=1);t[a]=l}else for(let u in s)i[u]=1}for(let s in n)s in r||(r[s]=void 0);return r}function hy(t){return typeof t=="object"&&t!==null?t:{}}function Ga(t){t&&t.c()}function ca(t,e,r,n){let{fragment:i,on_mount:a,on_destroy:s,after_update:l}=t.$$;i&&i.m(e,r),n||uy(()=>{let u=a.map(UA).filter(ua);s?s.push(...u):xs(u),t.$$.on_mount=[]}),l.forEach(uy)}function fa(t,e){let r=t.$$;r.fragment!==null&&(xs(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function RG(t,e){t.$$.dirty[0]===-1&&(Nc.push(t),IG(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ko(t,e,r,n,i,a,s=[-1]){let l=qh;Ts(t);let u=t.$$={fragment:null,ctx:null,props:a,update:Wr,not_equal:i,bound:FA(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:FA(),dirty:s,skip_bound:!1},f=!1;if(u.ctx=r?r(t,e.props||{},(d,h,...g)=>{let m=g.length?g[0]:h;return u.ctx&&i(u.ctx[d],u.ctx[d]=m)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](m),f&&RG(t,d)),h}):[],u.update(),f=!0,xs(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){let d=SG(e.target);u.fragment&&u.fragment.l(d),d.forEach(Mr)}else u.fragment&&u.fragment.c();e.intro&&Jt(t.$$.fragment),ca(t,e.target,e.anchor,e.customElement),dy()}Ts(l)}var Ss=class{$destroy(){fa(this,1),this.$destroy=Wr}$on(e,r){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!xG(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};function DG(t,e="day"){let r=t.clone().startOf(e).format();return`${e}-${r}`}var Kh=DG;function BG(){var t=Wt("style");t.id="svelte-1widvzq-style",t.textContent=".dot.svelte-1widvzq,.hollow.svelte-1widvzq{display:inline-block;height:6px;width:6px;margin:0 1px}.filled.svelte-1widvzq{fill:var(--color-dot)}.active.filled.svelte-1widvzq{fill:var(--text-on-accent)}.hollow.svelte-1widvzq{fill:none;stroke:var(--color-dot)}.active.hollow.svelte-1widvzq{fill:none;stroke:var(--text-on-accent)}",_t(document.head,t)}function OG(t){let e,r,n;return{c(){e=Ql("svg"),r=Ql("circle"),ut(r,"cx","3"),ut(r,"cy","3"),ut(r,"r","2"),ut(e,"class",n=""+(zl(`hollow ${t[0]}`)+" svelte-1widvzq")),ut(e,"viewBox","0 0 6 6"),ut(e,"xmlns","http://www.w3.org/2000/svg"),Ar(e,"active",t[2])},m(i,a){zr(i,e,a),_t(e,r)},p(i,a){a&1&&n!==(n=""+(zl(`hollow ${i[0]}`)+" svelte-1widvzq"))&&ut(e,"class",n),a&5&&Ar(e,"active",i[2])},d(i){i&&Mr(e)}}}function LG(t){let e,r,n;return{c(){e=Ql("svg"),r=Ql("circle"),ut(r,"cx","3"),ut(r,"cy","3"),ut(r,"r","2"),ut(e,"class",n=""+(zl(`dot filled ${t[0]}`)+" svelte-1widvzq")),ut(e,"viewBox","0 0 6 6"),ut(e,"xmlns","http://www.w3.org/2000/svg"),Ar(e,"active",t[2])},m(i,a){zr(i,e,a),_t(e,r)},p(i,a){a&1&&n!==(n=""+(zl(`dot filled ${i[0]}`)+" svelte-1widvzq"))&&ut(e,"class",n),a&5&&Ar(e,"active",i[2])},d(i){i&&Mr(e)}}}function PG(t){let e;function r(a,s){return a[1]?LG:OG}let n=r(t),i=n(t);return{c(){i.c(),e=Fh()},m(a,s){i.m(a,s),zr(a,e,s)},p(a,[s]){n===(n=r(a))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:Wr,o:Wr,d(a){i.d(a),a&&Mr(e)}}}function MG(t,e,r){let{className:n=""}=e,{isFilled:i}=e,{isActive:a}=e;return t.$$set=s=>{"className"in s&&r(0,n=s.className),"isFilled"in s&&r(1,i=s.isFilled),"isActive"in s&&r(2,a=s.isActive)},[n,i,a]}var py=class extends Ss{constructor(e){super();document.getElementById("svelte-1widvzq-style")||BG(),ko(this,e,MG,PG,oy,{className:0,isFilled:1,isActive:2})}},UG=t=>({}),QA=t=>({metadata:null}),FG=t=>({metadata:t&1}),XA=t=>({metadata:t[3]});function qG(t){let e,r=t[2].default,n=qA(r,t,t[1],QA);return{c(){n&&n.c()},m(i,a){n&&n.m(i,a),e=!0},p(i,a){n&&n.p&&a&2&&VA(n,r,i,i[1],a,UG,QA)},i(i){e||(Jt(n,i),e=!0)},o(i){hr(n,i),e=!1},d(i){n&&n.d(i)}}}function GG(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!1,pending:KG,then:HG,catch:VG,value:3,blocks:[,,,]};return YA(r=t[0],i),{c(){e=Fh(),i.block.c()},m(a,s){zr(a,e,s),i.block.m(a,i.anchor=s),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(a,s){if(t=a,i.ctx=t,!(s&1&&r!==(r=t[0])&&YA(r,i))){let l=t.slice();l[3]=i.resolved,i.block.p(l,s)}},i(a){n||(Jt(i.block),n=!0)},o(a){for(let s=0;s<3;s+=1){let l=i.blocks[s];hr(l)}n=!1},d(a){a&&Mr(e),i.block.d(a),i.token=null,i=null}}}function VG(t){return{c:Wr,m:Wr,p:Wr,i:Wr,o:Wr,d:Wr}}function HG(t){let e,r=t[2].default,n=qA(r,t,t[1],XA);return{c(){n&&n.c()},m(i,a){n&&n.m(i,a),e=!0},p(i,a){n&&n.p&&a&3&&VA(n,r,i,i[1],a,FG,XA)},i(i){e||(Jt(n,i),e=!0)},o(i){hr(n,i),e=!1},d(i){n&&n.d(i)}}}function KG(t){return{c:Wr,m:Wr,p:Wr,i:Wr,o:Wr,d:Wr}}function jG(t){let e,r,n,i,a=[GG,qG],s=[];function l(u,f){return u[0]?0:1}return e=l(t),r=s[e]=a[e](t),{c(){r.c(),n=Fh()},m(u,f){s[e].m(u,f),zr(u,n,f),i=!0},p(u,[f]){let d=e;e=l(u),e===d?s[e].p(u,f):(So(),hr(s[d],1,1,()=>{s[d]=null}),Ao(),r=s[e],r?r.p(u,f):(r=s[e]=a[e](u),r.c()),Jt(r,1),r.m(n.parentNode,n))},i(u){i||(Jt(r),i=!0)},o(u){hr(r),i=!1},d(u){s[e].d(u),u&&Mr(n)}}}function YG(t,e,r){let{$$slots:n={},$$scope:i}=e,{metadata:a}=e;return t.$$set=s=>{"metadata"in s&&r(0,a=s.metadata),"$$scope"in s&&r(1,i=s.$$scope)},[a,i,n]}var gy=class extends Ss{constructor(e){super();ko(this,e,YG,jG,Mh,{metadata:0})}};function WG(){return navigator.appVersion.indexOf("Mac")!==-1}function jh(t){return WG()?t.metaKey:t.ctrlKey}function zG(...t){return window.moment.weekdaysShort(!0)}function JA(t){return t.isoWeekday()===6||t.isoWeekday()===7}function QG(t){return t[0].weekday(0)}function XG(t,...e){let r=window.moment().locale(),n=[],i,a=t.clone().locale(r).date(1),s=a.weekday(),l=a.clone().subtract(s,"days");for(let u=0;u<42;u++)u%7==0&&(i={days:[],weekNum:l.week()},n.push(i)),i.days.push(l),l=l.clone().add(1,"days");return n}function JG(){var t=Wt("style");t.id="svelte-q3wqg9-style",t.textContent=".day.svelte-q3wqg9{background-color:var(--color-background-day);border-radius:4px;color:var(--color-text-day);cursor:pointer;font-size:0.8em;height:100%;padding:4px;position:relative;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.day.svelte-q3wqg9:hover{background-color:var(--interactive-hover)}.day.active.svelte-q3wqg9:hover{background-color:var(--interactive-accent-hover)}.adjacent-month.svelte-q3wqg9{opacity:0.25}.today.svelte-q3wqg9{color:var(--color-text-today)}.day.svelte-q3wqg9:active,.active.svelte-q3wqg9,.active.today.svelte-q3wqg9{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-q3wqg9{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",_t(document.head,t)}function ZA(t,e,r){let n=t.slice();return n[11]=e[r],n}function $A(t){let e,r,n=[t[11]],i={};for(let a=0;a<n.length;a+=1)i=kc(i,n[a]);return e=new py({props:i}),{c(){Ga(e.$$.fragment)},m(a,s){ca(e,a,s),r=!0},p(a,s){let l=s&128?Hh(n,[hy(a[11])]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){hr(e.$$.fragment,a),r=!1},d(a){fa(e,a)}}}function ZG(t){let e,r=t[0].format("D")+"",n,i,a,s,l,u,f,d=t[7].dots,h=[];for(let _=0;_<d.length;_+=1)h[_]=$A(ZA(t,d,_));let g=_=>hr(h[_],1,1,()=>{h[_]=null}),m=[{class:s=`day ${t[7].classes.join(" ")}`},t[7].dataAttributes||{}],y={};for(let _=0;_<m.length;_+=1)y=kc(y,m[_]);return{c(){e=Wt("div"),n=xo(r),i=jn(),a=Wt("div");for(let _=0;_<h.length;_+=1)h[_].c();ut(a,"class","dot-container svelte-q3wqg9"),HA(e,y),Ar(e,"active",t[6]===Kh(t[0],"day")),Ar(e,"adjacent-month",!t[0].isSame(t[5],"month")),Ar(e,"today",t[0].isSame(t[4],"day")),Ar(e,"svelte-q3wqg9",!0)},m(_,w){zr(_,e,w),_t(e,n),_t(e,i),_t(e,a);for(let E=0;E<h.length;E+=1)h[E].m(a,null);l=!0,u||(f=[qa(e,"click",function(){ua(t[2]&&t[8])&&(t[2]&&t[8]).apply(this,arguments)}),qa(e,"contextmenu",function(){ua(t[3]&&t[9])&&(t[3]&&t[9]).apply(this,arguments)}),qa(e,"pointerover",function(){ua(t[1]&&t[10])&&(t[1]&&t[10]).apply(this,arguments)})],u=!0)},p(_,w){if(t=_,(!l||w&1)&&r!==(r=t[0].format("D")+"")&&Ic(n,r),w&128){d=t[7].dots;let E;for(E=0;E<d.length;E+=1){let S=ZA(t,d,E);h[E]?(h[E].p(S,w),Jt(h[E],1)):(h[E]=$A(S),h[E].c(),Jt(h[E],1),h[E].m(a,null))}for(So(),E=d.length;E<h.length;E+=1)g(E);Ao()}HA(e,y=Hh(m,[(!l||w&128&&s!==(s=`day ${t[7].classes.join(" ")}`))&&{class:s},w&128&&(t[7].dataAttributes||{})])),Ar(e,"active",t[6]===Kh(t[0],"day")),Ar(e,"adjacent-month",!t[0].isSame(t[5],"month")),Ar(e,"today",t[0].isSame(t[4],"day")),Ar(e,"svelte-q3wqg9",!0)},i(_){if(!l){for(let w=0;w<d.length;w+=1)Jt(h[w]);l=!0}},o(_){h=h.filter(Boolean);for(let w=0;w<h.length;w+=1)hr(h[w]);l=!1},d(_){_&&Mr(e),Uh(h,_),u=!1,xs(f)}}}function $G(t){let e,r,n;return r=new gy({props:{metadata:t[7],$$slots:{default:[ZG,({metadata:i})=>({7:i}),({metadata:i})=>i?128:0]},$$scope:{ctx:t}}}),{c(){e=Wt("td"),Ga(r.$$.fragment)},m(i,a){zr(i,e,a),ca(r,e,null),n=!0},p(i,[a]){let s={};a&128&&(s.metadata=i[7]),a&16639&&(s.$$scope={dirty:a,ctx:i}),r.$set(s)},i(i){n||(Jt(r.$$.fragment,i),n=!0)},o(i){hr(r.$$.fragment,i),n=!1},d(i){i&&Mr(e),fa(r)}}}function e9(t,e,r){let{date:n}=e,{metadata:i}=e,{onHover:a}=e,{onClick:s}=e,{onContextMenu:l}=e,{today:u}=e,{displayedMonth:f=null}=e,{selectedId:d=null}=e,h=y=>s(n,jh(y)),g=y=>l(n,y),m=y=>a(n,y.target,jh(y));return t.$$set=y=>{"date"in y&&r(0,n=y.date),"metadata"in y&&r(7,i=y.metadata),"onHover"in y&&r(1,a=y.onHover),"onClick"in y&&r(2,s=y.onClick),"onContextMenu"in y&&r(3,l=y.onContextMenu),"today"in y&&r(4,u=y.today),"displayedMonth"in y&&r(5,f=y.displayedMonth),"selectedId"in y&&r(6,d=y.selectedId)},[n,a,s,l,u,f,d,i,h,g,m]}var e2=class extends Ss{constructor(e){super();document.getElementById("svelte-q3wqg9-style")||JG(),ko(this,e,e9,$G,Mh,{date:0,metadata:7,onHover:1,onClick:2,onContextMenu:3,today:4,displayedMonth:5,selectedId:6})}};function t9(){var t=Wt("style");t.id="svelte-156w7na-style",t.textContent=".arrow.svelte-156w7na.svelte-156w7na{align-items:center;cursor:pointer;display:flex;justify-content:center;width:24px}.arrow.is-mobile.svelte-156w7na.svelte-156w7na{width:32px}.right.svelte-156w7na.svelte-156w7na{transform:rotate(180deg)}.arrow.svelte-156w7na svg.svelte-156w7na{color:var(--color-arrow);height:16px;width:16px}",_t(document.head,t)}function r9(t){let e,r,n,i,a;return{c(){e=Wt("div"),r=Ql("svg"),n=Ql("path"),ut(n,"fill","currentColor"),ut(n,"d","M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"),ut(r,"focusable","false"),ut(r,"role","img"),ut(r,"xmlns","http://www.w3.org/2000/svg"),ut(r,"viewBox","0 0 320 512"),ut(r,"class","svelte-156w7na"),ut(e,"class","arrow svelte-156w7na"),ut(e,"aria-label",t[1]),Ar(e,"is-mobile",t[3]),Ar(e,"right",t[2]==="right")},m(s,l){zr(s,e,l),_t(e,r),_t(r,n),i||(a=qa(e,"click",function(){ua(t[0])&&t[0].apply(this,arguments)}),i=!0)},p(s,[l]){t=s,l&2&&ut(e,"aria-label",t[1]),l&4&&Ar(e,"right",t[2]==="right")},i:Wr,o:Wr,d(s){s&&Mr(e),i=!1,a()}}}function n9(t,e,r){let{onClick:n}=e,{tooltip:i}=e,{direction:a}=e,s=window.app.isMobile;return t.$$set=l=>{"onClick"in l&&r(0,n=l.onClick),"tooltip"in l&&r(1,i=l.tooltip),"direction"in l&&r(2,a=l.direction)},[n,i,a,s]}var my=class extends Ss{constructor(e){super();document.getElementById("svelte-156w7na-style")||t9(),ko(this,e,n9,r9,oy,{onClick:0,tooltip:1,direction:2})}};function i9(){var t=Wt("style");t.id="svelte-1vwr9dd-style",t.textContent=".nav.svelte-1vwr9dd.svelte-1vwr9dd{align-items:center;display:flex;margin:0.6em 0 1em;padding:0 8px;width:100%}.nav.is-mobile.svelte-1vwr9dd.svelte-1vwr9dd{padding:0}.title.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--color-text-title);font-size:1.5em;margin:0}.is-mobile.svelte-1vwr9dd .title.svelte-1vwr9dd{font-size:1.3em}.month.svelte-1vwr9dd.svelte-1vwr9dd{font-weight:500;text-transform:capitalize}.year.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--interactive-accent)}.right-nav.svelte-1vwr9dd.svelte-1vwr9dd{display:flex;justify-content:center;margin-left:auto}.reset-button.svelte-1vwr9dd.svelte-1vwr9dd{cursor:pointer;border-radius:4px;color:var(--text-muted);font-size:0.7em;font-weight:600;letter-spacing:1px;margin:0 4px;padding:0px 4px;text-transform:uppercase}.is-mobile.svelte-1vwr9dd .reset-button.svelte-1vwr9dd{display:none}",_t(document.head,t)}function a9(t){let e,r,n,i=t[0].format("MMM")+"",a,s,l,u=t[0].format("YYYY")+"",f,d,h,g,m,y,_,w,E,S,T;return g=new my({props:{direction:"left",onClick:t[3],tooltip:"Previous Month"}}),w=new my({props:{direction:"right",onClick:t[2],tooltip:"Next Month"}}),{c(){e=Wt("div"),r=Wt("h3"),n=Wt("span"),a=xo(i),s=jn(),l=Wt("span"),f=xo(u),d=jn(),h=Wt("div"),Ga(g.$$.fragment),m=jn(),y=Wt("div"),y.textContent=`${t[4]}`,_=jn(),Ga(w.$$.fragment),ut(n,"class","month svelte-1vwr9dd"),ut(l,"class","year svelte-1vwr9dd"),ut(r,"class","title svelte-1vwr9dd"),ut(y,"class","reset-button svelte-1vwr9dd"),ut(h,"class","right-nav svelte-1vwr9dd"),ut(e,"class","nav svelte-1vwr9dd"),Ar(e,"is-mobile",t[5])},m(L,I){zr(L,e,I),_t(e,r),_t(r,n),_t(n,a),_t(r,s),_t(r,l),_t(l,f),_t(e,d),_t(e,h),ca(g,h,null),_t(h,m),_t(h,y),_t(h,_),ca(w,h,null),E=!0,S||(T=[qa(r,"click",function(){ua(t[1])&&t[1].apply(this,arguments)}),qa(y,"click",function(){ua(t[1])&&t[1].apply(this,arguments)})],S=!0)},p(L,[I]){t=L,(!E||I&1)&&i!==(i=t[0].format("MMM")+"")&&Ic(a,i),(!E||I&1)&&u!==(u=t[0].format("YYYY")+"")&&Ic(f,u);let B={};I&8&&(B.onClick=t[3]),g.$set(B);let z={};I&4&&(z.onClick=t[2]),w.$set(z)},i(L){E||(Jt(g.$$.fragment,L),Jt(w.$$.fragment,L),E=!0)},o(L){hr(g.$$.fragment,L),hr(w.$$.fragment,L),E=!1},d(L){L&&Mr(e),fa(g),fa(w),S=!1,xs(T)}}}function s9(t,e,r){let{displayedMonth:n}=e,{today:i}=e,{resetDisplayedMonth:a}=e,{incrementDisplayedMonth:s}=e,{decrementDisplayedMonth:l}=e,u=i.calendar().split(/\d|\s/)[0],f=window.app.isMobile;return t.$$set=d=>{"displayedMonth"in d&&r(0,n=d.displayedMonth),"today"in d&&r(6,i=d.today),"resetDisplayedMonth"in d&&r(1,a=d.resetDisplayedMonth),"incrementDisplayedMonth"in d&&r(2,s=d.incrementDisplayedMonth),"decrementDisplayedMonth"in d&&r(3,l=d.decrementDisplayedMonth)},[n,a,s,l,u,f,i]}var t2=class extends Ss{constructor(e){super();document.getElementById("svelte-1vwr9dd-style")||i9(),ko(this,e,s9,a9,oy,{displayedMonth:0,today:6,resetDisplayedMonth:1,incrementDisplayedMonth:2,decrementDisplayedMonth:3})}};function o9(){var t=Wt("style");t.id="svelte-egt0yd-style",t.textContent="td.svelte-egt0yd{border-right:1px solid var(--background-modifier-border)}.week-num.svelte-egt0yd{background-color:var(--color-background-weeknum);border-radius:4px;color:var(--color-text-weeknum);cursor:pointer;font-size:0.65em;height:100%;padding:4px;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.week-num.svelte-egt0yd:hover{background-color:var(--interactive-hover)}.week-num.active.svelte-egt0yd:hover{background-color:var(--interactive-accent-hover)}.active.svelte-egt0yd{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-egt0yd{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",_t(document.head,t)}function r2(t,e,r){let n=t.slice();return n[11]=e[r],n}function n2(t){let e,r,n=[t[11]],i={};for(let a=0;a<n.length;a+=1)i=kc(i,n[a]);return e=new py({props:i}),{c(){Ga(e.$$.fragment)},m(a,s){ca(e,a,s),r=!0},p(a,s){let l=s&64?Hh(n,[hy(a[11])]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){hr(e.$$.fragment,a),r=!1},d(a){fa(e,a)}}}function l9(t){let e,r,n,i,a,s,l,u,f=t[6].dots,d=[];for(let g=0;g<f.length;g+=1)d[g]=n2(r2(t,f,g));let h=g=>hr(d[g],1,1,()=>{d[g]=null});return{c(){e=Wt("div"),r=xo(t[0]),n=jn(),i=Wt("div");for(let g=0;g<d.length;g+=1)d[g].c();ut(i,"class","dot-container svelte-egt0yd"),ut(e,"class",a=""+(zl(`week-num ${t[6].classes.join(" ")}`)+" svelte-egt0yd")),Ar(e,"active",t[5]===Kh(t[1][0],"week"))},m(g,m){zr(g,e,m),_t(e,r),_t(e,n),_t(e,i);for(let y=0;y<d.length;y+=1)d[y].m(i,null);s=!0,l||(u=[qa(e,"click",function(){ua(t[3]&&t[8])&&(t[3]&&t[8]).apply(this,arguments)}),qa(e,"contextmenu",function(){ua(t[4]&&t[9])&&(t[4]&&t[9]).apply(this,arguments)}),qa(e,"pointerover",function(){ua(t[2]&&t[10])&&(t[2]&&t[10]).apply(this,arguments)})],l=!0)},p(g,m){if(t=g,(!s||m&1)&&Ic(r,t[0]),m&64){f=t[6].dots;let y;for(y=0;y<f.length;y+=1){let _=r2(t,f,y);d[y]?(d[y].p(_,m),Jt(d[y],1)):(d[y]=n2(_),d[y].c(),Jt(d[y],1),d[y].m(i,null))}for(So(),y=f.length;y<d.length;y+=1)h(y);Ao()}(!s||m&64&&a!==(a=""+(zl(`week-num ${t[6].classes.join(" ")}`)+" svelte-egt0yd")))&&ut(e,"class",a),m&98&&Ar(e,"active",t[5]===Kh(t[1][0],"week"))},i(g){if(!s){for(let m=0;m<f.length;m+=1)Jt(d[m]);s=!0}},o(g){d=d.filter(Boolean);for(let m=0;m<d.length;m+=1)hr(d[m]);s=!1},d(g){g&&Mr(e),Uh(d,g),l=!1,xs(u)}}}function u9(t){let e,r,n;return r=new gy({props:{metadata:t[6],$$slots:{default:[l9,({metadata:i})=>({6:i}),({metadata:i})=>i?64:0]},$$scope:{ctx:t}}}),{c(){e=Wt("td"),Ga(r.$$.fragment),ut(e,"class","svelte-egt0yd")},m(i,a){zr(i,e,a),ca(r,e,null),n=!0},p(i,[a]){let s={};a&64&&(s.metadata=i[6]),a&16639&&(s.$$scope={dirty:a,ctx:i}),r.$set(s)},i(i){n||(Jt(r.$$.fragment,i),n=!0)},o(i){hr(r.$$.fragment,i),n=!1},d(i){i&&Mr(e),fa(r)}}}function c9(t,e,r){let{weekNum:n}=e,{days:i}=e,{metadata:a}=e,{onHover:s}=e,{onClick:l}=e,{onContextMenu:u}=e,{selectedId:f=null}=e,d,h=y=>l(d,jh(y)),g=y=>u(i[0],y),m=y=>s(d,y.target,jh(y));return t.$$set=y=>{"weekNum"in y&&r(0,n=y.weekNum),"days"in y&&r(1,i=y.days),"metadata"in y&&r(6,a=y.metadata),"onHover"in y&&r(2,s=y.onHover),"onClick"in y&&r(3,l=y.onClick),"onContextMenu"in y&&r(4,u=y.onContextMenu),"selectedId"in y&&r(5,f=y.selectedId)},t.$$.update=()=>{t.$$.dirty&2&&r(7,d=QG(i))},[n,i,s,l,u,f,a,d,h,g,m]}var i2=class extends Ss{constructor(e){super();document.getElementById("svelte-egt0yd-style")||o9(),ko(this,e,c9,u9,Mh,{weekNum:0,days:1,metadata:6,onHover:2,onClick:3,onContextMenu:4,selectedId:5})}};function a2(t){return P(this,null,function*(){let e={dots:[],classes:[],dataAttributes:{}};return(yield Promise.all(t)).reduce((n,i)=>({classes:[...n.classes,...i.classes||[]],dataAttributes:Object.assign(n.dataAttributes,i.dataAttributes),dots:[...n.dots,...i.dots||[]]}),e)})}function s2(t,e,...r){return a2(t.map(n=>n.getDailyMetadata(e)))}function o2(t,e,...r){return a2(t.map(n=>n.getWeeklyMetadata(e)))}function f9(){var t=Wt("style");t.id="svelte-pcimu8-style",t.textContent=".container.svelte-pcimu8{--color-background-heading:transparent;--color-background-day:transparent;--color-background-weeknum:transparent;--color-background-weekend:transparent;--color-dot:var(--text-muted);--color-arrow:var(--text-muted);--color-button:var(--text-muted);--color-text-title:var(--text-normal);--color-text-heading:var(--text-muted);--color-text-day:var(--text-normal);--color-text-today:var(--interactive-accent);--color-text-weeknum:var(--text-muted)}.container.svelte-pcimu8{padding:0 8px}.container.is-mobile.svelte-pcimu8{padding:0}th.svelte-pcimu8{text-align:center}.weekend.svelte-pcimu8{background-color:var(--color-background-weekend)}.calendar.svelte-pcimu8{border-collapse:collapse;width:100%}th.svelte-pcimu8{background-color:var(--color-background-heading);color:var(--color-text-heading);font-size:0.6em;letter-spacing:1px;padding:4px;text-transform:uppercase}",_t(document.head,t)}function l2(t,e,r){let n=t.slice();return n[18]=e[r],n}function u2(t,e,r){let n=t.slice();return n[21]=e[r],n}function c2(t,e,r){let n=t.slice();return n[24]=e[r],n}function f2(t,e,r){let n=t.slice();return n[27]=e[r],n}function d2(t){let e;return{c(){e=Wt("col")},m(r,n){zr(r,e,n)},d(r){r&&Mr(e)}}}function h2(t){let e;return{c(){e=Wt("col"),ut(e,"class","svelte-pcimu8"),Ar(e,"weekend",JA(t[27]))},m(r,n){zr(r,e,n)},p(r,n){n&16384&&Ar(e,"weekend",JA(r[27]))},d(r){r&&Mr(e)}}}function p2(t){let e;return{c(){e=Wt("th"),e.textContent="W",ut(e,"class","svelte-pcimu8")},m(r,n){zr(r,e,n)},d(r){r&&Mr(e)}}}function g2(t){let e,r=t[24]+"",n;return{c(){e=Wt("th"),n=xo(r),ut(e,"class","svelte-pcimu8")},m(i,a){zr(i,e,a),_t(e,n)},p(i,a){a&32768&&r!==(r=i[24]+"")&&Ic(n,r)},d(i){i&&Mr(e)}}}function m2(t){let e,r,n=[t[18],{metadata:o2(t[8],t[18].days[0],t[10])},{onClick:t[7]},{onContextMenu:t[5]},{onHover:t[3]},{selectedId:t[9]}],i={};for(let a=0;a<n.length;a+=1)i=kc(i,n[a]);return e=new i2({props:i}),{c(){Ga(e.$$.fragment)},m(a,s){ca(e,a,s),r=!0},p(a,s){let l=s&18344?Hh(n,[s&16384&&hy(a[18]),s&17664&&{metadata:o2(a[8],a[18].days[0],a[10])},s&128&&{onClick:a[7]},s&32&&{onContextMenu:a[5]},s&8&&{onHover:a[3]},s&512&&{selectedId:a[9]}]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){hr(e.$$.fragment,a),r=!1},d(a){fa(e,a)}}}function y2(t,e){let r,n,i;return n=new e2({props:{date:e[21],today:e[10],displayedMonth:e[0],onClick:e[6],onContextMenu:e[4],onHover:e[2],metadata:s2(e[8],e[21],e[10]),selectedId:e[9]}}),{key:t,first:null,c(){r=Fh(),Ga(n.$$.fragment),this.first=r},m(a,s){zr(a,r,s),ca(n,a,s),i=!0},p(a,s){e=a;let l={};s&16384&&(l.date=e[21]),s&1024&&(l.today=e[10]),s&1&&(l.displayedMonth=e[0]),s&64&&(l.onClick=e[6]),s&16&&(l.onContextMenu=e[4]),s&4&&(l.onHover=e[2]),s&17664&&(l.metadata=s2(e[8],e[21],e[10])),s&512&&(l.selectedId=e[9]),n.$set(l)},i(a){i||(Jt(n.$$.fragment,a),i=!0)},o(a){hr(n.$$.fragment,a),i=!1},d(a){a&&Mr(r),fa(n,a)}}}function v2(t,e){let r,n,i=[],a=new Map,s,l,u=e[1]&&m2(e),f=e[18].days,d=h=>h[21].format();for(let h=0;h<f.length;h+=1){let g=u2(e,f,h),m=d(g);a.set(m,i[h]=y2(m,g))}return{key:t,first:null,c(){r=Wt("tr"),u&&u.c(),n=jn();for(let h=0;h<i.length;h+=1)i[h].c();s=jn(),this.first=r},m(h,g){zr(h,r,g),u&&u.m(r,null),_t(r,n);for(let m=0;m<i.length;m+=1)i[m].m(r,null);_t(r,s),l=!0},p(h,g){e=h,e[1]?u?(u.p(e,g),g&2&&Jt(u,1)):(u=m2(e),u.c(),Jt(u,1),u.m(r,n)):u&&(So(),hr(u,1,1,()=>{u=null}),Ao()),g&18261&&(f=e[18].days,So(),i=zA(i,g,d,1,e,f,a,r,WA,y2,s,u2),Ao())},i(h){if(!l){Jt(u);for(let g=0;g<f.length;g+=1)Jt(i[g]);l=!0}},o(h){hr(u);for(let g=0;g<i.length;g+=1)hr(i[g]);l=!1},d(h){h&&Mr(r),u&&u.d();for(let g=0;g<i.length;g+=1)i[g].d()}}}function d9(t){let e,r,n,i,a,s,l,u,f,d,h,g,m=[],y=new Map,_;r=new t2({props:{today:t[10],displayedMonth:t[0],incrementDisplayedMonth:t[11],decrementDisplayedMonth:t[12],resetDisplayedMonth:t[13]}});let w=t[1]&&d2(),E=t[14][1].days,S=[];for(let F=0;F<E.length;F+=1)S[F]=h2(f2(t,E,F));let T=t[1]&&p2(),L=t[15],I=[];for(let F=0;F<L.length;F+=1)I[F]=g2(c2(t,L,F));let B=t[14],z=F=>F[18].weekNum;for(let F=0;F<B.length;F+=1){let G=l2(t,B,F),te=z(G);y.set(te,m[F]=v2(te,G))}return{c(){e=Wt("div"),Ga(r.$$.fragment),n=jn(),i=Wt("table"),a=Wt("colgroup"),w&&w.c(),s=jn();for(let F=0;F<S.length;F+=1)S[F].c();l=jn(),u=Wt("thead"),f=Wt("tr"),T&&T.c(),d=jn();for(let F=0;F<I.length;F+=1)I[F].c();h=jn(),g=Wt("tbody");for(let F=0;F<m.length;F+=1)m[F].c();ut(i,"class","calendar svelte-pcimu8"),ut(e,"id","calendar-container"),ut(e,"class","container svelte-pcimu8"),Ar(e,"is-mobile",t[16])},m(F,G){zr(F,e,G),ca(r,e,null),_t(e,n),_t(e,i),_t(i,a),w&&w.m(a,null),_t(a,s);for(let te=0;te<S.length;te+=1)S[te].m(a,null);_t(i,l),_t(i,u),_t(u,f),T&&T.m(f,null),_t(f,d);for(let te=0;te<I.length;te+=1)I[te].m(f,null);_t(i,h),_t(i,g);for(let te=0;te<m.length;te+=1)m[te].m(g,null);_=!0},p(F,[G]){let te={};if(G&1024&&(te.today=F[10]),G&1&&(te.displayedMonth=F[0]),r.$set(te),F[1]?w||(w=d2(),w.c(),w.m(a,s)):w&&(w.d(1),w=null),G&16384){E=F[14][1].days;let ae;for(ae=0;ae<E.length;ae+=1){let we=f2(F,E,ae);S[ae]?S[ae].p(we,G):(S[ae]=h2(we),S[ae].c(),S[ae].m(a,null))}for(;ae<S.length;ae+=1)S[ae].d(1);S.length=E.length}if(F[1]?T||(T=p2(),T.c(),T.m(f,d)):T&&(T.d(1),T=null),G&32768){L=F[15];let ae;for(ae=0;ae<L.length;ae+=1){let we=c2(F,L,ae);I[ae]?I[ae].p(we,G):(I[ae]=g2(we),I[ae].c(),I[ae].m(f,null))}for(;ae<I.length;ae+=1)I[ae].d(1);I.length=L.length}G&18431&&(B=F[14],So(),m=zA(m,G,z,1,F,B,y,g,WA,v2,null,l2),Ao())},i(F){if(!_){Jt(r.$$.fragment,F);for(let G=0;G<B.length;G+=1)Jt(m[G]);_=!0}},o(F){hr(r.$$.fragment,F);for(let G=0;G<m.length;G+=1)hr(m[G]);_=!1},d(F){F&&Mr(e),fa(r),w&&w.d(),Uh(S,F),T&&T.d(),Uh(I,F);for(let G=0;G<m.length;G+=1)m[G].d()}}}function h9(t,e,r){let{localeData:n}=e,{showWeekNums:i=!1}=e,{onHoverDay:a}=e,{onHoverWeek:s}=e,{onContextMenuDay:l}=e,{onContextMenuWeek:u}=e,{onClickDay:f}=e,{onClickWeek:d}=e,{sources:h=[]}=e,{selectedId:g}=e,{today:m=window.moment()}=e,{displayedMonth:y=m}=e,_,w,E=window.app.isMobile;function S(){r(0,y=y.clone().add(1,"month"))}function T(){r(0,y=y.clone().subtract(1,"month"))}function L(){r(0,y=m.clone())}return t.$$set=I=>{"localeData"in I&&r(17,n=I.localeData),"showWeekNums"in I&&r(1,i=I.showWeekNums),"onHoverDay"in I&&r(2,a=I.onHoverDay),"onHoverWeek"in I&&r(3,s=I.onHoverWeek),"onContextMenuDay"in I&&r(4,l=I.onContextMenuDay),"onContextMenuWeek"in I&&r(5,u=I.onContextMenuWeek),"onClickDay"in I&&r(6,f=I.onClickDay),"onClickWeek"in I&&r(7,d=I.onClickWeek),"sources"in I&&r(8,h=I.sources),"selectedId"in I&&r(9,g=I.selectedId),"today"in I&&r(10,m=I.today),"displayedMonth"in I&&r(0,y=I.displayedMonth)},t.$$.update=()=>{t.$$.dirty&131073&&r(14,_=XG(y,n)),t.$$.dirty&132096&&r(15,w=zG(m,n))},[y,i,a,s,l,u,f,d,h,g,m,S,T,L,_,w,E,n]}var Yh=class extends Ss{constructor(e){super();document.getElementById("svelte-pcimu8-style")||f9(),ko(this,e,h9,d9,Mh,{localeData:17,showWeekNums:1,onHoverDay:2,onHoverWeek:3,onContextMenuDay:4,onContextMenuWeek:5,onClickDay:6,onClickWeek:7,sources:8,selectedId:9,today:10,displayedMonth:0,incrementDisplayedMonth:11,decrementDisplayedMonth:12,resetDisplayedMonth:13})}get incrementDisplayedMonth(){return this.$$.ctx[11]}get decrementDisplayedMonth(){return this.$$.ctx[12]}get resetDisplayedMonth(){return this.$$.ctx[13]}};var Wh=yt(La());var _2=yt(hh());function p9(t){let e,r,n,i=`${t[1]}px`,a=`${t[2]}px`,s,l=[y9,m9],u=[];function f(d,h){return d[3]?0:1}return r=f(t,-1),n=u[r]=l[r](t),{c(){e=ce("div"),n.c(),ie(e,"class","calendarContainer"),Xe(e,"width",i,!1),Xe(e,"height",a,!1)},m(d,h){xe(d,e,h),u[r].m(e,null),s=!0},p(d,h){let g=r;r=f(d,h),r===g?u[r].p(d,h):(Eh(),Oi(u[g],1,1,()=>{u[g]=null}),Ch(),n=u[r],n?n.p(d,h):(n=u[r]=l[r](d),n.c()),di(n,1),n.m(e,null)),h&2&&i!==(i=`${d[1]}px`)&&Xe(e,"width",i,!1),h&4&&a!==(a=`${d[2]}px`)&&Xe(e,"height",a,!1)},i(d){s||(di(n),s=!0)},o(d){Oi(n),s=!1},d(d){d&&be(e),u[r].d()}}}function g9(t){let e,r,n,i,a=[_9,v9],s=[];function l(u,f){return u[3]?0:1}return r=l(t,-1),n=s[r]=a[r](t),{c(){e=ce("div"),n.c(),ie(e,"class","calendarContainer")},m(u,f){xe(u,e,f),s[r].m(e,null),i=!0},p(u,f){let d=r;r=l(u,f),r===d?s[r].p(u,f):(Eh(),Oi(s[d],1,1,()=>{s[d]=null}),Ch(),n=s[r],n?n.p(u,f):(n=s[r]=a[r](u),n.c()),di(n,1),n.m(e,null))},i(u){i||(di(n),i=!0)},o(u){Oi(n),i=!1},d(u){u&&be(e),s[r].d()}}}function m9(t){let e,r,n,i,a,s;function l(h){t[16](h)}function u(h){t[17](h)}function f(h){t[18](h)}let d={showWeekNums:!1,onClickDay:t[7]};return t[4]!==void 0&&(d.sources=t[4]),t[0]!==void 0&&(d.displayedMonth=t[0]),t[5]!==void 0&&(d.today=t[5]),r=new Yh({props:d}),Dn.push(()=>Ma(r,"sources",l)),Dn.push(()=>Ma(r,"displayedMonth",u)),Dn.push(()=>Ma(r,"today",f)),{c(){e=ce("div"),wc(r.$$.fragment),Xe(e,"--theme-color",t[6].settings.dailyNoteDotColor)},m(h,g){xe(h,e,g),Ll(r,e,null),s=!0},p(h,g){let m={};!n&&g&16&&(n=!0,m.sources=h[4],Pa(()=>n=!1)),!i&&g&1&&(i=!0,m.displayedMonth=h[0],Pa(()=>i=!1)),!a&&g&32&&(a=!0,m.today=h[5],Pa(()=>a=!1)),r.$set(m),(!s||g&64)&&Xe(e,"--theme-color",h[6].settings.dailyNoteDotColor)},i(h){s||(di(r.$$.fragment,h),s=!0)},o(h){Oi(r.$$.fragment,h),s=!1},d(h){h&&be(e),mo(r)}}}function y9(t){let e;return{c(){e=ce("p"),e.textContent="Loading..."},m(r,n){xe(r,e,n)},p:At,i:At,o:At,d(r){r&&be(e)}}}function v9(t){let e,r,n,i,a,s;function l(h){t[13](h)}function u(h){t[14](h)}function f(h){t[15](h)}let d={showWeekNums:t[6].settings.useWeeklyNotes,onClickDay:t[7],onClickWeek:t[8]};return t[4]!==void 0&&(d.sources=t[4]),t[0]!==void 0&&(d.displayedMonth=t[0]),t[5]!==void 0&&(d.today=t[5]),r=new Yh({props:d}),Dn.push(()=>Ma(r,"sources",l)),Dn.push(()=>Ma(r,"displayedMonth",u)),Dn.push(()=>Ma(r,"today",f)),{c(){e=ce("div"),wc(r.$$.fragment),Xe(e,"--daily-dot-color",t[6].settings.dailyNoteDotColor)},m(h,g){xe(h,e,g),Ll(r,e,null),s=!0},p(h,g){let m={};g&64&&(m.showWeekNums=h[6].settings.useWeeklyNotes),!n&&g&16&&(n=!0,m.sources=h[4],Pa(()=>n=!1)),!i&&g&1&&(i=!0,m.displayedMonth=h[0],Pa(()=>i=!1)),!a&&g&32&&(a=!0,m.today=h[5],Pa(()=>a=!1)),r.$set(m),(!s||g&64)&&Xe(e,"--daily-dot-color",h[6].settings.dailyNoteDotColor)},i(h){s||(di(r.$$.fragment,h),s=!0)},o(h){Oi(r.$$.fragment,h),s=!1},d(h){h&&be(e),mo(r)}}}function _9(t){let e;return{c(){e=ce("p"),e.textContent="Loading..."},m(r,n){xe(r,e,n)},p:At,i:At,o:At,d(r){r&&be(e)}}}function w9(t){let e,r,n,i,a=[g9,p9],s=[];function l(u,f){return u[1]==0||u[2]==0?0:1}return e=l(t,-1),r=s[e]=a[e](t),{c(){r.c(),n=ia()},m(u,f){s[e].m(u,f),xe(u,n,f),i=!0},p(u,[f]){let d=e;e=l(u,f),e===d?s[e].p(u,f):(Eh(),Oi(s[d],1,1,()=>{s[d]=null}),Ch(),r=s[e],r?r.p(u,f):(r=s[e]=a[e](u),r.c()),di(r,1),r.m(n.parentNode,n))},i(u){i||(di(r),i=!0)},o(u){Oi(r),i=!1},d(u){s[e].d(u),u&&be(n)}}}function E9(t,e,r){let{displayedMonth:n=window.moment()}=e,{width:i=0}=e,{height:a=0}=e,{include:s}=e,{exclude:l}=e,u=gh(),f,d,h,g=!0,m,y=window.moment(),_=$e.getInstance();function w(te){return vr(this,void 0,void 0,function*(){r(6,_);let ae=te.clone().startOf("month").subtract(6,"days"),we=te.clone().endOf("month").add(12,"days"),Se=yield er({startDate:ae,endDate:we,include:s,exclude:l});if(Wh.default.isEqual(Se,h)&&Wh.default.isEqual(u,gh()))return;u=gh();let Qe=Wh.default.groupBy(Se,me=>{var re;return window.moment((re=me.start.date)!==null&&re!==void 0?re:me.start.dateTime).startOf("day").format()});h=Se;let Re={getWeeklyMetadata:me=>vr(this,void 0,void 0,function*(){let re=[];return _.settings.activateDailyNoteAddon&&_.settings.useWeeklyNotes&&Gm(me)&&(re=[{isFilled:!0,className:"googleCalendarDailyDot",color:"default"}]),{dataAttributes:{amount:re.length+""},dots:re}}),getDailyMetadata:me=>vr(this,void 0,void 0,function*(){let re=[];_.settings.activateDailyNoteAddon&&pc(me)&&(re=[{isFilled:!0,className:"googleCalendarDailyDot",color:"default"}]);let Fe=Qe[me.startOf("day").format()];return Fe?(re=[...re,...Array(Fe.length).fill({isFilled:!0,className:"googleCalendarDot",color:"default"})],{dataAttributes:{amount:Fe.length+""},dots:re}):{dataAttributes:{amount:re.length+""},dots:re}})};r(3,g=!1),r(4,m=null),r(4,m=[Re])})}let E=(te,ae)=>te.filter(we=>we.start.date?window.moment(we.start.date).isSame(ae,"day"):window.moment(we.start.dateTime).isSame(ae,"day")),S=(te,ae)=>{new Li(E(h,te),"details",te,!1,()=>{Di(),r(0,n)}).open()},T=(te,ae)=>vr(void 0,void 0,void 0,function*(){let we=Gm(te);we||(we=yield(0,_2.createWeeklyNote)(te)),yield app.workspace.getLeaf(!1).openFile(we,{active:!0})});po(()=>{clearInterval(f),clearInterval(d)});function L(te){m=te,r(4,m)}function I(te){n=te,r(0,n)}function B(te){y=te,r(5,y),r(11,f),r(0,n),r(12,d)}function z(te){m=te,r(4,m)}function F(te){n=te,r(0,n)}function G(te){y=te,r(5,y),r(11,f),r(0,n),r(12,d)}return t.$$set=te=>{"displayedMonth"in te&&r(0,n=te.displayedMonth),"width"in te&&r(1,i=te.width),"height"in te&&r(2,a=te.height),"include"in te&&r(9,s=te.include),"exclude"in te&&r(10,l=te.exclude)},t.$$.update=()=>{if(t.$$.dirty&6145){e:f&&clearInterval(f),r(11,f=setInterval(()=>w(n),1e3)),d&&clearInterval(d),r(12,d=setInterval(()=>r(5,y=window.moment()),6e4)),w(n)}},[n,i,a,g,m,y,_,S,T,s,l,f,d,L,I,B,z,F,G]}var w2=class extends En{constructor(e){super();Bn(this,e,E9,w9,Rn,{displayedMonth:0,width:1,height:2,include:9,exclude:10})}},zh=w2;function C9(t){ci(t,"svelte-1f1t9un",'.scheduleContainer.svelte-1f1t9un{padding:10px}.scheduleContent.svelte-1f1t9un{display:flex;flex-direction:column;align-items:flex-start;white-space:nowrap}.dayContainer.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;border-bottom:1px solid white;margin:2px 0px;padding:2px 0px;flex-wrap:wrap}.dateDisplay.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-end;width:105px;min-width:105px}.dayNumber.svelte-1f1t9un{border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;display:inline-block;font-weight:bold;line-height:40px;text-align:center;width:40px;min-width:40px;cursor:pointer}.today.svelte-1f1t9un{color:white;background:#4285f4;text-decoration:none}.dayText.svelte-1f1t9un{font-size:15px}.dayEvents.svelte-1f1t9un{display:flex;flex-direction:column;flex:1}.dayEvent.svelte-1f1t9un{display:flex;flex:1;flex-direction:row;align-items:center;padding:5px;border-radius:10px;cursor:pointer;flex-wrap:wrap}.dayEvent.svelte-1f1t9un:hover{background-color:rgba(128, 128, 128, 0.129)}.circleTime.svelte-1f1t9un{display:flex;flex-direction:row;width:220px;min-width:220px}.recurringCircleContainer.svelte-1f1t9un,.circleContainer.svelte-1f1t9un{position:relative;display:flex;width:30px;min-width:30px;height:30px;align-items:center;justify-content:center}.recurringCircleContainer.svelte-1f1t9un::after{content:"\u21BA";position:absolute;width:30px;height:30px;text-align:center;line-height:30px;font-size:30px;color:rgb(164, 164, 164);white-space:nowrap}.circle.svelte-1f1t9un{width:10px;min-width:10px;height:10px;border-radius:50%}.timeContainer.svelte-1f1t9un{width:150px;min-width:150px}.eventTitleContainer.svelte-1f1t9un{white-space:nowrap}')}function E2(t,e,r){let n=t.slice();return n[15]=e[r][0],n[1]=e[r][1],n}function C2(t,e,r){let n=t.slice();return n[18]=e[r],n}function b9(t){let e,r=[...t[2]],n=[];for(let i=0;i<r.length;i+=1)n[i]=x2(E2(t,r,i));return{c(){e=ce("div");for(let i=0;i<n.length;i+=1)n[i].c();ie(e,"class","scheduleContent svelte-1f1t9un")},m(i,a){xe(i,e,a);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(i,a){if(a&124){r=[...i[2]];let s;for(s=0;s<r.length;s+=1){let l=E2(i,r,s);n[s]?n[s].p(l,a):(n[s]=x2(l),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){i&&be(e),wn(n,i)}}}function x9(t){let e;return{c(){e=ce("span"),e.textContent="LOADING"},m(r,n){xe(r,e,n)},p:At,d(r){r&&be(e)}}}function b2(t){let e,r,n,i,a,s,l,u,f=t[3](t[18])+"",d,h,g,m,y=t[18].summary+"",_,w,E,S;function T(...L){return t[13](t[18],...L)}return{c(){e=ce("div"),r=ce("div"),n=ce("div"),i=ce("div"),s=Le(),l=ce("div"),u=ce("span"),d=Tr(f),h=Le(),g=ce("div"),m=ce("span"),_=Tr(y),w=Le(),ie(i,"class","circle svelte-1f1t9un"),Xe(i,"background",Qu(t[18]),!1),ie(n,"class",a=""+(Bl(t[18].recurringEventId?"recurringCircleContainer":"circleContainer")+" svelte-1f1t9un")),ie(l,"class","timeContainer svelte-1f1t9un"),ie(r,"class","circleTime svelte-1f1t9un"),ie(g,"class","eventTitleContainer svelte-1f1t9un"),ie(e,"class","dayEvent svelte-1f1t9un")},m(L,I){xe(L,e,I),oe(e,r),oe(r,n),oe(n,i),oe(r,s),oe(r,l),oe(l,u),oe(u,d),oe(e,h),oe(e,g),oe(g,m),oe(m,_),oe(e,w),E||(S=tt(e,"click",T),E=!0)},p(L,I){t=L},d(L){L&&be(e),E=!1,S()}}}function x2(t){let e,r,n,i,a=t[15].slice(0,2)+"",s,l,u,f,d=t[15].slice(2)+"",h,g,m,y,_,w;function E(){return t[12](t[1])}let S=t[1],T=[];for(let L=0;L<S.length;L+=1)T[L]=b2(C2(t,S,L));return{c(){e=ce("div"),r=ce("div"),n=ce("div"),i=ce("span"),s=Tr(a),u=Le(),f=ce("span"),h=Tr(d),g=Le(),m=ce("div");for(let L=0;L<T.length;L+=1)T[L].c();y=Le(),ie(n,"class",l=""+(Bl(t[6](t[1][0])?"dayNumber today":"dayNumber")+" svelte-1f1t9un")),ie(f,"class","dayText svelte-1f1t9un"),ie(r,"class","dateDisplay svelte-1f1t9un"),ie(m,"class","dayEvents svelte-1f1t9un"),ie(e,"class","dayContainer svelte-1f1t9un")},m(L,I){xe(L,e,I),oe(e,r),oe(r,n),oe(n,i),oe(i,s),oe(r,u),oe(r,f),oe(f,h),oe(e,g),oe(e,m);for(let B=0;B<T.length;B+=1)T[B].m(m,null);oe(e,y),_||(w=tt(n,"click",E),_=!0)},p(L,I){if(t=L,I&28){S=t[1];let B;for(B=0;B<S.length;B+=1){let z=C2(t,S,B);T[B]?T[B].p(z,I):(T[B]=b2(z),T[B].c(),T[B].m(m,null))}for(;B<T.length;B+=1)T[B].d(1);T.length=S.length}},d(L){L&&be(e),wn(T,L),_=!1,w()}}}function T9(t){let e;function r(a,s){return a[0]?x9:b9}let n=r(t,-1),i=n(t);return{c(){e=ce("div"),i.c(),ie(e,"class","scheduleContainer svelte-1f1t9un")},m(a,s){xe(a,e,s),i.m(e,null)},p(a,[s]){n===(n=r(a,s))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e,null)))},i:At,o:At,d(a){a&&be(e),i.d()}}}function S9(t,e,r){let{timeSpan:n=7}=e,{date:i=window.moment()}=e,{include:a}=e,{exclude:s}=e,l,u=new Map,f=!1,d=[],h=()=>vr(void 0,void 0,void 0,function*(){let S=yield er({startDate:i,endDate:i.clone().add(n,"day"),include:a,exclude:s});if(JSON.stringify(S)==JSON.stringify(d)){r(0,f=!1);return}u.clear(),r(1,d=S),d.forEach(T=>{let L=T.start.date?window.moment(T.start.date).format("DD MMM, ddd"):window.moment(T.start.dateTime).format("DD MMM, ddd");u.has(L)?u.get(L).push(T):u.set(L,[T])}),r(0,f=!1)}),g=S=>{if(S.start.date)return"All day";{let T=window.moment(S.start.dateTime).format("hh:mma"),L=window.moment(S.end.dateTime).format("hh:mma");return`${T}-${L}`}},m=(S,T)=>{T.shiftKey?window.open(S.htmlLink):new gi(S,()=>{Di(),r(7,i),r(11,l)}).open()},y=S=>vr(void 0,void 0,void 0,function*(){let T=window.moment(S.start.date||S.start.dateTime),L=yield er({startDate:T});new Li(L,"details",T,!1,()=>{Di(),r(7,i),r(11,l)}).open()}),_=S=>{let T=window.moment(S.start.date||S.start.dateTime);return window.moment().local().isSame(T,"day")};po(()=>{clearInterval(l)});let w=S=>y(S[0]),E=(S,T)=>m(S,T);return t.$$set=S=>{"timeSpan"in S&&r(8,n=S.timeSpan),"date"in S&&r(7,i=S.date),"include"in S&&r(9,a=S.include),"exclude"in S&&r(10,s=S.exclude)},t.$$.update=()=>{if(t.$$.dirty&2176){e:r(7,i),r(11,l),l&&clearInterval(l),r(0,f=!0),r(11,l=setInterval(h,5e3)),h()}},[f,d,u,g,m,y,_,i,n,a,s,l,w,E]}var T2=class extends En{constructor(e){super();Bn(this,e,S9,T9,Rn,{timeSpan:8,date:7,include:9,exclude:10},C9)}},Qh=T2;var S2=yt(require("obsidian")),Xl=class extends S2.MarkdownRenderChild{constructor(e,r,n){super(r);this.a=e,this.b=n}load(){this.comp=new this.a({target:this.containerEl,props:this.b})}unload(){this.comp.$destroy()}};function A2(t,e,r){return P(this,null,function*(){let n=(0,Xh.parseYaml)(t),{height:i,width:a,date:s,navigation:l,timespan:u,exclude:f,include:d,theme:h,hourRange:g}=n,{type:m}=n;m||(m=Cs.day);let y=["YYYY-MM-DD","YYYY.MM.DD","YYYY/MM/DD","MM-DD-YYYY","MM.DD.YYYY","MM/DD/YYYY","DD-MM-YYYY","DD.MM.YYYY","DD/MM/YYYY"];if(s==null||s=="today"||s=="tomorrow"||s=="yesterday"||window.moment(s,y,!0).isValid()){let _;s==null?_=void 0:s=="today"?_=window.moment():s=="tomorrow"?_=window.moment().add(1,"day"):s=="yesterday"?_=window.moment().subtract(1,"day"):_=window.moment(s),e.style.padding="10px",m==Cs.web?Xh.Platform.isDesktopApp&&r.addChild(new Xl(Ph,e,{height:i!=null?i:500,width:a!=null?a:500,date:_,theme:h!=null?h:"auto"})):m==Cs.day?r.addChild(new Xl(Lh,e,{height:i,width:a,date:_,navigation:l,include:d,exclude:f,hourRange:g})):m==Cs.month?r.addChild(new Xl(zh,e,{height:i,width:a,displayedMonth:_,include:d,exclude:f})):m==Cs.schedule&&r.addChild(new Xl(Qh,e,{timeSpan:u,date:_,include:d,exclude:f}))}})}var k2=yt(require("obsidian"));var Rc="google-calendar-view-day",yy=class extends k2.ItemView{constructor(e){super(e)}getViewType(){return Rc}getDisplayText(){return"Timeline View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return P(this,null,function*(){this.timeline=new Lh({target:this.contentEl,props:{navigation:!0}})})}onClose(){return P(this,null,function*(){this.timeline.$destroy()})}};var I2=yt(require("obsidian"));var Dc="google-calendar-view-month",vy=class extends I2.ItemView{constructor(e){super(e)}getViewType(){return Dc}getDisplayText(){return"Calendar Month View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return P(this,null,function*(){this.calendar=new zh({target:this.contentEl,props:{}})})}onClose(){return P(this,null,function*(){this.calendar.$destroy()})}};var N2=yt(require("obsidian"));var Bc="google-calendar-view-web",_y=class extends N2.ItemView{constructor(e){super(e)}getViewType(){return Bc}getDisplayText(){return"Calendar Web View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return P(this,null,function*(){this.calendar=new Ph({target:this.contentEl})})}onClose(){return P(this,null,function*(){this.calendar.$destroy()})}};var R2=yt(require("obsidian"));var Oc="google-calendar-view-schedule",wy=class extends R2.ItemView{constructor(e){super(e)}getViewType(){return Oc}getDisplayText(){return"Schedule View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return P(this,null,function*(){this.calendar=new Qh({target:this.contentEl,props:{}})})}onClose(){return P(this,null,function*(){this.calendar.$destroy()})}};var D2=yt(require("obsidian")),Ey=class extends D2.FuzzySuggestModal{constructor(e,r,n,i,a){super($e.getInstance().app);this.eventList=e,this.setPlaceholder("Select an event to insert"),this.editor=r,this.start=n,this.end=i,this.word=a}getItems(){return this.eventList}getItemText(e){return`${e.summary}	`}onChooseItem(e){return P(this,null,function*(){let r=`[${e.summary}](${e.htmlLink}&cal=${e.parent.id})`;this.editor.replaceRange(r,this.start,this.end,this.word)})}};function B2(t,e){e.settings.atAnnotationEnabled!=!1&&(Lc("@today",t,e)||Lc("@tomorrow",t,e)||Lc("@yesterday",t,e)||Lc("@REGEX",t,e)||Lc("@YYYY-MM-DD",t,e))}function Lc(t,e,r){var l;let n=e.getCursor(),i=e.getCursor(),a="",s=window.moment();if(t==="@REGEX"){let u=e.getLine(n.line);if(u.length>2e3)return!1;let f=(l=u.match(/.*@([+,-])(\d+) /))!=null?l:[];if(f.length!=3||e.getCursor().ch!=f.index+f[0].length)return!1;if(i=Gi(pn({},n),{ch:n.ch-f[1].length-f[2].length-1}),i.ch<0)return;a=e.getRange(i,n),f[1]=="+"?s=window.moment().add(f[2],"day"):s=window.moment().subtract(f[2],"day")}else if(t==="@YYYY-MM-DD"){if(i=Gi(pn({},n),{ch:n.ch-t.length}),a=e.getRange(i,n),!a.startsWith("@")||a.length!="@YYYY-MM-DD".length)return!1;let u=["YYYY-MM-DD","YYYY/MM/DD","YYYY.MM.DD","YYYY MM DD","MM-DD-YYYY","MM/DD/YYYY","MM.DD.YYYY","MM DD YYYY","DD-MM-YYYY","DD/MM/YYYY","DD.MM.YYYY","DD MM YYYY"],f=["DD-MM-YYYY","DD/MM/YYYY","DD.MM.YYYY","DD MM YYYY","YYYY-MM-DD","YYYY/MM/DD","YYYY.MM.DD","YYYY MM DD","MM-DD-YYYY","MM/DD/YYYY","MM.DD.YYYY","MM DD YYYY"],d=window.moment(a.substring(1),r.settings.usDateFormat?u:f,!0);if(d.isValid())s=d;else return!1}else{if(i=Gi(pn({},n),{ch:n.ch-t.length}),i.ch<0||e.getRange(i,n)!=t)return!1;switch(t){case"@today":s=window.moment();break;case"@tomorrow":s=window.moment().add(1,"day");break;case"@yesterday":s=window.moment().add(-1,"day");break;default:return!1}}return er({startDate:s}).then(u=>{new Ey(u,e,i,n,a).open()}),!0}var O2=yt(La());function A9(t){return P(this,null,function*(){let e=/\[.*]\(https:\/\/www\.google\.com\/calendar\/event\?eid=(.*)&cal=(.*)\)/g,r,n=[];do r=e.exec(t),r&&n.push(r);while(r);return n.length?yield Promise.all(n.map(a=>P(this,null,function*(){if(a){let s=atob(a[1]).split(" ")[0];return yield aa(s,a[2])}}))):[]})}function L2(t){return P(this,null,function*(){let e=t.getCursor(),r=t.getValue(),n=/{{gEvent(\d?).(.*)}} /g,i,a=[];do i=n.exec(r),i&&a.push(i);while(i);if(!a.length)return;let s=yield A9(r);!s.length||a.forEach(l=>P(this,null,function*(){let u=l[1]?parseInt(l[1]):0,f=t.getCursor();if(f.ch-=3,t.getRange(f,t.getCursor())!="}} ")return!1;let d=O2.default.get(s[u],l[2],"");d===Object(d)&&(d=JSON.stringify(d)),r=r.replace(l[0],d!=null?d:""),t.setValue(r),e.ch+=d.length-l[0].length,t.setCursor(e)}))})}var P2=yt(require("obsidian"));var Jl=[".anyoneCanAddSelf",".attachments",".attachments[0]",".attachments[0]fileId",".attachments[0]fileUrl",".attachments[0]iconLink",".attachments[0]mimeType",".attachments[0]title",".attendees",".attendeesOmitted",".attendees[0]",".attendees[0].additionalGuests",".attendees[0].comment",".attendees[0].displayName",".attendees[0].email",".attendees[0].id",".attendees[0].optional",".attendees[0].organizer",".attendees[0].resource",".attendees[0].responseStatus",".attendees[0].self",".colorId",".conferenceData",".conferenceData.conferenceId",".conferenceData.conferenceSolution",".conferenceData.conferenceSolution.iconUri",".conferenceData.conferenceSolution.key",".conferenceData.conferenceSolution.key.type",".conferenceData.conferenceSolution.name",".conferenceData.createRequest",".conferenceData.createRequest.conferenceSolutionKey",".conferenceData.createRequest.conferenceSolutionKey.type",".conferenceData.createRequest.requestId",".conferenceData.createRequest.status",".conferenceData.createRequest.status.statusCode",".conferenceData.entryPoints",".conferenceData.entryPoints[0]",".conferenceData.entryPoints[0].accessCode",".conferenceData.entryPoints[0].entryPointType",".conferenceData.entryPoints[0].label",".conferenceData.entryPoints[0].meetingCode",".conferenceData.entryPoints[0].passcode",".conferenceData.entryPoints[0].password",".conferenceData.entryPoints[0].pin",".conferenceData.entryPoints[0].uri",".conferenceData.notes",".conferenceData.signature",".created",".creator",".creator.displayName",".creator.email",".creator.id",".creator.self",".description",".end",".end.date",".end.dateTime",".end.timeZone",".endTimeUnspecified",".etag",".eventType",".extendedProperties",".extendedProperties.private",".extendedProperties.shared",".gadget",".gadget.display",".gadget.height",".gadget.iconLink",".gadget.link",".gadget.preferences",".gadget.title",".gadget.type",".gadget.width",".guestsCanInviteOthers",".guestsCanModify",".guestsCanSeeOtherGuests",".hangoutLink",".htmlLink",".iCalUID",".id",".kind",".location",".locked",".organizer",".organizer.displayName",".organizer.email",".organizer.id",".organizer.self",".originalStartTime",".originalStartTime.date",".originalStartTime.dateTime",".originalStartTime.timeZone",".privateCopy",".parent",".parent.kind",".parent.id",".parent.summary",".parent.description",".parent.location",".parent.timeZone",".parent.conferenceProperties",".parent.conferenceProperties.allowedConferenceSolutionTypes",".recurrence",".recurrence[0]",".recurringEventId",".reminders",".reminders.overrides",".reminders.overrides[0]",".reminders.overrides[0].method",".reminders.overrides[0].minutes",".reminders.useDefault",".sequence",".source",".source.title",".source.url",".start",".start.date",".start.dateTime",".start.timeZone",".status",".summary",".transparency",".updated",".visibility"];var Cy=class extends P2.EditorSuggest{constructor(e){super(e)}onTrigger(e,r){let i=r.getLine(e.line).substring(0,e.ch).match(/{{gEvent(\d)?(\S+$)/);if(i){let a="{{gEvent".length;return i[1]&&a++,{end:e,start:{ch:i.index+a,line:e.line},query:i[2]}}}getSuggestions(e){return Jl.filter(r=>e.query===r.substring(0,e.query.length))}renderSuggestion(e,r){r.createEl("span",{text:e,cls:"suggestionText"})}selectSuggestion(e){if(!this.context)return;let{editor:r}=this.context;if(r.replaceRange(e,this.context.start,this.context.end),Jl.filter(i=>i.startsWith(`${e}.`)).length==0){let i=r.getCursor(),a=structuredClone(i);a.ch+=2,(r.getLine(a.line).length<a.ch||r.getRange(i,a)!="}}")&&r.replaceRange("}}",i),r.setCursor(a)}}};var J2=yt(require("obsidian"));var Pc=yt(require("obsidian")),by=class extends Pc.Modal{constructor(e,r){super(e);this.onSubmit=r}onOpen(){let{contentEl:e}=this;e.createEl("h1",{text:"Enter a name for the template"}),new Pc.Setting(e).setName("Name").addText(r=>r.onChange(n=>{this.result=n})),new Pc.Setting(e).addButton(r=>r.setButtonText("Save").setCta().onClick(()=>{this.close(),this.onSubmit(this.result)}))}onClose(){let{contentEl:e}=this;e.empty()}};function k9(t){ci(t,"svelte-6isfqn",".optionContainer.svelte-6isfqn{display:flex;flex-direction:column}.header.svelte-6isfqn{display:grid;grid-template-columns:[first] 30% auto [last] 30%}.center.svelte-6isfqn{text-align:center}.settingsContainer.svelte-6isfqn{display:flex;flex-direction:row;flex:1 1;gap:20px}.optionItem.svelte-6isfqn{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.input.svelte-6isfqn,.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{width:100%;display:flex;flex-direction:column}.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{padding-left:16px}button.svelte-6isfqn{align-self:center}")}function M2(t,e,r){let n=t.slice();return n[21]=e[r],n}function U2(t,e,r){let n=t.slice();return n[21]=e[r],n}function F2(t,e,r){let n=t.slice();return n[26]=e[r],n[27]=e,n[28]=r,n}function q2(t,e,r){let n=t.slice();return n[29]=e[r],n[30]=e,n[31]=r,n}function G2(t,e,r){let n=t.slice();return n[32]=e[r],n}function V2(t){let e,r=t[0].settings.insertTemplates,n=[];for(let i=0;i<r.length;i+=1)n[i]=H2(G2(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ia()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);xe(i,e,a)},p(i,a){if(a[0]&1){r=i[0].settings.insertTemplates;let s;for(s=0;s<r.length;s+=1){let l=G2(i,r,s);n[s]?n[s].p(l,a):(n[s]=H2(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){wn(n,i),i&&be(e)}}}function H2(t){let e,r=t[32].name+"",n,i;return{c(){e=ce("option"),n=Tr(r),e.__value=i=t[32].name,e.value=e.__value},m(a,s){xe(a,e,s),oe(e,n)},p(a,s){s[0]&1&&r!==(r=a[32].name+"")&&fi(n,r),s[0]&1&&i!==(i=a[32].name)&&(e.__value=i,e.value=e.__value)},d(a){a&&be(e)}}}function I9(t){let e;return{c(){e=ce("span"),e.textContent="Loading..."},m(r,n){xe(r,e,n)},p:At,d(r){r&&be(e)}}}function N9(t){let e,r=t[4],n=[];for(let i=0;i<r.length;i+=1)n[i]=K2(q2(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ia()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);xe(i,e,a)},p(i,a){if(a[0]&144){r=i[4];let s;for(s=0;s<r.length;s+=1){let l=q2(i,r,s);n[s]?n[s].p(l,a):(n[s]=K2(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){wn(n,i),i&&be(e)}}}function K2(t){let e,r,n=t[29][0].summary+"",i,a,s,l,u,f,d,h;function g(){t[17].call(l,t[30],t[31])}return{c(){e=ce("div"),r=ce("label"),i=Tr(n),s=Le(),l=ce("input"),f=Le(),ie(r,"for",a=t[29][0].id),ie(l,"type","checkbox"),ie(l,"id",u=t[29][0].id),ie(e,"class","optionItem svelte-6isfqn")},m(m,y){xe(m,e,y),oe(e,r),oe(r,i),oe(e,s),oe(e,l),l.checked=t[29][1],oe(e,f),d||(h=[tt(l,"change",g),tt(l,"change",t[7])],d=!0)},p(m,y){t=m,y[0]&16&&n!==(n=t[29][0].summary+"")&&fi(i,n),y[0]&16&&a!==(a=t[29][0].id)&&ie(r,"for",a),y[0]&16&&u!==(u=t[29][0].id)&&ie(l,"id",u),y[0]&16&&(l.checked=t[29][1])},d(m){m&&be(e),d=!1,on(h)}}}function R9(t){let e;return{c(){e=ce("span"),e.textContent="Loading..."},m(r,n){xe(r,e,n)},p:At,d(r){r&&be(e)}}}function D9(t){let e,r=t[3],n=[];for(let i=0;i<r.length;i+=1)n[i]=j2(F2(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ia()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);xe(i,e,a)},p(i,a){if(a[0]&8){r=i[3];let s;for(s=0;s<r.length;s+=1){let l=F2(i,r,s);n[s]?n[s].p(l,a):(n[s]=j2(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){wn(n,i),i&&be(e)}}}function j2(t){let e,r,n=t[26][0].summary+"",i,a,s,l,u,f,d,h;function g(){t[18].call(l,t[27],t[28])}return{c(){e=ce("div"),r=ce("label"),i=Tr(n),s=Le(),l=ce("input"),f=Le(),ie(r,"for",a=t[26][0].id),ie(l,"type","checkbox"),ie(l,"id",u=t[26][0].id),ie(e,"class","optionItem svelte-6isfqn")},m(m,y){xe(m,e,y),oe(e,r),oe(r,i),oe(e,s),oe(e,l),l.checked=t[26][1],oe(e,f),d||(h=tt(l,"change",g),d=!0)},p(m,y){t=m,y[0]&8&&n!==(n=t[26][0].summary+"")&&fi(i,n),y[0]&8&&a!==(a=t[26][0].id)&&ie(r,"for",a),y[0]&8&&u!==(u=t[26][0].id)&&ie(l,"id",u),y[0]&8&&(l.checked=t[26][1])},d(m){m&&be(e),d=!1,h()}}}function Y2(t){let e,r,n,i,a,s,l,u=Jl,f=[];for(let g=0;g<u.length;g+=1)f[g]=W2(U2(t,u,g));let d=t[5],h=[];for(let g=0;g<d.length;g+=1)h[g]=z2(M2(t,d,g));return{c(){e=ce("h4"),e.textContent="Table structure",r=Le(),n=ce("select");for(let g=0;g<f.length;g+=1)f[g].c();i=Le(),a=ce("div");for(let g=0;g<h.length;g+=1)h[g].c();ie(n,"name","tableOptions"),ie(n,"class","dropdown"),ie(a,"class","optionList svelte-6isfqn")},m(g,m){xe(g,e,m),xe(g,r,m),xe(g,n,m);for(let y=0;y<f.length;y+=1)f[y].m(n,null);xe(g,i,m),xe(g,a,m);for(let y=0;y<h.length;y+=1)h[y].m(a,null);s||(l=tt(n,"change",t[8]),s=!0)},p(g,m){if(m&0){u=Jl;let y;for(y=0;y<u.length;y+=1){let _=U2(g,u,y);f[y]?f[y].p(_,m):(f[y]=W2(_),f[y].c(),f[y].m(n,null))}for(;y<f.length;y+=1)f[y].d(1);f.length=u.length}if(m[0]&544){d=g[5];let y;for(y=0;y<d.length;y+=1){let _=M2(g,d,y);h[y]?h[y].p(_,m):(h[y]=z2(_),h[y].c(),h[y].m(a,null))}for(;y<h.length;y+=1)h[y].d(1);h.length=d.length}},d(g){g&&be(e),g&&be(r),g&&be(n),wn(f,g),g&&be(i),g&&be(a),wn(h,g),s=!1,l()}}}function W2(t){let e,r=t[21]+"",n,i;return{c(){e=ce("option"),n=Tr(r),e.__value=i=t[21],e.value=e.__value},m(a,s){xe(a,e,s),oe(e,n)},p:At,d(a){a&&be(e)}}}function z2(t){let e,r,n=t[21]+"",i,a,s,l,u,f,d;function h(){return t[19](t[21])}return{c(){e=ce("div"),r=ce("span"),i=Tr(n),a=Le(),s=ce("input"),u=Le(),ie(s,"type","checkbox"),ie(s,"id",l=t[21]),s.checked=!0,ie(e,"class","optionItem svelte-6isfqn")},m(g,m){xe(g,e,m),oe(e,r),oe(r,i),oe(e,a),oe(e,s),oe(e,u),f||(d=tt(s,"click",h),f=!0)},p(g,m){t=g,m[0]&32&&n!==(n=t[21]+"")&&fi(i,n),m[0]&32&&l!==(l=t[21])&&ie(s,"id",l)},d(g){g&&be(e),f=!1,d()}}}function B9(t){let e,r,n,i,a,s,l,u,f,d,h,g,m,y,_,w,E,S,T,L,I,B,z,F,G,te,ae,we,Se,Qe,Re,me,re,Fe,Ze,ct,Je,ft,le=t[0].settings.insertTemplates.length&&V2(t);function Rt(O,j){return O[4]?N9:I9}let Dt=Rt(t,[-1,-1]),rt=Dt(t);function nt(O,j){return O[3]?D9:R9}let dt=nt(t,[-1,-1]),N=dt(t),D=t[2]=="table"&&Y2(t);return{c(){e=ce("div"),r=ce("div"),n=ce("select"),i=ce("option"),i.textContent="None",le&&le.c(),a=Le(),s=ce("h1"),s.textContent="Insert Options",l=Le(),u=ce("button"),u.textContent="Save as template",f=Le(),d=ce("hr"),h=Le(),g=ce("div"),m=ce("div"),y=ce("label"),y.textContent="Insert type",_=Le(),w=ce("select"),E=ce("option"),E.textContent="Bullet",T=ce("option"),T.textContent="Table",L=Le(),I=ce("div"),B=ce("label"),B.textContent="Insert date",z=Le(),F=ce("input"),te=Le(),ae=ce("h4"),ae.textContent="Calendars",we=Le(),Se=ce("div"),rt.c(),Qe=Le(),Re=ce("h4"),Re.textContent="Events",me=Le(),re=ce("div"),N.c(),Fe=Le(),D&&D.c(),Ze=Le(),ct=ce("button"),ct.textContent="Insert",i.__value="None",i.value=i.__value,ie(n,"class","dropdown left"),t[1]===void 0&&Ol(()=>t[15].call(n)),ie(s,"class","center svelte-6isfqn"),ie(u,"class","right svelte-6isfqn"),ie(r,"class","header svelte-6isfqn"),ie(y,"for","insertType"),E.selected=S=!0,E.__value="bullet",E.value=E.__value,T.__value="table",T.value=T.__value,ie(w,"class","dropdown"),t[2]===void 0&&Ol(()=>t[16].call(w)),ie(m,"class","input svelte-6isfqn"),ie(B,"for","date"),ie(F,"type","date"),ie(F,"name","date"),ie(F,"id","date"),F.value=G=window.moment().format("YYYY-MM-DD"),ie(I,"class","input svelte-6isfqn"),ie(g,"class","settingsContainer svelte-6isfqn"),ie(Se,"class","calendarList svelte-6isfqn"),ie(re,"class","eventList svelte-6isfqn"),ie(ct,"class","svelte-6isfqn"),ie(e,"class","optionContainer svelte-6isfqn")},m(O,j){xe(O,e,j),oe(e,r),oe(r,n),oe(n,i),le&&le.m(n,null),mc(n,t[1]),oe(r,a),oe(r,s),oe(r,l),oe(r,u),oe(e,f),oe(e,d),oe(e,h),oe(e,g),oe(g,m),oe(m,y),oe(m,_),oe(m,w),oe(w,E),oe(w,T),mc(w,t[2]),oe(g,L),oe(g,I),oe(I,B),oe(I,z),oe(I,F),oe(e,te),oe(e,ae),oe(e,we),oe(e,Se),rt.m(Se,null),oe(e,Qe),oe(e,Re),oe(e,me),oe(e,re),N.m(re,null),oe(e,Fe),D&&D.m(e,null),oe(e,Ze),oe(e,ct),Je||(ft=[tt(n,"change",t[15]),tt(n,"change",t[12]),tt(u,"click",t[11]),tt(w,"change",t[16]),tt(F,"change",t[10]),tt(ct,"click",t[6])],Je=!0)},p(O,j){O[0].settings.insertTemplates.length?le?le.p(O,j):(le=V2(O),le.c(),le.m(n,null)):le&&(le.d(1),le=null),j[0]&3&&mc(n,O[1]),j[0]&4&&mc(w,O[2]),Dt===(Dt=Rt(O,j))&&rt?rt.p(O,j):(rt.d(1),rt=Dt(O),rt&&(rt.c(),rt.m(Se,null))),dt===(dt=nt(O,j))&&N?N.p(O,j):(N.d(1),N=dt(O),N&&(N.c(),N.m(re,null))),O[2]=="table"?D?D.p(O,j):(D=Y2(O),D.c(),D.m(e,Ze)):D&&(D.d(1),D=null)},i:At,o:At,d(O){O&&be(e),le&&le.d(),rt.d(),N.d(),D&&D.d(),Je=!1,on(ft)}}}function O9(t,e,r){let{onSubmit:n}=e,{insertEventsModal:i}=e,a=$e.getInstance(),s,l,u,f,d=[".summary",".description"];ho(()=>vr(void 0,void 0,void 0,function*(){let F=yield Or();r(4,f=F.map(te=>[te,!0]));let G=yield er();r(3,u=G.map(te=>[te,!0]))}));let h=()=>{let F=u.filter(G=>G[1]).map(G=>G[0]);n(l,F,d,i)},g=F=>{u.forEach(G=>{G[0].parent.id==F.target.id&&(G[1]=F.target.checked)}),r(3,u)},m=F=>{let G=F.target.value;G=="on"&&(G=F.target.id),d.contains(G)?d.remove(G):d.push(G),r(5,d)},y=F=>{d.contains(F)&&d.remove(F),r(5,d)},_=F=>vr(void 0,void 0,void 0,function*(){let G=yield Or();r(4,f=G.map(ae=>[ae,!0]));let te=yield er({startDate:window.moment(F.target.value).local()});r(3,u=te.map(ae=>[ae,!0])),r(3,u)}),w=()=>f.filter(F=>F[1]).map(F=>F[0].id),E=()=>{new by(app,F=>{let G={name:F,insertType:l,tableOptions:d,calendarList:w()};r(0,a.settings.insertTemplates=[...a.settings.insertTemplates,G],a),a.saveSettings(),ot("Added template")}).open()},S=F=>{let G=F.target.value;if(G=="None")return;let ae=a.settings.insertTemplates.find(we=>we.name==G);!ae||(r(2,l=ae.insertType),r(5,d=ae.tableOptions),f.forEach(we=>we[1]=ae.calendarList.contains(we[0].id)),u.forEach(we=>we[1]=ae.calendarList.contains(we[0].parent.id)),r(4,f),r(3,u))};function T(){s=Km(this),r(1,s),r(0,a)}function L(){l=Km(this),r(2,l)}function I(F,G){F[G][1]=this.checked,r(4,f)}function B(F,G){F[G][1]=this.checked,r(3,u)}let z=F=>y(F);return t.$$set=F=>{"onSubmit"in F&&r(13,n=F.onSubmit),"insertEventsModal"in F&&r(14,i=F.insertEventsModal)},[a,s,l,u,f,d,h,g,m,y,_,E,S,n,i,T,L,I,B,z]}var Q2=class extends En{constructor(e){super();Bn(this,e,O9,B9,Rn,{onSubmit:13,insertEventsModal:14},k9,[-1,-1])}},X2=Q2;var Z2=yt(La()),xy=class extends J2.Modal{constructor(e){super($e.getInstance().app);this.editor=e}onOpen(){return P(this,null,function*(){let{contentEl:e}=this;new X2({target:e,props:{onSubmit:this.onSubmit,insertEventsModal:this}})})}onClose(){let{contentEl:e}=this;e.empty()}onSubmit(e,r,n,i){let a="",s="",l="";e=="bullet"?(r.forEach(u=>{l+=`
- ${`[${u.summary}](${u.htmlLink}&cal=${u.parent.id})`}`}),i.editor.replaceRange(l,i.editor.getCursor())):e=="table"&&(n.forEach(u=>{u=u.split(".").join(" ").toLocaleUpperCase(),a+=`| ${u} `,s+="| --- "}),a+=`|
`,s+=`|
`,r.forEach(u=>{n.forEach(f=>{let d=Z2.default.get(u,f.substring(1),"");f==".summary"&&(d=`[${d}](${u.htmlLink}&cal=${u.parent.id})`),f.startsWith(".start")&&!f.contains("timeZone")&&(d=(u.start.date?window.moment(u.start.date):window.moment(u.start.dateTime)).format("YYYY-MM-DD HH:mm")),f.startsWith(".end")&&!f.contains("timeZone")&&(d=(u.start.date?window.moment(u.end.date):window.moment(u.end.dateTime)).format("YYYY-MM-DD HH:mm")),l+=`| ${d} `}),l+=`|
`}),i.editor.replaceRange(a+s+l,i.editor.getCursor())),i.close()}};var Ty=class{constructor(){}make(){return{getCalendars:()=>Or(),getEvent:(e,r)=>aa(e,r),getEvents:e=>er(e),createEvent:e=>Fl(e),deleteEvent:(e,r=!1)=>Ml(e,r),updateEvent:(e,r=!1)=>Ul(e,r)}}};var ky=yt(require("obsidian"));var Mc=yt(La());function $2(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var Zl=$2();function L9(t){Zl=t}var ek=/[&<>"']/,P9=new RegExp(ek.source,"g"),tk=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,M9=new RegExp(tk.source,"g"),U9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rk=t=>U9[t];function rn(t,e){if(e){if(ek.test(t))return t.replace(P9,rk)}else if(tk.test(t))return t.replace(M9,rk);return t}var F9=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function nk(t){return t.replace(F9,(e,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}var q9=/(^|[^\[])\^/g;function tr(t,e){t=typeof t=="string"?t:t.source,e=e||"";let r={replace:(n,i)=>(i=i.source||i,i=i.replace(q9,"$1"),t=t.replace(n,i),r),getRegex:()=>new RegExp(t,e)};return r}var G9=/[^\w:]/g,V9=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function ik(t,e,r){if(t){let n;try{n=decodeURIComponent(nk(r)).replace(G9,"").toLowerCase()}catch(i){return null}if(n.indexOf("javascript:")===0||n.indexOf("vbscript:")===0||n.indexOf("data:")===0)return null}e&&!V9.test(r)&&(r=Y9(e,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch(n){return null}return r}var Jh={},H9=/^[^:]+:\/*[^/]*$/,K9=/^([^:]+:)[\s\S]*$/,j9=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Y9(t,e){Jh[" "+t]||(H9.test(t)?Jh[" "+t]=t+"/":Jh[" "+t]=$h(t,"/",!0)),t=Jh[" "+t];let r=t.indexOf(":")===-1;return e.substring(0,2)==="//"?r?e:t.replace(K9,"$1")+e:e.charAt(0)==="/"?r?e:t.replace(j9,"$1")+e:t+e}var Zh={exec:function(){}};function Pi(t){let e=1,r,n;for(;e<arguments.length;e++){r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}function ak(t,e){let r=t.replace(/\|/g,(a,s,l)=>{let u=!1,f=s;for(;--f>=0&&l[f]==="\\";)u=!u;return u?"|":" |"}),n=r.split(/ \|/),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function $h(t,e,r){let n=t.length;if(n===0)return"";let i=0;for(;i<n;){let a=t.charAt(n-i-1);if(a===e&&!r)i++;else if(a!==e&&r)i++;else break}return t.slice(0,n-i)}function W9(t,e){if(t.indexOf(e[1])===-1)return-1;let r=t.length,n=0,i=0;for(;i<r;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return-1}function sk(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function ok(t,e){if(e<1)return"";let r="";for(;e>1;)e&1&&(r+=t),e>>=1,t+=t;return r+t}function lk(t,e,r,n){let i=e.href,a=e.title?rn(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){n.state.inLink=!0;let l={type:"link",raw:r,href:i,title:a,text:s,tokens:n.inlineTokens(s)};return n.state.inLink=!1,l}return{type:"image",raw:r,href:i,title:a,text:rn(s)}}function z9(t,e){let r=t.match(/^(\s+)(?:```)/);if(r===null)return e;let n=r[1];return e.split(`
`).map(i=>{let a=i.match(/^\s+/);if(a===null)return i;let[s]=a;return s.length>=n.length?i.slice(n.length):i}).join(`
`)}var ep=class{constructor(e){this.options=e||Zl}space(e){let r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){let r=this.rules.block.code.exec(e);if(r){let n=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:$h(n,`
`)}}}fences(e){let r=this.rules.block.fences.exec(e);if(r){let n=r[0],i=z9(n,r[3]||"");return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline._escapes,"$1"):r[2],text:i}}}heading(e){let r=this.rules.block.heading.exec(e);if(r){let n=r[2].trim();if(/#$/.test(n)){let i=$h(n,"#");(this.options.pedantic||!i||/ $/.test(i))&&(n=i.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:r[0]}}blockquote(e){let r=this.rules.block.blockquote.exec(e);if(r){let n=r[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;let a=this.lexer.blockTokens(n);return this.lexer.state.top=i,{type:"blockquote",raw:r[0],tokens:a,text:n}}}list(e){let r=this.rules.block.list.exec(e);if(r){let n,i,a,s,l,u,f,d,h,g,m,y,_=r[1].trim(),w=_.length>1,E={type:"list",raw:"",ordered:w,start:w?+_.slice(0,-1):"",loose:!1,items:[]};_=w?`\\d{1,9}\\${_.slice(-1)}`:`\\${_}`,this.options.pedantic&&(_=w?_:"[*+-]");let S=new RegExp(`^( {0,3}${_})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(y=!1,!(!(r=S.exec(e))||this.rules.block.hr.test(e)));){if(n=r[0],e=e.substring(n.length),d=r[2].split(`
`,1)[0],h=e.split(`
`,1)[0],this.options.pedantic?(s=2,m=d.trimLeft()):(s=r[2].search(/[^ ]/),s=s>4?1:s,m=d.slice(s),s+=r[1].length),u=!1,!d&&/^ *$/.test(h)&&(n+=h+`
`,e=e.substring(h.length+1),y=!0),!y){let L=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),I=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),B=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),z=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;e&&(g=e.split(`
`,1)[0],d=g,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(B.test(d)||z.test(d)||L.test(d)||I.test(e)));){if(d.search(/[^ ]/)>=s||!d.trim())m+=`
`+d.slice(s);else if(!u)m+=`
`+d;else break;!u&&!d.trim()&&(u=!0),n+=g+`
`,e=e.substring(g.length+1)}}E.loose||(f?E.loose=!0:/\n *\n *$/.test(n)&&(f=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(m),i&&(a=i[0]!=="[ ] ",m=m.replace(/^\[[ xX]\] +/,""))),E.items.push({type:"list_item",raw:n,task:!!i,checked:a,loose:!1,text:m}),E.raw+=n}E.items[E.items.length-1].raw=n.trimRight(),E.items[E.items.length-1].text=m.trimRight(),E.raw=E.raw.trimRight();let T=E.items.length;for(l=0;l<T;l++)if(this.lexer.state.top=!1,E.items[l].tokens=this.lexer.blockTokens(E.items[l].text,[]),!E.loose){let L=E.items[l].tokens.filter(B=>B.type==="space"),I=L.length>0&&L.some(B=>/\n.*\n/.test(B.raw));E.loose=I}if(E.loose)for(l=0;l<T;l++)E.items[l].loose=!0;return E}}html(e){let r=this.rules.block.html.exec(e);if(r){let n={type:"html",raw:r[0],pre:!this.options.sanitizer&&(r[1]==="pre"||r[1]==="script"||r[1]==="style"),text:r[0]};if(this.options.sanitize){let i=this.options.sanitizer?this.options.sanitizer(r[0]):rn(r[0]);n.type="paragraph",n.text=i,n.tokens=this.lexer.inline(i)}return n}}def(e){let r=this.rules.block.def.exec(e);if(r){let n=r[1].toLowerCase().replace(/\s+/g," "),i=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",a=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline._escapes,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:i,title:a}}}table(e){let r=this.rules.block.table.exec(e);if(r){let n={type:"table",header:ak(r[1]).map(i=>({text:i})),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(n.header.length===n.align.length){n.raw=r[0];let i=n.align.length,a,s,l,u;for(a=0;a<i;a++)/^ *-+: *$/.test(n.align[a])?n.align[a]="right":/^ *:-+: *$/.test(n.align[a])?n.align[a]="center":/^ *:-+ *$/.test(n.align[a])?n.align[a]="left":n.align[a]=null;for(i=n.rows.length,a=0;a<i;a++)n.rows[a]=ak(n.rows[a],n.header.length).map(f=>({text:f}));for(i=n.header.length,s=0;s<i;s++)n.header[s].tokens=this.lexer.inline(n.header[s].text);for(i=n.rows.length,s=0;s<i;s++)for(u=n.rows[s],l=0;l<u.length;l++)u[l].tokens=this.lexer.inline(u[l].text);return n}}}lheading(e){let r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){let r=this.rules.block.paragraph.exec(e);if(r){let n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){let r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:rn(r[1])}}tag(e){let r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):rn(r[0]):r[0]}}link(e){let r=this.rules.inline.link.exec(e);if(r){let n=r[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;let s=$h(n.slice(0,-1),"\\");if((n.length-s.length)%2==0)return}else{let s=W9(r[2],"()");if(s>-1){let u=(r[0].indexOf("!")===0?5:4)+r[1].length+s;r[2]=r[2].substring(0,s),r[0]=r[0].substring(0,u).trim(),r[3]=""}}let i=r[2],a="";if(this.options.pedantic){let s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s&&(i=s[1],a=s[3])}else a=r[3]?r[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(n)?i=i.slice(1):i=i.slice(1,-1)),lk(r,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},r[0],this.lexer)}}reflink(e,r){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(/\s+/g," ");if(i=r[i.toLowerCase()],!i){let a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return lk(n,i,n[0],this.lexer)}}emStrong(e,r,n=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&n.match(/[\p{L}\p{N}]/u))return;let a=i[1]||i[2]||"";if(!a||a&&(n===""||this.rules.inline.punctuation.exec(n))){let s=i[0].length-1,l,u,f=s,d=0,h=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,r=r.slice(-1*e.length+s);(i=h.exec(r))!=null;){if(l=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!l)continue;if(u=l.length,i[3]||i[4]){f+=u;continue}else if((i[5]||i[6])&&s%3&&!((s+u)%3)){d+=u;continue}if(f-=u,f>0)continue;u=Math.min(u,u+f+d);let g=e.slice(0,s+i.index+(i[0].length-l.length)+u);if(Math.min(s,u)%2){let y=g.slice(1,-1);return{type:"em",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}let m=g.slice(2,-2);return{type:"strong",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){let r=this.rules.inline.code.exec(e);if(r){let n=r[2].replace(/\n/g," "),i=/[^ ]/.test(n),a=/^ /.test(n)&&/ $/.test(n);return i&&a&&(n=n.substring(1,n.length-1)),n=rn(n,!0),{type:"codespan",raw:r[0],text:n}}}br(e){let r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){let r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e,r){let n=this.rules.inline.autolink.exec(e);if(n){let i,a;return n[2]==="@"?(i=rn(this.options.mangle?r(n[1]):n[1]),a="mailto:"+i):(i=rn(n[1]),a=i),{type:"link",raw:n[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}url(e,r){let n;if(n=this.rules.inline.url.exec(e)){let i,a;if(n[2]==="@")i=rn(this.options.mangle?r(n[0]):n[0]),a="mailto:"+i;else{let s;do s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(s!==n[0]);i=rn(n[0]),n[1]==="www."?a="http://"+n[0]:a=n[0]}return{type:"link",raw:n[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,r){let n=this.rules.inline.text.exec(e);if(n){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):rn(n[0]):n[0]:i=rn(this.options.smartypants?r(n[0]):n[0]),{type:"text",raw:n[0],text:i}}}},Ve={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Zh,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Ve._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Ve._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Ve.def=tr(Ve.def).replace("label",Ve._label).replace("title",Ve._title).getRegex();Ve.bullet=/(?:[*+-]|\d{1,9}[.)])/;Ve.listItemStart=tr(/^( *)(bull) */).replace("bull",Ve.bullet).getRegex();Ve.list=tr(Ve.list).replace(/bull/g,Ve.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ve.def.source+")").getRegex();Ve._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";Ve._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Ve.html=tr(Ve.html,"i").replace("comment",Ve._comment).replace("tag",Ve._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Ve.paragraph=tr(Ve._paragraph).replace("hr",Ve.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ve._tag).getRegex();Ve.blockquote=tr(Ve.blockquote).replace("paragraph",Ve.paragraph).getRegex();Ve.normal=Pi({},Ve);Ve.gfm=Pi({},Ve.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});Ve.gfm.table=tr(Ve.gfm.table).replace("hr",Ve.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ve._tag).getRegex();Ve.gfm.paragraph=tr(Ve._paragraph).replace("hr",Ve.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Ve.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ve._tag).getRegex();Ve.pedantic=Pi({},Ve.normal,{html:tr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ve._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Zh,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:tr(Ve.normal._paragraph).replace("hr",Ve.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ve.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Be={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Zh,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Zh,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Be._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";Be.punctuation=tr(Be.punctuation).replace(/punctuation/g,Be._punctuation).getRegex();Be.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;Be.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;Be._comment=tr(Ve._comment).replace("(?:-->|$)","-->").getRegex();Be.emStrong.lDelim=tr(Be.emStrong.lDelim).replace(/punct/g,Be._punctuation).getRegex();Be.emStrong.rDelimAst=tr(Be.emStrong.rDelimAst,"g").replace(/punct/g,Be._punctuation).getRegex();Be.emStrong.rDelimUnd=tr(Be.emStrong.rDelimUnd,"g").replace(/punct/g,Be._punctuation).getRegex();Be._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;Be._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;Be._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;Be.autolink=tr(Be.autolink).replace("scheme",Be._scheme).replace("email",Be._email).getRegex();Be._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;Be.tag=tr(Be.tag).replace("comment",Be._comment).replace("attribute",Be._attribute).getRegex();Be._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;Be._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;Be._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;Be.link=tr(Be.link).replace("label",Be._label).replace("href",Be._href).replace("title",Be._title).getRegex();Be.reflink=tr(Be.reflink).replace("label",Be._label).replace("ref",Ve._label).getRegex();Be.nolink=tr(Be.nolink).replace("ref",Ve._label).getRegex();Be.reflinkSearch=tr(Be.reflinkSearch,"g").replace("reflink",Be.reflink).replace("nolink",Be.nolink).getRegex();Be.normal=Pi({},Be);Be.pedantic=Pi({},Be.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:tr(/^!?\[(label)\]\((.*?)\)/).replace("label",Be._label).getRegex(),reflink:tr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Be._label).getRegex()});Be.gfm=Pi({},Be.normal,{escape:tr(Be.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});Be.gfm.url=tr(Be.gfm.url,"i").replace("email",Be.gfm._extended_email).getRegex();Be.breaks=Pi({},Be.gfm,{br:tr(Be.br).replace("{2,}","*").getRegex(),text:tr(Be.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function Q9(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function uk(t){let e="",r,n,i=t.length;for(r=0;r<i;r++)n=t.charCodeAt(r),Math.random()>.5&&(n="x"+n.toString(16)),e+="&#"+n+";";return e}var da=class{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Zl,this.options.tokenizer=this.options.tokenizer||new ep,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={block:Ve.normal,inline:Be.normal};this.options.pedantic?(r.block=Ve.pedantic,r.inline=Be.pedantic):this.options.gfm&&(r.block=Ve.gfm,this.options.breaks?r.inline=Be.breaks:r.inline=Be.gfm),this.tokenizer.rules=r}static get rules(){return{block:Ve,inline:Be}}static lex(e,r){return new da(r).lex(e)}static lexInline(e,r){return new da(r).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let r;for(;r=this.inlineQueue.shift();)this.inlineTokens(r.src,r.tokens);return this.tokens}blockTokens(e,r=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,u,f)=>u+"    ".repeat(f.length));let n,i,a,s;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(n=l.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0,u=e.slice(1),f;this.options.extensions.startBlock.forEach(function(d){f=d.call({lexer:this},u),typeof f=="number"&&f>=0&&(l=Math.min(l,f))}),l<1/0&&l>=0&&(a=e.substring(0,l+1))}if(this.state.top&&(n=this.tokenizer.paragraph(a))){i=r[r.length-1],s&&i.type==="paragraph"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n),s=a.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&i.type==="text"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let n,i,a,s=e,l,u,f;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)d.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,l.index)+"["+ok("a",l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,l.index)+"["+ok("a",l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(s))!=null;)s=s.slice(0,l.index+l[0].length-2)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(u||(f=""),u=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(n=d.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),i=r[r.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(n=this.tokenizer.emStrong(e,s,f)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.autolink(e,uk)){e=e.substring(n.raw.length),r.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e,uk))){e=e.substring(n.raw.length),r.push(n);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0,h=e.slice(1),g;this.options.extensions.startInline.forEach(function(m){g=m.call({lexer:this},h),typeof g=="number"&&g>=0&&(d=Math.min(d,g))}),d<1/0&&d>=0&&(a=e.substring(0,d+1))}if(n=this.tokenizer.inlineText(a,Q9)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(f=n.raw.slice(-1)),u=!0,i=r[r.length-1],i&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return r}},tp=class{constructor(e){this.options=e||Zl}code(e,r,n){let i=(r||"").match(/\S*/)[0];if(this.options.highlight){let a=this.options.highlight(e,i);a!=null&&a!==e&&(n=!0,e=a)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+rn(i)+'">'+(n?e:rn(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:rn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,r,n,i){if(this.options.headerIds){let a=this.options.headerPrefix+i.slug(n);return`<h${r} id="${a}">${e}</h${r}>
`}return`<h${r}>${e}</h${r}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,r,n){let i=r?"ol":"ul",a=r&&n!==1?' start="'+n+'"':"";return"<"+i+a+`>
`+e+"</"+i+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,r){let n=r.header?"th":"td";return(r.align?`<${n} align="${r.align}">`:`<${n}>`)+e+`</${n}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,r,n){if(e=ik(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let i='<a href="'+e+'"';return r&&(i+=' title="'+r+'"'),i+=">"+n+"</a>",i}image(e,r,n){if(e=ik(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let i=`<img src="${e}" alt="${n}"`;return r&&(i+=` title="${r}"`),i+=this.options.xhtml?"/>":">",i}text(e){return e}},Sy=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,r,n){return""+n}image(e,r,n){return""+n}br(){return""}},Ay=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,r){let n=e,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[e];do i++,n=e+"-"+i;while(this.seen.hasOwnProperty(n))}return r||(this.seen[e]=i,this.seen[n]=0),n}slug(e,r={}){let n=this.serialize(e);return this.getNextSafeSlug(n,r.dryrun)}},Mi=class{constructor(e){this.options=e||Zl,this.options.renderer=this.options.renderer||new tp,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Sy,this.slugger=new Ay}static parse(e,r){return new Mi(r).parse(e)}static parseInline(e,r){return new Mi(r).parseInline(e)}parse(e,r=!0){let n="",i,a,s,l,u,f,d,h,g,m,y,_,w,E,S,T,L,I,B,z=e.length;for(i=0;i<z;i++){if(m=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]&&(B=this.options.extensions.renderers[m.type].call({parser:this},m),B!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(m.type))){n+=B||"";continue}switch(m.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{n+=this.renderer.heading(this.parseInline(m.tokens),m.depth,nk(this.parseInline(m.tokens,this.textRenderer)),this.slugger);continue}case"code":{n+=this.renderer.code(m.text,m.lang,m.escaped);continue}case"table":{for(h="",d="",l=m.header.length,a=0;a<l;a++)d+=this.renderer.tablecell(this.parseInline(m.header[a].tokens),{header:!0,align:m.align[a]});for(h+=this.renderer.tablerow(d),g="",l=m.rows.length,a=0;a<l;a++){for(f=m.rows[a],d="",u=f.length,s=0;s<u;s++)d+=this.renderer.tablecell(this.parseInline(f[s].tokens),{header:!1,align:m.align[s]});g+=this.renderer.tablerow(d)}n+=this.renderer.table(h,g);continue}case"blockquote":{g=this.parse(m.tokens),n+=this.renderer.blockquote(g);continue}case"list":{for(y=m.ordered,_=m.start,w=m.loose,l=m.items.length,g="",a=0;a<l;a++)S=m.items[a],T=S.checked,L=S.task,E="",S.task&&(I=this.renderer.checkbox(T),w?S.tokens.length>0&&S.tokens[0].type==="paragraph"?(S.tokens[0].text=I+" "+S.tokens[0].text,S.tokens[0].tokens&&S.tokens[0].tokens.length>0&&S.tokens[0].tokens[0].type==="text"&&(S.tokens[0].tokens[0].text=I+" "+S.tokens[0].tokens[0].text)):S.tokens.unshift({type:"text",text:I}):E+=I),E+=this.parse(S.tokens,w),g+=this.renderer.listitem(E,L,T);n+=this.renderer.list(g,y,_);continue}case"html":{n+=this.renderer.html(m.text);continue}case"paragraph":{n+=this.renderer.paragraph(this.parseInline(m.tokens));continue}case"text":{for(g=m.tokens?this.parseInline(m.tokens):m.text;i+1<z&&e[i+1].type==="text";)m=e[++i],g+=`
`+(m.tokens?this.parseInline(m.tokens):m.text);n+=r?this.renderer.paragraph(g):g;continue}default:{let F='Token with "'+m.type+'" type was not found.';if(this.options.silent){console.error(F);return}else throw new Error(F)}}}return n}parseInline(e,r){r=r||this.renderer;let n="",i,a,s,l=e.length;for(i=0;i<l;i++){if(a=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]&&(s=this.options.extensions.renderers[a.type].call({parser:this},a),s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type))){n+=s||"";continue}switch(a.type){case"escape":{n+=r.text(a.text);break}case"html":{n+=r.html(a.text);break}case"link":{n+=r.link(a.href,a.title,this.parseInline(a.tokens,r));break}case"image":{n+=r.image(a.href,a.title,a.text);break}case"strong":{n+=r.strong(this.parseInline(a.tokens,r));break}case"em":{n+=r.em(this.parseInline(a.tokens,r));break}case"codespan":{n+=r.codespan(a.text);break}case"br":{n+=r.br();break}case"del":{n+=r.del(this.parseInline(a.tokens,r));break}case"text":{n+=r.text(a.text);break}default:{let u='Token with "'+a.type+'" type was not found.';if(this.options.silent){console.error(u);return}else throw new Error(u)}}}return n}};function Ke(t,e,r){if(typeof t=="undefined"||t===null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof e=="function"&&(r=e,e=null),e=Pi({},Ke.defaults,e||{}),sk(e),r){let i=e.highlight,a;try{a=da.lex(t,e)}catch(u){return r(u)}let s=function(u){let f;if(!u)try{e.walkTokens&&Ke.walkTokens(a,e.walkTokens),f=Mi.parse(a,e)}catch(d){u=d}return e.highlight=i,u?r(u):r(null,f)};if(!i||i.length<3||(delete e.highlight,!a.length))return s();let l=0;Ke.walkTokens(a,function(u){u.type==="code"&&(l++,setTimeout(()=>{i(u.text,u.lang,function(f,d){if(f)return s(f);d!=null&&d!==u.text&&(u.text=d,u.escaped=!0),l--,l===0&&s()})},0))}),l===0&&s();return}function n(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+rn(i.message+"",!0)+"</pre>";throw i}try{let i=da.lex(t,e);if(e.walkTokens){if(e.async)return Promise.all(Ke.walkTokens(i,e.walkTokens)).then(()=>Mi.parse(i,e)).catch(n);Ke.walkTokens(i,e.walkTokens)}return Mi.parse(i,e)}catch(i){n(i)}}Ke.options=Ke.setOptions=function(t){return Pi(Ke.defaults,t),L9(Ke.defaults),Ke};Ke.getDefaults=$2;Ke.defaults=Zl;Ke.use=function(...t){let e=Ke.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(r=>{let n=Pi({},r);if(n.async=Ke.defaults.async||n.async,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){let a=e.renderers[i.name];a?e.renderers[i.name]=function(...s){let l=i.renderer.apply(this,s);return l===!1&&(l=a.apply(this,s)),l}:e.renderers[i.name]=i.renderer}if(i.tokenizer){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[i.level]?e[i.level].unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),n.extensions=e),r.renderer){let i=Ke.defaults.renderer||new tp;for(let a in r.renderer){let s=i[a];i[a]=(...l)=>{let u=r.renderer[a].apply(i,l);return u===!1&&(u=s.apply(i,l)),u}}n.renderer=i}if(r.tokenizer){let i=Ke.defaults.tokenizer||new ep;for(let a in r.tokenizer){let s=i[a];i[a]=(...l)=>{let u=r.tokenizer[a].apply(i,l);return u===!1&&(u=s.apply(i,l)),u}}n.tokenizer=i}if(r.walkTokens){let i=Ke.defaults.walkTokens;n.walkTokens=function(a){let s=[];return s.push(r.walkTokens.call(this,a)),i&&(s=s.concat(i.call(this,a))),s}}Ke.setOptions(n)})};Ke.walkTokens=function(t,e){let r=[];for(let n of t)switch(r=r.concat(e.call(Ke,n)),n.type){case"table":{for(let i of n.header)r=r.concat(Ke.walkTokens(i.tokens,e));for(let i of n.rows)for(let a of i)r=r.concat(Ke.walkTokens(a.tokens,e));break}case"list":{r=r.concat(Ke.walkTokens(n.items,e));break}default:Ke.defaults.extensions&&Ke.defaults.extensions.childTokens&&Ke.defaults.extensions.childTokens[n.type]?Ke.defaults.extensions.childTokens[n.type].forEach(function(i){r=r.concat(Ke.walkTokens(n[i],e))}):n.tokens&&(r=r.concat(Ke.walkTokens(n.tokens,e)))}return r};Ke.parseInline=function(t,e){if(typeof t=="undefined"||t===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");e=Pi({},Ke.defaults,e||{}),sk(e);try{let r=da.lexInline(t,e);return e.walkTokens&&Ke.walkTokens(r,e.walkTokens),Mi.parseInline(r,e)}catch(r){if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+rn(r.message+"",!0)+"</pre>";throw r}};Ke.Parser=Mi;Ke.parser=Mi.parse;Ke.Renderer=tp;Ke.TextRenderer=Sy;Ke.Lexer=da;Ke.lexer=da.lex;Ke.Tokenizer=ep;Ke.Slugger=Ay;Ke.parse=Ke;var bee=Ke.options,xee=Ke.setOptions,Tee=Ke.use,See=Ke.walkTokens,Aee=Ke.parseInline;var kee=Mi.parse,Iee=da.lex;var ck=(t,e,r)=>{if(t<0&&(t=e.length+t),!(t>=e.length&&t>=0))return t+1<e.length?r.substring(e[t].position.start.offset,e[t+1].position.start.offset-1):r.substring(e[t].position.start.offset,r.length)},fk=t=>P(void 0,null,function*(){var h,g,m,y,_,w;let e=$e.getInstance(),r=yield app.vault.adapter.read((0,ky.normalizePath)(t.file.path)),n=(g=Mc.default.cloneDeep((h=app==null?void 0:app.metadataCache)==null?void 0:h.getFileCache(t.file).frontmatter))!=null?g:{},i=/\[([^[]*)::([^[]*)\]/gm,a,s=[];do a=i.exec(r),s.push(a);while(a);if(s.forEach(E=>{E&&Mc.default.set(n,E[1].trim(),E[2].trim())}),!n){ot("No frontmatter found in note",!0);return}let l=X9(n);for(let[E,S]of Object.entries(l)){let T=Mc.default.get(n,E,null);T&&Mc.default.set(n,S,T)}let u=yield Or(),f=n.position;delete n.position;let d=u.find(E=>{var S,T;return E.id==((S=n.calendar)!=null?S:e.settings.defaultCalendar)||E.summary==((T=n.calendar)!=null?T:e.settings.defaultCalendar)});if(!d){ot("Event not created. Calendar not defined. Set a default calendar in the settings or set the field calendar");return}if(n.parent=d,n.summary||(n.summary=t.file.basename),n.description){if(typeof n.description=="string"){if(((m=n.description)==null?void 0:m.toLowerCase())=="header"&&(n.description="",((y=app==null?void 0:app.metadataCache)==null?void 0:y.getFileCache(t.file).headings).forEach(S=>{n.description+=`<h${S.level}>${S.heading}</h${S.level}>`})),((_=n.description)==null?void 0:_.toLowerCase())=="file"){let E=Ke.parse(r.substring(f.end.offset));n.description=E}}else if(typeof n.description=="object"){let E=(w=app==null?void 0:app.metadataCache)==null?void 0:w.getFileCache(t.file).headings,S=n.description.map(L=>{if(typeof L=="number"){let I=ck(L,E,r);return I||-1}else if(typeof L=="object"){if(L.length!=2)return-1;let[I,B]=L;if(I<0&&(I=E.length+I),B<0&&(B=E.length+B),I>=E.length||B>=E.length||I<0||B<0||I>B)return-1;let z="";for(let F=I;F<=B;F++){let G=ck(F,E,r);if(!G)return-1;z+=G+`
`}return z}});if(S.contains(-1)){ot("Event not created.A Header in the header list is out of range",!0);return}let T=Ke.parse(S.join(`
`));n.description=T}}if(!n.start&&!n.startTime&&(n.start={date:window.moment()}),!n.end&&!n.endTime&&(n.end=n.start),n.start.date?(n.start.date=window.moment(n.start.date).format("YYYY-MM-DD"),n.end.date=window.moment(n.end.date).clone().add(1,"day").format("YYYY-MM-DD")):(n.start.dateTime=window.moment(n.start.dateTime).format(),n.end.dateTime=window.moment(n.end.dateTime).format()),n.recurrence)try{let E=aA.fromText(n.recurrence),S=new Eo;S.rrule(E),n.recurrence=S.valueOf()}catch(E){ot("Event not created. Error in recurrence text.",!0);return}return n}),X9=t=>{var r;let e=new Map;if(typeof t.mapping=="string"){t.mapping.endsWith(".md")||(t.mapping+=".md");let n=(0,ky.normalizePath)(t.mapping),i=app.vault.getAbstractFileByPath(n);if(!i)return ot(`Mapping Error, file "${n}" not found.`),e;if(t=(r=app==null?void 0:app.metadataCache)==null?void 0:r.getFileCache(i).frontmatter,!t)return ot(`Mapping Error, file "${n}" does not contain frontmatter.`),e}return t.mapping?t.mapping:e};var{remote:dk}=require("electron"),hk=t=>P(void 0,null,function*(){var s,l;let{file:e}=jl(t),r=e?"Open Note":"Create Note",n=(s=t.summary)!=null?s:"Event started",i=(l=t.description)!=null?l:"",a;process.platform==="win32"?a=new dk.Notification({toastXml:`
            <toast 
                content="Open Note"
                arguments="obsidian://googleOpenNote?event=${t.id}::${t.parent.id}"
                activationType="protocol"
            >
                <visual>
                    <binding template="ToastGeneric">
                        <text>Google event now</text>
                        <text>Title: ${n}</text>
                        <text>Description: ${i}</text>
                    </binding>
                </visual>

                <actions>
                    <action
                        content="${r}"
                        arguments="obsidian://googleOpenNote?event=${t.id}::${t.parent.id}"
                        activationType="protocol"/>

                    <action activationType="background" content="Dismiss" arguments="dismiss"/>
                </actions>
            </toast>`}):process.platform==="darwin"&&(a=new dk.Notification({title:n,body:i,actions:[{type:"button",text:r},{type:"button",text:"Dismiss"}]}),a.on("action",(u,f)=>{f===0&&window.open(`obsidian://googleOpenNote?event=${t.id}::${t.parent.id}`)})),a.show()});var pk=yt(require("obsidian"));var J9=(...e)=>P(void 0,[...e],function*(t={}){return(yield er(t)).map(i=>{var u;if(!((u=i.description)==null?void 0:u.includes("~obsidianTask~")))return null;let a=i.description.replace(/<br>/g,`
`).replace(/<\/?[^>]+(>|$)/g,""),s=(0,pk.parseYaml)(a);return console.log(s),{event:i,current:s.current||0,steps:s.steps||0,goal:s.goal||0,done:s.done||!1}}).filter(i=>i!==null)}),gk=()=>P(void 0,null,function*(){return yield J9()});var Z9={googleClientId:"",googleClientSecret:"",googleRefreshToken:"",useCustomClient:!0,googleOAuthServer:"https://obsidian-google-calendar.vercel.app",refreshInterval:10,useNotification:!1,showNotice:!0,autoCreateEventNotes:!0,autoCreateEventKeepOpen:!1,importStartOffset:1,importEndOffset:1,defaultCalendar:"",calendarBlackList:[],insertTemplates:[],webViewDefaultColorMode:Rh(),useDefaultTemplate:!1,defaultTemplate:"",defaultFolder:app.vault.config.newFileFolderPath,activateDailyNoteAddon:!1,dailyNoteDotColor:"#6aa1d8",useWeeklyNotes:!1,debugMode:!1,timelineHourFormat:0,atAnnotationEnabled:!0,usDateFormat:!0},$e=class extends $l.Plugin{constructor(){super(...arguments);this.events=[];this.initView=e=>P(this,null,function*(){this.app.workspace.getLeavesOfType(e).length===0&&(yield this.app.workspace.getRightLeaf(!1).setViewState({type:e})),this.app.workspace.revealLeaf(this.app.workspace.getLeavesOfType(e).first())});this.onLayoutReady=()=>{var n;hc(this),fo(this);let e=(n=this.app.internalPlugins)==null?void 0:n.plugins.templates;e&&e.enabled&&(this.coreTemplatePlugin=e);let r=this.app.plugins.plugins["templater-obsidian"];r&&r._loaded&&(this.templaterPlugin=r),ay(this)}}static getInstance(){return $e.instance}onload(){return P(this,null,function*(){if($e.instance=this,this.api=new Ty().make(),yield this.loadSettings(),this.app.workspace.onLayoutReady(this.onLayoutReady),this.events.push(this.app.vault.on("create",()=>{hc(this),fo(this)})),this.events.push(this.app.vault.on("delete",()=>{hc(this),fo(this)})),this.events.push(this.app.vault.on("rename",()=>{hc(this),fo(this)})),this.events.forEach(e=>{this.registerEvent(e)}),this.settings.useNotification){let e=window.setInterval(()=>P(this,null,function*(){let r=yield er(),n=window.moment();r.filter(a=>a.start.date?!1:window.moment(a.start.dateTime).isSame(n,"minute")).forEach(a=>{hk(a)})}),1e3*60);this.registerInterval(e)}this.registerMarkdownCodeBlockProcessor("gEvent",(e,r,n)=>A2(e,r,n)),this.registerEditorSuggest(new Cy(this.app)),this.registerView(Rc,e=>new yy(e)),this.registerView(Dc,e=>new vy(e)),this.registerView(Bc,e=>new _y(e)),this.registerView(Oc,e=>new wy(e)),this.registerEvent(this.app.workspace.on("editor-change",e=>{B2(e,this),L2(e)})),this.addCommand({id:"open-google-calendar-timline-view",name:"Open Google Calendar timeline view",callback:()=>this.initView(Rc)}),this.addCommand({id:"open-google-calendar-month-view",name:"Open Google Calendar month view",callback:()=>this.initView(Dc)}),this.addCommand({id:"open-google-calendar-web-view",name:"Open Google Calendar web view",callback:()=>this.initView(Bc)}),this.addCommand({id:"open-google-calendar-schedule-view",name:"Open Google Calendar schedule view",callback:()=>this.initView(Oc)}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:e=>{let r=Yt();if(e)return r;!r||Or().then(n=>{new Bh(n).open()})}}),this.addCommand({id:"create-google-calendar-event",name:"Create Google Calendar Event",checkCallback:e=>{let r=Yt();if(e)return r;!r||new gi({start:{},end:{}},()=>{Di()}).open()}}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:e=>{let r=Yt();if(e)return r;!r||Or().then(n=>{new Bh(n).open()})}}),this.addCommand({id:"list-google-events",name:"List Google Events",checkCallback:e=>{let r=Yt();if(e)return r;!r||er().then(n=>{new Li(n,"details").open()})}}),this.addCommand({id:"google-calendar-trigger-auto-import",name:"Google Calendar Trigger Auto Import",checkCallback:e=>{let r=Yt();if(e)return r;!r||ay(this)}}),this.addCommand({id:"google-calendar-create-event-note",name:"Create Event Note",checkCallback:e=>{let r=Yt();if(e)return r;!r||er().then(n=>{new Li(n,"createNote").open()})}}),this.addCommand({id:"google-calendar-get-todays-tasks",name:"Get todays google calendar tasks",checkCallback:e=>{let r=Yt();if(e)return r;!r||gk().then(n=>{console.log(n)})}}),this.addCommand({id:"google-calendar-create-event-note-current-event",name:"Create Event Note for current event",checkCallback:e=>{let r=Yt();if(e)return r;!r||er().then(n=>{let i=n.filter(a=>{if(a.start.date)return!1;let s=window.moment(a.start.dateTime),l=window.moment(a.end.dateTime),u=window.moment();return!(u.isBefore(s)||u.isAfter(l))});i.length==0&&(i=n.filter(a=>{if(a.start.date)return!1;let s=window.moment(a.start.dateTime).subtract(1,"hour"),l=window.moment(a.end.dateTime),u=window.moment();return!(u.isBefore(s)||u.isAfter(l))})),i.length==0&&(i=n.filter(a=>!!a.start.date)),i.length==1?this.settings.useDefaultTemplate&&this.settings.defaultFolder&&this.settings.defaultFolder?oa(i[0],this.settings.defaultFolder,this.settings.defaultTemplate):new la(i[0],()=>{}).open():new Li(i,"createNote").open()})}}),this.addCommand({id:"insert-google-event-codeblock",name:"Insert Google Event CodeBlock",editorCallback:e=>{e.replaceRange("```gEvent\ndate: "+window.moment().format("YYYY-MM-DD")+"\ntype: day\n```",e.getCursor())}}),this.addCommand({id:"insert-google-event-template",name:"Insert Google Event Template",editorCallback:e=>{e.replaceRange("{{gEvent.}}",e.getCursor());let r=e.getCursor();r.ch+="{{gEvent.".length,e.setCursor(r)}}),this.addCommand({id:"insert-google-events",name:"Insert Google events",editorCheckCallback:(e,r)=>{let n=Yt();if(e)return n;!n||new xy(r).open()}}),this.addCommand({id:"create-google-calendar-event-from-frontmatter ",name:"Create Google Calendar Event from frontmatter",editorCheckCallback:(e,r,n)=>{let i=Yt();if(e)return i;!i||!n.file||fk(n).then(a=>{!a||Fl(a)})}}),this.addCommand({id:"copy-google-calendar-refresh-token",name:"Copy Google Calendar Refresh Token to Clipboard",callback:()=>{let e=ba();if(e==null||e==""){new $l.Notice("No Refresh Token. Please Login.");return}navigator.clipboard.writeText(e),new $l.Notice("Token copied")}}),this.settingsTab=new Vm(this.app,this),this.addSettingTab(this.settingsTab),this.registerObsidianProtocolHandler("googleLogin",e=>P(this,null,function*(){this.settings.useCustomClient||(Nf(e.uid),$a(e.at),es(+new Date+36e5),new $l.Notice("Login successful!"),this.settingsTab.display())})),this.registerObsidianProtocolHandler("googleOpenNote",e=>P(this,null,function*(){if(!e.event)return;let[r,n]=e.event.split("::"),i=yield aa(r,n),{file:a}=jl(i);a?app.workspace.getLeaf(!0).openFile(a):this.settings.useDefaultTemplate&&this.settings.defaultFolder&&this.settings.defaultFolder?oa(i,this.settings.defaultFolder,this.settings.defaultTemplate):new la(i,s=>a=s).open()}))})}onunload(){this.app.workspace.detachLeavesOfType(Rc),this.app.workspace.detachLeavesOfType(Dc),this.app.workspace.detachLeavesOfType(Bc),this.app.workspace.detachLeavesOfType(Oc);for(let e in this.events)this.app.vault.offref(e);this.events=[]}loadSettings(){return P(this,null,function*(){this.settings=Object.assign({},Z9,yield this.loadData())})}saveSettings(){return P(this,null,function*(){yield this.saveData(this.settings)})}};
/*!
 * rrule.js - Library for working with recurrence rules for calendar dates.
 * https://github.com/jakubroztocil/rrule
 *
 * Copyright 2010, Jakub Roztocil and Lars Schoning
 * Licenced under the BSD licence.
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 * Based on:
 * python-dateutil - Extensions to the standard Python datetime module.
 * Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
 * Copyright (c) 2012 - Tomi Pievilinen <tomi.pievilainen@iki.fi>
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 */
/*!
* rrule.js - Library for working with recurrence rules for calendar dates.
* https://github.com/jakubroztocil/rrule
*
* Copyright 2010, Jakub Roztocil and Lars Schoning
* Licenced under the BSD licence.
* https://github.com/jakubroztocil/rrule/blob/master/LICENCE
*
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
